syntax = "proto3";

/*

Below describes the user journey tracking common attributes schema.

When sinking events into tracking devices, enums need to be converted
to string following the 'kebab' case.

Event attributes are defined by implementing teams, there isn't a hard
schema but a level of consistency across the same object/intent is
expected.

Example MP event below:

 {
  event: 'submitted::meter-reading-submit', // autogenerated from stage/intent
  properties: {
    distinct_id: '7697901', // MP unique identifier, account-number used in this case
    client_id: 'public-client',
    object: 'meter-reading',
    intent: 'meter-reading-submit',
    stage: 'submitted',
    // attributes below
    'meter-id': 'E2832886',
    'meter-type': 'E7',
    'reading-night': '123',
    'reading-day': '123123',
    'fuel-type': 'electricity',
    'previous-reading-day': '60834',
    'previous-date-day': 2020-02-13T00:00:00.000Z,
    'previous-reading-night': '14185',
    'previous-date-night': 2020-02-13T00:00:00.000Z,
  }
}

*/

message Account {
  string id = 1;
  string number = 2;
}

message Application {
  string id = 1;
}

message Person {

}

enum Object {
  OBJECT_NONE = 0;
  OBJECT_METER_READING = 1;
}

enum Intent {
  INTENT_NONE = 0;
  INTENT_METER_READING_SUBMIT = 1;
}

enum Stage {
  STAGE_NONE = 0;
  STAGE_SUBMITTED = 1;
  STAGE_RECEIVED_REQUEST_FOR_AMEND = 2;
  STAGE_COMPLETED = 3;
  STAGE_REJECTED = 4;
  STAGE_ENTERED = 5;
  STAGE_STARTED = 6;
  STAGE_FAILED = 7;
}

message StageEvent {
  Account account = 1;
  Application application = 2;
  Object object = 3;
  Intent intent = 4;
  Stage stage = 5;
  map<string, string> attributes = 6;
}

enum Interaction {
  INTERACTION_NONE = 0;
  INTERACTION_CLICKED = 1;
  INTERACTION_VIEWED = 2;
}

enum InteractionChannel {
  INTERACTION_CHANNEL_NONE = 0;
  INTERACTION_CHANNEL_EMAIL = 1;
  INTERACTION_CHANNEL_WILLIAM = 2;
}

message InteractionEvent {
  Account account = 1;
  Application application = 2;
  Object object = 3;
  Intent intent = 4;
  Interaction interaction = 5;
  InteractionChannel channel = 6;
  map<string, string> attributes = 7;
}