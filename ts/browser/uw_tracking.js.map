{"version":3,"sources":["webpack://uw_tracking/webpack/bootstrap","webpack://uw_tracking/./generated/tracking.ts","webpack://uw_tracking/./src/browser_tracker.ts","webpack://uw_tracking/./src/tracker.ts","webpack://uw_tracking/./node_modules/events/events.js","webpack://uw_tracking/./src/backend/mixpanel-browser.ts","webpack://uw_tracking/./node_modules/mixpanel-browser/dist/mixpanel.cjs.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","baseAccount","id","number","baseApplication","basePerson","baseStageEvent","subject","intent","stage","baseStageEvent_AttributesEntry","baseInteractionEvent","interaction","channel","baseInteractionEvent_AttributesEntry","baseVisitEvent","location","baseVisitEvent_AttributesEntry","baseClickEvent","target","baseClickEvent_AttributesEntry","Subject","SUBJECT_NONE","SUBJECT_METER_READING","UNRECOGNIZED","fromJSON","toJSON","Intent","INTENT_NONE","INTENT_METER_READING_SUBMIT","Stage","STAGE_NONE","STAGE_SUBMITTED","STAGE_RECEIVED_REQUEST_FOR_AMEND","STAGE_COMPLETED","STAGE_REJECTED","STAGE_ENTERED","STAGE_STARTED","STAGE_FAILED","Interaction","INTERACTION_NONE","INTERACTION_CLICKED","INTERACTION_VIEWED","InteractionChannel","INTERACTION_CHANNEL_NONE","INTERACTION_CHANNEL_EMAIL","INTERACTION_CHANNEL_WILLIAM","Account","message","undefined","String","fromPartial","obj","Application","Person","_","StageEvent","attributes","account","application","entries","forEach","StageEvent_AttributesEntry","InteractionEvent","InteractionEvent_AttributesEntry","VisitEvent","VisitEvent_AttributesEntry","ClickEvent","ClickEvent_AttributesEntry","MixpanelBrowserBackend","backend","this","baseTracker","identify","reset","disable","enable","trackStage","trackInteraction","trackClick","trackVisit","Tracker","emitter","EventEmitter","stageValue","toLowerCase","replace","subjectValue","intentValue","interactionValue","interactionChannelValue","stageEventName","event","interactionEventName","mapped","k","onError","fn","on","track","account_number","client_id","emit","interaction_channel","ReflectOwnKeys","R","Reflect","ReflectApply","apply","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","init","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","_getMaxListeners","that","_addListener","type","prepend","events","existing","warning","newListener","unshift","push","length","warned","w","Error","count","console","warn","onceWrapper","fired","removeListener","wrapFn","arguments","_onceWrap","state","wrapped","_listeners","unwrap","evlistener","arr","ret","Array","unwrapListeners","arrayClone","listenerCount","copy","set","arg","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","err","context","handler","len","listeners","addListener","prependListener","once","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","keys","rawListeners","eventNames","token","options","mixpanel","eventName","eventAttributes","Promise","resolve","reject","opt_out_tracking","opt_in_tracking","window$1","Config","DEBUG","LIB_VERSION","loc","hostname","navigator","userAgent","document","referrer","screen","width","height","window","at","ch","text","escapee","next","string","white","T","ArrayProto","FuncProto","ObjProto","slice","toString","windowConsole","navigator$1","document$1","windowOpera","opera","nativeBind","nativeForEach","nativeIndexOf","indexOf","nativeMap","map","nativeIsArray","isArray","breaker","trim","str","console$1","log","isUndefined","each","toArray","critical","log_func_with_prefix","func","prefix","console_with_prefix","bound","isFunction","ctor","self","result","bind_instance_methods","iterator","escapeHTML","escaped","isString","extend","source","prop","f","test","x","isArguments","iterable","values","callback","results","item","identity","include","found","includes","needle","inherit","subclass","superclass","constructor","isObject","isEmptyObject","isDate","isNumber","isElement","nodeType","encodeDates","v","formatDate","timestamp","Date","now","pad","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","safewrap","e","safewrap_class","klass","functions","safewrap_instance_methods","strip_empty_properties","truncate","val","JSONEncode","mixed_val","quote","escapable","meta","lastIndex","a","charCodeAt","holder","gap","mind","partial","isFinite","join","JSONDecode","SyntaxError","charAt","hex","uffff","parseInt","fromCharCode","array","word","base64Encode","data","h1","h2","h3","h4","bits","b64","ac","enc","tmp_arr","utf8Encode","start","end","stringl","utftext","c1","substring","UUID","se","Math","random","ua","buffer","xor","byte_array","j","tmp","UA","isBlockedUA","HTTPBuildQuery","formdata","arg_separator","use_val","use_key","encodeURIComponent","getQueryParam","url","param","RegExp","exec","decodeURIComponent","getHashParam","hash","matches","match","cookie","nameEQ","ca","split","parse","set_seconds","seconds","is_cross_subdomain","is_secure","is_cross_site","domain_override","cdomain","expires","secure","domain","extract_domain","date","setTime","getTime","toGMTString","days","new_cookie_val","remove","_localStorageSupported","localStorageSupported","storage","forceCheck","supported","localStorage","cheap_guid","setItem","getItem","removeItem","is_supported","force_check","msg","register_event","fixEvent","preventDefault","stopPropagation","returnValue","cancelBubble","element","oldSchool","useCapture","addEventListener","ontype","old_handler","new_handler","old_handlers","old_result","new_result","makeHandler","TOKEN_MATCH_REGEX","dom_query","getAllChildren","all","getElementsByTagName","bad_whitespace","hasClass","elem","selector","className","getElementsBySelector","tagName","foundCount","elements","currentContextIndex","tokens","currentContext","getElementById","nodeName","token_match","checkFunction","attrName","attrOperator","attrValue","getAttribute","lastIndexOf","query","info","campaignParams","campaign_keywords","kw","params","kwkey","URL","searchEngine","search","searchInfo","keyword","browser","user_agent","vendor","browserVersion","regex","parseFloat","os","device","referringDomain","properties","href","people_properties","pageviewInfo","page","maxlen","guid","determine_eligibility","feature","percent_allowed","SIMPLE_DOMAIN_MATCH_REGEX","DOMAIN_MATCH_REGEX","domain_regex","parts","tld","JSONStringify","JSONParse","getClassName","el","baseVal","isElementNode","isTag","tag","isTextNode","shouldTrackElement","curEl","parentNode","classes","shouldTrackValue","JSON","stringify","autotrack","_initializedTokens","_previousElementSibling","previousElementSibling","previousSibling","_loadScript","scriptUrlToLoad","scriptTag","createElement","src","onload","scripts","insertBefore","body","appendChild","_getPropertiesFromElement","props","attr","nthChild","nthOfType","currentElem","_getDefaultProperties","eventType","host","pathname","_extractCustomPropertyValue","customProperty","propValues","querySelectorAll","matchedElem","_getCustomProperties","targetElementList","_customProperties","eventSelector","eventElements","eventElement","_getEventTarget","srcElement","_trackEvent","instance","elText","shouldTrackDomEvent","elementText","elementsJson","explicitNoTrack","shouldTrackEl","safeElementText","childNodes","child","textContent","filter","_navigate","_addDomEventHandlers","get_config","_maybeLoadEditor","parseDecideResponse","response","title","_send_request","method","transport","_prepare_callback","setTimeout","_editorParamsFromHash","editorParams","expiresInSeconds","sessionStorage","history","replaceState","parseFromUrl","parseFromStorage","_loadEditor","editorUrl","enabledForProject","numBuckets","numEnabledBuckets","charCodeSum","isBrowserSupported","DomTracker","create_properties","event_handler","after_track_handler","mixpanel_instance","mp","event_name","user_callback","override_event","timeout","track_callback","timeout_occured","callback_fired","LinkTracker","evt","new_tab","which","metaKey","ctrlKey","FormTracker","submit","logger$2","SharedLock","storageKey","pollIntervalMS","timeoutMS","withLock","lockedCB","errorCB","pid","startTime","keyX","keyY","keyZ","reportError","delay","cb","loop","waitFor","predicate","getSetY","valY","criticalSection","logger$1","RequestQueue","lock","memQueue","enqueue","flushInterval","queueEntry","succeeded","storedQueue","readFromStorage","saveToStorage","fillBatch","batchSize","batch","idsInBatch","filterOutIDsAndInvalid","items","idSet","filteredItems","removeItemsByID","ids","storageEntry","queue","clear","logger","RequestBatcher","endpoint","libConfig","sendRequest","sendRequestFunc","stopped","flush","stop","timeoutID","clearTimeout","resetBatchSize","resetFlush","scheduleFlush","flushMS","requestInProgress","currentBatchSize","dataForRequest","batchSendCallback","res","removeItemsFromQueue","xhr_req","retryMS","headers","retryAfter","min","halvedBatchSize","max","floor","requestOptions","verbose","ignore_json_errors","timeout_ms","sendBeacon","optIn","_optInOut","optOut","hasOptedIn","_getStorageValue","hasOptedOut","ignoreDnt","win","nav","hasDntOn","dntValue","_hasDoNotTrackFlagOn","addOptOutCheckMixpanelLib","_addOptOutCheck","addOptOutCheckMixpanelPeople","_get_config","addOptOutCheckMixpanelGroup","clearOptInOut","_getStorage","_getStorageKey","crossSubdomainCookie","cookieDomain","persistenceType","persistencePrefix","optValue","cookieExpiration","secureCookie","crossSiteCookie","trackEventName","trackProperties","getConfigValue","optedOut","apiActions","set_action","to","$set","_is_reserved_property","unset_action","$unset","set_once_action","$set_once","union_action","list_name","$union","append_action","$append","remove_action","$remove","delete_action","MixpanelGroup","_init","group_key","group_id","_mixpanel","_group_key","_group_id","set_once","unset","union","date_encoded_data","_track_or_batch","truncated_data","batcher","request_batchers","groups","conf","RESERVED_PROPERTIES","MixpanelPersistence","config","campaign_params_saved","storage_type","load","update_config","upgrade","save","disabled","entry","old_cookie_name","old_cookie","upgrade_from_old_lib","register_once","_expire_notification_campaigns","expire_days","cross_subdomain","cross_site","cookie_domain","default_value","default_expiry","register","unregister","campaigns_shown","EXPIRY_TIME","campaign_id","update_campaign_params","update_search_keyword","update_referrer_info","get_referrer_info","safe_merge","set_disabled","set_cookie_domain","set_cross_site","set_cross_subdomain","set_secure","get_cross_subdomain","_add_to_people_queue","q_key","_get_queue_key","q_data","set_q","_get_or_create_queue","set_once_q","unset_q","add_q","union_q","remove_q","append_q","_pop_from_people_queue","enqueued_obj","append_obj","q","_get_queue","queued_action","default_val","set_event_timer","timers","remove_event_timer","IN_OPERATOR","NOT_IN_OPERATOR","MINUS_OPERATOR","MUL_OPERATOR","DIV_OPERATOR","MOD_OPERATOR","EQUALS_OPERATOR","NOT_EQUALS_OPERATOR","GREATER_OPERATOR","LESS_OPERATOR","GREATER_EQUAL_OPERATOR","LESS_EQUAL_OPERATOR","DEFINED_OPERATOR","NOT_DEFINED_OPERATOR","toNumber","toBoolean","evaluateEquality","op","_isArrayEqual","_isEqual","evaluateSelector","evaluateOperator","evaluateAnd","evaluateOr","leftValue","rightValue","evaluateIn","evaluatePlus","evaluateArithmetic","compare","localeCompare","evaluateComparison","evaluateBoolean","evaluateDateTime","evaluateList","evaluateNumber","evaluateString","b","evaluateDefined","evaluateNot","evaluateOperand","out","evaluateWindow","filters","MixpanelNotification","notif_data","persistence","resource_protocol","cdn_host","message_id","cta","notif_type","style","video_width","VIDEO_WIDTH","video_height","VIDEO_HEIGHT","display_triggers","dest_url","image_url","thumb_image_url","video_url","clickthrough","mini","notif_width","NOTIF_WIDTH_MINI","NOTIF_WIDTH","_set_client_config","imgs_to_preload","_init_image_html","_init_video","ANIM_TIME","MARKUP_PREFIX","BG_OPACITY","NOTIF_TOP","NOTIF_START_TOP","NOTIF_HEIGHT_MINI","THUMB_BORDER_SIZE","THUMB_IMG_SIZE","THUMB_OFFSET","round","show","body_el","_init_styles","_init_notification_el","_preload_images","_attach_and_animate","dismiss","marked_as_shown","_mark_delivery","notif_attr","notif_start","notif_goal","exiting_el","showing_video","_get_el","_get_notification_display_el","use_transitions","_remove_class","_add_class","_remove_notification_el","_animate_els","goal","class_name","anims","mss","done_cb","start_time","ai","anim","time_diff","in_progress","cur_time","anim_diff","anim_dir","suffix","shown","_get_shown_campaigns","notification_el","notif_el","_mark_as_shown","click_el","show_video","_track_event","_switch_to_video","tracking_cb","open","_matches_event_data","event_data","display_trigger","_browser_lte","version","browser_versions","img_html","thumb_img_html","notification_html","video_src","video_html","cancel_html","close_html","play_html","youtube_video","yt_custom","vimeo_video","video_iframe","flip_animate","main_html","innerHTML","style_vals","bg","bg_actions","bg_hover","bg_light","border_gray","cancel_opacity","mini_hover","text_title","text_main","text_tagline","text_hover","shadow","video_shadow","mini_shadow","thumb_total_size","anim_seconds","notif_media_queries","notif_styles","doc_width","doc_height","VENDOR_STYLES","VENDOR_PREFIXES","si","pi","media_queries","create_style_text","style_text","head_el","style_el","style_defs","st","mq_defs","mqt","mq","create_media_query_text","head","documentElement","setAttribute","styleSheet","cssText","youtube_match","vimeo_match","_yt_video_ready","firstScriptTag","get_style","style_name","styles","defaultView","getComputedStyle","currentStyle","extra_props","all_loaded_cb","preloaded_imgs","img_objs","img","Image","complete","imgs_loaded","clearInterval","_video_progress_checker","visibility","removeChild","get_browser_version","browser_ex","scrollWidth","offsetWidth","clientWidth","scrollHeight","offsetHeight","clientHeight","ie_ver","sample_styles","is_css_compatible","rule","toUpperCase","overlay","video_ready","video_inited","progress_bar","progress_time","progress_el","ytplayer","video_duration","update_video_time","current_time","secs","mins","hours","setInterval","clickx","pageX","getBoundingClientRect","left","init_type","mixpanel_master","MixpanelPeople","increment","by","$add","append","track_charge","amount","clear_charges","delete_user","_identify_called","get_distinct_id","device_id","get_property","user_id","had_persisted_distinct_id","people","_enqueue","status","conf_var","_flags","identify_called","_flush_one_queue","action","action_method","queue_to_params_fn","_this","queued_data","action_params","_flush","_set_callback","_add_callback","_append_callback","_set_once_callback","_union_callback","_unset_callback","_remove_callback","$append_queue","$remove_queue","$append_item","append_callback","$remove_item","remove_callback","USE_XHR","XMLHttpRequest","ENQUEUE_REQUESTS","DEFAULT_CONFIG","DOM_LOADED","MixpanelLib","create_mplib","_cached_groups","_user_decide_check_complete","_events_tracked_before_user_decide_check_complete","_execute_array","encode_data_for_request","json_data","_loaded","variable_features","set_config","PRIMARY_INSTANCE_NAME","__dom_loaded_queue","__request_queue","__disabled_events","_batch_requests","start_batch_requests","_gdpr_init","uuid","_set_default_superprops","_dom_loaded","_track_dom","has_opted_out_tracking","DomClass","dt","jsc","randomized_cb","callback_string","DEFAULT_OPTIONS","body_data","use_post","use_sendBeacon","verbose_mode","req","headerValue","headerName","setRequestHeader","withCredentials","onreadystatechange","readyState","responseText","statusText","send","script","async","defer","fn_name","alias_calls","other_calls","tracking_calls","execute","calls","caller","batcher_config","stop_batch_requests","disable_all_events","should_send_immediately","send_request_options","request_enqueued_or_initiated","send_request_immediately","_event_is_disabled","start_timestamp","duration_in_ms","toFixed","property_blacklist","blacklisted_prop","_check_and_handle_triggered_notifications","set_group","group_ids","add_group","old_values","remove_group","old_value","idx","splice","track_with_groups","tracking_props","_create_map_key","_remove_group_from_cache","get_group","map_key","group","track_pageview","track_links","track_forms","time_event","_register_single","new_distinct_id","previous_distinct_id","_check_and_handle_notifications","alias","original","name_tag","prop_name","property_name","_show_notification","distinct_id","notifications","notif","_handle_user_decide_check_complete","has_opted_in_tracking","clear_opt_in_out_tracking","_gdpr_update_persistence","_gdpr_call_func","instances","override_mp_init_func","dom_loaded_handler","done","inst","attachEvent","toplevel","frameElement","doScroll","do_scroll_check","add_dom_loaded_handler"],"mappings":"4BACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QA0Df,OArDAF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,G,ijBCdrD,IAAMC,EAAsB,CAC1BC,GAAI,GACJC,OAAQ,IAGJC,EAA0B,CAC9BF,GAAI,IAGAG,EAAqB,GAGrBC,EAAyB,CAC7BC,QAAS,EACTC,OAAQ,EACRC,MAAO,GAGHC,EAAyC,CAC7ClB,IAAK,GACLN,MAAO,IAGHyB,EAA+B,CACnCJ,QAAS,EACTC,OAAQ,EACRI,YAAa,EACbC,QAAS,GAGLC,EAA+C,CACnDtB,IAAK,GACLN,MAAO,IAGH6B,EAAyB,CAC7BC,SAAU,IAGNC,EAAyC,CAC7CzB,IAAK,GACLN,MAAO,IAGHgC,EAAyB,CAC7BC,OAAQ,IAGJC,EAAyC,CAC7C5B,IAAK,GACLN,MAAO,IAGI,EAAAmC,QAAU,CACrBC,aAAc,EACdC,sBAAuB,EACvBC,cAAe,EACfC,SAAA,SAAS9B,GACP,OAAQA,GACN,KAAK,EACL,IAAK,eACH,OAAO,EAAA0B,QAAQC,aACjB,KAAK,EACL,IAAK,wBACH,OAAO,EAAAD,QAAQE,sBACjB,KAAM,EACN,IAAK,eACL,QACE,OAAO,EAAAF,QAAQG,eAGrBE,OAAA,SAAO/B,GACL,OAAQA,GACN,KAAK,EAAA0B,QAAQC,aACX,MAAO,eACT,KAAK,EAAAD,QAAQE,sBACX,MAAO,wBACT,QACE,MAAO,aAOF,EAAAI,OAAS,CACpBC,YAAa,EACbC,4BAA6B,EAC7BL,cAAe,EACfC,SAAA,SAAS9B,GACP,OAAQA,GACN,KAAK,EACL,IAAK,cACH,OAAO,EAAAgC,OAAOC,YAChB,KAAK,EACL,IAAK,8BACH,OAAO,EAAAD,OAAOE,4BAChB,KAAM,EACN,IAAK,eACL,QACE,OAAO,EAAAF,OAAOH,eAGpBE,OAAA,SAAO/B,GACL,OAAQA,GACN,KAAK,EAAAgC,OAAOC,YACV,MAAO,cACT,KAAK,EAAAD,OAAOE,4BACV,MAAO,8BACT,QACE,MAAO,aAOF,EAAAC,MAAQ,CACnBC,WAAY,EACZC,gBAAiB,EACjBC,iCAAkC,EAClCC,gBAAiB,EACjBC,eAAgB,EAChBC,cAAe,EACfC,cAAe,EACfC,aAAc,EACdd,cAAe,EACfC,SAAA,SAAS9B,GACP,OAAQA,GACN,KAAK,EACL,IAAK,aACH,OAAO,EAAAmC,MAAMC,WACf,KAAK,EACL,IAAK,kBACH,OAAO,EAAAD,MAAME,gBACf,KAAK,EACL,IAAK,mCACH,OAAO,EAAAF,MAAMG,iCACf,KAAK,EACL,IAAK,kBACH,OAAO,EAAAH,MAAMI,gBACf,KAAK,EACL,IAAK,iBACH,OAAO,EAAAJ,MAAMK,eACf,KAAK,EACL,IAAK,gBACH,OAAO,EAAAL,MAAMM,cACf,KAAK,EACL,IAAK,gBACH,OAAO,EAAAN,MAAMO,cACf,KAAK,EACL,IAAK,eACH,OAAO,EAAAP,MAAMQ,aACf,KAAM,EACN,IAAK,eACL,QACE,OAAO,EAAAR,MAAMN,eAGnBE,OAAA,SAAO/B,GACL,OAAQA,GACN,KAAK,EAAAmC,MAAMC,WACT,MAAO,aACT,KAAK,EAAAD,MAAME,gBACT,MAAO,kBACT,KAAK,EAAAF,MAAMG,iCACT,MAAO,mCACT,KAAK,EAAAH,MAAMI,gBACT,MAAO,kBACT,KAAK,EAAAJ,MAAMK,eACT,MAAO,iBACT,KAAK,EAAAL,MAAMM,cACT,MAAO,gBACT,KAAK,EAAAN,MAAMO,cACT,MAAO,gBACT,KAAK,EAAAP,MAAMQ,aACT,MAAO,eACT,QACE,MAAO,aAOF,EAAAC,YAAc,CACzBC,iBAAkB,EAClBC,oBAAqB,EACrBC,mBAAoB,EACpBlB,cAAe,EACfC,SAAA,SAAS9B,GACP,OAAQA,GACN,KAAK,EACL,IAAK,mBACH,OAAO,EAAA4C,YAAYC,iBACrB,KAAK,EACL,IAAK,sBACH,OAAO,EAAAD,YAAYE,oBACrB,KAAK,EACL,IAAK,qBACH,OAAO,EAAAF,YAAYG,mBACrB,KAAM,EACN,IAAK,eACL,QACE,OAAO,EAAAH,YAAYf,eAGzBE,OAAA,SAAO/B,GACL,OAAQA,GACN,KAAK,EAAA4C,YAAYC,iBACf,MAAO,mBACT,KAAK,EAAAD,YAAYE,oBACf,MAAO,sBACT,KAAK,EAAAF,YAAYG,mBACf,MAAO,qBACT,QACE,MAAO,aAOF,EAAAC,mBAAqB,CAChCC,yBAA0B,EAC1BC,0BAA2B,EAC3BC,4BAA6B,EAC7BtB,cAAe,EACfC,SAAA,SAAS9B,GACP,OAAQA,GACN,KAAK,EACL,IAAK,2BACH,OAAO,EAAAgD,mBAAmBC,yBAC5B,KAAK,EACL,IAAK,4BACH,OAAO,EAAAD,mBAAmBE,0BAC5B,KAAK,EACL,IAAK,8BACH,OAAO,EAAAF,mBAAmBG,4BAC5B,KAAM,EACN,IAAK,eACL,QACE,OAAO,EAAAH,mBAAmBnB,eAGhCE,OAAA,SAAO/B,GACL,OAAQA,GACN,KAAK,EAAAgD,mBAAmBC,yBACtB,MAAO,2BACT,KAAK,EAAAD,mBAAmBE,0BACtB,MAAO,4BACT,KAAK,EAAAF,mBAAmBG,4BACtB,MAAO,8BACT,QACE,MAAO,aAOF,EAAAC,QAAU,CACrBtB,SAAA,SAAS9B,GACP,IAAMqD,EAAU,KAAK/C,GAWrB,YAVkBgD,IAAdtD,EAAOO,IAAkC,OAAdP,EAAOO,GACpC8C,EAAQ9C,GAAKgD,OAAOvD,EAAOO,IAE3B8C,EAAQ9C,GAAK,QAEO+C,IAAlBtD,EAAOQ,QAA0C,OAAlBR,EAAOQ,OACxC6C,EAAQ7C,OAAS+C,OAAOvD,EAAOQ,QAE/B6C,EAAQ7C,OAAS,GAEZ6C,GAETG,YAAA,SAAYxD,GACV,IAAMqD,EAAU,KAAK/C,GAWrB,YAVkBgD,IAAdtD,EAAOO,IAAkC,OAAdP,EAAOO,GACpC8C,EAAQ9C,GAAKP,EAAOO,GAEpB8C,EAAQ9C,GAAK,QAEO+C,IAAlBtD,EAAOQ,QAA0C,OAAlBR,EAAOQ,OACxC6C,EAAQ7C,OAASR,EAAOQ,OAExB6C,EAAQ7C,OAAS,GAEZ6C,GAETtB,OAAA,SAAOsB,GACL,IAAMI,EAAW,GAGjB,OAFAA,EAAIlD,GAAK8C,EAAQ9C,IAAM,GACvBkD,EAAIjD,OAAS6C,EAAQ7C,QAAU,GACxBiD,IAIE,EAAAC,YAAc,CACzB5B,SAAA,SAAS9B,GACP,IAAMqD,EAAU,KAAK5C,GAMrB,YALkB6C,IAAdtD,EAAOO,IAAkC,OAAdP,EAAOO,GACpC8C,EAAQ9C,GAAKgD,OAAOvD,EAAOO,IAE3B8C,EAAQ9C,GAAK,GAER8C,GAETG,YAAA,SAAYxD,GACV,IAAMqD,EAAU,KAAK5C,GAMrB,YALkB6C,IAAdtD,EAAOO,IAAkC,OAAdP,EAAOO,GACpC8C,EAAQ9C,GAAKP,EAAOO,GAEpB8C,EAAQ9C,GAAK,GAER8C,GAETtB,OAAA,SAAOsB,GACL,IAAMI,EAAW,GAEjB,OADAA,EAAIlD,GAAK8C,EAAQ9C,IAAM,GAChBkD,IAIE,EAAAE,OAAS,CACpB7B,SAAA,SAAS8B,GAEP,OADgB,KAAKlD,IAGvB8C,YAAA,SAAYI,GAEV,OADgB,KAAKlD,IAGvBqB,OAAA,SAAO6B,GAEL,MADiB,KAKR,EAAAC,WAAa,CACxB/B,SAAA,SAAS9B,GACP,IAAMqD,EAAU,KAAK1C,GAgCrB,OA/BA0C,EAAQS,WAAa,QACER,IAAnBtD,EAAO+D,SAA4C,OAAnB/D,EAAO+D,QACzCV,EAAQU,QAAU,EAAAX,QAAQtB,SAAS9B,EAAO+D,SAE1CV,EAAQU,aAAUT,OAEOA,IAAvBtD,EAAOgE,aAAoD,OAAvBhE,EAAOgE,YAC7CX,EAAQW,YAAc,EAAAN,YAAY5B,SAAS9B,EAAOgE,aAElDX,EAAQW,iBAAcV,OAEDA,IAAnBtD,EAAOY,SAA4C,OAAnBZ,EAAOY,QACzCyC,EAAQzC,QAAU,EAAAc,QAAQI,SAAS9B,EAAOY,SAE1CyC,EAAQzC,QAAU,OAEE0C,IAAlBtD,EAAOa,QAA0C,OAAlBb,EAAOa,OACxCwC,EAAQxC,OAAS,EAAAmB,OAAOF,SAAS9B,EAAOa,QAExCwC,EAAQxC,OAAS,OAEEyC,IAAjBtD,EAAOc,OAAwC,OAAjBd,EAAOc,MACvCuC,EAAQvC,MAAQ,EAAAqB,MAAML,SAAS9B,EAAOc,OAEtCuC,EAAQvC,MAAQ,OAEQwC,IAAtBtD,EAAO8D,YAAkD,OAAtB9D,EAAO8D,YAC5C9E,OAAOiF,QAAQjE,EAAO8D,YAAYI,SAAQ,SAAC,G,IAACrE,EAAG,KAAEN,EAAK,KACpD8D,EAAQS,WAAWjE,GAAO0D,OAAOhE,MAG9B8D,GAETG,YAAA,SAAYxD,GACV,IAAMqD,EAAU,KAAK1C,GAkCrB,OAjCA0C,EAAQS,WAAa,QACER,IAAnBtD,EAAO+D,SAA4C,OAAnB/D,EAAO+D,QACzCV,EAAQU,QAAU,EAAAX,QAAQI,YAAYxD,EAAO+D,SAE7CV,EAAQU,aAAUT,OAEOA,IAAvBtD,EAAOgE,aAAoD,OAAvBhE,EAAOgE,YAC7CX,EAAQW,YAAc,EAAAN,YAAYF,YAAYxD,EAAOgE,aAErDX,EAAQW,iBAAcV,OAEDA,IAAnBtD,EAAOY,SAA4C,OAAnBZ,EAAOY,QACzCyC,EAAQzC,QAAUZ,EAAOY,QAEzByC,EAAQzC,QAAU,OAEE0C,IAAlBtD,EAAOa,QAA0C,OAAlBb,EAAOa,OACxCwC,EAAQxC,OAASb,EAAOa,OAExBwC,EAAQxC,OAAS,OAEEyC,IAAjBtD,EAAOc,OAAwC,OAAjBd,EAAOc,MACvCuC,EAAQvC,MAAQd,EAAOc,MAEvBuC,EAAQvC,MAAQ,OAEQwC,IAAtBtD,EAAO8D,YAAkD,OAAtB9D,EAAO8D,YAC5C9E,OAAOiF,QAAQjE,EAAO8D,YAAYI,SAAQ,SAAC,G,IAACrE,EAAG,KAAEN,EAAK,UACtC+D,IAAV/D,IACF8D,EAAQS,WAAWjE,GAAO0D,OAAOhE,OAIhC8D,GAETtB,OAAA,SAAOsB,GACL,IAAMI,EAAW,GAOjB,OANAA,EAAIM,QAAUV,EAAQU,QAAU,EAAAX,QAAQrB,OAAOsB,EAAQU,cAAWT,EAClEG,EAAIO,YAAcX,EAAQW,YAAc,EAAAN,YAAY3B,OAAOsB,EAAQW,kBAAeV,EAClFG,EAAI7C,QAAU,EAAAc,QAAQK,OAAOsB,EAAQzC,SACrC6C,EAAI5C,OAAS,EAAAmB,OAAOD,OAAOsB,EAAQxC,QACnC4C,EAAI3C,MAAQ,EAAAqB,MAAMJ,OAAOsB,EAAQvC,OACjC2C,EAAIK,WAAaT,EAAQS,iBAAcR,EAChCG,IAIE,EAAAU,2BAA6B,CACxCrC,SAAA,SAAS9B,GACP,IAAMqD,EAAU,KAAKtC,GAWrB,YAVmBuC,IAAftD,EAAOH,KAAoC,OAAfG,EAAOH,IACrCwD,EAAQxD,IAAM0D,OAAOvD,EAAOH,KAE5BwD,EAAQxD,IAAM,QAEKyD,IAAjBtD,EAAOT,OAAwC,OAAjBS,EAAOT,MACvC8D,EAAQ9D,MAAQgE,OAAOvD,EAAOT,OAE9B8D,EAAQ9D,MAAQ,GAEX8D,GAETG,YAAA,SAAYxD,GACV,IAAMqD,EAAU,KAAKtC,GAWrB,YAVmBuC,IAAftD,EAAOH,KAAoC,OAAfG,EAAOH,IACrCwD,EAAQxD,IAAMG,EAAOH,IAErBwD,EAAQxD,IAAM,QAEKyD,IAAjBtD,EAAOT,OAAwC,OAAjBS,EAAOT,MACvC8D,EAAQ9D,MAAQS,EAAOT,MAEvB8D,EAAQ9D,MAAQ,GAEX8D,GAETtB,OAAA,SAAOsB,GACL,IAAMI,EAAW,GAGjB,OAFAA,EAAI5D,IAAMwD,EAAQxD,KAAO,GACzB4D,EAAIlE,MAAQ8D,EAAQ9D,OAAS,GACtBkE,IAIE,EAAAW,iBAAmB,CAC9BtC,SAAA,SAAS9B,GACP,IAAMqD,EAAU,KAAKrC,GAqCrB,OApCAqC,EAAQS,WAAa,QACER,IAAnBtD,EAAO+D,SAA4C,OAAnB/D,EAAO+D,QACzCV,EAAQU,QAAU,EAAAX,QAAQtB,SAAS9B,EAAO+D,SAE1CV,EAAQU,aAAUT,OAEOA,IAAvBtD,EAAOgE,aAAoD,OAAvBhE,EAAOgE,YAC7CX,EAAQW,YAAc,EAAAN,YAAY5B,SAAS9B,EAAOgE,aAElDX,EAAQW,iBAAcV,OAEDA,IAAnBtD,EAAOY,SAA4C,OAAnBZ,EAAOY,QACzCyC,EAAQzC,QAAU,EAAAc,QAAQI,SAAS9B,EAAOY,SAE1CyC,EAAQzC,QAAU,OAEE0C,IAAlBtD,EAAOa,QAA0C,OAAlBb,EAAOa,OACxCwC,EAAQxC,OAAS,EAAAmB,OAAOF,SAAS9B,EAAOa,QAExCwC,EAAQxC,OAAS,OAEQyC,IAAvBtD,EAAOiB,aAAoD,OAAvBjB,EAAOiB,YAC7CoC,EAAQpC,YAAc,EAAA2B,YAAYd,SAAS9B,EAAOiB,aAElDoC,EAAQpC,YAAc,OAEDqC,IAAnBtD,EAAOkB,SAA4C,OAAnBlB,EAAOkB,QACzCmC,EAAQnC,QAAU,EAAA8B,mBAAmBlB,SAAS9B,EAAOkB,SAErDmC,EAAQnC,QAAU,OAEMoC,IAAtBtD,EAAO8D,YAAkD,OAAtB9D,EAAO8D,YAC5C9E,OAAOiF,QAAQjE,EAAO8D,YAAYI,SAAQ,SAAC,G,IAACrE,EAAG,KAAEN,EAAK,KACpD8D,EAAQS,WAAWjE,GAAO0D,OAAOhE,MAG9B8D,GAETG,YAAA,SAAYxD,GACV,IAAMqD,EAAU,KAAKrC,GAuCrB,OAtCAqC,EAAQS,WAAa,QACER,IAAnBtD,EAAO+D,SAA4C,OAAnB/D,EAAO+D,QACzCV,EAAQU,QAAU,EAAAX,QAAQI,YAAYxD,EAAO+D,SAE7CV,EAAQU,aAAUT,OAEOA,IAAvBtD,EAAOgE,aAAoD,OAAvBhE,EAAOgE,YAC7CX,EAAQW,YAAc,EAAAN,YAAYF,YAAYxD,EAAOgE,aAErDX,EAAQW,iBAAcV,OAEDA,IAAnBtD,EAAOY,SAA4C,OAAnBZ,EAAOY,QACzCyC,EAAQzC,QAAUZ,EAAOY,QAEzByC,EAAQzC,QAAU,OAEE0C,IAAlBtD,EAAOa,QAA0C,OAAlBb,EAAOa,OACxCwC,EAAQxC,OAASb,EAAOa,OAExBwC,EAAQxC,OAAS,OAEQyC,IAAvBtD,EAAOiB,aAAoD,OAAvBjB,EAAOiB,YAC7CoC,EAAQpC,YAAcjB,EAAOiB,YAE7BoC,EAAQpC,YAAc,OAEDqC,IAAnBtD,EAAOkB,SAA4C,OAAnBlB,EAAOkB,QACzCmC,EAAQnC,QAAUlB,EAAOkB,QAEzBmC,EAAQnC,QAAU,OAEMoC,IAAtBtD,EAAO8D,YAAkD,OAAtB9D,EAAO8D,YAC5C9E,OAAOiF,QAAQjE,EAAO8D,YAAYI,SAAQ,SAAC,G,IAACrE,EAAG,KAAEN,EAAK,UACtC+D,IAAV/D,IACF8D,EAAQS,WAAWjE,GAAO0D,OAAOhE,OAIhC8D,GAETtB,OAAA,SAAOsB,GACL,IAAMI,EAAW,GAQjB,OAPAA,EAAIM,QAAUV,EAAQU,QAAU,EAAAX,QAAQrB,OAAOsB,EAAQU,cAAWT,EAClEG,EAAIO,YAAcX,EAAQW,YAAc,EAAAN,YAAY3B,OAAOsB,EAAQW,kBAAeV,EAClFG,EAAI7C,QAAU,EAAAc,QAAQK,OAAOsB,EAAQzC,SACrC6C,EAAI5C,OAAS,EAAAmB,OAAOD,OAAOsB,EAAQxC,QACnC4C,EAAIxC,YAAc,EAAA2B,YAAYb,OAAOsB,EAAQpC,aAC7CwC,EAAIvC,QAAU,EAAA8B,mBAAmBjB,OAAOsB,EAAQnC,SAChDuC,EAAIK,WAAaT,EAAQS,iBAAcR,EAChCG,IAIE,EAAAY,iCAAmC,CAC9CvC,SAAA,SAAS9B,GACP,IAAMqD,EAAU,KAAKlC,GAWrB,YAVmBmC,IAAftD,EAAOH,KAAoC,OAAfG,EAAOH,IACrCwD,EAAQxD,IAAM0D,OAAOvD,EAAOH,KAE5BwD,EAAQxD,IAAM,QAEKyD,IAAjBtD,EAAOT,OAAwC,OAAjBS,EAAOT,MACvC8D,EAAQ9D,MAAQgE,OAAOvD,EAAOT,OAE9B8D,EAAQ9D,MAAQ,GAEX8D,GAETG,YAAA,SAAYxD,GACV,IAAMqD,EAAU,KAAKlC,GAWrB,YAVmBmC,IAAftD,EAAOH,KAAoC,OAAfG,EAAOH,IACrCwD,EAAQxD,IAAMG,EAAOH,IAErBwD,EAAQxD,IAAM,QAEKyD,IAAjBtD,EAAOT,OAAwC,OAAjBS,EAAOT,MACvC8D,EAAQ9D,MAAQS,EAAOT,MAEvB8D,EAAQ9D,MAAQ,GAEX8D,GAETtB,OAAA,SAAOsB,GACL,IAAMI,EAAW,GAGjB,OAFAA,EAAI5D,IAAMwD,EAAQxD,KAAO,GACzB4D,EAAIlE,MAAQ8D,EAAQ9D,OAAS,GACtBkE,IAIE,EAAAa,WAAa,CACxBxC,SAAA,SAAS9B,GACP,IAAMqD,EAAU,KAAKjC,GAsBrB,OArBAiC,EAAQS,WAAa,QACER,IAAnBtD,EAAO+D,SAA4C,OAAnB/D,EAAO+D,QACzCV,EAAQU,QAAU,EAAAX,QAAQtB,SAAS9B,EAAO+D,SAE1CV,EAAQU,aAAUT,OAEOA,IAAvBtD,EAAOgE,aAAoD,OAAvBhE,EAAOgE,YAC7CX,EAAQW,YAAc,EAAAN,YAAY5B,SAAS9B,EAAOgE,aAElDX,EAAQW,iBAAcV,OAEAA,IAApBtD,EAAOqB,UAA8C,OAApBrB,EAAOqB,SAC1CgC,EAAQhC,SAAWkC,OAAOvD,EAAOqB,UAEjCgC,EAAQhC,SAAW,QAEKiC,IAAtBtD,EAAO8D,YAAkD,OAAtB9D,EAAO8D,YAC5C9E,OAAOiF,QAAQjE,EAAO8D,YAAYI,SAAQ,SAAC,G,IAACrE,EAAG,KAAEN,EAAK,KACpD8D,EAAQS,WAAWjE,GAAO0D,OAAOhE,MAG9B8D,GAETG,YAAA,SAAYxD,GACV,IAAMqD,EAAU,KAAKjC,GAwBrB,OAvBAiC,EAAQS,WAAa,QACER,IAAnBtD,EAAO+D,SAA4C,OAAnB/D,EAAO+D,QACzCV,EAAQU,QAAU,EAAAX,QAAQI,YAAYxD,EAAO+D,SAE7CV,EAAQU,aAAUT,OAEOA,IAAvBtD,EAAOgE,aAAoD,OAAvBhE,EAAOgE,YAC7CX,EAAQW,YAAc,EAAAN,YAAYF,YAAYxD,EAAOgE,aAErDX,EAAQW,iBAAcV,OAEAA,IAApBtD,EAAOqB,UAA8C,OAApBrB,EAAOqB,SAC1CgC,EAAQhC,SAAWrB,EAAOqB,SAE1BgC,EAAQhC,SAAW,QAEKiC,IAAtBtD,EAAO8D,YAAkD,OAAtB9D,EAAO8D,YAC5C9E,OAAOiF,QAAQjE,EAAO8D,YAAYI,SAAQ,SAAC,G,IAACrE,EAAG,KAAEN,EAAK,UACtC+D,IAAV/D,IACF8D,EAAQS,WAAWjE,GAAO0D,OAAOhE,OAIhC8D,GAETtB,OAAA,SAAOsB,GACL,IAAMI,EAAW,GAKjB,OAJAA,EAAIM,QAAUV,EAAQU,QAAU,EAAAX,QAAQrB,OAAOsB,EAAQU,cAAWT,EAClEG,EAAIO,YAAcX,EAAQW,YAAc,EAAAN,YAAY3B,OAAOsB,EAAQW,kBAAeV,EAClFG,EAAIpC,SAAWgC,EAAQhC,UAAY,GACnCoC,EAAIK,WAAaT,EAAQS,iBAAcR,EAChCG,IAIE,EAAAc,2BAA6B,CACxCzC,SAAA,SAAS9B,GACP,IAAMqD,EAAU,KAAK/B,GAWrB,YAVmBgC,IAAftD,EAAOH,KAAoC,OAAfG,EAAOH,IACrCwD,EAAQxD,IAAM0D,OAAOvD,EAAOH,KAE5BwD,EAAQxD,IAAM,QAEKyD,IAAjBtD,EAAOT,OAAwC,OAAjBS,EAAOT,MACvC8D,EAAQ9D,MAAQgE,OAAOvD,EAAOT,OAE9B8D,EAAQ9D,MAAQ,GAEX8D,GAETG,YAAA,SAAYxD,GACV,IAAMqD,EAAU,KAAK/B,GAWrB,YAVmBgC,IAAftD,EAAOH,KAAoC,OAAfG,EAAOH,IACrCwD,EAAQxD,IAAMG,EAAOH,IAErBwD,EAAQxD,IAAM,QAEKyD,IAAjBtD,EAAOT,OAAwC,OAAjBS,EAAOT,MACvC8D,EAAQ9D,MAAQS,EAAOT,MAEvB8D,EAAQ9D,MAAQ,GAEX8D,GAETtB,OAAA,SAAOsB,GACL,IAAMI,EAAW,GAGjB,OAFAA,EAAI5D,IAAMwD,EAAQxD,KAAO,GACzB4D,EAAIlE,MAAQ8D,EAAQ9D,OAAS,GACtBkE,IAIE,EAAAe,WAAa,CACxB1C,SAAA,SAAS9B,GACP,IAAMqD,EAAU,KAAK9B,GAsBrB,OArBA8B,EAAQS,WAAa,QACER,IAAnBtD,EAAO+D,SAA4C,OAAnB/D,EAAO+D,QACzCV,EAAQU,QAAU,EAAAX,QAAQtB,SAAS9B,EAAO+D,SAE1CV,EAAQU,aAAUT,OAEOA,IAAvBtD,EAAOgE,aAAoD,OAAvBhE,EAAOgE,YAC7CX,EAAQW,YAAc,EAAAN,YAAY5B,SAAS9B,EAAOgE,aAElDX,EAAQW,iBAAcV,OAEFA,IAAlBtD,EAAOwB,QAA0C,OAAlBxB,EAAOwB,OACxC6B,EAAQ7B,OAAS+B,OAAOvD,EAAOwB,QAE/B6B,EAAQ7B,OAAS,QAEO8B,IAAtBtD,EAAO8D,YAAkD,OAAtB9D,EAAO8D,YAC5C9E,OAAOiF,QAAQjE,EAAO8D,YAAYI,SAAQ,SAAC,G,IAACrE,EAAG,KAAEN,EAAK,KACpD8D,EAAQS,WAAWjE,GAAO0D,OAAOhE,MAG9B8D,GAETG,YAAA,SAAYxD,GACV,IAAMqD,EAAU,KAAK9B,GAwBrB,OAvBA8B,EAAQS,WAAa,QACER,IAAnBtD,EAAO+D,SAA4C,OAAnB/D,EAAO+D,QACzCV,EAAQU,QAAU,EAAAX,QAAQI,YAAYxD,EAAO+D,SAE7CV,EAAQU,aAAUT,OAEOA,IAAvBtD,EAAOgE,aAAoD,OAAvBhE,EAAOgE,YAC7CX,EAAQW,YAAc,EAAAN,YAAYF,YAAYxD,EAAOgE,aAErDX,EAAQW,iBAAcV,OAEFA,IAAlBtD,EAAOwB,QAA0C,OAAlBxB,EAAOwB,OACxC6B,EAAQ7B,OAASxB,EAAOwB,OAExB6B,EAAQ7B,OAAS,QAEO8B,IAAtBtD,EAAO8D,YAAkD,OAAtB9D,EAAO8D,YAC5C9E,OAAOiF,QAAQjE,EAAO8D,YAAYI,SAAQ,SAAC,G,IAACrE,EAAG,KAAEN,EAAK,UACtC+D,IAAV/D,IACF8D,EAAQS,WAAWjE,GAAO0D,OAAOhE,OAIhC8D,GAETtB,OAAA,SAAOsB,GACL,IAAMI,EAAW,GAKjB,OAJAA,EAAIM,QAAUV,EAAQU,QAAU,EAAAX,QAAQrB,OAAOsB,EAAQU,cAAWT,EAClEG,EAAIO,YAAcX,EAAQW,YAAc,EAAAN,YAAY3B,OAAOsB,EAAQW,kBAAeV,EAClFG,EAAIjC,OAAS6B,EAAQ7B,QAAU,GAC/BiC,EAAIK,WAAaT,EAAQS,iBAAcR,EAChCG,IAIE,EAAAgB,2BAA6B,CACxC3C,SAAA,SAAS9B,GACP,IAAMqD,EAAU,KAAK5B,GAWrB,YAVmB6B,IAAftD,EAAOH,KAAoC,OAAfG,EAAOH,IACrCwD,EAAQxD,IAAM0D,OAAOvD,EAAOH,KAE5BwD,EAAQxD,IAAM,QAEKyD,IAAjBtD,EAAOT,OAAwC,OAAjBS,EAAOT,MACvC8D,EAAQ9D,MAAQgE,OAAOvD,EAAOT,OAE9B8D,EAAQ9D,MAAQ,GAEX8D,GAETG,YAAA,SAAYxD,GACV,IAAMqD,EAAU,KAAK5B,GAWrB,YAVmB6B,IAAftD,EAAOH,KAAoC,OAAfG,EAAOH,IACrCwD,EAAQxD,IAAMG,EAAOH,IAErBwD,EAAQxD,IAAM,QAEKyD,IAAjBtD,EAAOT,OAAwC,OAAjBS,EAAOT,MACvC8D,EAAQ9D,MAAQS,EAAOT,MAEvB8D,EAAQ9D,MAAQ,GAEX8D,GAETtB,OAAA,SAAOsB,GACL,IAAMI,EAAW,GAGjB,OAFAA,EAAI5D,IAAMwD,EAAQxD,KAAO,GACzB4D,EAAIlE,MAAQ8D,EAAQ9D,OAAS,GACtBkE,K,+mDC11BX,WACA,OAiEI,EAAAiB,uBAjEI,EAAAA,uBACR,WAiEI,EAAAb,WAhEA,EAAAA,WAgEY,EAAAO,iBAhEA,EAAAA,iBAgEkB,EAAAE,WAhEA,EAAAA,WAgEY,EAAAE,WAhEA,EAAAA,WAiE1C,EAAAxB,mBAhEA,EAAAA,mBAgEoB,EAAAJ,YAhEA,EAAAA,YAgEa,EAAAlB,QAhEA,EAAAA,QAgES,EAAAM,OAhEA,EAAAA,OAgEQ,EAAAG,MAhEA,EAAAA,MAiElD,EAAAiB,QAhEA,EAAAA,QAgES,EAAAM,YAhEA,EAAAA,YAgEa,EAAAC,OAhEA,EAAAA,OAK1B,iBAGI,WAA6BgB,EAA0CX,GAA1C,KAAAW,UAA0C,KAAAX,cACnEY,KAAKC,YAAc,IAAI,UAAYF,GAiD3C,OA9CU,YAAAG,SAAN,SAAef,G,mEAEX,OADAa,KAAKb,QAAUA,EACR,CAAP,EAAOa,KAAKD,QAAQG,SAASf,WAE3B,YAAAgB,MAAN,W,mEACI,MAAO,CAAP,EAAOH,KAAKD,QAAQI,gBAElB,YAAAC,QAAN,W,mEACI,MAAO,CAAP,EAAOJ,KAAKD,QAAQK,kBAElB,YAAAC,OAAN,W,mEACI,MAAO,CAAP,EAAOL,KAAKD,QAAQM,iBAGlB,YAAAC,WAAN,SACItE,EACAC,EACAC,EACAgD,G,mEAEA,MAAO,CAAP,EAAOc,KAAKC,YAAYK,WAAWN,KAAKb,QAASa,KAAKZ,YAAapD,EAASC,EAAQC,EAAOgD,WAGzF,YAAAqB,iBAAN,SACIvE,EACAC,EACAI,EACAC,EACA4C,G,mEAEA,MAAO,CAAP,EAAOc,KAAKC,YAAYM,iBAAiBP,KAAKb,QAASa,KAAKZ,YAAapD,EAASC,EAAQI,EAAaC,EAAS4C,WAG9G,YAAAsB,WAAN,SACI5D,EACAsC,G,mEAEA,MAAO,CAAP,EAAOc,KAAKC,YAAYO,WAAWR,KAAKb,QAASa,KAAKZ,YAAaxC,EAAQsC,WAGzE,YAAAuB,WAAN,SACIhE,EACAyC,G,mEAEA,MAAO,CAAP,EAAOc,KAAKC,YAAYQ,WAAWT,KAAKb,QAASa,KAAKZ,YAAa3C,EAAUyC,WAErF,EArDA,GAAa,EAAAwB,W,iqDCVb,WAWA,OAEA,aAGI,WAA6BX,GAAA,KAAAA,UACzBC,KAAKW,QAAU,IAAI,EAAAC,aA4L3B,OAzLY,YAAAC,WAAR,SAAmB/G,GACf,OAAO,EAAAyD,MAAMJ,OAAOrD,GACfgH,cACAC,QAAQ,UAAW,IACnBA,QAAQ,UAAW,MAGpB,YAAAC,aAAR,SAAqBlH,GACjB,OAAO,EAAAgD,QAAQK,OAAOrD,GACjBgH,cACAC,QAAQ,YAAa,IACrBA,QAAQ,UAAW,MAGpB,YAAAE,YAAR,SAAoBnH,GAChB,OAAO,EAAAsD,OAAOD,OAAOrD,GAChBgH,cACAC,QAAQ,WAAY,IACpBA,QAAQ,UAAW,MAGpB,YAAAG,iBAAR,SAAyBpH,GACrB,OAAO,EAAAkE,YAAYb,OAAOrD,GACrBgH,cACAC,QAAQ,gBAAiB,IACzBA,QAAQ,UAAW,MAGpB,YAAAI,wBAAR,SAAgCrH,GAC5B,OAAO,EAAAsE,mBAAmBjB,OAAOrD,GAC5BgH,cACAC,QAAQ,wBAAyB,IACjCA,QAAQ,UAAW,MAGpB,YAAAK,eAAR,SAAuBC,GACnB,OAAOrB,KAAKa,WAAWQ,EAAMnF,OAAS,IAAM8D,KAAKiB,YAAYI,EAAMpF,SAG/D,YAAAqF,qBAAR,SAA6BD,GACzB,OAAOrB,KAAKmB,wBAAwBE,EAAM/E,SAAW,IAAM0D,KAAKkB,iBAAiBG,EAAMhF,cAGnF,YAAA6C,WAAR,SAAmBA,GACf,IAAMqC,EAAkC,GAExC,IAAK,IAAMC,KAAKtC,EACZqC,EAAOC,EAAEV,cAAcC,QAAQ,UAAW,MAAQ7B,EAAWsC,GAGjE,OAAOD,GAGX,YAAAE,QAAA,SAAQC,GACJ1B,KAAKW,QAAQgB,GAAG,QAASD,IAGvB,YAAApB,WAAN,SACInB,EACAC,EACApD,EACAC,EACAC,EACAgD,G,oGAWoB,O,yBALZC,QAAO,EACPC,YAAW,EACXpD,QAAO,EACPC,OAAM,EACNC,MAAK,GACO,GAAMgD,G,OAGtB,OAHI,EAAAA,WAAY,SANVmC,E,EASC,CAAP,EAAOrB,KAAKD,QAAQ6B,MAChB5B,KAAKoB,eAAeC,GAAM,GAEtBQ,eAAgB1C,EAAQvD,OACxBkG,UAAW1C,EAAYzD,GACvBK,QAASgE,KAAKgB,aAAaK,EAAMrF,SACjCC,OAAQ+D,KAAKiB,YAAYI,EAAMpF,QAC/BC,MAAO8D,KAAKa,WAAWQ,EAAMnF,QAC1B8D,KAAKd,WAAWmC,EAAMnC,e,yBAIjCc,KAAKW,QAAQoB,KAAK,QAAS,G,+BAI7B,YAAAxB,iBAAN,SACIpB,EACAC,EACApD,EACAC,EACAI,EACAC,EACA4C,G,oGAUoB,O,yBANZC,QAAO,EACPC,YAAW,EACXpD,QAAO,EACPC,OAAM,EACNI,YAAW,EACXC,QAAO,GACK,GAAM4C,G,OAGtB,OAHI,EAAAA,WAAY,SAPVmC,E,EAUC,CAAP,EAAOrB,KAAKD,QAAQ6B,MAChB5B,KAAKsB,qBAAqBD,GAAM,GAE5BQ,eAAgB1C,EAAQvD,OACxBkG,UAAW1C,EAAYzD,GACvBK,QAASgE,KAAKgB,aAAaK,EAAMrF,SACjCC,OAAQ+D,KAAKiB,YAAYI,EAAMpF,QAC/BI,YAAa2D,KAAKkB,iBAAiBG,EAAMhF,aACzC2F,oBAAqBhC,KAAKmB,wBAAwBE,EAAM/E,UACrD0D,KAAKd,WAAWmC,EAAMnC,e,yBAIjCc,KAAKW,QAAQoB,KAAK,QAAS,G,+BAI7B,YAAAvB,WAAN,SACIrB,EACAC,EACAxC,EACAsC,G,oGAOoB,O,yBAHZC,QAAO,EACPC,YAAW,EACXxC,OAAM,GACM,GAAMsC,G,OAGtB,OAHI,EAAAA,WAAY,SAJVmC,E,EAOC,CAAP,EAAOrB,KAAKD,QAAQ6B,MAChB,QAAO,GAEHC,eAAgB1C,EAAQvD,OACxBkG,UAAW1C,EAAYzD,GACvBiB,OAAM,GACHoD,KAAKd,WAAWmC,EAAMnC,e,yBAIjCc,KAAKW,QAAQoB,KAAK,QAAS,G,+BAI7B,YAAAtB,WAAN,SACItB,EACAC,EACA3C,EACAyC,G,oGAOoB,O,yBAHZC,QAAO,EACPC,YAAW,EACX3C,SAAQ,GACI,GAAMyC,G,OAGtB,OAHI,EAAAA,WAAY,SAJVmC,E,EAOC,CAAP,EAAOrB,KAAKD,QAAQ6B,MAChB,QAAO,GAEHC,eAAgB1C,EAAQvD,OACxBkG,UAAW1C,EAAYzD,GACvBc,SAAQ,GACLuD,KAAKd,WAAWmC,EAAMnC,e,yBAIjCc,KAAKW,QAAQoB,KAAK,QAAS,G,+BAGvC,EAhMA,GAAa,EAAArB,W,6BCUb,IAOIuB,EAPAC,EAAuB,iBAAZC,QAAuBA,QAAU,KAC5CC,EAAeF,GAAwB,mBAAZA,EAAEG,MAC7BH,EAAEG,MACF,SAAsBzF,EAAQ0F,EAAUC,GACxC,OAAOC,SAASlH,UAAU+G,MAAMxI,KAAK+C,EAAQ0F,EAAUC,IAKzDN,EADEC,GAA0B,mBAAdA,EAAEO,QACCP,EAAEO,QACVrI,OAAOsI,sBACC,SAAwB9F,GACvC,OAAOxC,OAAOuI,oBAAoB/F,GAC/BgG,OAAOxI,OAAOsI,sBAAsB9F,KAGxB,SAAwBA,GACvC,OAAOxC,OAAOuI,oBAAoB/F,IAQtC,IAAIiG,EAAcC,OAAOC,OAAS,SAAqBpI,GACrD,OAAOA,GAAUA,GAGnB,SAASiG,IACPA,EAAaoC,KAAKnJ,KAAKmG,MAEzBvG,EAAOD,QAAUoH,EAGjBA,EAAaA,aAAeA,EAE5BA,EAAatF,UAAU2H,aAAUvE,EACjCkC,EAAatF,UAAU4H,aAAe,EACtCtC,EAAatF,UAAU6H,mBAAgBzE,EAIvC,IAAI0E,EAAsB,GAE1B,SAASC,EAAcC,GACrB,GAAwB,mBAAbA,EACT,MAAM,IAAIC,UAAU,0EAA4ED,GAsCpG,SAASE,EAAiBC,GACxB,YAA2B/E,IAAvB+E,EAAKN,cACAvC,EAAawC,oBACfK,EAAKN,cAmDd,SAASO,EAAa9G,EAAQ+G,EAAML,EAAUM,GAC5C,IAAI9J,EACA+J,EACAC,EAzHsBC,EA+I1B,GApBAV,EAAcC,QAGC5E,KADfmF,EAASjH,EAAOqG,UAEdY,EAASjH,EAAOqG,QAAU7I,OAAOY,OAAO,MACxC4B,EAAOsG,aAAe,SAIKxE,IAAvBmF,EAAOG,cACTpH,EAAOmF,KAAK,cAAe4B,EACfL,EAASA,SAAWA,EAASA,SAAWA,GAIpDO,EAASjH,EAAOqG,SAElBa,EAAWD,EAAOF,SAGHjF,IAAboF,EAEFA,EAAWD,EAAOF,GAAQL,IACxB1G,EAAOsG,kBAeT,GAbwB,mBAAbY,EAETA,EAAWD,EAAOF,GAChBC,EAAU,CAACN,EAAUQ,GAAY,CAACA,EAAUR,GAErCM,EACTE,EAASG,QAAQX,GAEjBQ,EAASI,KAAKZ,IAIhBxJ,EAAI0J,EAAiB5G,IACb,GAAKkH,EAASK,OAASrK,IAAMgK,EAASM,OAAQ,CACpDN,EAASM,QAAS,EAGlB,IAAIC,EAAI,IAAIC,MAAM,+CACER,EAASK,OAAS,IAAMxF,OAAOgF,GADjC,qEAIlBU,EAAEpK,KAAO,8BACToK,EAAE1D,QAAU/D,EACZyH,EAAEV,KAAOA,EACTU,EAAEE,MAAQT,EAASK,OA5KGJ,EA6KHM,EA5KnBG,SAAWA,QAAQC,MAAMD,QAAQC,KAAKV,GAgL1C,OAAOnH,EAcT,SAAS8H,IACP,IAAK1E,KAAK2E,MAGR,OAFA3E,KAAKpD,OAAOgI,eAAe5E,KAAK2D,KAAM3D,KAAK6E,QAC3C7E,KAAK2E,OAAQ,EACY,IAArBG,UAAUX,OACLnE,KAAKsD,SAASzJ,KAAKmG,KAAKpD,QAC1BoD,KAAKsD,SAASjB,MAAMrC,KAAKpD,OAAQkI,WAI5C,SAASC,EAAUnI,EAAQ+G,EAAML,GAC/B,IAAI0B,EAAQ,CAAEL,OAAO,EAAOE,YAAQnG,EAAW9B,OAAQA,EAAQ+G,KAAMA,EAAML,SAAUA,GACjF2B,EAAUP,EAAYxJ,KAAK8J,GAG/B,OAFAC,EAAQ3B,SAAWA,EACnB0B,EAAMH,OAASI,EACRA,EA0HT,SAASC,EAAWtI,EAAQ+G,EAAMwB,GAChC,IAAItB,EAASjH,EAAOqG,QAEpB,QAAevE,IAAXmF,EACF,MAAO,GAET,IAAIuB,EAAavB,EAAOF,GACxB,YAAmBjF,IAAf0G,EACK,GAEiB,mBAAfA,EACFD,EAAS,CAACC,EAAW9B,UAAY8B,GAAc,CAACA,GAElDD,EAsDT,SAAyBE,GAEvB,IADA,IAAIC,EAAM,IAAIC,MAAMF,EAAIlB,QACfzK,EAAI,EAAGA,EAAI4L,EAAInB,SAAUzK,EAChC4L,EAAI5L,GAAK2L,EAAI3L,GAAG4J,UAAY+B,EAAI3L,GAElC,OAAO4L,EA1DLE,CAAgBJ,GAAcK,EAAWL,EAAYA,EAAWjB,QAoBpE,SAASuB,EAAc/B,GACrB,IAAIE,EAAS7D,KAAKiD,QAElB,QAAevE,IAAXmF,EAAsB,CACxB,IAAIuB,EAAavB,EAAOF,GAExB,GAA0B,mBAAfyB,EACT,OAAO,EACF,QAAmB1G,IAAf0G,EACT,OAAOA,EAAWjB,OAItB,OAAO,EAOT,SAASsB,EAAWJ,EAAKlK,GAEvB,IADA,IAAIwK,EAAO,IAAIJ,MAAMpK,GACZzB,EAAI,EAAGA,EAAIyB,IAAKzB,EACvBiM,EAAKjM,GAAK2L,EAAI3L,GAChB,OAAOiM,EApWTvL,OAAOC,eAAeuG,EAAc,sBAAuB,CACzDtG,YAAY,EACZC,IAAK,WACH,OAAO6I,GAETwC,IAAK,SAASC,GACZ,GAAmB,iBAARA,GAAoBA,EAAM,GAAKhD,EAAYgD,GACpD,MAAM,IAAIC,WAAW,kGAAoGD,EAAM,KAEjIzC,EAAsByC,KAI1BjF,EAAaoC,KAAO,gBAEGtE,IAAjBsB,KAAKiD,SACLjD,KAAKiD,UAAY7I,OAAO2L,eAAe/F,MAAMiD,UAC/CjD,KAAKiD,QAAU7I,OAAOY,OAAO,MAC7BgF,KAAKkD,aAAe,GAGtBlD,KAAKmD,cAAgBnD,KAAKmD,oBAAiBzE,GAK7CkC,EAAatF,UAAU0K,gBAAkB,SAAyB7K,GAChE,GAAiB,iBAANA,GAAkBA,EAAI,GAAK0H,EAAY1H,GAChD,MAAM,IAAI2K,WAAW,gFAAkF3K,EAAI,KAG7G,OADA6E,KAAKmD,cAAgBhI,EACd6E,MASTY,EAAatF,UAAU2K,gBAAkB,WACvC,OAAOzC,EAAiBxD,OAG1BY,EAAatF,UAAUyG,KAAO,SAAc4B,GAE1C,IADA,IAAIpB,EAAO,GACF7I,EAAI,EAAGA,EAAIoL,UAAUX,OAAQzK,IAAK6I,EAAK2B,KAAKY,UAAUpL,IAC/D,IAAIwM,EAAoB,UAATvC,EAEXE,EAAS7D,KAAKiD,QAClB,QAAevE,IAAXmF,EACFqC,EAAWA,QAA4BxH,IAAjBmF,EAAOsC,WAC1B,IAAKD,EACR,OAAO,EAGT,GAAIA,EAAS,CACX,IAAIE,EAGJ,GAFI7D,EAAK4B,OAAS,IAChBiC,EAAK7D,EAAK,IACR6D,aAAc9B,MAGhB,MAAM8B,EAGR,IAAIC,EAAM,IAAI/B,MAAM,oBAAsB8B,EAAK,KAAOA,EAAG3H,QAAU,IAAM,KAEzE,MADA4H,EAAIC,QAAUF,EACRC,EAGR,IAAIE,EAAU1C,EAAOF,GAErB,QAAgBjF,IAAZ6H,EACF,OAAO,EAET,GAAuB,mBAAZA,EACTnE,EAAamE,EAASvG,KAAMuC,OAE5B,KAAIiE,EAAMD,EAAQpC,OACdsC,EAAYhB,EAAWc,EAASC,GACpC,IAAS9M,EAAI,EAAGA,EAAI8M,IAAO9M,EACzB0I,EAAaqE,EAAU/M,GAAIsG,KAAMuC,GAGrC,OAAO,GAiET3B,EAAatF,UAAUoL,YAAc,SAAqB/C,EAAML,GAC9D,OAAOI,EAAa1D,KAAM2D,EAAML,GAAU,IAG5C1C,EAAatF,UAAUqG,GAAKf,EAAatF,UAAUoL,YAEnD9F,EAAatF,UAAUqL,gBACnB,SAAyBhD,EAAML,GAC7B,OAAOI,EAAa1D,KAAM2D,EAAML,GAAU,IAqBhD1C,EAAatF,UAAUsL,KAAO,SAAcjD,EAAML,GAGhD,OAFAD,EAAcC,GACdtD,KAAK2B,GAAGgC,EAAMoB,EAAU/E,KAAM2D,EAAML,IAC7BtD,MAGTY,EAAatF,UAAUuL,oBACnB,SAA6BlD,EAAML,GAGjC,OAFAD,EAAcC,GACdtD,KAAK2G,gBAAgBhD,EAAMoB,EAAU/E,KAAM2D,EAAML,IAC1CtD,MAIbY,EAAatF,UAAUsJ,eACnB,SAAwBjB,EAAML,GAC5B,IAAIwD,EAAMjD,EAAQkD,EAAUrN,EAAGsN,EAK/B,GAHA3D,EAAcC,QAGC5E,KADfmF,EAAS7D,KAAKiD,SAEZ,OAAOjD,KAGT,QAAatB,KADboI,EAAOjD,EAAOF,IAEZ,OAAO3D,KAET,GAAI8G,IAASxD,GAAYwD,EAAKxD,WAAaA,EACb,KAAtBtD,KAAKkD,aACTlD,KAAKiD,QAAU7I,OAAOY,OAAO,cAEtB6I,EAAOF,GACVE,EAAOe,gBACT5E,KAAK+B,KAAK,iBAAkB4B,EAAMmD,EAAKxD,UAAYA,SAElD,GAAoB,mBAATwD,EAAqB,CAGrC,IAFAC,GAAY,EAEPrN,EAAIoN,EAAK3C,OAAS,EAAGzK,GAAK,EAAGA,IAChC,GAAIoN,EAAKpN,KAAO4J,GAAYwD,EAAKpN,GAAG4J,WAAaA,EAAU,CACzD0D,EAAmBF,EAAKpN,GAAG4J,SAC3ByD,EAAWrN,EACX,MAIJ,GAAIqN,EAAW,EACb,OAAO/G,KAEQ,IAAb+G,EACFD,EAAKG,QAiIf,SAAmBH,EAAMI,GACvB,KAAOA,EAAQ,EAAIJ,EAAK3C,OAAQ+C,IAC9BJ,EAAKI,GAASJ,EAAKI,EAAQ,GAC7BJ,EAAKK,MAlIGC,CAAUN,EAAMC,GAGE,IAAhBD,EAAK3C,SACPN,EAAOF,GAAQmD,EAAK,SAEQpI,IAA1BmF,EAAOe,gBACT5E,KAAK+B,KAAK,iBAAkB4B,EAAMqD,GAAoB1D,GAG1D,OAAOtD,MAGbY,EAAatF,UAAU+L,IAAMzG,EAAatF,UAAUsJ,eAEpDhE,EAAatF,UAAUgM,mBACnB,SAA4B3D,GAC1B,IAAI8C,EAAW5C,EAAQnK,EAGvB,QAAegF,KADfmF,EAAS7D,KAAKiD,SAEZ,OAAOjD,KAGT,QAA8BtB,IAA1BmF,EAAOe,eAUT,OATyB,IAArBE,UAAUX,QACZnE,KAAKiD,QAAU7I,OAAOY,OAAO,MAC7BgF,KAAKkD,aAAe,QACMxE,IAAjBmF,EAAOF,KACY,KAAtB3D,KAAKkD,aACTlD,KAAKiD,QAAU7I,OAAOY,OAAO,aAEtB6I,EAAOF,IAEX3D,KAIT,GAAyB,IAArB8E,UAAUX,OAAc,CAC1B,IACIlJ,EADAsM,EAAOnN,OAAOmN,KAAK1D,GAEvB,IAAKnK,EAAI,EAAGA,EAAI6N,EAAKpD,SAAUzK,EAEjB,oBADZuB,EAAMsM,EAAK7N,KAEXsG,KAAKsH,mBAAmBrM,GAK1B,OAHA+E,KAAKsH,mBAAmB,kBACxBtH,KAAKiD,QAAU7I,OAAOY,OAAO,MAC7BgF,KAAKkD,aAAe,EACblD,KAKT,GAAyB,mBAFzByG,EAAY5C,EAAOF,IAGjB3D,KAAK4E,eAAejB,EAAM8C,QACrB,QAAkB/H,IAAd+H,EAET,IAAK/M,EAAI+M,EAAUtC,OAAS,EAAGzK,GAAK,EAAGA,IACrCsG,KAAK4E,eAAejB,EAAM8C,EAAU/M,IAIxC,OAAOsG,MAoBbY,EAAatF,UAAUmL,UAAY,SAAmB9C,GACpD,OAAOuB,EAAWlF,KAAM2D,GAAM,IAGhC/C,EAAatF,UAAUkM,aAAe,SAAsB7D,GAC1D,OAAOuB,EAAWlF,KAAM2D,GAAM,IAGhC/C,EAAa8E,cAAgB,SAAS/E,EAASgD,GAC7C,MAAqC,mBAA1BhD,EAAQ+E,cACV/E,EAAQ+E,cAAc/B,GAEtB+B,EAAc7L,KAAK8G,EAASgD,IAIvC/C,EAAatF,UAAUoK,cAAgBA,EAiBvC9E,EAAatF,UAAUmM,WAAa,WAClC,OAAOzH,KAAKkD,aAAe,EAAIjB,EAAejC,KAAKiD,SAAW,K,6ECrahE,WAIA,aACI,WAAYyE,EAAeC,GACvBC,EAAS5E,KAAK0E,EAAOC,GA+B7B,OA5BI,YAAA/F,MAAA,SAAMiG,EAAmBC,GACrB,OAAO,IAAIC,SAAQ,SAACC,EAASC,GACzBL,EAAShG,MAAMiG,EAAWC,GAAiB,SAACzB,GACpCA,EACA4B,EAAO5B,GAEP2B,WAMhB,YAAA5H,QAAA,WACI,OAAO2H,QAAQC,QAAQJ,EAASM,qBAGpC,YAAA7H,OAAA,WACI,OAAO0H,QAAQC,QAAQJ,EAASO,oBAGpC,YAAAjI,SAAA,SAASf,GACL,OAAO4I,QAAQC,QAAQJ,EAAS1H,SAASf,EAAQvD,UAGrD,YAAAuE,MAAA,WACI,OAAO4H,QAAQC,QAAQJ,EAASzH,UAGxC,EAjCA,GAAa,EAAAL,0B,6BCJb,IAMIsI,EANAC,EAAS,CACTC,OAAO,EACPC,YAAa,UAKjB,GAAuB,oBAAb,OAA0B,CAChC,IAAIC,EAAM,CACNC,SAAU,IAEdL,EAAW,CACPM,UAAW,CAAEC,UAAW,IACxBC,SAAU,CACNnM,SAAU+L,EACVK,SAAU,IAEdC,OAAQ,CAAEC,MAAO,EAAGC,OAAQ,GAC5BvM,SAAU+L,QAGdJ,EAAWa,OAQf,IAghBQC,EACAC,EAWAC,EA6HAzO,EAvIA0O,EAWAlD,EAMAmD,EAWA1N,EAuCA2N,EAqCAC,EAkNAC,EA50BJC,EAAanE,MAAMjK,UACnBqO,EAAYnH,SAASlH,UACrBsO,EAAWxP,OAAOkB,UAClBuO,EAAQH,EAAWG,MACnBC,EAAWF,EAASE,SACpBvO,EAAiBqO,EAASrO,eAC1BwO,EAAgB3B,EAAS5D,QACzBwF,EAAc5B,EAASM,UACvBuB,EAAa7B,EAASQ,SACtBsB,EAAc9B,EAAS+B,MACvBrB,EAASV,EAASU,OAClBH,EAAYqB,EAAYrB,UACxByB,EAAaT,EAAUzO,KACvBmP,EAAgBX,EAAWpK,QAC3BgL,EAAgBZ,EAAWa,QAC3BC,EAAYd,EAAWe,IACvBC,EAAgBnF,MAAMoF,QACtBC,EAAU,GACV5L,EAAI,CACJ6L,KAAM,SAASC,GAEX,OAAOA,EAAI/J,QAAQ,qCAAsC,MAK7DgK,EAAY,CAEZC,IAAK,WACD,GAAI3C,EAAOC,QAAUtJ,EAAEiM,YAAYlB,IAAkBA,EACjD,IACIA,EAAciB,IAAI3I,MAAM0H,EAAejF,WACzC,MAAOuB,GACLrH,EAAEkM,KAAKpG,WAAW,SAASe,GACvBkE,EAAciB,IAAInF,QAMlCM,MAAO,WACH,GAAIkC,EAAOC,QAAUtJ,EAAEiM,YAAYlB,IAAkBA,EAAe,CAChE,IAAIxH,EAAO,CAAC,mBAAmBK,OAAO5D,EAAEmM,QAAQrG,YAChD,IACIiF,EAAc5D,MAAM9D,MAAM0H,EAAexH,GAC3C,MAAO8D,GACLrH,EAAEkM,KAAK3I,GAAM,SAASsD,GAClBkE,EAAc5D,MAAMN,SAMpCuF,SAAU,WACN,IAAKpM,EAAEiM,YAAYlB,IAAkBA,EAAe,CAChD,IAAIxH,EAAO,CAAC,mBAAmBK,OAAO5D,EAAEmM,QAAQrG,YAChD,IACIiF,EAAc5D,MAAM9D,MAAM0H,EAAexH,GAC3C,MAAO8D,GACLrH,EAAEkM,KAAK3I,GAAM,SAASsD,GAClBkE,EAAc5D,MAAMN,UAOpCwF,EAAuB,SAASC,EAAMC,GACtC,OAAO,WAEH,OADAzG,UAAU,GAAK,IAAMyG,EAAS,KAAOzG,UAAU,GACxCwG,EAAKjJ,MAAM0I,EAAWjG,aAGjC0G,EAAsB,SAASD,GAC/B,MAAO,CACHP,IAAKK,EAAqBN,EAAUC,IAAKO,GACzCpF,MAAOkF,EAAqBN,EAAU5E,MAAOoF,GAC7CH,SAAUC,EAAqBN,EAAUK,SAAUG,KAO3DvM,EAAE9D,KAAO,SAASoQ,EAAMhF,GACpB,IAAI/D,EAAMkJ,EACV,GAAIrB,GAAckB,EAAKpQ,OAASkP,EAC5B,OAAOA,EAAW/H,MAAMiJ,EAAMzB,EAAMhQ,KAAKiL,UAAW,IAExD,IAAK9F,EAAE0M,WAAWJ,GACd,MAAM,IAAI/H,UAiBd,OAfAhB,EAAOsH,EAAMhQ,KAAKiL,UAAW,GAC7B2G,EAAQ,WACJ,KAAMzL,gBAAgByL,GAClB,OAAOH,EAAKjJ,MAAMiE,EAAS/D,EAAKK,OAAOiH,EAAMhQ,KAAKiL,aAEtD,IAAI6G,EAAO,GACXA,EAAKrQ,UAAYgQ,EAAKhQ,UACtB,IAAIsQ,EAAO,IAAID,EACfA,EAAKrQ,UAAY,KACjB,IAAIuQ,EAASP,EAAKjJ,MAAMuJ,EAAMrJ,EAAKK,OAAOiH,EAAMhQ,KAAKiL,aACrD,OAAI1K,OAAOyR,KAAYA,EACZA,EAEJD,IAKf5M,EAAE8M,sBAAwB,SAASjN,GAC/B,IAAK,IAAIyM,KAAQzM,EACa,mBAAfA,EAAIyM,KACXzM,EAAIyM,GAAQtM,EAAE9D,KAAK2D,EAAIyM,GAAOzM,KAU1CG,EAAEkM,KAAO,SAASrM,EAAKkN,EAAUzF,GAC7B,GAAIzH,QAGJ,GAAIwL,GAAiBxL,EAAIS,UAAY+K,EACjCxL,EAAIS,QAAQyM,EAAUzF,QACnB,GAAIzH,EAAIsF,UAAYtF,EAAIsF,QAC3B,IAAK,IAAIzK,EAAI,EAAGC,EAAIkF,EAAIsF,OAAQzK,EAAIC,EAAGD,IACnC,GAAIA,KAAKmF,GAAOkN,EAASlS,KAAKyM,EAASzH,EAAInF,GAAIA,EAAGmF,KAAS+L,EACvD,YAIR,IAAK,IAAI3P,KAAO4D,EACZ,GAAItD,EAAe1B,KAAKgF,EAAK5D,IACrB8Q,EAASlS,KAAKyM,EAASzH,EAAI5D,GAAMA,EAAK4D,KAAS+L,EAC/C,QAOpB5L,EAAEgN,WAAa,SAASvQ,GACpB,IAAIwQ,EAAUxQ,EASd,OARIwQ,GAAWjN,EAAEkN,SAASD,KACtBA,EAAUA,EACLlL,QAAQ,KAAM,SACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,UACdA,QAAQ,KAAM,WAEhBkL,GAGXjN,EAAEmN,OAAS,SAAStN,GAQhB,OAPAG,EAAEkM,KAAKrB,EAAMhQ,KAAKiL,UAAW,IAAI,SAASsH,GACtC,IAAK,IAAIC,KAAQD,OACQ,IAAjBA,EAAOC,KACPxN,EAAIwN,GAAQD,EAAOC,OAIxBxN,GAGXG,EAAE2L,QAAUD,GAAiB,SAAS7L,GAClC,MAA8B,mBAAvBiL,EAASjQ,KAAKgF,IAMzBG,EAAE0M,WAAa,SAASY,GACpB,IACI,MAAO,mBAAmBC,KAAKD,GACjC,MAAOE,GACL,OAAO,IAIfxN,EAAEyN,YAAc,SAAS5N,GACrB,SAAUA,IAAOtD,EAAe1B,KAAKgF,EAAK,YAG9CG,EAAEmM,QAAU,SAASuB,GACjB,OAAKA,EAGDA,EAASvB,QACFuB,EAASvB,UAEhBnM,EAAE2L,QAAQ+B,IAGV1N,EAAEyN,YAAYC,GAFP7C,EAAMhQ,KAAK6S,GAKf1N,EAAE2N,OAAOD,GAXL,IAcf1N,EAAEyL,IAAM,SAASpF,EAAKuH,GAClB,GAAIpC,GAAanF,EAAIoF,MAAQD,EACzB,OAAOnF,EAAIoF,IAAImC,GAEf,IAAIC,EAAU,GAId,OAHA7N,EAAEkM,KAAK7F,GAAK,SAASyH,GACjBD,EAAQ3I,KAAK0I,EAASE,OAEnBD,GAIf7N,EAAEuI,KAAO,SAAS1I,GACd,IAAIgO,EAAU,GACd,OAAY,OAARhO,GAGJG,EAAEkM,KAAKrM,GAAK,SAASlE,EAAOM,GACxB4R,EAAQA,EAAQ1I,QAAUlJ,KAHnB4R,GAQf7N,EAAE2N,OAAS,SAAS9N,GAChB,IAAIgO,EAAU,GACd,OAAY,OAARhO,GAGJG,EAAEkM,KAAKrM,GAAK,SAASlE,GACjBkS,EAAQA,EAAQ1I,QAAUxJ,KAHnBkS,GAQf7N,EAAE+N,SAAW,SAASpS,GAClB,OAAOA,GAGXqE,EAAEgO,QAAU,SAASnO,EAAKjC,GACtB,IAAIqQ,GAAQ,EACZ,OAAY,OAARpO,EACOoO,EAEP3C,GAAiBzL,EAAI0L,UAAYD,GACF,GAAxBzL,EAAI0L,QAAQ3N,IAEvBoC,EAAEkM,KAAKrM,GAAK,SAASlE,GACjB,GAAIsS,IAAUA,EAAStS,IAAUiC,GAC7B,OAAOgO,KAGRqC,IAGXjO,EAAEkO,SAAW,SAASpC,EAAKqC,GACvB,OAAgC,IAAzBrC,EAAIP,QAAQ4C,IAIvBnO,EAAEoO,QAAU,SAASC,EAAUC,GAI3B,OAHAD,EAAS/R,UAAY,IAAIgS,EACzBD,EAAS/R,UAAUiS,YAAcF,EACjCA,EAASC,WAAaA,EAAWhS,UAC1B+R,GAGXrO,EAAEwO,SAAW,SAAS3O,GAClB,OAAQA,IAAQzE,OAAOyE,KAASG,EAAE2L,QAAQ9L,IAG9CG,EAAEyO,cAAgB,SAAS5O,GACvB,GAAIG,EAAEwO,SAAS3O,GAAM,CACjB,IAAK,IAAI5D,KAAO4D,EACZ,GAAItD,EAAe1B,KAAKgF,EAAK5D,GACzB,OAAO,EAGf,OAAO,EAEX,OAAO,GAGX+D,EAAEiM,YAAc,SAASpM,GACrB,YAAe,IAARA,GAGXG,EAAEkN,SAAW,SAASrN,GAClB,MAA6B,mBAAtBiL,EAASjQ,KAAKgF,IAGzBG,EAAE0O,OAAS,SAAS7O,GAChB,MAA6B,iBAAtBiL,EAASjQ,KAAKgF,IAGzBG,EAAE2O,SAAW,SAAS9O,GAClB,MAA6B,mBAAtBiL,EAASjQ,KAAKgF,IAGzBG,EAAE4O,UAAY,SAAS/O,GACnB,SAAUA,GAAwB,IAAjBA,EAAIgP,WAGzB7O,EAAE8O,YAAc,SAASjP,GAQrB,OAPAG,EAAEkM,KAAKrM,GAAK,SAASkP,EAAGvM,GAChBxC,EAAE0O,OAAOK,GACTlP,EAAI2C,GAAKxC,EAAEgP,WAAWD,GACf/O,EAAEwO,SAASO,KAClBlP,EAAI2C,GAAKxC,EAAE8O,YAAYC,OAGxBlP,GAGXG,EAAEiP,UAAY,WAIV,OAHAC,KAAKC,IAAMD,KAAKC,KAAO,WACnB,OAAQ,IAAID,MAETA,KAAKC,OAGhBnP,EAAEgP,WAAa,SAAShU,GAEpB,SAASoU,EAAIjT,GACT,OAAOA,EAAI,GAAK,IAAMA,EAAIA,EAE9B,OAAOnB,EAAEqU,iBAAmB,IACxBD,EAAIpU,EAAEsU,cAAgB,GAAK,IAC3BF,EAAIpU,EAAEuU,cAAgB,IACtBH,EAAIpU,EAAEwU,eAAiB,IACvBJ,EAAIpU,EAAEyU,iBAAmB,IACzBL,EAAIpU,EAAE0U,kBAGd1P,EAAE2P,SAAW,SAASrC,GAClB,OAAO,WACH,IACI,OAAOA,EAAEjK,MAAMrC,KAAM8E,WACvB,MAAO8J,GACL7D,EAAUK,SAAS,gFACf/C,EAAOC,OACPyC,EAAUK,SAASwD,MAMnC5P,EAAE6P,eAAiB,SAASC,EAAOC,GAC/B,IAAK,IAAIrV,EAAI,EAAGA,EAAIqV,EAAU5K,OAAQzK,IAClCoV,EAAMxT,UAAUyT,EAAUrV,IAAMsF,EAAE2P,SAASG,EAAMxT,UAAUyT,EAAUrV,MAI7EsF,EAAEgQ,0BAA4B,SAASnQ,GACnC,IAAK,IAAIyM,KAAQzM,EACa,mBAAfA,EAAIyM,KACXzM,EAAIyM,GAAQtM,EAAE2P,SAAS9P,EAAIyM,MAKvCtM,EAAEiQ,uBAAyB,SAASzT,GAChC,IAAI8J,EAAM,GAMV,OALAtG,EAAEkM,KAAK1P,GAAG,SAASuS,EAAGvM,GACdxC,EAAEkN,SAAS6B,IAAMA,EAAE5J,OAAS,IAC5BmB,EAAI9D,GAAKuM,MAGVzI,GAQXtG,EAAEkQ,SAAW,SAASrQ,EAAKsF,GACvB,IAAImB,EAkBJ,MAhBoB,iBAAV,EACNA,EAAMzG,EAAIgL,MAAM,EAAG1F,GACZnF,EAAE2L,QAAQ9L,IACjByG,EAAM,GACNtG,EAAEkM,KAAKrM,GAAK,SAASsQ,GACjB7J,EAAIpB,KAAKlF,EAAEkQ,SAASC,EAAKhL,QAEtBnF,EAAEwO,SAAS3O,IAClByG,EAAM,GACNtG,EAAEkM,KAAKrM,GAAK,SAASsQ,EAAKlU,GACtBqK,EAAIrK,GAAO+D,EAAEkQ,SAASC,EAAKhL,OAG/BmB,EAAMzG,EAGHyG,GAGXtG,EAAEoQ,WACS,SAASC,GACZ,IACIC,EAAQ,SAAS/F,GACjB,IAAIgG,EAAY,0HACZC,EAAO,CACP,KAAM,MACN,KAAM,MACN,KAAM,MACN,KAAM,MACN,KAAM,MACN,IAAK,MACL,KAAM,QAIV,OADAD,EAAUE,UAAY,EACfF,EAAUhD,KAAKhD,GAClB,IAAMA,EAAOxI,QAAQwO,GAAW,SAASG,GACrC,IAAI3V,EAAIyV,EAAKE,GACb,MAAoB,iBAAN3V,EAAiBA,EAC3B,OAAS,OAAS2V,EAAEC,WAAW,GAAG7F,SAAS,KAAKD,OAAO,MAC1D,IACL,IAAMN,EAAS,KAGnBuB,EAAM,SAAS7P,EAAK2U,GACpB,IAAIC,EAAM,GAENnW,EAAI,EACJ8H,EAAI,GACJuM,EAAI,GACJ5J,EAAS,EACT2L,EAAOD,EACPE,EAAU,GACVpV,EAAQiV,EAAO3U,GASnB,OANIN,GAA0B,iBAAVA,GACQ,mBAAjBA,EAAMwC,SACbxC,EAAQA,EAAMwC,OAAOlC,WAIVN,GACX,IAAK,SACD,OAAO2U,EAAM3U,GAEjB,IAAK,SAED,OAAOqV,SAASrV,GAASgE,OAAOhE,GAAS,OAE7C,IAAK,UACL,IAAK,OAKD,OAAOgE,OAAOhE,GAElB,IAAK,SAKD,IAAKA,EACD,MAAO,OAQX,GAJAkV,GA1CK,OA2CLE,EAAU,GAGoB,mBAA1BjG,EAASzH,MAAM1H,GAA6B,CAK5C,IADAwJ,EAASxJ,EAAMwJ,OACVzK,EAAI,EAAGA,EAAIyK,EAAQzK,GAAK,EACzBqW,EAAQrW,GAAKoR,EAAIpR,EAAGiB,IAAU,OAWlC,OANAoT,EAAuB,IAAnBgC,EAAQ5L,OAAe,KACvB0L,EAAM,MAAQA,EACdE,EAAQE,KAAK,MAAQJ,GAAO,KAC5BC,EAAO,IACH,IAAMC,EAAQE,KAAK,KAAO,IAClCJ,EAAMC,EACC/B,EAIX,IAAKvM,KAAK7G,EACFY,EAAe1B,KAAKc,EAAO6G,KAC3BuM,EAAIjD,EAAItJ,EAAG7G,KAEPoV,EAAQ7L,KAAKoL,EAAM9N,IAAMqO,EAAM,KAAO,KAAO9B,GAWzD,OAJAA,EAAuB,IAAnBgC,EAAQ5L,OAAe,KACvB0L,EAAM,IAAME,EAAQE,KAAK,KACzBH,EAAO,IAAM,IAAMC,EAAQE,KAAK,KAAO,IAC3CJ,EAAMC,EACC/B,IAMnB,OAAOjD,EAAI,GAAI,CACX,GAlHQuE,KA2HpBrQ,EAAEkR,YAGM7G,EAAU,CACN,IAAK,IACL,KAAM,KACN,IAAK,IACL,EAAK,KACL,EAAK,KACL,EAAK,KACL,EAAK,KACL,EAAK,MAGTlD,EAAQ,SAASrM,GACb,IAAI8U,EAAI,IAAIuB,YAAYrW,GAGxB,MAFA8U,EAAE1F,GAAKA,EACP0F,EAAExF,KAAOA,EACHwF,GAEVtF,EAAO,SAASvP,GASZ,OAPIA,GAAKA,IAAMoP,GACXhD,EAAM,aAAgBpM,EAAI,iBAAqBoP,EAAK,KAIxDA,EAAKC,EAAKgH,OAAOlH,GACjBA,GAAM,EACCC,GAEXvN,EAAS,WAEL,IAAIA,EACA2N,EAAS,GAMb,IAJW,MAAPJ,IACAI,EAAS,IACTD,EAAK,MAEFH,GAAM,KAAOA,GAAM,KACtBI,GAAUJ,EACVG,IAEJ,GAAW,MAAPH,EAEA,IADAI,GAAU,IACHD,KAAUH,GAAM,KAAOA,GAAM,KAChCI,GAAUJ,EAGlB,GAAW,MAAPA,GAAqB,MAAPA,EAOd,IANAI,GAAUJ,EACVG,IACW,MAAPH,GAAqB,MAAPA,IACdI,GAAUJ,EACVG,KAEGH,GAAM,KAAOA,GAAM,KACtBI,GAAUJ,EACVG,IAIR,GADA1N,GAAU2N,EACLyG,SAASpU,GAGV,OAAOA,EAFPuK,EAAM,eAMdoD,EAAS,WAEL,IAAI8G,EACA3W,EAEA4W,EADA/G,EAAS,GAGb,GAAW,MAAPJ,EACA,KAAOG,KAAQ,CACX,GAAW,MAAPH,EAEA,OADAG,IACOC,EAEX,GAAW,OAAPJ,EAEA,GADAG,IACW,MAAPH,EAAY,CAEZ,IADAmH,EAAQ,EACH5W,EAAI,EAAGA,EAAI,IACZ2W,EAAME,SAASjH,IAAQ,IAClB0G,SAASK,IAFC3W,GAAK,EAKpB4W,EAAgB,GAARA,EAAaD,EAEzB9G,GAAU5K,OAAO6R,aAAaF,OAC3B,IAA2B,iBAAhBjH,EAAQF,GAGtB,MAFAI,GAAUF,EAAQF,QAKtBI,GAAUJ,EAItBhD,EAAM,eAEVqD,EAAQ,WAEJ,KAAOL,GAAMA,GAAM,KACfG,KAqFZ3O,EAAQ,WAIJ,OADA6O,IACQL,GACJ,IAAK,IACD,OAtCC,WAEL,IAAIlO,EACAG,EAAS,GAEb,GAAW,MAAP+N,EAAY,CAGZ,GAFAG,EAAK,KACLE,IACW,MAAPL,EAEA,OADAG,EAAK,KACElO,EAEX,KAAO+N,GAAI,CASP,GARAlO,EAAMsO,IACNC,IACAF,EAAK,KACDlP,OAAOmB,eAAe1B,KAAKuB,EAAQH,IACnCkL,EAAM,kBAAoBlL,EAAM,KAEpCG,EAAOH,GAAON,IACd6O,IACW,MAAPL,EAEA,OADAG,EAAK,KACElO,EAEXkO,EAAK,KACLE,KAGRrD,EAAM,cASK/K,GACX,IAAK,IACD,OAhEA,WAEJ,IAAIqV,EAAQ,GAEZ,GAAW,MAAPtH,EAAY,CAGZ,GAFAG,EAAK,KACLE,IACW,MAAPL,EAEA,OADAG,EAAK,KACEmH,EAEX,KAAOtH,GAAI,CAGP,GAFAsH,EAAMvM,KAAKvJ,KACX6O,IACW,MAAPL,EAEA,OADAG,EAAK,KACEmH,EAEXnH,EAAK,KACLE,KAGRrD,EAAM,aA0CKsK,GACX,IAAK,IACD,OAAOlH,IACX,IAAK,IACD,OAAO3N,IACX,QACI,OAAOuN,GAAM,KAAOA,GAAM,IAAMvN,IAhGjC,WAEH,OAAQuN,GACJ,IAAK,IAKD,OAJAG,EAAK,KACLA,EAAK,KACLA,EAAK,KACLA,EAAK,MACE,EACX,IAAK,IAMD,OALAA,EAAK,KACLA,EAAK,KACLA,EAAK,KACLA,EAAK,KACLA,EAAK,MACE,EACX,IAAK,IAKD,OAJAA,EAAK,KACLA,EAAK,KACLA,EAAK,KACLA,EAAK,KACE,KAEfnD,EAAM,eAAiBgD,EAAK,KAyEmBuH,KAMhD,SAAStE,GACZ,IAAIP,EAWJ,OATAzC,EAAOgD,EACPlD,EAAK,EACLC,EAAK,IACL0C,EAASlR,IACT6O,IACIL,GACAhD,EAAM,gBAGH0F,IAIf7M,EAAE2R,aAAe,SAASC,GACtB,IACgBC,EAAIC,EAAIC,EAAIC,EAAIC,EAD5BC,EAAM,oEAC4BxX,EAAI,EACtCyX,EAAK,EACLC,EAAM,GACNC,EAAU,GAEd,IAAKT,EACD,OAAOA,EAGXA,EAAO5R,EAAEsS,WAAWV,GAEpB,GAOIC,GAFAI,EAJKL,EAAKjB,WAAWjW,MAIR,GAHRkX,EAAKjB,WAAWjW,MAGG,EAFnBkX,EAAKjB,WAAWjW,OAIR,GAAK,GAClBoX,EAAKG,GAAQ,GAAK,GAClBF,EAAKE,GAAQ,EAAI,GACjBD,EAAY,GAAPC,EAGLI,EAAQF,KAAQD,EAAId,OAAOS,GAAMK,EAAId,OAAOU,GAAMI,EAAId,OAAOW,GAAMG,EAAId,OAAOY,SACzEtX,EAAIkX,EAAKzM,QAIlB,OAFAiN,EAAMC,EAAQpB,KAAK,IAEXW,EAAKzM,OAAS,GAClB,KAAK,EACDiN,EAAMA,EAAIvH,MAAM,GAAI,GAAK,KACzB,MACJ,KAAK,EACDuH,EAAMA,EAAIvH,MAAM,GAAI,GAAK,IAIjC,OAAOuH,GAGXpS,EAAEsS,WAAa,SAAS/H,GAGpB,IACIgI,EACAC,EACAC,EACAtW,EAJAuW,EAAU,GASd,IAHAH,EAAQC,EAAM,EACdC,GATAlI,GAAUA,EAAS,IAAIxI,QAAQ,QAAS,MAAMA,QAAQ,MAAO,OAS5CoD,OAEZhJ,EAAI,EAAGA,EAAIsW,EAAStW,IAAK,CAC1B,IAAIwW,EAAKpI,EAAOoG,WAAWxU,GACvBiW,EAAM,KAENO,EAAK,IACLH,IAEAJ,EADQO,EAAK,KAASA,EAAK,KACrBhT,OAAO6R,aAAcmB,GAAM,EAAK,IAAW,GAALA,EAAW,KAEjDhT,OAAO6R,aAAcmB,GAAM,GAAM,IAAOA,GAAM,EAAK,GAAM,IAAW,GAALA,EAAW,KAExE,OAARP,IACII,EAAMD,IACNG,GAAWnI,EAAOqI,UAAUL,EAAOC,IAEvCE,GAAWN,EACXG,EAAQC,EAAMrW,EAAI,GAQ1B,OAJIqW,EAAMD,IACNG,GAAWnI,EAAOqI,UAAUL,EAAOhI,EAAOpF,SAGvCuN,GAGX1S,EAAE6S,MAIMpI,EAAI,WAOJ,IANA,IAAIzP,EAAI,EAAI,IAAIkU,KACZxU,EAAI,EAKDM,GAAK,EAAI,IAAIkU,MAChBxU,IAGJ,OAAOM,EAAE8P,SAAS,IAAMpQ,EAAEoQ,SAAS,KAyChC,WACH,IAAIgI,GAAMhJ,EAAOE,OAASF,EAAOC,OAAOe,SAAS,IACjD,OAAQL,IAAM,IAtCPsI,KAAKC,SAASlI,SAAS,IAAI/I,QAAQ,IAAK,IAsCrB,IA/BrB,WACL,IACIrH,EAAGyP,EADH8I,EAAKtJ,EACEuJ,EAAS,GAChB5M,EAAM,EAEV,SAAS6M,EAAItG,EAAQuG,GACjB,IAAIC,EAAGC,EAAM,EACb,IAAKD,EAAI,EAAGA,EAAID,EAAWjO,OAAQkO,IAC/BC,GAAQJ,EAAOG,IAAU,EAAJA,EAEzB,OAAOxG,EAASyG,EAGpB,IAAK5Y,EAAI,EAAGA,EAAIuY,EAAG9N,OAAQzK,IACvByP,EAAK8I,EAAGtC,WAAWjW,GACnBwY,EAAOjO,QAAa,IAALkF,GACX+I,EAAO/N,QAAU,IACjBmB,EAAM6M,EAAI7M,EAAK4M,GACfA,EAAS,IAQjB,OAJIA,EAAO/N,OAAS,IAChBmB,EAAM6M,EAAI7M,EAAK4M,IAGZ5M,EAAIwE,SAAS,IAKYyI,GAAO,IAAMT,EAAK,IAAMrI,MAOhEzK,EAAEwT,YAAc,SAASP,GACrB,QAAI,6EAA6E1F,KAAK0F,IAU1FjT,EAAEyT,eAAiB,SAASC,EAAUC,GAClC,IAAIC,EAASC,EAASxB,EAAU,GAYhC,OAVIrS,EAAEiM,YAAY0H,KACdA,EAAgB,KAGpB3T,EAAEkM,KAAKwH,GAAU,SAASvD,EAAKlU,GAC3B2X,EAAUE,mBAAmB3D,EAAIrF,YACjC+I,EAAUC,mBAAmB7X,GAC7BoW,EAAQA,EAAQlN,QAAU0O,EAAU,IAAMD,KAGvCvB,EAAQpB,KAAK0C,IAGxB3T,EAAE+T,cAAgB,SAASC,EAAKC,GAG5BA,EAAQA,EAAMlS,QAAQ,MAAO,OAAOA,QAAQ,OAAQ,OACpD,IAEI8L,EADQ,IAAIqG,OADH,SAAWD,EAAQ,aAEZE,KAAKH,GACzB,GAAgB,OAAZnG,GAAqBA,GAAkC,iBAAhBA,EAAQ,IAAoBA,EAAQ,GAAG1I,OAC9E,MAAO,GAEP,IAAI0H,EAASgB,EAAQ,GACrB,IACIhB,EAASuH,mBAAmBvH,GAC9B,MAAMxF,GACJ0E,EAAU5E,MAAM,gDAAkD0F,GAEtE,OAAOA,EAAO9K,QAAQ,MAAO,MAIrC/B,EAAEqU,aAAe,SAASC,EAAML,GAC5B,IAAIM,EAAUD,EAAKE,MAAM,IAAIN,OAAOD,EAAQ,aAC5C,OAAOM,EAAUA,EAAQ,GAAK,MAKlCvU,EAAEyU,OAAS,CACPlZ,IAAK,SAASN,GAGV,IAFA,IAAIyZ,EAASzZ,EAAO,IAChB0Z,EAAK1J,EAAWwJ,OAAOG,MAAM,KACxBla,EAAI,EAAGA,EAAIia,EAAGxP,OAAQzK,IAAK,CAEhC,IADA,IAAIK,EAAI4Z,EAAGja,GACW,KAAfK,EAAEqW,OAAO,IACZrW,EAAIA,EAAE6X,UAAU,EAAG7X,EAAEoK,QAEzB,GAA0B,IAAtBpK,EAAEwQ,QAAQmJ,GACV,OAAON,mBAAmBrZ,EAAE6X,UAAU8B,EAAOvP,OAAQpK,EAAEoK,SAG/D,OAAO,MAGX0P,MAAO,SAAS5Z,GACZ,IAAIwZ,EACJ,IACIA,EAASzU,EAAEkR,WAAWlR,EAAEyU,OAAOlZ,IAAIN,KAAU,GAC/C,MAAOoM,IAGT,OAAOoN,GAGXK,YAAa,SAAS7Z,EAAMU,EAAOoZ,EAASC,EAAoBC,EAAWC,EAAeC,GACtF,IAAIC,EAAU,GACVC,EAAU,GACVC,EAAS,GAEb,GAAIH,EACAC,EAAU,YAAcD,OACrB,GAAIH,EAAoB,CAC3B,IAAIO,EAASC,EAAevK,EAAWxN,SAASgM,UAChD2L,EAAUG,EAAS,aAAeA,EAAS,GAG/C,GAAIR,EAAS,CACT,IAAIU,EAAO,IAAIvG,KACfuG,EAAKC,QAAQD,EAAKE,UAAuB,IAAVZ,GAC/BM,EAAU,aAAeI,EAAKG,cAG9BV,IACAD,GAAY,EACZK,EAAS,mBAETL,IACAK,GAAU,YAGdrK,EAAWwJ,OAASxZ,EAAO,IAAM6Y,mBAAmBnY,GAAS0Z,EAAU,WAAaD,EAAUE,GAGlG1O,IAAK,SAAS3L,EAAMU,EAAOka,EAAMb,EAAoBC,EAAWC,EAAeC,GAC3E,IAAIC,EAAU,GAAIC,EAAU,GAAIC,EAAS,GAEzC,GAAIH,EACAC,EAAU,YAAcD,OACrB,GAAIH,EAAoB,CAC3B,IAAIO,EAASC,EAAevK,EAAWxN,SAASgM,UAChD2L,EAAUG,EAAS,aAAeA,EAAS,GAG/C,GAAIM,EAAM,CACN,IAAIJ,EAAO,IAAIvG,KACfuG,EAAKC,QAAQD,EAAKE,UAAoB,GAAPE,EAAY,GAAK,GAAK,KACrDR,EAAU,aAAeI,EAAKG,cAG9BV,IACAD,GAAY,EACZK,EAAS,mBAETL,IACAK,GAAU,YAGd,IAAIQ,EAAiB7a,EAAO,IAAM6Y,mBAAmBnY,GAAS0Z,EAAU,WAAaD,EAAUE,EAE/F,OADArK,EAAWwJ,OAASqB,EACbA,GAGXC,OAAQ,SAAS9a,EAAM+Z,EAAoBG,GACvCnV,EAAEyU,OAAO7N,IAAI3L,EAAM,IAAK,EAAG+Z,GAAoB,GAAO,EAAOG,KAIrE,IAAIa,EAAyB,KACzBC,EAAwB,SAASC,EAASC,GAC1C,GAA+B,OAA3BH,IAAoCG,EACpC,OAAOH,EAGX,IAAII,GAAY,EAChB,IACIF,EAAUA,GAAWjM,OAAOoM,aAC5B,IAAIpa,EAAM,WAAaqa,EAAW,GAElCJ,EAAQK,QAAQta,EADN,eAENia,EAAQM,QAAQva,KAChBma,GAAY,GAEhBF,EAAQO,WAAWxa,GACrB,MAAOoL,GACL+O,GAAY,EAIhB,OADAJ,EAAyBI,EAClBA,GAIXpW,EAAEqW,aAAe,CACbK,aAAc,SAASC,GACnB,IAAIP,EAAYH,EAAsB,KAAMU,GAI5C,OAHKP,GACDrK,EAAU5E,MAAM,0DAEbiP,GAGXjP,MAAO,SAASyP,GACZ7K,EAAU5E,MAAM,uBAAyByP,IAG7Crb,IAAK,SAASN,GACV,IACI,OAAOgP,OAAOoM,aAAaG,QAAQvb,GACrC,MAAOoM,GACLrH,EAAEqW,aAAalP,MAAME,GAEzB,OAAO,MAGXwN,MAAO,SAAS5Z,GACZ,IACI,OAAO+E,EAAEkR,WAAWlR,EAAEqW,aAAa9a,IAAIN,KAAU,GACnD,MAAOoM,IAGT,OAAO,MAGXT,IAAK,SAAS3L,EAAMU,GAChB,IACIsO,OAAOoM,aAAaE,QAAQtb,EAAMU,GACpC,MAAO0L,GACLrH,EAAEqW,aAAalP,MAAME,KAI7B0O,OAAQ,SAAS9a,GACb,IACIgP,OAAOoM,aAAaI,WAAWxb,GACjC,MAAOoM,GACLrH,EAAEqW,aAAalP,MAAME,MAKjCrH,EAAE6W,eAAiB,WA6Df,SAASC,EAASzU,GAKd,OAJIA,IACAA,EAAM0U,eAAiBD,EAASC,eAChC1U,EAAM2U,gBAAkBF,EAASE,iBAE9B3U,EASX,OAPAyU,EAASC,eAAiB,WACtB/V,KAAKiW,aAAc,GAEvBH,EAASE,gBAAkB,WACvBhW,KAAKkW,cAAe,GAzDH,SAASC,EAASxS,EAAM4C,EAAS6P,EAAWC,GAC7D,GAAKF,EAKL,GAAIA,EAAQG,mBAAqBF,EAC7BD,EAAQG,iBAAiB3S,EAAM4C,IAAW8P,OACvC,CACH,IAAIE,EAAS,KAAO5S,EAChB6S,EAAcL,EAAQI,GAC1BJ,EAAQI,GAIhB,SAAqBJ,EAASM,EAAaC,GA4BvC,OA3Bc,SAASrV,GAQnB,GAPAA,EAAQA,GAASyU,EAAS7M,OAAO5H,OAOjC,CAIA,IACIsV,EAAYC,EADZtR,GAAM,EAYV,OATItG,EAAE0M,WAAWgL,KACbC,EAAaD,EAAarV,IAE9BuV,EAAaH,EAAY5c,KAAKsc,EAAS9U,IAElC,IAAUsV,IAAgB,IAAUC,IACrCtR,GAAM,GAGHA,IA7BWuR,CAAYV,EAAS5P,EAASiQ,QAThDzL,EAAU5E,MAAM,gDAjBT,GA+EnB,IAAI2Q,EAAoB,IAAI5D,OAAO,2DAEnClU,EAAE+X,UAAY,WAyBV,SAASC,EAAepI,GAEpB,OAAOA,EAAEqI,IAAMrI,EAAEqI,IAAMrI,EAAEsI,qBAAqB,KAGlD,IAAIC,EAAiB,YAErB,SAASC,EAASC,EAAMC,GACpB,IAAIC,EAAY,IAAMD,EAAW,IACjC,OAAS,IAAMD,EAAKE,UAAY,KAAKxW,QAAQoW,EAAgB,KAAK5M,QAAQgN,IAAc,EAG5F,SAASC,EAAsBF,GAE3B,IAAKrN,EAAWiN,qBACZ,MAAO,GAGX,IACIxP,EAAOuJ,EAAMwG,EAASxK,EAAOyK,EAAYhe,EAAG2Y,EAAG7Q,EAAGmW,EAAUC,EAD5DC,EAASP,EAAS1D,MAAM,KAExBkE,EAAiB,CAAC7N,GACtB,IAAKvQ,EAAI,EAAGA,EAAIme,EAAO1T,OAAQzK,IAE3B,IADAgO,EAAQmQ,EAAOne,GAAGqH,QAAQ,OAAQ,IAAIA,QAAQ,OAAQ,KAC5CwJ,QAAQ,MAAQ,EAA1B,CAGIkN,GADAxG,EAAOvJ,EAAMkM,MAAM,MACJ,GACf,IAAIjY,EAAKsV,EAAK,GACVkF,EAAUlM,EAAW8N,eAAepc,GACxC,IAAKwa,GAAYsB,GAAWtB,EAAQ6B,SAASlX,eAAiB2W,EAE1D,MAAO,GAGXK,EAAiB,CAAC3B,QAGtB,GAAIzO,EAAM6C,QAAQ,MAAQ,EAA1B,CAGIkN,GADAxG,EAAOvJ,EAAMkM,MAAM,MACJ,GACf,IAAI2D,EAAYtG,EAAK,GAOrB,IANKwG,IACDA,EAAU,KAGdxK,EAAQ,GACRyK,EAAa,EACRrF,EAAI,EAAGA,EAAIyF,EAAe3T,OAAQkO,IAMnC,IAJIsF,EADW,KAAXF,EACWT,EAAec,EAAezF,IAE9ByF,EAAezF,GAAG6E,qBAAqBO,GAEjDjW,EAAI,EAAGA,EAAImW,EAASxT,OAAQ3C,IAC7ByL,EAAMyK,KAAgBC,EAASnW,GAKvC,IAFAsW,EAAiB,GACjBF,EAAsB,EACjBvF,EAAI,EAAGA,EAAIpF,EAAM9I,OAAQkO,IACtBpF,EAAMoF,GAAGkF,WACTvY,EAAEkN,SAASe,EAAMoF,GAAGkF,YACpBH,EAASnK,EAAMoF,GAAIkF,KAEnBO,EAAeF,KAAyB3K,EAAMoF,QA5B1D,CAkCA,IAAI4F,EAAcvQ,EAAM8L,MAAMsD,GAC9B,GAAImB,EAAJ,CACIR,EAAUQ,EAAY,GACtB,IAqBIC,EArBAC,EAAWF,EAAY,GACvBG,EAAeH,EAAY,GAC3BI,EAAYJ,EAAY,GAO5B,IANKR,IACDA,EAAU,KAGdxK,EAAQ,GACRyK,EAAa,EACRrF,EAAI,EAAGA,EAAIyF,EAAe3T,OAAQkO,IAMnC,IAJIsF,EADW,KAAXF,EACWT,EAAec,EAAezF,IAE9ByF,EAAezF,GAAG6E,qBAAqBO,GAEjDjW,EAAI,EAAGA,EAAImW,EAASxT,OAAQ3C,IAC7ByL,EAAMyK,KAAgBC,EAASnW,GAMvC,OAHAsW,EAAiB,GACjBF,EAAsB,EAEdQ,GACJ,IAAK,IACDF,EAAgB,SAAStJ,GACrB,OAAQA,EAAE0J,aAAaH,IAAaE,GAExC,MACJ,IAAK,IACDH,EAAgB,SAAStJ,GACrB,OAAQA,EAAE0J,aAAaH,GAAU3E,MAAM,IAAIN,OAAO,MAAQmF,EAAY,SAE1E,MACJ,IAAK,IACDH,EAAgB,SAAStJ,GACrB,OAAQA,EAAE0J,aAAaH,GAAU3E,MAAM,IAAIN,OAAO,IAAMmF,EAAY,QAExE,MACJ,IAAK,IACDH,EAAgB,SAAStJ,GACrB,OAAwD,IAAhDA,EAAE0J,aAAaH,GAAU5N,QAAQ8N,IAE7C,MACJ,IAAK,IACDH,EAAgB,SAAStJ,GACrB,OAAQA,EAAE0J,aAAaH,GAAUI,YAAYF,IAAczJ,EAAE0J,aAAaH,GAAUhU,OAASkU,EAAUlU,QAE3G,MACJ,IAAK,IACD+T,EAAgB,SAAStJ,GACrB,OAAQA,EAAE0J,aAAaH,GAAU5N,QAAQ8N,IAAc,GAE3D,MACJ,QAEIH,EAAgB,SAAStJ,GACrB,OAAOA,EAAE0J,aAAaH,IAKlC,IAFAL,EAAiB,GACjBF,EAAsB,EACjBvF,EAAI,EAAGA,EAAIpF,EAAM9I,OAAQkO,IACtB6F,EAAcjL,EAAMoF,MACpByF,EAAeF,KAAyB3K,EAAMoF,QAjE1D,CA2EA,IAHAoF,EAAU/P,EACVuF,EAAQ,GACRyK,EAAa,EACRrF,EAAI,EAAGA,EAAIyF,EAAe3T,OAAQkO,IAEnC,IADAsF,EAAWG,EAAezF,GAAG6E,qBAAqBO,GAC7CjW,EAAI,EAAGA,EAAImW,EAASxT,OAAQ3C,IAC7ByL,EAAMyK,KAAgBC,EAASnW,GAGvCsW,EAAiB7K,GAErB,OAAO6K,EAGX,OAAO,SAASU,GACZ,OAAIxZ,EAAE4O,UAAU4K,GACL,CAACA,GACDxZ,EAAEwO,SAASgL,KAAWxZ,EAAEiM,YAAYuN,EAAMrU,QAC1CqU,EAEAhB,EAAsB3d,KAAKmG,KAAMwY,IA7LtC,GAkMdxZ,EAAEyZ,KAAO,CACLC,eAAgB,WACZ,IAAIC,EAAoB,0DAA0D/E,MAAM,KACpFgF,EAAK,GACLC,EAAS,GAQb,OAPA7Z,EAAEkM,KAAKyN,GAAmB,SAASG,IAC/BF,EAAK5Z,EAAE+T,cAAc9I,EAAW8O,IAAKD,IAC9B3U,SACH0U,EAAOC,GAASF,MAIjBC,GAGXG,aAAc,SAASnQ,GACnB,OAAwD,IAApDA,EAASoQ,OAAO,gCACT,SAC6C,IAA7CpQ,EAASoQ,OAAO,yBAChB,OAC8C,IAA9CpQ,EAASoQ,OAAO,0BAChB,QACmD,IAAnDpQ,EAASoQ,OAAO,+BAChB,aAEA,MAIfC,WAAY,SAASrQ,GACjB,IAAIoQ,EAASja,EAAEyZ,KAAKO,aAAanQ,GAC7BoK,EAAmB,SAAVgG,EAAqB,IAAM,IACpC3T,EAAM,GAEV,GAAe,OAAX2T,EAAiB,CACjB3T,EAAoB,eAAI2T,EAExB,IAAIE,EAAUna,EAAE+T,cAAclK,EAAUoK,GACpCkG,EAAQhV,SACRmB,EAAgB,WAAI6T,GAI5B,OAAO7T,GAQX8T,QAAS,SAASC,EAAYC,EAAQnP,GAElC,OADAmP,EAASA,GAAU,GACfnP,GAASnL,EAAEkO,SAASmM,EAAY,SAC5Bra,EAAEkO,SAASmM,EAAY,QAChB,aAEJ,QACA,8BAA8B9M,KAAK8M,GACnC,aACAra,EAAEkO,SAASmM,EAAY,aAAera,EAAEkO,SAASmM,EAAY,aAC7D,2BACAra,EAAEkO,SAASmM,EAAY,mBAEvB,mBACAra,EAAEkO,SAASmM,EAAY,SAAWra,EAAEkO,SAASmM,EAAY,QACzD,iBACAra,EAAEkO,SAASmM,EAAY,SACvB,kBACAra,EAAEkO,SAASmM,EAAY,UACvB,SACAra,EAAEkO,SAASmM,EAAY,SACvB,aACAra,EAAEkO,SAASmM,EAAY,UAAYra,EAAEkO,SAASmM,EAAY,aAC1D,aACAra,EAAEkO,SAASmM,EAAY,SACvB,cACAra,EAAEkO,SAASoM,EAAQ,SACtBta,EAAEkO,SAASmM,EAAY,UAChB,gBAEJ,SACAra,EAAEkO,SAASmM,EAAY,WACvB,iBACAra,EAAEkO,SAASmM,EAAY,aACvB,YACAra,EAAEkO,SAASmM,EAAY,WACvB,UACAra,EAAEkO,SAASmM,EAAY,SAAWra,EAAEkO,SAASmM,EAAY,YACzD,oBACAra,EAAEkO,SAASmM,EAAY,SACvB,UAEA,IASfE,eAAgB,SAAS5Q,EAAW2Q,EAAQnP,GACxC,IAmBIqP,EAlBgB,CAChB,2BAA4B,mBAC5B,iBAAkB,uBAClB,OAAU,wBACV,aAAc,uBACd,aAAe,mCACf,OAAU,yBACV,gBAAiB,yBACjB,MAAS,6BACT,QAAW,yBACX,cAAe,uBACf,UAAa,0BACb,WAAc,2BACd,iBAAkB,yBAClB,mBAAoB,gCACpB,oBAAqB,2BACrB,QAAW,oBAjBDxa,EAAEyZ,KAAKW,QAAQzQ,EAAW2Q,EAAQnP,IAoBhD,QAAczL,IAAV8a,EACA,OAAO,KAEX,IAAIjG,EAAU5K,EAAU6K,MAAMgG,GAC9B,OAAKjG,EAGEkG,WAAWlG,EAAQA,EAAQpP,OAAS,IAFhC,MAKfuV,GAAI,WACA,IAAIhK,EAAI/G,EACR,MAAI,WAAW4D,KAAKmD,GACZ,QAAQnD,KAAKmD,IAAM,YAAYnD,KAAKmD,GAC7B,gBAEJ,UACA,qBAAqBnD,KAAKmD,GAC1B,MACA,UAAUnD,KAAKmD,GACf,UACA,8BAA8BnD,KAAKmD,GACnC,aACA,OAAOnD,KAAKmD,GACZ,WACA,QAAQnD,KAAKmD,GACb,QACA,OAAOnD,KAAKmD,GACZ,YAEA,IAIfiK,OAAQ,SAASN,GACb,MAAI,iBAAiB9M,KAAK8M,IAAe,YAAY9M,KAAK8M,GAC/C,gBACA,OAAO9M,KAAK8M,GACZ,OACA,OAAO9M,KAAK8M,GACZ,aACA,SAAS9M,KAAK8M,GACd,SACA,8BAA8B9M,KAAK8M,GACnC,aACA,UAAU9M,KAAK8M,GACf,UAEA,IAIfO,gBAAiB,SAAS/Q,GACtB,IAAI+K,EAAQ/K,EAAS+K,MAAM,KAC3B,OAAIA,EAAMzP,QAAU,EACTyP,EAAM,GAEV,IAGXiG,WAAY,WACR,OAAO7a,EAAEmN,OAAOnN,EAAEiQ,uBAAuB,CACrC,IAAOjQ,EAAEyZ,KAAKiB,KACd,SAAY1a,EAAEyZ,KAAKW,QAAQzQ,EAAWqB,EAAYsP,OAAQpP,GAC1D,UAAaD,EAAWpB,SACxB,kBAAqB7J,EAAEyZ,KAAKmB,gBAAgB3P,EAAWpB,UACvD,QAAW7J,EAAEyZ,KAAKkB,OAAOhR,KACzB,CACA,aAAgBP,EAAS3L,SAASqd,KAClC,iBAAoB9a,EAAEyZ,KAAKc,eAAe5Q,EAAWqB,EAAYsP,OAAQpP,GACzE,eAAkBpB,EAAOE,OACzB,cAAiBF,EAAOC,MACxB,OAAU,MACV,aAAgBV,EAAOE,YACvB,WAAc+M,IACd,KAAQtW,EAAEiP,YAAc,OAIhC8L,kBAAmB,WACf,OAAO/a,EAAEmN,OAAOnN,EAAEiQ,uBAAuB,CACrC,IAAOjQ,EAAEyZ,KAAKiB,KACd,SAAY1a,EAAEyZ,KAAKW,QAAQzQ,EAAWqB,EAAYsP,OAAQpP,KAC1D,CACA,iBAAoBlL,EAAEyZ,KAAKc,eAAe5Q,EAAWqB,EAAYsP,OAAQpP,MAIjF8P,aAAc,SAASC,GACnB,OAAOjb,EAAEiQ,uBAAuB,CAC5B,QAAWgL,EACX,YAAehQ,EAAWpB,SAC1B,WAAc7J,EAAEyZ,KAAKW,QAAQzQ,EAAWqB,EAAYsP,OAAQpP,GAC5D,YAAelL,EAAEyZ,KAAKiB,SAKlC,IAAIpE,EAAa,SAAS4E,GACtB,IAAIC,EAAOpI,KAAKC,SAASlI,SAAS,IAAI8H,UAAU,EAAG,IAAMG,KAAKC,SAASlI,SAAS,IAAI8H,UAAU,EAAG,IACjG,OAAOsI,EAASC,EAAKvI,UAAU,EAAGsI,GAAUC,GAY5CC,EAAwBpb,EAAE2P,UAAS,SAAS7D,EAAKuP,EAASC,GAC1DxP,GAAYuP,EAIZ,IADA,IAAI/G,EAAO,KACF5Z,EAAI,EAAGA,EAAIoR,EAAI3G,OAAQzK,IAC5B4Z,GAASA,GAAQ,GAAKA,EAAQxI,EAAI6E,WAAWjW,GAC7C4Z,GAAcA,EAGlB,OADYA,IAAS,GAAK,IACZgH,KAIdC,EAA4B,+BAE5BC,EAAqB,oCAcrBhG,EAAiB,SAAS/L,GAC1B,IAAIgS,EAAeD,EACfE,EAAQjS,EAASmL,MAAM,KACvB+G,EAAMD,EAAMA,EAAMvW,OAAS,IAC3BwW,EAAIxW,OAAS,GAAa,QAARwW,GAAyB,QAARA,KACnCF,EAAeF,GAEnB,IAAIhH,EAAU9K,EAAS+K,MAAMiH,GAC7B,OAAOlH,EAAUA,EAAQ,GAAK,IAG9BqH,EAAgB,KAChBC,EAAY,KA0BhB,SAASC,EAAaC,GAClB,cAAcA,EAAGxD,WACb,IAAK,SACD,OAAOwD,EAAGxD,UACd,IAAK,SACD,OAAOwD,EAAGxD,UAAUyD,SAAWD,EAAGzC,aAAa,UAAY,GAC/D,QACI,MAAO,IAsCnB,SAAS2C,EAAcF,GACnB,OAAOA,GAAsB,IAAhBA,EAAGlN,SAapB,SAASqN,EAAMH,EAAII,GACf,OAAOJ,GAAMA,EAAGtD,SAAWsD,EAAGtD,QAAQ3W,gBAAkBqa,EAAIra,cAQhE,SAASsa,EAAWL,GAChB,OAAOA,GAAsB,IAAhBA,EAAGlN,SAwCpB,SAASwN,EAAmBN,GACxB,IAAK,IAAIO,EAAQP,EAAIO,EAAMC,aAAeL,EAAMI,EAAO,QAASA,EAAQA,EAAMC,WAAY,CACtF,IAAIC,EAAUV,EAAaQ,GAAO1H,MAAM,KACxC,GAAI5U,EAAEkO,SAASsO,EAAS,iBAAmBxc,EAAEkO,SAASsO,EAAS,eAC3D,OAAO,EAIf,GAAIxc,EAAEkO,SAAS4N,EAAaC,GAAInH,MAAM,KAAM,cACxC,OAAO,EAKX,GACIsH,EAAMH,EAAI,UACVG,EAAMH,EAAI,WACVG,EAAMH,EAAI,aAC6B,SAAvCA,EAAGzC,aAAa,mBAEhB,OAAO,EAIX,IAAI3U,EAAOoX,EAAGpX,MAAQ,GACtB,GAAoB,iBAATA,EACP,OAAOA,EAAK7C,eACR,IAAK,SAEL,IAAK,WACD,OAAO,EAKnB,IAAI7G,EAAO8gB,EAAG9gB,MAAQ8gB,EAAGpf,IAAM,GAC/B,GAAoB,iBAAT1B,EAAmB,CAE1B,GADyB,uHACFsS,KAAKtS,EAAK8G,QAAQ,gBAAiB,KACtD,OAAO,EAIf,OAAO,EASX,SAAS0a,GAAiB9gB,GACtB,GAAc,OAAVA,GAAkBqE,EAAEiM,YAAYtQ,GAChC,OAAO,EAGX,GAAqB,iBAAVA,EAAoB,CAC3BA,EAAQqE,EAAE6L,KAAKlQ,GAKf,GADc,wKACF4R,MAAM5R,GAAS,IAAIoG,QAAQ,QAAS,KAC5C,OAAO,EAKX,GADe,0BACFwL,KAAK5R,GACd,OAAO,EAIf,OAAO,EAhNS,oBAAT+gB,OACPd,EAAgBc,KAAKC,UACrBd,EAAYa,KAAK7H,OAErB+G,EAAgBA,GAAiB5b,EAAEoQ,WACnCyL,EAAYA,GAAa7b,EAAEkR,WAG3BlR,EAAW,QAAmBA,EAAEmM,QAChCnM,EAAY,SAAkBA,EAAEwO,SAChCxO,EAAc,WAAgBA,EAAEoQ,WAChCpQ,EAAc,WAAgBA,EAAEkR,WAChClR,EAAe,YAAeA,EAAEwT,YAChCxT,EAAiB,cAAaA,EAAEyO,cAChCzO,EAAQ,KAAsBA,EAAEyZ,KAChCzZ,EAAQ,KAAU,OAAYA,EAAEyZ,KAAKkB,OACrC3a,EAAQ,KAAW,QAAWA,EAAEyZ,KAAKW,QACrCpa,EAAQ,KAAkB,eAAIA,EAAEyZ,KAAKc,eACrCva,EAAQ,KAAc,WAAQA,EAAEyZ,KAAKoB,WAiMrC,IAAI+B,GAAY,CACZC,mBAAoB,GAEpBC,wBAAyB,SAASf,GAC9B,GAAIA,EAAGgB,uBACH,OAAOhB,EAAGgB,uBAEV,GACIhB,EAAKA,EAAGiB,sBACHjB,IAAOE,EAAcF,IAC9B,OAAOA,GAIfkB,YAAa,SAASC,EAAiBtP,GACnC,IAAIuP,EAAYvT,SAASwT,cAAc,UACvCD,EAAUxY,KAAO,kBACjBwY,EAAUE,IAAMH,EAChBC,EAAUG,OAAS1P,EAEnB,IAAI2P,EAAU3T,SAASsO,qBAAqB,UACxCqF,EAAQpY,OAAS,EACjBoY,EAAQ,GAAGhB,WAAWiB,aAAaL,EAAWI,EAAQ,IAEtD3T,SAAS6T,KAAKC,YAAYP,IAIlCQ,0BAA2B,SAAStF,GAChC,IAAIuF,EAAQ,CACR,QAAW9B,EAAazD,GAAMzD,MAAM,KACpC,SAAYyD,EAAKI,QAAQ3W,eAGzBua,EAAmBhE,IACnBrY,EAAEkM,KAAKmM,EAAKnY,YAAY,SAAS2d,GACzBpB,GAAiBoB,EAAKliB,SACtBiiB,EAAM,SAAWC,EAAK5iB,MAAQ4iB,EAAKliB,UAQ/C,IAHA,IAAImiB,EAAW,EACXC,EAAY,EACZC,EAAc3F,EACX2F,EAAchd,KAAK8b,wBAAwBkB,IAC9CF,IACIE,EAAYvF,UAAYJ,EAAKI,SAC7BsF,IAMR,OAHAH,EAAiB,UAAIE,EACrBF,EAAmB,YAAIG,EAEhBH,GAGXK,sBAAuB,SAASC,GAC5B,MAAO,CACH,YAAeA,EACf,YAAe,EACf,MAASjU,OAAOxM,SAAS0gB,KACzB,UAAalU,OAAOxM,SAAS2gB,WAIrCC,4BAA6B,SAASC,GAClC,IAAIC,EAAa,GAcjB,OAbAve,EAAEkM,KAAKtC,SAAS4U,iBAAiBF,EAA6B,eAAI,SAASG,GACvE,IAAI9iB,EAEA,CAAC,QAAS,UAAU4P,QAAQkT,EAAYhG,QAAQ3W,gBAAkB,EAClEnG,EAAQ8iB,EAAmB,MACpBA,EAAyB,cAChC9iB,EAAQ8iB,EAAyB,aAGjChC,GAAiB9gB,IACjB4iB,EAAWrZ,KAAKvJ,MAGjB4iB,EAAWtN,KAAK,OAG3ByN,qBAAsB,SAASC,GAC3B,IAAIf,EAAQ,GAWZ,OAVA5d,EAAEkM,KAAKlL,KAAK4d,mBAAmB,SAASN,GACpCte,EAAEkM,KAAKoS,EAAgC,iBAAG,SAASO,GAC/C,IAAIC,EAAgBlV,SAAS4U,iBAAiBK,GAC9C7e,EAAEkM,KAAK4S,GAAe,SAASC,GACvB/e,EAAEkO,SAASyQ,EAAmBI,IAAiB1C,EAAmB0C,KAClEnB,EAAMU,EAAqB,MAAKtd,KAAKqd,4BAA4BC,MAEtEtd,QACJA,QACJA,MACI4c,GAGXoB,gBAAiB,SAASpP,GAEtB,YAAwB,IAAbA,EAAEhS,OACFgS,EAAEqP,WAEFrP,EAAEhS,QAIjBshB,YAAa,SAAStP,EAAGuP,GAErB,IApRapD,EACbqD,EAmRIxhB,EAASoD,KAAKge,gBAAgBpP,GAKlC,GAJIwM,EAAWxe,KACXA,EAASA,EAAO2e,YA3N5B,SAA6BR,EAAI1Z,GAC7B,IAAK0Z,GAAMG,EAAMH,EAAI,UAAYE,EAAcF,GAC3C,OAAO,EAGX,OADUA,EAAGtD,QAAQ3W,eAEjB,IAAK,OACD,OAAO,EACX,IAAK,OACD,MAAsB,WAAfO,EAAMsC,KACjB,IAAK,QACD,OAA+D,IAA3D,CAAC,SAAU,UAAU4G,QAAQwQ,EAAGzC,aAAa,SACvB,WAAfjX,EAAMsC,KAES,UAAftC,EAAMsC,KAErB,IAAK,SACL,IAAK,WACD,MAAsB,WAAftC,EAAMsC,KACjB,QACI,MAAsB,UAAftC,EAAMsC,MA0Mb0a,CAAoBzhB,EAAQgS,GAAI,CAGhC,IAFA,IAAI+O,EAAoB,CAAC/gB,GACrB0e,EAAQ1e,EACL0e,EAAMC,aAAeL,EAAMI,EAAO,SACrCqC,EAAkBzZ,KAAKoX,EAAMC,YAC7BD,EAAQA,EAAMC,WAGlB,IACIzB,EA2BAwE,EA5BAC,EAAe,GACTC,GAAkB,EAoB5B,GAnBAxf,EAAEkM,KAAKyS,GAAmB,SAAS5C,GAC/B,IAAI0D,EAAgBpD,EAAmBN,GAIN,MAA7BA,EAAGtD,QAAQ3W,gBACXgZ,EAAOiB,EAAGzC,aAAa,QACvBwB,EAAO2E,GAAiBhD,GAAiB3B,IAASA,GAItD,IAAI0B,EAAUV,EAAaC,GAAInH,MAAM,KACjC5U,EAAEkO,SAASsO,EAAS,iBACpBgD,GAAkB,GAGtBD,EAAara,KAAKlE,KAAK2c,0BAA0B5B,MAClD/a,MAECwe,EACA,OAAO,EAOX,IAAIE,GA7TRN,EAAS,GAET/C,EAHaN,EA8TyBne,IA3TZme,EAAG4D,YAAc5D,EAAG4D,WAAWxa,QACzDnF,EAAEkM,KAAK6P,EAAG4D,YAAY,SAASC,GACvBxD,EAAWwD,IAAUA,EAAMC,cAC3BT,GAAUpf,EAAE6L,KAAK+T,EAAMC,aAElBjL,MAAM,SAASkL,OAAOrD,IAAkBxL,KAAK,IAE7ClP,QAAQ,UAAW,KAAKA,QAAQ,QAAS,KAEzC6Q,UAAU,EAAG,SAKvB5S,EAAE6L,KAAKuT,IA8SFM,GAAmBA,EAAgBva,SACnCma,EAAcI,GAGlB,IAAI9B,EAAQ5d,EAAEmN,OACVnM,KAAKid,sBAAsBrO,EAAEjL,MAC7B,CACI,UAAc4a,EACd,eAAkBzE,EAClB,SAAYwE,GAEhBte,KAAK0d,qBAAqBC,IAI9B,OADAQ,EAASvc,MAAM,aAAcgb,IACtB,IAMfmC,UAAW,SAASjF,GAChB7Q,OAAOxM,SAASqd,KAAOA,GAG3BkF,qBAAsB,SAASb,GAC3B,IAAI5X,EAAUvH,EAAE9D,MAAK,SAAS0T,GAC1BA,EAAIA,GAAK3F,OAAO5H,MAChBrB,KAAKke,YAAYtP,EAAGuP,KACrBne,MACHhB,EAAE6W,eAAejN,SAAU,SAAUrC,GAAS,GAAO,GACrDvH,EAAE6W,eAAejN,SAAU,SAAUrC,GAAS,GAAO,GACrDvH,EAAE6W,eAAejN,SAAU,QAASrC,GAAS,GAAO,IAGxDqX,kBAAmB,GACnB5a,KAAM,SAASmb,GACX,GAAMvV,UAAYA,SAAS6T,KAA3B,CAOA,IAAI/U,EAAQyW,EAASc,WAAW,SAChC,GAAIjf,KAAK6b,mBAAmBtR,QAAQ7C,IAAU,EAC1ClD,QAAQwG,IAAI,4CAA8CtD,EAAQ,UAKtE,GAFA1H,KAAK6b,mBAAmB3X,KAAKwD,IAExB1H,KAAKkf,iBAAiBf,GAAW,CAClC,IAAIgB,EAAsBngB,EAAE9D,MAAK,SAASkkB,GAClCA,GAAYA,EAAiB,SAAyD,IAApDA,EAAiB,OAA6B,2BAE5EA,EAA4B,oBAC5Bpf,KAAK4d,kBAAoBwB,EAA4B,mBAGzDjB,EAASvc,MAAM,aAAc5C,EAAEmN,OAAO,CAClC,OAAUvD,SAASyW,OACpBrf,KAAKid,sBAAsB,cAE9Bjd,KAAKgf,qBAAqBb,IAG1BA,EAA8B,qBAAI,IAEvCne,MAEHme,EAASmB,cACLnB,EAASc,WAAW,YAAc,WAAY,CAC1C,SAAW,EACX,QAAW,IACX,IAAO,MACP,MAASvX,GAEb,CAAC6X,OAAQ,MAAOC,UAAW,OAC3BrB,EAASsB,kBAAkBN,SAzCnC,CACI3a,QAAQwG,IAAI,+DACZ,IAAIvH,EAAOzD,KACX0f,YAAW,WAAajc,EAAKT,KAAKmb,KAAc,OA2CxDwB,sBAAuB,SAASxB,EAAU7K,GACtC,IAAIsM,EACJ,IACI,IAAI5a,EAAQhG,EAAEqU,aAAaC,EAAM,SACjCtO,EAAQ0W,KAAK7H,MAAMT,mBAAmBpO,IACtC,IAAI6a,EAAmB7gB,EAAEqU,aAAaC,EAAM,cAC5CsM,EAAe,CACX,YAAe5gB,EAAEqU,aAAaC,EAAM,gBACpC,sBAAwB,IAAKpF,MAAQyG,UAAwC,IAA3B7R,OAAO+c,GACzD,kBAAqB7a,EAAuB,gBAC5C,UAAaA,EAAiB,UAC9B,eAAkBA,EAAsB,eACxC,aAAgBA,EAAa,MAC7B,SAAYA,EAAgB,SAC5B,UAAaA,EAAiB,UAC9B,OAAUA,EAAc,QAE5BiE,OAAO6W,eAAevK,QAAQ,eAAgBmG,KAAKC,UAAUiE,IAEzD5a,EAAmB,YACnBiE,OAAOxM,SAAS6W,KAAOtO,EAAmB,YACnCiE,OAAO8W,QACdA,QAAQC,aAAa,GAAIpX,SAASyW,MAAOpW,OAAOxM,SAAS2gB,SAAWnU,OAAOxM,SAASwc,QAEpFhQ,OAAOxM,SAAS6W,KAAO,GAE7B,MAAO1E,GACLpK,QAAQ2B,MAAM,iCAAkCyI,GAEpD,OAAOgR,GASXV,iBAAkB,SAASf,GACvB,IACI,IAAI8B,GAAe,EACnB,GAAIjhB,EAAEqU,aAAapK,OAAOxM,SAAS6W,KAAM,SAAU,CAC/C,IAAItO,EAAQhG,EAAEqU,aAAapK,OAAOxM,SAAS6W,KAAM,SAEjD2M,EAAmC,cADnCjb,EAAQ0W,KAAK7H,MAAMT,mBAAmBpO,KACT,OAEjC,IACI4a,EADAM,IAAqBjX,OAAO6W,eAAetK,QAAQ,aAYvD,OATIyK,EACAL,EAAe5f,KAAK2f,sBAAsBxB,EAAUlV,OAAOxM,SAAS6W,MAC7D4M,GACPN,EAAe5f,KAAK2f,sBAAsBxB,EAAUlV,OAAO6W,eAAetK,QAAQ,cAClFvM,OAAO6W,eAAerK,WAAW,cAEjCmK,EAAelE,KAAK7H,MAAM5K,OAAO6W,eAAetK,QAAQ,iBAAmB,SAG3EoK,EAA2B,cAAKzB,EAASc,WAAW,WAAaW,EAA2B,gBAC5F5f,KAAKmgB,YAAYhC,EAAUyB,IACpB,GAIb,MAAOhR,GACL,OAAO,IAIfuR,YAAa,SAAShC,EAAUyB,GAC5B,IAAK3W,OAAwB,gBAAG,CAC5BA,OAAwB,iBAAI,EAC5B,IAAImX,EAAYjC,EAASc,WAAW,YAChC,wDACA,IAAK/Q,MAAQyG,UAIjB,OAHA3U,KAAKic,YAAYmE,GAAW,WACxBnX,OAAuB,eAAE2W,OAEtB,EAEX,OAAO,GAQXS,kBAAmB,SAAS3Y,EAAO4Y,EAAYC,GAC3CD,EAActhB,EAAEiM,YAAYqV,GAA2B,GAAbA,EAC1CC,EAAqBvhB,EAAEiM,YAAYsV,GAAyC,GAApBA,EAExD,IADA,IAAIC,EAAc,EACT9mB,EAAI,EAAGA,EAAIgO,EAAMvD,OAAQzK,IAC9B8mB,GAAe9Y,EAAMiI,WAAWjW,GAEpC,OAAQ8mB,EAAcF,EAAcC,GAGxCE,mBAAoB,WAChB,OAAOzhB,EAAE0M,WAAW9C,SAAS4U,oBAIrCxe,EAAE8M,sBAAsB8P,IACxB5c,EAAEgQ,0BAA0B4M,IAM5B,IAAI8E,GAAa,aAIjBA,GAAWplB,UAAUqlB,kBAAoB,aACzCD,GAAWplB,UAAUslB,cAAgB,aACrCF,GAAWplB,UAAUulB,oBAAsB,aAE3CH,GAAWplB,UAAU0H,KAAO,SAAS8d,GAEjC,OADA9gB,KAAK+gB,GAAKD,EACH9gB,MASX0gB,GAAWplB,UAAUsG,MAAQ,SAAS4W,EAAOwI,EAAYnH,EAAYoH,GACjE,IAAIxd,EAAOzD,KACP2X,EAAW3Y,EAAE+X,UAAUyB,GAE3B,GAAwB,IAApBb,EAASxT,OAqBb,OAhBAnF,EAAEkM,KAAKyM,GAAU,SAASxB,GACtBnX,EAAE6W,eAAeM,EAASnW,KAAKkhB,gBAAgB,SAAStS,GACpD,IAAIjH,EAAU,GACViV,EAAQnZ,EAAKkd,kBAAkB9G,EAAY7Z,MAC3CmhB,EAAU1d,EAAKsd,GAAG9B,WAAW,uBAEjCxb,EAAKmd,cAAchS,EAAG5O,KAAM2H,GAG5BsB,OAAOyW,WAAWjc,EAAK2d,eAAeH,EAAerE,EAAOjV,GAAS,GAAOwZ,GAG5E1d,EAAKsd,GAAGnf,MAAMof,EAAYpE,EAAOnZ,EAAK2d,eAAeH,EAAerE,EAAOjV,SAEhF3H,OAEI,EApBH+K,EAAU5E,MAAM,kBAAoBqS,EAAQ,0BA4BpDkI,GAAWplB,UAAU8lB,eAAiB,SAASH,EAAerE,EAAOjV,EAAS0Z,GAC1EA,EAAkBA,IAAmB,EACrC,IAAI5d,EAAOzD,KAEX,OAAO,WAGC2H,EAAQ2Z,iBACZ3Z,EAAQ2Z,gBAAiB,EAErBL,IAA2D,IAA1CA,EAAcI,EAAiBzE,IAMpDnZ,EAAKod,oBAAoBjE,EAAOjV,EAAS0Z,MAIjDX,GAAWplB,UAAUqlB,kBAAoB,SAAS9G,EAAY1D,GAS1D,MAN2B,mBAAjB,EACE0D,EAAW1D,GAEXnX,EAAEmN,OAAO,GAAI0N,IAW7B,IAAI0H,GAAc,WACdvhB,KAAKkhB,eAAiB,SAE1BliB,EAAEoO,QAAQmU,GAAab,IAEvBa,GAAYjmB,UAAUqlB,kBAAoB,SAAS9G,EAAY1D,GAC3D,IAAIyG,EAAQ2E,GAAYjU,WAAWqT,kBAAkBte,MAAMrC,KAAM8E,WAIjE,OAFIqR,EAAQ2D,OAAQ8C,EAAW,IAAIzG,EAAQ2D,MAEpC8C,GAGX2E,GAAYjmB,UAAUslB,cAAgB,SAASY,EAAKrL,EAASxO,GACzDA,EAAQ8Z,QACU,IAAdD,EAAIE,OACJF,EAAIG,SACJH,EAAII,SACe,WAAnBzL,EAAQvZ,OAEZ+K,EAAQmS,KAAO3D,EAAQ2D,KAElBnS,EAAQ8Z,SACTD,EAAIzL,kBAIZwL,GAAYjmB,UAAUulB,oBAAsB,SAASjE,EAAOjV,GACpDA,EAAQ8Z,SAEZ/B,YAAW,WACPzW,OAAOxM,SAAWkL,EAAQmS,OAC3B,IAQP,IAAI+H,GAAc,WACd7hB,KAAKkhB,eAAiB,UAE1BliB,EAAEoO,QAAQyU,GAAanB,IAEvBmB,GAAYvmB,UAAUslB,cAAgB,SAASY,EAAKrL,EAASxO,GACzDA,EAAQwO,QAAUA,EAClBqL,EAAIzL,kBAGR8L,GAAYvmB,UAAUulB,oBAAsB,SAASjE,EAAOjV,GACxD+X,YAAW,WACP/X,EAAQwO,QAAQ2L,WACjB,IAKP,IAAIC,GAAWvW,EAAoB,QAsB/BwW,GAAa,SAAS/mB,EAAK0M,GAC3BA,EAAUA,GAAW,GAErB3H,KAAKiiB,WAAahnB,EAClB+E,KAAKkV,QAAUvN,EAAQuN,SAAWjM,OAAOoM,aACzCrV,KAAKkiB,eAAiBva,EAAQua,gBAAkB,IAChDliB,KAAKmiB,UAAYxa,EAAQwa,WAAa,KAK1CH,GAAW1mB,UAAU8mB,SAAW,SAASC,EAAUC,EAASC,GACnDA,GAA0B,mBAAZD,IACfC,EAAMD,EACNA,EAAU,MAGd,IAAI5oB,EAAI6oB,IAAQ,IAAIrU,MAAOyG,UAAY,IAAM5C,KAAKC,SAC9CwQ,GAAY,IAAItU,MAAOyG,UAEvB1Z,EAAM+E,KAAKiiB,WACXC,EAAiBliB,KAAKkiB,eACtBC,EAAYniB,KAAKmiB,UACjBjN,EAAUlV,KAAKkV,QAEfuN,EAAOxnB,EAAM,KACbynB,EAAOznB,EAAM,KACb0nB,EAAO1nB,EAAM,KAEb2nB,EAAc,SAASvc,GACvBic,GAAWA,EAAQjc,IAGnBwc,EAAQ,SAASC,GACjB,IAAI,IAAI5U,MAAOyG,UAAY6N,EAAYL,EAKnC,OAJAJ,GAAS5b,MAAM,gCAAkClL,EAAM,qBAAuBvB,EAAI,KAClFwb,EAAQO,WAAWkN,GACnBzN,EAAQO,WAAWiN,QACnBK,IAGJrD,YAAW,WACP,IACIoD,IACF,MAAMzc,GACJuc,EAAYvc,MAEjB6b,GAAkBnQ,KAAKC,SAAW,MAGrCgR,EAAU,SAASC,EAAWH,GAC1BG,IACAH,IAEAD,GAAM,WACFG,EAAQC,EAAWH,OAK3BI,EAAU,WACV,IAAIC,EAAOjO,EAAQM,QAAQkN,GAC3B,GAAIS,GAAQA,IAASzpB,EACjB,OAAO,EAGP,GADAwb,EAAQK,QAAQmN,EAAMhpB,GAClBwb,EAAQM,QAAQkN,KAAUhpB,EAC1B,OAAO,EAEP,IAAKub,EAAsBC,GAAS,GAChC,MAAM,IAAI5Q,MAAM,qDAEpB,OAAO,GAKfye,EAAO,WACP7N,EAAQK,QAAQkN,EAAM/oB,GAEtBspB,EAAQE,GAAS,WACThO,EAAQM,QAAQiN,KAAU/oB,EAK9BmpB,GAAM,WACE3N,EAAQM,QAAQkN,KAAUhpB,EAI9BspB,GAAQ,WACJ,OAAQ9N,EAAQM,QAAQmN,KACzBS,GALCL,OANJK,QAgBRA,EAAkB,WAClBlO,EAAQK,QAAQoN,EAAM,KACtB,IACIN,IACF,QACEnN,EAAQO,WAAWkN,GACfzN,EAAQM,QAAQkN,KAAUhpB,GAC1Bwb,EAAQO,WAAWiN,GAEnBxN,EAAQM,QAAQiN,KAAU/oB,GAC1Bwb,EAAQO,WAAWgN,KAK/B,IACI,IAAIxN,EAAsBC,GAAS,GAG/B,MAAM,IAAI5Q,MAAM,qCAFhBye,IAIN,MAAM1c,GACJuc,EAAYvc,KAMpB,IAAIgd,GAAW7X,EAAoB,SAkB/B8X,GAAe,SAASrB,EAAYta,GACpCA,EAAUA,GAAW,GACrB3H,KAAKiiB,WAAaA,EAClBjiB,KAAKkV,QAAUvN,EAAQuN,SAAWjM,OAAOoM,aACzCrV,KAAKujB,KAAO,IAAIvB,GAAWC,EAAY,CAAC/M,QAASlV,KAAKkV,UAEtDlV,KAAKuiB,IAAM5a,EAAQ4a,KAAO,KAE1BviB,KAAKwjB,SAAW,IAepBF,GAAahoB,UAAUmoB,QAAU,SAAS3W,EAAM4W,EAAeZ,GAC3D,IAAIa,EAAa,CACb,GAAMrO,IACN,YAAc,IAAIpH,MAAOyG,UAA4B,EAAhB+O,EACrC,QAAW5W,GAGf9M,KAAKujB,KAAKnB,SAASpjB,EAAE9D,MAAK,WACtB,IAAI0oB,EACJ,IACI,IAAIC,EAAc7jB,KAAK8jB,kBACvBD,EAAY3f,KAAKyf,IACjBC,EAAY5jB,KAAK+jB,cAAcF,KAG3B7jB,KAAKwjB,SAAStf,KAAKyf,GAEzB,MAAMtd,GACJgd,GAASld,MAAM,wBAAyB2G,GACxC8W,GAAY,EAEZd,GACAA,EAAGc,KAER5jB,OAAO,SAAqBqG,GAC3Bgd,GAASld,MAAM,+BAAgCE,GAC3Cyc,GACAA,GAAG,KAER9iB,KAAKuiB,MASZe,GAAahoB,UAAU0oB,UAAY,SAASC,GACxC,IAAIC,EAAQlkB,KAAKwjB,SAAS3Z,MAAM,EAAGoa,GACnC,GAAIC,EAAM/f,OAAS8f,EAAW,CAI1B,IAAIJ,EAAc7jB,KAAK8jB,kBACvB,GAAID,EAAY1f,OAAQ,CAEpB,IAAIggB,EAAa,GACjBnlB,EAAEkM,KAAKgZ,GAAO,SAASpX,GAAQqX,EAAWrX,EAAS,KAAK,KAExD,IAAK,IAAIpT,EAAI,EAAGA,EAAImqB,EAAY1f,OAAQzK,IAAK,CACzC,IAAIoT,EAAO+W,EAAYnqB,GACvB,IAAI,IAAIwU,MAAOyG,UAAY7H,EAAiB,aAAMqX,EAAWrX,EAAS,MAClEoX,EAAMhgB,KAAK4I,GACPoX,EAAM/f,QAAU8f,GAChB,QAMpB,OAAOC,GAQX,IAAIE,GAAyB,SAASC,EAAOC,GACzC,IAAIC,EAAgB,GAMpB,OALAvlB,EAAEkM,KAAKmZ,GAAO,SAASvX,GACfA,EAAS,KAAMwX,EAAMxX,EAAS,KAC9ByX,EAAcrgB,KAAK4I,MAGpByX,GAOXjB,GAAahoB,UAAUkpB,gBAAkB,SAASC,EAAK3B,GACnD,IAAIwB,EAAQ,GACZtlB,EAAEkM,KAAKuZ,GAAK,SAAS9oB,GAAM2oB,EAAM3oB,IAAM,KAEvCqE,KAAKwjB,SAAWY,GAAuBpkB,KAAKwjB,SAAUc,GACtDtkB,KAAKujB,KAAKnB,SAASpjB,EAAE9D,MAAK,WACtB,IAAI0oB,EACJ,IACI,IAAIC,EAAc7jB,KAAK8jB,kBACvBD,EAAcO,GAAuBP,EAAaS,GAClDV,EAAY5jB,KAAK+jB,cAAcF,GACjC,MAAMxd,GACJgd,GAASld,MAAM,uBAAwBse,GACvCb,GAAY,EAEZd,GACAA,EAAGc,KAER5jB,OAAO,SAAqBqG,GAC3Bgd,GAASld,MAAM,+BAAgCE,GAC3Cyc,GACAA,GAAG,KAER9iB,KAAKuiB,MAOZe,GAAahoB,UAAUwoB,gBAAkB,WACrC,IAAIY,EACJ,KACIA,EAAe1kB,KAAKkV,QAAQM,QAAQxV,KAAKiiB,eAErCyC,EAAe7J,EAAU6J,GACpB1lB,EAAE2L,QAAQ+Z,KACXrB,GAASld,MAAM,yBAA0Bue,GACzCA,EAAe,OAGzB,MAAOre,GACLgd,GAASld,MAAM,yBAA0BE,GACzCqe,EAAe,KAEnB,OAAOA,GAAgB,IAM3BpB,GAAahoB,UAAUyoB,cAAgB,SAASY,GAC5C,IAEI,OADA3kB,KAAKkV,QAAQK,QAAQvV,KAAKiiB,WAAYrH,EAAc+J,KAC7C,EACT,MAAOte,GAEL,OADAgd,GAASld,MAAM,qBAAsBE,IAC9B,IAOfid,GAAahoB,UAAUspB,MAAQ,WAC3B5kB,KAAKwjB,SAAW,GAChBxjB,KAAKkV,QAAQO,WAAWzV,KAAKiiB,aAMjC,IAEI4C,GAASrZ,EAAoB,SAQ7BsZ,GAAiB,SAAS7C,EAAY8C,EAAUpd,GAChD3H,KAAK2kB,MAAQ,IAAIrB,GAAarB,EAAY,CAAC/M,QAASvN,EAAQuN,UAC5DlV,KAAK+kB,SAAWA,EAEhB/kB,KAAKglB,UAAYrd,EAAQqd,UACzBhlB,KAAKilB,YAActd,EAAQud,gBAG3BllB,KAAKikB,UAAYjkB,KAAKglB,UAAsB,WAC5ChlB,KAAK0jB,cAAgB1jB,KAAKglB,UAAmC,wBAE7DhlB,KAAKmlB,SAAU,GAMnBL,GAAexpB,UAAUmoB,QAAU,SAAS3W,EAAMgW,GAC9C9iB,KAAK2kB,MAAMlB,QAAQ3W,EAAM9M,KAAK0jB,cAAeZ,IAOjDgC,GAAexpB,UAAUiW,MAAQ,WAC7BvR,KAAKmlB,SAAU,EACfnlB,KAAKolB,SAMTN,GAAexpB,UAAU+pB,KAAO,WAC5BrlB,KAAKmlB,SAAU,EACXnlB,KAAKslB,YACLC,aAAavlB,KAAKslB,WAClBtlB,KAAKslB,UAAY,OAOzBR,GAAexpB,UAAUspB,MAAQ,WAC7B5kB,KAAK2kB,MAAMC,SAMfE,GAAexpB,UAAUkqB,eAAiB,WACtCxlB,KAAKikB,UAAYjkB,KAAKglB,UAAsB,YAMhDF,GAAexpB,UAAUmqB,WAAa,WAClCzlB,KAAK0lB,cAAc1lB,KAAKglB,UAAmC,0BAM/DF,GAAexpB,UAAUoqB,cAAgB,SAASC,GAC9C3lB,KAAK0jB,cAAgBiC,EAChB3lB,KAAKmlB,UACNnlB,KAAKslB,UAAY5F,WAAW1gB,EAAE9D,KAAK8E,KAAKolB,MAAOplB,MAAOA,KAAK0jB,iBAcnEoB,GAAexpB,UAAU8pB,MAAQ,SAASzd,GACtC,IAEI,GAAI3H,KAAK4lB,kBAEL,YADAf,GAAO7Z,IAAI,sCAIfrD,EAAUA,GAAW,GACrB,IAAIke,EAAmB7lB,KAAKikB,UACxBC,EAAQlkB,KAAK2kB,MAAMX,UAAU6B,GACjC,GAAI3B,EAAM/f,OAAS,EAEf,YADAnE,KAAKylB,aAITzlB,KAAK4lB,mBAAoB,EAEzB,IAAIzD,EAAYniB,KAAKglB,UAAoC,yBACrDxC,GAAY,IAAItU,MAAOyG,UACvBmR,EAAiB9mB,EAAEyL,IAAIyZ,GAAO,SAASpX,GAAQ,OAAOA,EAAc,WACpEiZ,EAAoB/mB,EAAE9D,MAAK,SAAS8qB,GACpChmB,KAAK4lB,mBAAoB,EAEzB,IAKI,IAAIK,GAAuB,EAC3B,GACIjnB,EAAEwO,SAASwY,IACG,YAAdA,EAAI7f,QACJ,IAAI+H,MAAOyG,UAAY6N,GAAaL,EAEpC0C,GAAO1e,MAAM,6BACbnG,KAAKolB,aACF,GACHpmB,EAAEwO,SAASwY,IACXA,EAAIE,UACHF,EAAIE,QAAgB,QAAK,KAAOF,EAAIE,QAAgB,QAAK,GAC5D,CAEE,IAAIC,EAA+B,EAArBnmB,KAAK0jB,cACf0C,EAAUJ,EAAIE,QAAyB,gBAC3C,GAAIE,EAAS,CACT,IAAIC,EAAaD,EAAQ,eACrBC,IACAF,EAAsC,IAA3B5V,SAAS8V,EAAY,KAAeF,GAGvDA,EAAUpU,KAAKuU,IA/IP,IA+IkCH,GAC1CtB,GAAO1e,MAAM,mBAAqBggB,EAAU,OAC5CnmB,KAAK0lB,cAAcS,QAChB,GAAInnB,EAAEwO,SAASwY,IAAQA,EAAIE,SAAqC,MAA1BF,EAAIE,QAAgB,OAE7D,GAAIhC,EAAM/f,OAAS,EAAG,CAClB,IAAIoiB,EAAkBxU,KAAKyU,IAAI,EAAGzU,KAAK0U,MAAMZ,EAAmB,IAChE7lB,KAAKikB,UAAYlS,KAAKuU,IAAItmB,KAAKikB,UAAWsC,EAAiBrC,EAAM/f,OAAS,GAC1E0gB,GAAO1e,MAAM,wCAA0CnG,KAAKikB,WAC5DjkB,KAAKylB,kBAELZ,GAAO1e,MAAM,2CAA4C+d,GACzDlkB,KAAKwlB,iBACLS,GAAuB,OAK3BA,GAAuB,EAGvBA,GACAjmB,KAAK2kB,MAAMH,gBACPxlB,EAAEyL,IAAIyZ,GAAO,SAASpX,GAAQ,OAAOA,EAAS,MAC9C9N,EAAE9D,KAAK8E,KAAKolB,MAAOplB,OAI7B,MAAMqG,GACJwe,GAAO1e,MAAM,8BAA+BE,GAC5CrG,KAAKylB,gBAEVzlB,MACC0mB,EAAiB,CACjBnH,OAAQ,OACRoH,SAAS,EACTC,oBAAoB,EACpBC,WAAY1E,GAEZxa,EAAQmf,aACRJ,EAAelH,UAAY,cAE/BqF,GAAO7Z,IAAI,oBAAqBhL,KAAK+kB,SAAUe,GAC/C9lB,KAAKilB,YAAYjlB,KAAK+kB,SAAUe,EAAgBY,EAAgBX,GAElE,MAAM1f,GACJwe,GAAO1e,MAAM,+BAAgCE,GAC7CrG,KAAKylB,eA+Bb,SAASsB,GAAMrf,EAAOC,GAClBqf,IAAU,EAAMtf,EAAOC,GAe3B,SAASsf,GAAOvf,EAAOC,GACnBqf,IAAU,EAAOtf,EAAOC,GAW5B,SAASuf,GAAWxf,EAAOC,GACvB,MAA4C,MAArCwf,GAAiBzf,EAAOC,GAYnC,SAASyf,GAAY1f,EAAOC,GACxB,QA2GJ,SAA8BA,GAC1B,GAAIA,GAAWA,EAAQ0f,UACnB,OAAO,EAEX,IAAIC,EAAO3f,GAAWA,EAAQsB,QAAWb,EACrCmf,EAAMD,EAAe,WAAK,GAC1BE,GAAW,EAYf,OAVAxoB,EAAEkM,KAAK,CACHqc,EAAgB,WAChBA,EAAkB,aAClBD,EAAgB,aACjB,SAASG,GACJzoB,EAAEkO,SAAS,EAAC,EAAM,EAAG,IAAK,OAAQua,KAClCD,GAAW,MAIZA,EA7HHE,CAAqB/f,IAGmB,MAArCwf,GAAiBzf,EAAOC,GAUnC,SAASggB,GAA0BpI,GAC/B,OAAOqI,GAAgBrI,GAAQ,SAAStlB,GACpC,OAAO+F,KAAKif,WAAWhlB,MAW/B,SAAS4tB,GAA6BtI,GAClC,OAAOqI,GAAgBrI,GAAQ,SAAStlB,GACpC,OAAO+F,KAAK8nB,YAAY7tB,MAWhC,SAAS8tB,GAA4BxI,GACjC,OAAOqI,GAAgBrI,GAAQ,SAAStlB,GACpC,OAAO+F,KAAK8nB,YAAY7tB,MAgBhC,SAAS+tB,GAActgB,EAAOC,GAE1BsgB,GADAtgB,EAAUA,GAAW,IACAoN,OACjBmT,GAAexgB,EAAOC,KAAYA,EAAQwgB,qBAAsBxgB,EAAQygB,cAYhF,SAASH,GAAYtgB,GAEjB,MAAmC,kBADnCA,EAAUA,GAAW,IACN0gB,gBAAqCrpB,EAAEqW,aAAerW,EAAEyU,OAU3E,SAASyU,GAAexgB,EAAOC,GAE3B,QADAA,EAAUA,GAAW,IACL2gB,mBAjJkB,oBAiJsC5gB,EAU5E,SAASyf,GAAiBzf,EAAOC,GAC7B,OAAOsgB,GAAYtgB,GAASpN,IAAI2tB,GAAexgB,EAAOC,IA8C1D,SAASqf,GAAUuB,EAAU7gB,EAAOC,GAC3B3I,EAAEkN,SAASxE,IAAWA,EAAMvD,QAOjC8jB,GAFAtgB,EAAUA,GAAW,IAEA/B,IACjBsiB,GAAexgB,EAAOC,GACtB4gB,EAAW,EAAI,EACfvpB,EAAE2O,SAAShG,EAAQ6gB,kBAAoB7gB,EAAQ6gB,iBAAmB,OAChE7gB,EAAQwgB,uBACRxgB,EAAQ8gB,eACR9gB,EAAQ+gB,gBACV/gB,EAAQygB,cAGRzgB,EAAQ/F,OAAS2mB,GACjB5gB,EAAQ/F,MAAM+F,EAAQghB,gBAAkB,UAAWhhB,EAAQihB,gBAAiB,CACxE,kBAAoB,KAlBxBpkB,QAAQ2B,MAAM,SAAWoiB,EAAW,QAAU,UAAY,iCA+BlE,SAASX,GAAgBrI,EAAQsJ,GAC7B,OAAO,WACH,IAAIC,GAAW,EAEf,IACI,IAAIphB,EAAQmhB,EAAehvB,KAAKmG,KAAM,SAClCqnB,EAAYwB,EAAehvB,KAAKmG,KAAM,cACtCqoB,EAAkBQ,EAAehvB,KAAKmG,KAAM,qCAC5CsoB,EAAoBO,EAAehvB,KAAKmG,KAAM,kCAC9CsnB,EAAMuB,EAAehvB,KAAKmG,KAAM,UAEhC0H,IACAohB,EAAW1B,GAAY1f,EAAO,CAC1B2f,UAAWA,EACXgB,gBAAiBA,EACjBC,kBAAmBA,EACnBrf,OAAQqe,KAGlB,MAAMjhB,GACJ7B,QAAQ2B,MAAM,2DAA6DE,GAG/E,IAAKyiB,EACD,OAAOvJ,EAAOld,MAAMrC,KAAM8E,WAG9B,IAAI8H,EAAW9H,UAAUA,UAAUX,OAAS,GACnB,mBAAf,GACNyI,EAAS,IAOP,IAWVmc,GAAa,CACbC,WAAY,SAAS3c,EAAM4c,GACvB,IAAIrY,EAAO,GACPsY,EAAO,GAYX,OAXIlqB,EAAEwO,SAASnB,GACXrN,EAAEkM,KAAKmB,GAAM,SAAS0B,EAAGvM,GAChBxB,KAAKmpB,sBAAsB3nB,KAC5B0nB,EAAK1nB,GAAKuM,KAEf/N,MAEHkpB,EAAK7c,GAAQ4c,EAGjBrY,EAAe,KAAIsY,EACZtY,GAGXwY,aAAc,SAAS/c,GACnB,IAAIuE,EAAO,GACPyY,EAAS,GAYb,OAXKrqB,EAAE2L,QAAQ0B,KACXA,EAAO,CAACA,IAGZrN,EAAEkM,KAAKmB,GAAM,SAAS7K,GACbxB,KAAKmpB,sBAAsB3nB,IAC5B6nB,EAAOnlB,KAAK1C,KAEjBxB,MAEH4Q,EAAiB,OAAIyY,EACdzY,GAGX0Y,gBAAiB,SAASjd,EAAM4c,GAC5B,IAAIrY,EAAO,GACP2Y,EAAY,GAWhB,OAVIvqB,EAAEwO,SAASnB,GACXrN,EAAEkM,KAAKmB,GAAM,SAAS0B,EAAGvM,GAChBxB,KAAKmpB,sBAAsB3nB,KAC5B+nB,EAAU/nB,GAAKuM,KAEpB/N,MAEHupB,EAAUld,GAAQ4c,EAEtBrY,EAAoB,UAAI2Y,EACjB3Y,GAGX4Y,aAAc,SAASC,EAAW9c,GAC9B,IAAIiE,EAAO,GACP8Y,EAAS,GAWb,OAVI1qB,EAAEwO,SAASic,GACXzqB,EAAEkM,KAAKue,GAAW,SAAS1b,EAAGvM,GACrBxB,KAAKmpB,sBAAsB3nB,KAC5BkoB,EAAOloB,GAAKxC,EAAE2L,QAAQoD,GAAKA,EAAI,CAACA,MAErC/N,MAEH0pB,EAAOD,GAAazqB,EAAE2L,QAAQgC,GAAUA,EAAS,CAACA,GAEtDiE,EAAiB,OAAI8Y,EACd9Y,GAGX+Y,cAAe,SAASF,EAAW9uB,GAC/B,IAAIiW,EAAO,GACPgZ,EAAU,GAWd,OAVI5qB,EAAEwO,SAASic,GACXzqB,EAAEkM,KAAKue,GAAW,SAAS1b,EAAGvM,GACrBxB,KAAKmpB,sBAAsB3nB,KAC5BooB,EAAQpoB,GAAKuM,KAElB/N,MAEH4pB,EAAQH,GAAa9uB,EAEzBiW,EAAkB,QAAIgZ,EACfhZ,GAGXiZ,cAAe,SAASJ,EAAW9uB,GAC/B,IAAIiW,EAAO,GACPkZ,EAAU,GAWd,OAVI9qB,EAAEwO,SAASic,GACXzqB,EAAEkM,KAAKue,GAAW,SAAS1b,EAAGvM,GACrBxB,KAAKmpB,sBAAsB3nB,KAC5BsoB,EAAQtoB,GAAKuM,KAElB/N,MAEH8pB,EAAQL,GAAa9uB,EAEzBiW,EAAkB,QAAIkZ,EACflZ,GAGXmZ,cAAe,WACX,IAAInZ,EAAO,CACX,QAAsB,IACtB,OAAOA,IAQXoZ,GAAgB,aAEpBhrB,EAAEmN,OAAO6d,GAAc1uB,UAAWytB,IAElCiB,GAAc1uB,UAAU2uB,MAAQ,SAASnJ,EAAmBoJ,EAAWC,GACnEnqB,KAAKoqB,UAAYtJ,EACjB9gB,KAAKqqB,WAAaH,EAClBlqB,KAAKsqB,UAAYH,GAqBrBH,GAAc1uB,UAAUsK,IAAMmiB,IAA4B,SAAS1b,EAAM4c,EAAIrc,GACzE,IAAIgE,EAAO5Q,KAAKgpB,WAAW3c,EAAM4c,GAIjC,OAHIjqB,EAAEwO,SAASnB,KACXO,EAAWqc,GAERjpB,KAAKsf,cAAc1O,EAAMhE,MAuBpCod,GAAc1uB,UAAUivB,SAAWxC,IAA4B,SAAS1b,EAAM4c,EAAIrc,GAC9E,IAAIgE,EAAO5Q,KAAKspB,gBAAgBjd,EAAM4c,GAItC,OAHIjqB,EAAEwO,SAASnB,KACXO,EAAWqc,GAERjpB,KAAKsf,cAAc1O,EAAMhE,MAapCod,GAAc1uB,UAAUkvB,MAAQzC,IAA4B,SAAS1b,EAAMO,GACvE,IAAIgE,EAAO5Q,KAAKopB,aAAa/c,GAC7B,OAAOrM,KAAKsf,cAAc1O,EAAMhE,MAepCod,GAAc1uB,UAAUmvB,MAAQ1C,IAA4B,SAAS0B,EAAW9c,EAAQC,GAChF5N,EAAEwO,SAASic,KACX7c,EAAWD,GAEf,IAAIiE,EAAO5Q,KAAKwpB,aAAaC,EAAW9c,GACxC,OAAO3M,KAAKsf,cAAc1O,EAAMhE,MASpCod,GAAc1uB,UAAkB,OAAIysB,IAA4B,SAASnb,GACrE,IAAIgE,EAAO5Q,KAAK+pB,gBAChB,OAAO/pB,KAAKsf,cAAc1O,EAAMhE,MAcpCod,GAAc1uB,UAAUyZ,OAASgT,IAA4B,SAAS0B,EAAW9uB,EAAOiS,GACpF,IAAIgE,EAAO5Q,KAAK6pB,cAAcJ,EAAW9uB,GACzC,OAAOqF,KAAKsf,cAAc1O,EAAMhE,MAGpCod,GAAc1uB,UAAUgkB,cAAgB,SAAS1O,EAAMhE,GACnDgE,EAAiB,WAAI5Q,KAAKqqB,WAC1BzZ,EAAgB,UAAI5Q,KAAKsqB,UACzB1Z,EAAa,OAAI5Q,KAAK8nB,YAAY,SAElC,IAAI4C,EAAoB1rB,EAAE8O,YAAY8C,GACtC,OAAO5Q,KAAKoqB,UAAUO,gBAAgB,CAClCC,eAAgB5rB,EAAEkQ,SAASwb,EAAmB,KAC9C3F,SAAU/kB,KAAK8nB,YAAY,YAAc,WACzC+C,QAAS7qB,KAAKoqB,UAAUU,iBAAiBC,QAC1Cne,IAGPod,GAAc1uB,UAAU6tB,sBAAwB,SAAS9c,GACrD,MAAgB,eAATA,GAAkC,cAATA,GAGpC2d,GAAc1uB,UAAUwsB,YAAc,SAASkD,GAC3C,OAAOhrB,KAAKoqB,UAAUnL,WAAW+L,IAGrChB,GAAc1uB,UAAUwO,SAAW,WAC/B,OAAO9J,KAAKoqB,UAAUtgB,WAAa,UAAY9J,KAAKqqB,WAAa,IAAMrqB,KAAKsqB,WAIhFN,GAAc1uB,UAAkB,OAAM0uB,GAAc1uB,UAAUyZ,OAC9DiV,GAAc1uB,UAAe,IAAS0uB,GAAc1uB,UAAUsK,IAC9DokB,GAAc1uB,UAAoB,SAAI0uB,GAAc1uB,UAAUivB,SAC9DP,GAAc1uB,UAAiB,MAAO0uB,GAAc1uB,UAAUmvB,MAC9DT,GAAc1uB,UAAiB,MAAO0uB,GAAc1uB,UAAUkvB,MAC9DR,GAAc1uB,UAAoB,SAAI0uB,GAAc1uB,UAAUwO,SAKhD,IAYImhB,GAAsB,CAZG,QACA,SACA,SACA,QACA,SACA,QACA,QAEA,sBACA,UACA,UACA,YAmBvCC,GAAsB,SAASC,GAC/BnrB,KAAY,MAAI,GAChBA,KAAKorB,uBAAwB,EAEzBD,EAAyB,iBACzBnrB,KAAK/F,KAAO,MAAQkxB,EAAyB,iBAE7CnrB,KAAK/F,KAAO,MAAQkxB,EAAc,MAAI,YAG1C,IAAIE,EAAeF,EAAoB,YAClB,WAAjBE,GAA8C,iBAAjBA,IAC7BtgB,EAAUK,SAAS,4BAA8BigB,EAAe,4BAChEA,EAAeF,EAAoB,YAAI,UAGtB,iBAAjBE,GAAmCrsB,EAAEqW,aAAaK,eAClD1V,KAAKkV,QAAUlW,EAAEqW,aAEjBrV,KAAKkV,QAAUlW,EAAEyU,OAGrBzT,KAAKsrB,OACLtrB,KAAKurB,cAAcJ,GACnBnrB,KAAKwrB,QAAQL,GACbnrB,KAAKyrB,QAGTP,GAAoB5vB,UAAUue,WAAa,WACvC,IAAIre,EAAI,GAOR,OALAwD,EAAEkM,KAAKlL,KAAY,OAAG,SAAS+N,EAAGvM,GACzBxC,EAAEgO,QAAQie,GAAqBzpB,KAChChG,EAAEgG,GAAKuM,MAGRvS,GAGX0vB,GAAoB5vB,UAAUgwB,KAAO,WACjC,IAAItrB,KAAK0rB,SAAT,CAEA,IAAIC,EAAQ3rB,KAAKkV,QAAQrB,MAAM7T,KAAK/F,MAEhC0xB,IACA3rB,KAAY,MAAIhB,EAAEmN,OAAO,GAAIwf,MAIrCT,GAAoB5vB,UAAUkwB,QAAU,SAASL,GAC7C,IACIS,EACAC,EAFAC,EAAuBX,EAAgB,QAIvCW,IACAF,EAAkB,sBAEmB,iBAA3B,IACNA,EAAkBE,GAGtBD,EAAa7rB,KAAKkV,QAAQrB,MAAM+X,GAGhC5rB,KAAKkV,QAAQH,OAAO6W,GACpB5rB,KAAKkV,QAAQH,OAAO6W,GAAiB,GAEjCC,IACA7rB,KAAY,MAAIhB,EAAEmN,OACdnM,KAAY,MACZ6rB,EAAgB,IAChBA,EAAmB,UAK1BV,EAAoB,aAAwB,aAAnBA,EAAa,OAGvCS,EAAkB,MAAQT,EAAc,MAAI,IAAMA,EAAa,MAC/DU,EAAa7rB,KAAKkV,QAAQrB,MAAM+X,MAG5B5rB,KAAKkV,QAAQH,OAAO6W,GACpB5rB,KAAKkV,QAAQH,OAAO6W,GAAiB,GAIrC5rB,KAAK+rB,cAAcF,KAIvB7rB,KAAKkV,UAAYlW,EAAEqW,eACnBwW,EAAa7sB,EAAEyU,OAAOI,MAAM7T,KAAK/F,MAEjC+E,EAAEyU,OAAOsB,OAAO/U,KAAK/F,MACrB+E,EAAEyU,OAAOsB,OAAO/U,KAAK/F,MAAM,GAEvB4xB,GACA7rB,KAAK+rB,cAAcF,KAK/BX,GAAoB5vB,UAAUmwB,KAAO,WAC7BzrB,KAAK0rB,WACT1rB,KAAKgsB,iCACLhsB,KAAKkV,QAAQtP,IACT5F,KAAK/F,KACL+E,EAAEoQ,WAAWpP,KAAY,OACzBA,KAAKisB,YACLjsB,KAAKksB,gBACLlsB,KAAKsU,OACLtU,KAAKmsB,WACLnsB,KAAKosB,iBAIblB,GAAoB5vB,UAAUyZ,OAAS,WAEnC/U,KAAKkV,QAAQH,OAAO/U,KAAK/F,MAAM,EAAO+F,KAAKosB,eAC3CpsB,KAAKkV,QAAQH,OAAO/U,KAAK/F,MAAM,EAAM+F,KAAKosB,gBAK9ClB,GAAoB5vB,UAAUspB,MAAQ,WAClC5kB,KAAK+U,SACL/U,KAAY,MAAI,IAQpBkrB,GAAoB5vB,UAAUywB,cAAgB,SAASnP,EAAOyP,EAAexX,GACzE,QAAI7V,EAAEwO,SAASoP,UACmB,IAApB,IAAmCyP,EAAgB,QAC7DrsB,KAAKisB,iBAAgC,IAAX,EAA0BjsB,KAAKssB,eAAiBzX,EAE1E7V,EAAEkM,KAAK0R,GAAO,SAASzN,EAAK9C,GACnBrM,KAAY,MAAEzE,eAAe8Q,IAASrM,KAAY,MAAEqM,KAAUggB,IAC/DrsB,KAAY,MAAEqM,GAAQ8C,KAE3BnP,MAEHA,KAAKyrB,QAEE,IASfP,GAAoB5vB,UAAUixB,SAAW,SAAS3P,EAAO/H,GACrD,QAAI7V,EAAEwO,SAASoP,KACX5c,KAAKisB,iBAAgC,IAAX,EAA0BjsB,KAAKssB,eAAiBzX,EAE1E7V,EAAEmN,OAAOnM,KAAY,MAAG4c,GAExB5c,KAAKyrB,QAEE,IAKfP,GAAoB5vB,UAAUkxB,WAAa,SAASngB,GAC5CA,KAAQrM,KAAY,eACbA,KAAY,MAAEqM,GACrBrM,KAAKyrB,SAIbP,GAAoB5vB,UAAU0wB,+BAAiChtB,EAAE2P,UAAS,WACtE,IAAI8d,EAAkBzsB,KAAY,MAAkB,QAChD0sB,EAAcrkB,EAAOC,MAAQ,IAAY,KAC7C,GAAKmkB,EAAL,CAGA,IAAK,IAAIE,KAAeF,EAChB,EAAI,IAAIve,KAASue,EAAgBE,GAAeD,UACzCD,EAAgBE,GAG3B3tB,EAAEyO,cAAcgf,WACTzsB,KAAY,MAAkB,YAI7CkrB,GAAoB5vB,UAAUsxB,uBAAyB,WAC9C5sB,KAAKorB,wBACNprB,KAAK+rB,cAAc/sB,EAAEyZ,KAAKC,kBAC1B1Y,KAAKorB,uBAAwB,IAIrCF,GAAoB5vB,UAAUuxB,sBAAwB,SAAShkB,GAC3D7I,KAAKusB,SAASvtB,EAAEyZ,KAAKS,WAAWrQ,KAIpCqiB,GAAoB5vB,UAAUwxB,qBAAuB,SAASjkB,GAE1D7I,KAAK+rB,cAAc,CACf,kBAAqBljB,GAAY,UACjC,0BAA6B7J,EAAEyZ,KAAKmB,gBAAgB/Q,IAAa,WAClE,KAGPqiB,GAAoB5vB,UAAUyxB,kBAAoB,WAC9C,OAAO/tB,EAAEiQ,uBAAuB,CAC5B,kBAAqBjP,KAAY,MAAqB,kBACtD,0BAA6BA,KAAY,MAA6B,6BAO9EkrB,GAAoB5vB,UAAU0xB,WAAa,SAASpQ,GAOhD,OANA5d,EAAEkM,KAAKlL,KAAY,OAAG,SAASmP,EAAK9C,GAC1BA,KAAQuQ,IACVA,EAAMvQ,GAAQ8C,MAIfyN,GAGXsO,GAAoB5vB,UAAUiwB,cAAgB,SAASJ,GACnDnrB,KAAKssB,eAAiBtsB,KAAKisB,YAAcd,EAA0B,kBACnEnrB,KAAKitB,aAAa9B,EAA4B,qBAC9CnrB,KAAKktB,kBAAkB/B,EAAsB,eAC7CnrB,KAAKmtB,eAAehC,EAA0B,mBAC9CnrB,KAAKotB,oBAAoBjC,EAA+B,wBACxDnrB,KAAKqtB,WAAWlC,EAAsB,gBAG1CD,GAAoB5vB,UAAU2xB,aAAe,SAASvB,GAClD1rB,KAAK0rB,SAAWA,EACZ1rB,KAAK0rB,SACL1rB,KAAK+U,SAEL/U,KAAKyrB,QAIbP,GAAoB5vB,UAAU4xB,kBAAoB,SAASd,GACnDA,IAAkBpsB,KAAKosB,gBACvBpsB,KAAK+U,SACL/U,KAAKosB,cAAgBA,EACrBpsB,KAAKyrB,SAIbP,GAAoB5vB,UAAU6xB,eAAiB,SAAShB,GAChDA,IAAensB,KAAKmsB,aACpBnsB,KAAKmsB,WAAaA,EAClBnsB,KAAK+U,SACL/U,KAAKyrB,SAIbP,GAAoB5vB,UAAU8xB,oBAAsB,SAASlB,GACrDA,IAAoBlsB,KAAKksB,kBACzBlsB,KAAKksB,gBAAkBA,EACvBlsB,KAAK+U,SACL/U,KAAKyrB,SAIbP,GAAoB5vB,UAAUgyB,oBAAsB,WAChD,OAAOttB,KAAKksB,iBAGhBhB,GAAoB5vB,UAAU+xB,WAAa,SAAS/Y,GAC5CA,IAAWtU,KAAKsU,SAChBtU,KAAKsU,SAASA,EACdtU,KAAK+U,SACL/U,KAAKyrB,SAIbP,GAAoB5vB,UAAUiyB,qBAAuB,SAAS5I,EAAO/T,GACjE,IAAI4c,EAAQxtB,KAAKytB,eAAe9I,GAC5B+I,EAAS9c,EAAK+T,GACdgJ,EAAQ3tB,KAAK4tB,qBA5lBe,QA6lB5BC,EAAa7tB,KAAK4tB,qBA5lBU,aA6lB5BE,EAAU9tB,KAAK4tB,qBA5lBa,UA6lB5BG,EAAQ/tB,KAAK4tB,qBA5lBe,QA6lB5BI,EAAUhuB,KAAK4tB,qBA3lBa,UA4lB5BK,EAAWjuB,KAAK4tB,qBA3lBY,UA2lBwB,IACpDM,EAAWluB,KAAK4tB,qBA9lBY,UA8lBwB,IAvUjB,UAyUnCJ,GAEAxuB,EAAEmN,OAAOwhB,EAAOD,GAGhB1tB,KAAKmuB,uBAtmBuB,OAsmBYT,GAGxC1tB,KAAKmuB,uBAvmBuB,SAumBcT,GAC1C1tB,KAAKmuB,uBA3mBuB,SA2mBcT,IAjVP,WAkV5BF,GAEPxuB,EAAEkM,KAAKwiB,GAAQ,SAAS3f,EAAGvM,GACjBA,KAAKqsB,IACPA,EAAWrsB,GAAKuM,MAGxB/N,KAAKmuB,uBAnnBuB,SAmnBcT,IAxVP,WAyV5BF,EACPxuB,EAAEkM,KAAKwiB,GAAQ,SAASrhB,GAGpBrN,EAAEkM,KAAK,CAACyiB,EAAOE,EAAYE,EAAOC,IAAU,SAASI,GAC7C/hB,KAAQ+hB,UACDA,EAAa/hB,MAG5BrN,EAAEkM,KAAKgjB,GAAU,SAASG,GAClBhiB,KAAQgiB,UACDA,EAAWhiB,MAI1ByhB,EAAQzhB,IAAQ,KAvWe,UA0W5BmhB,GACPxuB,EAAEkM,KAAKwiB,GAAQ,SAAS3f,EAAGvM,GAGnBA,KAAKmsB,EACLA,EAAMnsB,IAAMuM,GAINvM,KAAKusB,IACPA,EAAMvsB,GAAK,GAEfusB,EAAMvsB,IAAMuM,KAEjB/N,MACHA,KAAKmuB,uBArpBuB,SAqpBcT,IAtXP,UAuX5BF,GACPxuB,EAAEkM,KAAKwiB,GAAQ,SAAS3f,EAAGvM,GACnBxC,EAAE2L,QAAQoD,KACJvM,KAAKwsB,IACPA,EAAQxsB,GAAK,IAGjBwsB,EAAQxsB,GAAKwsB,EAAQxsB,GAAGoB,OAAOmL,OAGvC/N,KAAKmuB,uBAhqBuB,SAgqBcT,IAlYP,UAmY5BF,GACPS,EAAS/pB,KAAKwpB,GACd1tB,KAAKmuB,uBAjqBuB,UAiqBeT,IAtYR,WAuY5BF,IACPU,EAAShqB,KAAKwpB,GACd1tB,KAAKmuB,uBAtqBuB,SAsqBcT,IAG9C3iB,EAAUC,IAAI,uDACdD,EAAUC,IAAI4F,GAEd5Q,KAAKyrB,QAGTP,GAAoB5vB,UAAU6yB,uBAAyB,SAASxJ,EAAO/T,GACnE,IAAI0d,EAAItuB,KAAKuuB,WAAW5J,GACnB3lB,EAAEiM,YAAYqjB,KACftvB,EAAEkM,KAAK0F,GAAM,SAAS7C,EAAGvM,GAhrBG,YAirBpBmjB,GA/qBoB,YA+qBOA,EAI3B3lB,EAAEkM,KAAKojB,GAAG,SAASE,GACXA,EAAchtB,KAAOuM,UACdygB,EAAchtB,aAItB8sB,EAAE9sB,KAEdxB,MAEHA,KAAKyrB,SAIbP,GAAoB5vB,UAAUmyB,eAAiB,SAAS9I,GACpD,MAxsBgC,SAwsB5BA,EA7amC,QA1RP,cAysBrBA,EA9a4B,SA1RP,WA0sBrBA,EA/a4B,SA1RP,SA2sBrBA,EAhb4B,QA1RP,YA4sBrBA,EAjb4B,SAzRP,YA4sBrBA,EAlb4B,QA3RP,WA+sBrBA,EAnb4B,aAsbnC5Z,EAAU5E,MAAM,iBAAkBwe,IAI1CuG,GAAoB5vB,UAAUizB,WAAa,SAAS5J,GAChD,OAAO3kB,KAAY,MAAEA,KAAKytB,eAAe9I,KAE7CuG,GAAoB5vB,UAAUsyB,qBAAuB,SAASjJ,EAAO8J,GACjE,IAAIxzB,EAAM+E,KAAKytB,eAAe9I,GAG9B,OAFA8J,EAAczvB,EAAEiM,YAAYwjB,GAAe,GAAKA,EAEzCzuB,KAAY,MAAE/E,KAAS+E,KAAY,MAAE/E,GAAOwzB,IAGvDvD,GAAoB5vB,UAAUozB,gBAAkB,SAAS1N,EAAY/S,GACjE,IAAI0gB,EAAS3uB,KAAY,MAAkB,UAAK,GAChD2uB,EAAO3N,GAAc/S,EACrBjO,KAAY,MAAkB,SAAI2uB,EAClC3uB,KAAKyrB,QAGTP,GAAoB5vB,UAAUszB,mBAAqB,SAAS5N,GACxD,IACI/S,GADSjO,KAAY,MAAkB,UAAK,IACzBghB,GAKvB,OAJKhiB,EAAEiM,YAAYgD,YACRjO,KAAY,MAAkB,SAAEghB,GACvChhB,KAAKyrB,QAEFxd,GAWK,IAiBI4gB,GAAyB,KACzBC,GAAyB,SAEzBC,GAAyB,IACzBC,GAAyB,IACzBC,GAAyB,IACzBC,GAAyB,IACzBC,GAAyB,KACzBC,GAAyB,KACzBC,GAAyB,IACzBC,GAAyB,IACzBC,GAAyB,KACzBC,GAAyB,KAWzBC,GAAyB,UACzBC,GAAyB,cAM7C,SAASC,GAASh1B,GACd,GAAc,OAAVA,EACA,OAAO,KAGX,cAAc,GACV,IAAK,SACD,OAAIqE,EAAE0O,OAAO/S,IAAUA,EAAMga,WAAa,EAC/Bha,EAAMga,UAEV,KACX,IAAK,UACD,OAAO7R,OAAOnI,GAClB,IAAK,SACD,OAAOA,EACX,IAAK,SAED,OADAA,EAAQmI,OAAOnI,GACVoI,MAAMpI,GAGJ,EAFIA,EAInB,OAAO,KAWX,SAASi1B,GAAUj1B,GACf,GAAc,OAAVA,EACA,OAAO,EAGX,cAAeA,GACX,IAAK,UACD,OAAOA,EACX,IAAK,SACD,OAAiB,IAAVA,EACX,IAAK,SACD,OAAOA,EAAMwJ,OAAS,EAC1B,IAAK,SACD,SAAInF,EAAE2L,QAAQhQ,IAAUA,EAAMwJ,OAAS,QAGnCnF,EAAE0O,OAAO/S,IAAUA,EAAMga,UAAY,OAGrC3V,EAAEwO,SAAS7S,IAAWqE,EAAEyO,cAAc9S,KAKlD,OAAO,EA0MX,SAASk1B,GAAiBC,EAAIjW,GAC1B,IAAKiW,EAAa,WAAyE,IAApE,CAACX,GAAiBC,IAAqB7kB,QAAQulB,EAAa,YAAcA,EAAa,UAA+B,IAA1BA,EAAa,SAAE3rB,OAC9H,KAAO,6BAA+B2rB,EAG1C,IAAI/hB,EA9BR,SAAkBpU,EAAGa,GACjB,GAAW,OAANb,GAAcA,IAAMa,EACrB,OAAO,EAEX,UAAWb,UAAaa,EACpB,cAAeb,GACX,IAAK,SACL,IAAK,SACL,IAAK,UACD,OAAOA,IAAMa,EACjB,IAAK,SACD,GAAIwE,EAAE2L,QAAQhR,IAAMqF,EAAE2L,QAAQnQ,GAC1B,OA1BpB,SAAuBb,EAAGa,GACtB,GAAIb,IAAMa,EAAG,OAAO,EACpB,GAAU,OAANb,GAAoB,OAANa,EAAY,OAAO,EACrC,GAAIb,EAAEwK,SAAW3J,EAAE2J,OAAQ,OAAO,EAElC,IAAK,IAAIzK,EAAI,EAAGA,EAAIC,EAAEwK,OAAQzK,IAC1B,GAAIC,EAAED,KAAOc,EAAEd,GACX,OAAO,EAIf,OAAO,EAegBq2B,CAAcp2B,EAAGa,GAE5B,GAAIwE,EAAE0O,OAAO/T,IAAMqF,EAAE0O,OAAOlT,GACxB,OAAOb,EAAEgb,YAAcna,EAAEma,UAE7B,GAAI3V,EAAEwO,SAAS7T,IAAMqF,EAAEwO,SAAShT,GAC5B,OAAOkhB,KAAKC,UAAUhiB,KAAO+hB,KAAKC,UAAUnhB,GAI5D,OAAO,EAQCw1B,CAASC,GAAiBH,EAAa,SAAE,GAAIjW,GAAaoW,GAAiBH,EAAa,SAAE,GAAIjW,IAEtG,OAAQiW,EAAa,UACjB,KAAKX,GACD,OAAOphB,EACX,KAAKqhB,GACD,OAAQrhB,GA4EpB,SAASmiB,GAAiBJ,EAAIjW,GAC1B,IAAKiW,EAAa,SACd,KAAO,0CAA4CA,EAGvD,OAAQA,EAAa,UACjB,IAhYqC,MAiYjC,OAhOZ,SAAqBA,EAAIjW,GACrB,IAAKiW,EAAa,UAlKuB,QAkKlBA,EAAa,WAAuBA,EAAa,UAA+B,IAA1BA,EAAa,SAAE3rB,OACxF,KAAO,yBAA2B2rB,EAGtC,OAAOF,GAAUK,GAAiBH,EAAa,SAAE,GAAIjW,KAAgB+V,GAAUK,GAAiBH,EAAa,SAAE,GAAIjW,IA2NpGsW,CAAYL,EAAIjW,GAC3B,IAjYqC,KAkYjC,OA1NZ,SAAoBiW,EAAIjW,GACpB,IAAKiW,EAAa,UAzKuB,OAyKlBA,EAAa,WAAsBA,EAAa,UAA+B,IAA1BA,EAAa,SAAE3rB,OACvF,KAAO,wBAA0B2rB,EAGrC,OAAOF,GAAUK,GAAiBH,EAAa,SAAE,GAAIjW,KAAgB+V,GAAUK,GAAiBH,EAAa,SAAE,GAAIjW,IAqNpGuW,CAAWN,EAAIjW,GAC1B,KAAKgV,GACL,KAAKC,GACD,OArNZ,SAAoBgB,EAAIjW,GACpB,IAAKiW,EAAa,WAAiE,IAA5D,CAACjB,GAAaC,IAAiBvkB,QAAQulB,EAAa,YAAcA,EAAa,UAA+B,IAA1BA,EAAa,SAAE3rB,OACtH,KAAO,+BAAiC2rB,EAE5C,IAAIO,EAAYJ,GAAiBH,EAAa,SAAE,GAAIjW,GAChDyW,EAAaL,GAAiBH,EAAa,SAAE,GAAIjW,GAErD,IAAK7a,EAAE2L,QAAQ2lB,KAAgBtxB,EAAEkN,SAASokB,GACtC,KAAO,gDAAkDA,EAG7D,IAAIviB,EAAIuiB,EAAW/lB,QAAQ8lB,IAAc,EACzC,OAAIP,EAAa,WAAMhB,IACX/gB,EAELA,EAsMQwiB,CAAWT,EAAIjW,GAC1B,IAnYqC,IAoYjC,OArMZ,SAAsBiW,EAAIjW,GACtB,IAAKiW,EAAa,UAhMuB,MAgMlBA,EAAa,WAAwBA,EAAa,UAAKA,EAAa,SAAE3rB,OAAS,EAClG,KAAO,0BAA4B2rB,EAEvC,IAAIn2B,EAAIs2B,GAAiBH,EAAa,SAAE,GAAIjW,GACxCrf,EAAIy1B,GAAiBH,EAAa,SAAE,GAAIjW,GAE5C,MAAiB,iBAANlgB,GAA+B,iBAANa,GAGnB,iBAANb,GAA+B,iBAANa,EAFzBb,EAAIa,EAKR,KAwLQg2B,CAAaV,EAAIjW,GAC5B,KAAKkV,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACD,OA1LZ,SAA4BY,EAAIjW,GAC5B,IAAKiW,EAAa,WAA6F,IAAxF,CAACf,GAAgBC,GAAcC,GAAcC,IAAc3kB,QAAQulB,EAAa,YAClGA,EAAa,UAAKA,EAAa,SAAE3rB,OAAS,EAC3C,KAAO,+BAAiC2rB,EAG5C,IAAIn2B,EAAIs2B,GAAiBH,EAAa,SAAE,GAAIjW,GACxCrf,EAAIy1B,GAAiBH,EAAa,SAAE,GAAIjW,GAE5C,GAAiB,iBAANlgB,GAA+B,iBAANa,EAChC,OAAQs1B,EAAa,UACjB,KAAKf,GACD,OAAOp1B,EAAIa,EACf,KAAKw0B,GACD,OAAOr1B,EAAIa,EACf,KAAKy0B,GACD,OAAU,IAANz0B,EACOb,EAAIa,EAER,KACX,KAAK00B,GACD,OAAU,IAAN10B,EACO,KAED,IAANb,EACO,EAENA,EAAI,GAAKa,EAAI,GAAOb,EAAI,GAAKa,EAAI,IAGzBuX,KAAK0U,MAAM9sB,EAAIa,GAAKA,EAAIb,GAE9BA,EAAIa,EACf,QACI,KAAM,qBAAuBs1B,EAAa,SAItD,OAAO,KAoJQW,CAAmBX,EAAIjW,GAClC,KAAKsV,GACL,KAAKC,GACD,OAAOS,GAAiBC,EAAIjW,GAChC,KAAKwV,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACD,OAnGZ,SAA4BM,EAAIjW,GAC5B,IAAKiW,EAAa,WAC8F,IAA5G,CAACT,GAAkBE,GAAwBD,GAAeE,IAAqBjlB,QAAQulB,EAAa,YACnGA,EAAa,UAA+B,IAA1BA,EAAa,SAAE3rB,OAClC,KAAO,+BAAiC2rB,EAE5C,IAAIn2B,EAAIs2B,GAAiBH,EAAa,SAAE,GAAIjW,GACxCrf,EAAIy1B,GAAiBH,EAAa,SAAE,GAAIjW,GAE5C,UAAU,UAAc,EACpB,GAAkB,iBAAR,GAAoB7a,EAAE0O,OAAOlT,GAGnC,OAFAb,EAAIg2B,GAASh2B,GACba,EAAIm1B,GAASn1B,GACLs1B,EAAa,UACjB,KAAKT,GACD,OAAO11B,EAAIa,EACf,KAAK+0B,GACD,OAAO51B,GAAKa,EAChB,KAAK80B,GACD,OAAO31B,EAAIa,EACf,KAAKg1B,GACD,OAAO71B,GAAKa,OAEjB,GAAkB,iBAAR,EAAkB,CAC/B,IAAIk2B,EAAU/2B,EAAEg3B,cAAcn2B,GAC9B,OAAQs1B,EAAa,UACjB,KAAKT,GACD,OAAOqB,EAAU,EACrB,KAAKnB,GACD,OAAOmB,GAAW,EACtB,KAAKpB,GACD,OAAOoB,EAAU,EACrB,KAAKlB,GACD,OAAOkB,GAAW,GAKlC,OAAO,KA6DQE,CAAmBd,EAAIjW,GAClC,IArYqC,UAsYjC,OA3TZ,SAAyBiW,EAAIjW,GACzB,IAAKiW,EAAa,UA5EuB,YA4ElBA,EAAa,WAA2BA,EAAa,UAA+B,IAA1BA,EAAa,SAAE3rB,OAC5F,KAAO,kCAAoC2rB,EAG/C,OAAOF,GAAUK,GAAiBH,EAAa,SAAE,GAAIjW,IAsTtCgX,CAAgBf,EAAIjW,GAC/B,IAtYqC,WAuYjC,OArTZ,SAA0BiW,EAAIjW,GAC1B,IAAKiW,EAAa,UAnFuB,aAmFlBA,EAAa,WAA4BA,EAAa,UAA+B,IAA1BA,EAAa,SAAE3rB,OAC7F,KAAO,mCAAqC2rB,EAGhD,IAAI/hB,EAAIkiB,GAAiBH,EAAa,SAAE,GAAIjW,GAC5C,GAAU,OAAN9L,EACA,OAAO,KAGX,cAAc,GACV,IAAK,SACL,IAAK,SACD,IAAI/T,EAAI,IAAIkU,KAAKH,GACjB,OAAIhL,MAAM/I,EAAE2a,WACD,KAEJ3a,EACX,IAAK,SACD,GAAIgF,EAAE0O,OAAOK,GACT,OAAOA,EAInB,OAAO,KA6RQ+iB,CAAiBhB,EAAIjW,GAChC,IAvYqC,OAwYjC,OA5RZ,SAAsBiW,EAAIjW,GACtB,IAAKiW,EAAa,UA7GuB,SA6GlBA,EAAa,WAAwBA,EAAa,UAA+B,IAA1BA,EAAa,SAAE3rB,OACzF,KAAO,+BAAiC2rB,EAG5C,IAAI/hB,EAAIkiB,GAAiBH,EAAa,SAAE,GAAIjW,GAC5C,OAAU,OAAN9L,EACO,KAGP/O,EAAE2L,QAAQoD,GACHA,EAGJ,KA8QQgjB,CAAajB,EAAIjW,GAC5B,IAxYqC,SAyYjC,OApWZ,SAAwBiW,EAAIjW,GACxB,IAAKiW,EAAa,UAtCuB,WAsClBA,EAAa,WAA0BA,EAAa,UAA+B,IAA1BA,EAAa,SAAE3rB,OAC3F,KAAO,iCAAmC2rB,EAG9C,OAAOH,GAASM,GAAiBH,EAAa,SAAE,GAAIjW,IA+VrCmX,CAAelB,EAAIjW,GAC9B,IAzYqC,SA0YjC,OA/QZ,SAAwBiW,EAAIjW,GACxB,IAAKiW,EAAa,UA5HuB,WA4HlBA,EAAa,WAA0BA,EAAa,UAA+B,IAA1BA,EAAa,SAAE3rB,OAC3F,KAAO,iCAAmC2rB,EAG9C,IAAI/hB,EAAIkiB,GAAiBH,EAAa,SAAE,GAAIjW,GAC5C,cAAc,GACV,IAAK,SACD,OAAI7a,EAAE0O,OAAOK,GACFA,EAAE5Q,SAENue,KAAKC,UAAU5N,GAE9B,OAAOpP,OAAOoP,GAkQCkjB,CAAenB,EAAIjW,GAC9B,KAAK4V,GACL,KAAKC,GACD,OAvEZ,SAAyBI,EAAIjW,GACzB,IAAKiW,EAAa,WAA2E,IAAtE,CAACL,GAAkBC,IAAsBnlB,QAAQulB,EAAa,YAChFA,EAAa,UAA+B,IAA1BA,EAAa,SAAE3rB,OAClC,KAAO,yCAA2C2rB,EAGtD,IAAIoB,EAAwD,OAApDjB,GAAiBH,EAAa,SAAE,GAAIjW,GAC5C,OAAIiW,EAAa,WAAMJ,IACXwB,EAGLA,EA4DQC,CAAgBrB,EAAIjW,GAC/B,IA3YqC,MA4YjC,OA3DZ,SAAqBiW,EAAIjW,GACrB,IAAKiW,EAAa,UAlVuB,QAkVlBA,EAAa,WAAuBA,EAAa,UAA+B,IAA1BA,EAAa,SAAE3rB,OACxF,KAAO,yBAA2B2rB,EAGtC,IAAI/hB,EAAIkiB,GAAiBH,EAAa,SAAE,GAAIjW,GAC5C,OAAU,OAAN9L,IAIc,kBAAR,GACEA,EAGL,MA6CQqjB,CAAYtB,EAAIjW,IA8BnC,SAASwX,GAAgBvB,EAAIjW,GACzB,IAAKiW,EAAa,WAAMA,EAAU,MAC9B,KAAM,0CAA4CA,EAEtD,OAAQA,EAAa,UACjB,IA3cqC,QA4cjC,YAAgCpxB,IAA5Bmb,EAAWiW,EAAU,OACdjW,EAAWiW,EAAU,OAEzB,KACX,IA/cqC,UAgdjC,MAhbiC,QAgb7BA,EAAU,MACH,IAAI5hB,KAEa,iBAAjB4hB,EAAW,MAxClC,SAAwBn1B,GACpB,IAAI2sB,EAAM3sB,EAAgB,OAC1B,IAAK2sB,IAAQA,EAAY,OAAMA,EAAa,MACxC,KAAM,yCAA2C5L,KAAKC,UAAUhhB,GAEpE,IAAI22B,EAAM,IAAIpjB,KACd,OAAQoZ,EAAY,MAChB,IAzb4C,OA0bxCgK,EAAI5c,QAAQ4c,EAAI3c,WAA6B,EAAhB2S,EAAa,MAAK,GAAG,GAAG,KACrD,MACJ,IA3b4C,MA4bxCgK,EAAI5c,QAAQ4c,EAAI3c,WAA6B,EAAhB2S,EAAa,MAAK,GAAG,GAAG,GAAG,KACxD,MACJ,IA7b4C,OA8bxCgK,EAAI5c,QAAQ4c,EAAI3c,WAA6B,EAAhB2S,EAAa,MAAK,EAAE,GAAG,GAAG,GAAG,KAC1D,MACJ,IA/b4C,QAgcxCgK,EAAI5c,QAAQ4c,EAAI3c,WAA6B,EAAhB2S,EAAa,MAAK,GAAG,GAAG,GAAG,GAAG,KAC3D,MACJ,QACI,KAAM,iBAAmBA,EAAY,KAG7C,OAAOgK,EAkBYC,CAAezB,EAAU,OAE7BA,EAAU,MACrB,QACI,KAAM,0CAA4CA,EAAa,UAI3E,SAASG,GAAiBuB,EAAS3X,GAC/B,OAAI2X,EAAoB,SACbH,GAAgBG,EAAS3X,GAEhC2X,EAAoB,SACbtB,GAAiBsB,EAAS3X,QADrC,EAOJ,IAAI4X,GAAuB,SAASC,EAAY5Q,GAC5C9hB,EAAE8M,sBAAsB9L,MAExBA,KAAK4H,SAAoBkZ,EACzB9gB,KAAK2xB,YAAoB3xB,KAAK4H,SAAsB,YACpD5H,KAAK4xB,kBAAoB5xB,KAAK4H,SAASqX,WAAW,kBAClDjf,KAAK6xB,SAAoB7xB,KAAK4H,SAASqX,WAAW,OAElDjf,KAAK2sB,YAAc3tB,EAAEgN,WAAW0lB,EAAe,IAC/C1xB,KAAK8xB,WAAc9yB,EAAEgN,WAAW0lB,EAAuB,YAEvD1xB,KAAKyc,MAAmBzd,EAAEgN,WAAW0lB,EAAiB,OAAM,IAAI3wB,QAAQ,MAAO,SAC/Ef,KAAK+xB,IAAkB/yB,EAAEgN,WAAW0lB,EAAgB,MAAM,QAC1D1xB,KAAKgyB,WAAkBhzB,EAAEgN,WAAW0lB,EAAiB,OAAM,WAC3D1xB,KAAKiyB,MAAkBjzB,EAAEgN,WAAW0lB,EAAkB,QAAM,QAC5D1xB,KAAKqf,MAAkBrgB,EAAEgN,WAAW0lB,EAAkB,QAAM,GAC5D1xB,KAAKkyB,YAAkBT,GAAqBU,YAC5CnyB,KAAKoyB,aAAkBX,GAAqBY,aAE5CryB,KAAKsyB,iBAAmBZ,EAA6B,kBAAK,GAG1D1xB,KAAKuyB,SAAkBb,EAAoB,SAAK,KAChD1xB,KAAKwyB,UAAkBd,EAAsB,WAAK,KAClD1xB,KAAKyyB,gBAAkBf,EAA4B,iBAAK,KACxD1xB,KAAK0yB,UAAkBhB,EAAsB,WAAK,KAE9C1xB,KAAKyyB,iBAA0D,IAAvCzyB,KAAKyyB,gBAAgBloB,QAAQ,QACrDvK,KAAKyyB,gBAAkBzyB,KAAKyyB,gBAAgB1xB,QAAQ,KAAMf,KAAK4xB,oBAGnE5xB,KAAK2yB,cAAe,EACf3yB,KAAKuyB,WACNvyB,KAAKuyB,SAAW,WAChBvyB,KAAK2yB,cAAe,GAGxB3yB,KAAK4yB,KAA2B,SAApB5yB,KAAKgyB,WACZhyB,KAAK4yB,OACN5yB,KAAKgyB,WAAa,YAEtBhyB,KAAK6yB,YAAe7yB,KAAK4yB,KAA0CnB,GAAqBqB,iBAAxDrB,GAAqBsB,YAErD/yB,KAAKgzB,qBACLhzB,KAAKizB,gBAAkBjzB,KAAKkzB,mBAC5BlzB,KAAKmzB,eAGT1B,GAAqB2B,UAAoB,IACzC3B,GAAqB4B,cAAoB,wBACzC5B,GAAqB6B,WAAoB,GACzC7B,GAAqB8B,UAAoB,GACzC9B,GAAqB+B,gBAAoB,IACzC/B,GAAqBsB,YAAoB,IACzCtB,GAAqBqB,iBAAoB,IACzCrB,GAAqBgC,kBAAoB,GACzChC,GAAqBiC,kBAAoB,EACzCjC,GAAqBkC,eAAoB,GACzClC,GAAqBmC,aAAoB7hB,KAAK8hB,MAAMpC,GAAqBkC,eAAiB,GAC1FlC,GAAqBU,YAAoB,IACzCV,GAAqBY,aAAoB,IAEzCZ,GAAqBn2B,UAAUw4B,KAAO,WAClC,IAAIloB,EAAO5L,KACXA,KAAKgzB,qBAGAhzB,KAAK+zB,SAKV/zB,KAAKg0B,eACLh0B,KAAKi0B,wBAGLj0B,KAAKk0B,gBAAgBl0B,KAAKm0B,sBARtBzU,YAAW,WAAa9T,EAAKkoB,SAAW,MAWhDrC,GAAqBn2B,UAAU84B,QAAUp1B,EAAE2P,UAAS,WAC3C3O,KAAKq0B,iBAGNr0B,KAAKs0B,eAAe,CAAC,WAAa,IAGtC,IAMQC,EAAYC,EAAaC,EAN7BC,EAAa10B,KAAK20B,cAAgB30B,KAAK40B,QAAQ,SAAW50B,KAAK60B,+BAC/D70B,KAAK80B,iBACL90B,KAAK+0B,cAAc,KAAM,WACzB/0B,KAAKg1B,WAAWN,EAAY,WAC5BhV,WAAW1f,KAAKi1B,wBAAyBxD,GAAqB2B,aAG1DpzB,KAAK4yB,MACL2B,EAAc,QACdC,EAAc,GACdC,GAAe,MAEfF,EAAc,MACdC,EAAc/C,GAAqB8B,UACnCkB,EAAchD,GAAqB+B,gBAAkB/B,GAAqB8B,WAE9EvzB,KAAKk1B,aAAa,CACd,CACIna,GAAO/a,KAAK40B,QAAQ,MACpB/X,KAAO,UACPtL,MAAOkgB,GAAqB6B,WAC5B6B,KAAO,GAEX,CACIpa,GAAO2Z,EACP7X,KAAO,UACPtL,MAAO,EACP4jB,KAAO,GAEX,CACIpa,GAAO2Z,EACP7X,KAAO0X,EACPhjB,MAAOijB,EACPW,KAAOV,IAEZhD,GAAqB2B,UAAWpzB,KAAKi1B,6BAIhDxD,GAAqBn2B,UAAU05B,WAAah2B,EAAE2P,UAAS,SAASoM,EAAIqa,GAChEA,EAAa3D,GAAqB4B,cAAgB,IAAM+B,EACtC,iBAAPra,IACPA,EAAK/a,KAAK40B,QAAQ7Z,IAEjBA,EAAGxD,YAEM,IAAMwD,EAAGxD,UAAY,KAAKhN,QAAQ,IAAM6qB,EAAa,OAC/Dra,EAAGxD,WAAa,IAAM6d,GAFtBra,EAAGxD,UAAY6d,KAKvB3D,GAAqBn2B,UAAUy5B,cAAgB/1B,EAAE2P,UAAS,SAASoM,EAAIqa,GACnEA,EAAa3D,GAAqB4B,cAAgB,IAAM+B,EACtC,iBAAPra,IACPA,EAAK/a,KAAK40B,QAAQ7Z,IAElBA,EAAGxD,YACHwD,EAAGxD,WAAa,IAAMwD,EAAGxD,UAAY,KAChCxW,QAAQ,IAAMq0B,EAAa,IAAK,IAChCr0B,QAAQ,aAAc,IACtBA,QAAQ,aAAc,QAInC0wB,GAAqBn2B,UAAU45B,aAAel2B,EAAE2P,UAAS,SAAS0mB,EAAOC,EAAKC,EAASC,GACnF,IAEIC,EAAIC,EACuBC,EAH3B/pB,EAAO5L,KACP41B,GAAc,EAEdC,EAAW,EAAI,IAAI3nB,KAKvB,IAFAynB,EAAYE,GADZL,EAAaA,GAAcK,GAGtBJ,EAAK,EAAGA,EAAKJ,EAAMlxB,OAAQsxB,IAK5B,QAHwB,KADxBC,EAAOL,EAAMI,IACGtmB,MACZumB,EAAKvmB,IAAMumB,EAAKnkB,OAEhBmkB,EAAKvmB,MAAQumB,EAAKP,KAAM,CACxBS,GAAc,EACd,IAAIE,EAAYJ,EAAKP,KAAOO,EAAKnkB,MAC7BwkB,EAAWL,EAAKP,MAAQO,EAAKnkB,MAAQ,GAAK,EAC9CmkB,EAAKvmB,IAAMumB,EAAKnkB,MAAQukB,EAAYH,EAAYL,EAC9B,YAAdI,EAAK7Y,OACL6Y,EAAKvmB,IAAM4C,KAAK8hB,MAAM6B,EAAKvmB,OAE1B4mB,EAAW,GAAKL,EAAKvmB,KAAOumB,EAAKP,MAAUY,EAAW,GAAKL,EAAKvmB,KAAOumB,EAAKP,QAC7EO,EAAKvmB,IAAMumB,EAAKP,MAI5B,GAAKS,EAAL,CAOA,IAAKH,EAAK,EAAGA,EAAKJ,EAAMlxB,OAAQsxB,IAE5B,IADAC,EAAOL,EAAMI,IACJ1a,GAAI,CACT,IAAIib,EAAuB,YAAdN,EAAK7Y,KAAqB,GAAK,KAC5C6Y,EAAK3a,GAAGkX,MAAMyD,EAAK7Y,MAAQle,OAAO+2B,EAAKvmB,KAAO6mB,EAGtDtW,YAAW,WAAa9T,EAAKspB,aAAaG,EAAOC,EAAKC,EAASC,KAAgB,SAbvED,GACAA,OAeZ9D,GAAqBn2B,UAAU64B,oBAAsBn1B,EAAE2P,UAAS,WAC5D,IAAI/C,EAAO5L,KAGX,IAAIA,KAAKi2B,QAASj2B,KAAKk2B,uBAAuBl2B,KAAK2sB,aAAnD,CAGA3sB,KAAKi2B,OAAQ,EAEbj2B,KAAK+zB,QAAQrX,YAAY1c,KAAKm2B,iBAC9BzW,YAAW,WACP,IAQQ6U,EAAYC,EAAaC,EAR7B2B,EAAWxqB,EAAKipB,+BAChBjpB,EAAKkpB,iBACAlpB,EAAKgnB,MACNhnB,EAAKopB,WAAW,KAAM,WAE1BppB,EAAKopB,WAAWoB,EAAU,WAC1BxqB,EAAKyqB,mBAGDzqB,EAAKgnB,MACL2B,EAAc,QACdC,GAAe,IACfC,EAAc,KAEdF,EAAc,MACdC,EAAc/C,GAAqB+B,gBAAkB/B,GAAqB8B,UAC1EkB,EAAchD,GAAqB8B,WAEvC3nB,EAAKspB,aAAa,CACd,CACIna,GAAOnP,EAAKgpB,QAAQ,MACpB/X,KAAO,UACPtL,MAAO,EACP4jB,KAAO1D,GAAqB6B,YAEhC,CACIvY,GAAOqb,EACPvZ,KAAO,UACPtL,MAAO,EACP4jB,KAAO,GAEX,CACIpa,GAAOqb,EACPvZ,KAAO0X,EACPhjB,MAAOijB,EACPW,KAAOV,IAEZhD,GAAqB2B,UAAWxnB,EAAKyqB,mBAE7C,KACHr3B,EAAE6W,eAAejK,EAAKgpB,QAAQ,UAAW,SAAS,SAAShmB,GACvDA,EAAEmH,iBACFnK,EAAKwoB,aAET,IAAIkC,EAAW1qB,EAAKgpB,QAAQ,WACRhpB,EAAKgpB,QAAQ,gBACjC51B,EAAE6W,eAAeygB,EAAU,SAAS,SAAS1nB,GAEzC,GADAA,EAAEmH,iBACEnK,EAAK2qB,WACL3qB,EAAK4qB,aAAa,iBAAkB,CAAC,eAAkB,UACvD5qB,EAAK6qB,wBAGL,GADA7qB,EAAKwoB,UACDxoB,EAAK+mB,aAAc,CACnB,IAAI+D,EAAc,KACd9qB,EAAKhE,SAASqX,WAAW,yBACzBhW,OAAO0tB,KAAK/qB,EAAK2mB,UAEjBmE,EAAc,WACVztB,OAAOxM,SAASqd,KAAOlO,EAAK2mB,UAGpC3mB,EAAK4qB,aAAa,iBAAkB,CAAC,eAAkB,QAASE,WAMhFjF,GAAqBn2B,UAAUs5B,QAAU,SAASj5B,GAC9C,OAAOiN,SAASmP,eAAe0Z,GAAqB4B,cAAgB,IAAM13B,IAG9E81B,GAAqBn2B,UAAUu5B,6BAA+B,WAC1D,OAAO70B,KAAK40B,QAAQ50B,KAAKgyB,aAG7BP,GAAqBn2B,UAAU46B,qBAAuB,WAClD,OAAOl2B,KAAK2xB,YAAmB,MAAkB,UAAM3xB,KAAK2xB,YAAmB,MAAkB,QAAI,KAGzGF,GAAqBn2B,UAAUs7B,oBAAsB53B,EAAE2P,UAAS,SAASkoB,GAErE,IADA,IAAI7V,EAAa6V,EAAkB,OAAK,GAC/Bn9B,EAAI,EAAGA,EAAIsG,KAAKsyB,iBAAiBnuB,OAAQzK,IAAK,CACnD,IAAIo9B,EAAkB92B,KAAKsyB,iBAAiB54B,GAE5C,GAAoB,gBADFo9B,EAAuB,OAAK,KACV9V,IAAe8V,EAAuB,MAAG,CACzE,IAAIA,EAA0B,UAAM93B,EAAEyO,cAAcqpB,EAA0B,UAK1E,OAAO,EAJP,GAAI7G,GAAiB6G,EAA0B,SAAGD,EAAuB,YACrE,OAAO,GAOvB,OAAO,KAIXpF,GAAqBn2B,UAAUy7B,aAAe,SAAS3d,EAAS4d,GAC5D,OAAOh3B,KAAKi3B,iBAAiB7d,IAAYpZ,KAAKi3B,iBAAiB7d,IAAY4d,GAG/EvF,GAAqBn2B,UAAU43B,iBAAmB,WAC9C,IAAID,EAAkB,GA2BtB,OAzBKjzB,KAAK4yB,MAqBN5yB,KAAKyyB,gBAAkBzyB,KAAKyyB,iBAAoBzyB,KAAK6xB,SAAW,4DAChEoB,EAAgB/uB,KAAKlE,KAAKyyB,mBArBtBzyB,KAAKwyB,WACLS,EAAgB/uB,KAAKlE,KAAKwyB,WAC1BxyB,KAAKk3B,SAAW,sBAAwBl3B,KAAKwyB,UAAY,OAEzDxyB,KAAKk3B,SAAW,GAEhBl3B,KAAKyyB,iBACLQ,EAAgB/uB,KAAKlE,KAAKyyB,iBAC1BzyB,KAAKm3B,eACG,4FAEen3B,KAAKyyB,gBAFpB,YAGiBhB,GAAqBkC,eAHtC,aAIkBlC,GAAqBkC,eAJvC,mCAQR3zB,KAAKm3B,eAAiB,IAOvBlE,GAGXxB,GAAqBn2B,UAAU24B,sBAAwB,WACnD,IAAImD,EAAoB,GACpBC,EAAoB,GACpBC,EAAoB,GACpBC,EAAoB,sDAMxB,GAFAv3B,KAAKm2B,gBAAkBvtB,SAASwT,cAAc,OAC9Cpc,KAAKm2B,gBAAgBx6B,GAAK81B,GAAqB4B,cAAgB,WAC1DrzB,KAAK4yB,KA8BNwE,EACQ,oCAEQG,EAFR,0HAQ8Cv3B,KAAKyc,KARnD,uEA/BI,CAEZ,IAAI+a,EAAex3B,KAAK2yB,cAAgB3yB,KAAKu2B,WAAc,GAAK,gCAC5DkB,EAAcz3B,KAAKu2B,WAAa,+BAAiC,GACjEv2B,KAAK+2B,aAAa,KAAM,KACxBS,EAAa,GACbC,EAAY,IAEhBL,EACQ,sBACIp3B,KAAKm3B,eACL,qBACII,EACA,qBACIv3B,KAAKk3B,SACL,mBAAqBl3B,KAAKqf,MANtC,wBAOgCrf,KAAKyc,KAPrC,wIAaY+a,EACA,6BAA+Bx3B,KAAKuyB,SAAW,KAAOvyB,KAAK+xB,IAAM,OACjE0F,EAfZ,qBAqCRz3B,KAAK03B,eACLL,EAAYr3B,KAAK4xB,kBAAoB,yBAA2B5xB,KAAK03B,cAC7D,mFACJ13B,KAAK23B,YACLN,GAAa,oCACbC,EACQ,yQAQLt3B,KAAK43B,cACZP,EAAYr3B,KAAK4xB,kBAAoB,0BAA4B5xB,KAAK43B,YAAc,2CAEpF53B,KAAKu2B,aACLv2B,KAAK63B,aACG,eAAiBpG,GAAqB4B,cAAtC,wBACgBrzB,KAAKkyB,YAAc,aAAelyB,KAAKoyB,aADvD,WAEeiF,EAFf,0GAKRC,EACQ,mBAAqBt3B,KAAK83B,aAAe,GAAK,MAA9C,sDAGQR,EAHR,gBAOZ,IAAIS,EAAYT,EAAaF,EACzBp3B,KAAK83B,eACLC,GACS/3B,KAAK4yB,KAAOwE,EAAoB,IACjC,8CACKp3B,KAAK4yB,KAAO0E,EAAaS,GAC9B,gBAGZ/3B,KAAKm2B,gBAAgB6B,WAChB,4BAA8Bh4B,KAAKgyB,WAAnC,yBAC4BhyB,KAAK2sB,YADjC,4CAIWoL,EAJZ,sBAQKh3B,QAAQ,WAAY,UAAY0wB,GAAqB4B,cAAgB,KACrEtyB,QAAQ,QAAS,OAAS0wB,GAAqB4B,cAAgB,MAG5E5B,GAAqBn2B,UAAU04B,aAAe,WACvB,SAAfh0B,KAAKiyB,MACLjyB,KAAKi4B,WAAa,CACdC,GAAgB,UAChBC,WAAgB,UAChBC,SAAgB,UAChBC,SAAgB,UAChBC,YAAgB,UAChBC,eAAgB,MAChBC,WAAgB,UAChBC,WAAgB,OAChBC,UAAgB,UAChBC,aAAgB,UAChBC,WAAgB,QAGpB54B,KAAKi4B,WAAa,CACdC,GAAgB,OAChBC,WAAgB,UAChBC,SAAgB,UAChBC,SAAgB,UAChBC,YAAgB,UAChBC,eAAgB,MAChBC,WAAgB,UAChBC,WAAgB,UAChBC,UAAgB,UAChBC,aAAgB,UAChBC,WAAgB,WAGxB,IAAIC,EAAS,yCACTC,EAAeD,EACfE,EAAcF,EACdG,EAAmBvH,GAAqBkC,eAA0D,EAAzClC,GAAqBiC,kBAC9EuF,EAAgBxH,GAAqB2B,UAAY,IAAQ,IACzDpzB,KAAK4yB,OACLiG,EAAS,QAIb,IAAIK,EAAsB,GAE1BA,EAAoB,uCADJzH,GAAqBqB,iBAAmB,GACiB,GAAK,OAAS,CACnF,WAAY,CACR,QAAW,SAGnB,IAAIqG,EAAe,CACf,WAAY,CACR,UAAa,mBAEjB,WAAY,CACR,SAAY,QACZ,IAAO,IACP,KAAQ,IACR,MAAS,OACT,OAAU,OACV,SAAY,OACZ,aAAc,SACd,UAAW,QACX,cAAe,mCACf,yBAA0B,cAC1B,0BAA2B,aAE/B,gBAAiB,CACb,OAAU,IACV,SAAY,WAEhB,aAAc,CACV,MAAS,UACT,QAAW,IACX,kBAAmB,OACnB,iBAAkB,OAClB,MAAS,WAEb,aAAc,CACV,SAAY,WACZ,MAAS,OACT,OAAU,QAEd,MAAO,CACH,SAAY,QACZ,IAAO,IACP,KAAQ,IACR,MAAS,OACT,OAAU,OACV,YAA8B,EAAjBn5B,KAAKo5B,UAAgB,KAClC,aAAgC,EAAlBp5B,KAAKq5B,WAAiB,KACpC,mBAAoB,QACpB,QAAW,MACX,aAAc,sDACd,OAAU,oBACV,WAAc,WAAaJ,GAE/B,cAAe,CACX,QAAWxH,GAAqB6B,YAEpC,YAAa,CACT,MAAS,IACT,OAAU,IACV,YAAa,KAEjB,iBAAkB,CACd,YAAe,SACf,SAAY,WACZ,MAAS,QAEb,WAAY,CACR,SAAY,WACZ,kBAAmB,cACnB,WAAc,QAElB,YAAa,CACT,SAAY,WACZ,KAAQ,MACR,MAAS7B,GAAqBsB,YAAc,KAC5C,cAAehhB,KAAK8hB,OAAOpC,GAAqBsB,YAAc,GAAK,KACnE,sBAAuB,SACvB,UAAa,gBACb,QAAW,MACX,IAAOtB,GAAqB+B,gBAAkB,KAC9C,WAAc,WAAayF,EAAe,SAAWA,GAEzD,oBAAqB,CACjB,QAAW,MACX,IAAOxH,GAAqB8B,UAAY,MAE5C,oBAAqB,CACjB,QAAW,MACX,IAAO9B,GAAqB+B,gBAAkB,MAElD,eAAgB,CACZ,OAAU/B,GAAqBmC,aAAe,MAElD,uBAAwB,CACpB,SAAY,WACZ,KAASnC,GAAqBiC,kBAAqB,KACnD,KAASjC,GAAqBsB,YAAc,EAAItB,GAAqBmC,aAAenC,GAAqBiC,kBAAqB,KAC9H,MAASsF,EAAmB,KAC5B,OAAWA,EAAmB,EAAK,KACnC,SAAY,UAEhB,eAAgB,CACZ,SAAY,WACZ,MAASA,EAAmB,KAC5B,OAAUA,EAAmB,KAC7B,gBAAiBA,EAAmB,KACpC,mBAAoBh5B,KAAKi4B,WAAWE,WACpC,QAAW,OAEf,aAAc,CACV,SAAY,WACZ,IAAO,MACP,KAAS1G,GAAqBsB,YAAc,EAAItB,GAAqBmC,aAAgB,KACrF,MAASnC,GAAqBkC,eAAiB,KAC/C,OAAUlC,GAAqBkC,eAAiB,KAChD,SAAY,SACZ,UAAW,MACX,gBAAiBlC,GAAqBkC,eAAiB,MAE3D,QAAS,CACL,SAAY,WACZ,MAAS,OACT,IAAOlC,GAAqB8B,UAAY,KACxC,MAASvzB,KAAK6yB,YAAc,KAC5B,OAAmD,EAAzCpB,GAAqBgC,kBAAwB,KACvD,aAAc,GAAKhC,GAAqBgC,kBAAoB,KAC5D,sBAAuB,SACvB,QAAW,MACX,UAAa,iBACb,WAAc,4CAElB,gBAAiB,CACb,QAAW,MACX,UAAa,iBAEjB,gBAAiB,CACb,QAAW,MACX,MAAS,UAEb,WAAY,CACR,gBAAiB,MACjB,aAAcoF,EACd,aAAc,SACd,mBAAoB74B,KAAKi4B,WAAWC,GACpC,YAAa,OACb,MAASl4B,KAAKi4B,WAAWS,WAE7B,iBAAkB,CACd,OAAUjH,GAAqBgC,kBAAoB,KACnD,aAAchC,GAAqBgC,kBAAoB,KACvD,gBAAiB,MACjB,WAAc,oBAAsBwF,GAExC,eAAgB,CACZ,OAAWxH,GAAqBgC,kBAAoB,EAAK,KACzD,MAAUhC,GAAqBqB,iBAAmB,EAAK,KACvD,SAAY,WACZ,IAAO,OACP,KAAQ,OACR,aAAcrB,GAAqBgC,kBAAoB,KACvD,gBAAiB,MACjB,QAAW,OACX,mBAAoB,OACpB,UAAW,KACX,aAAcsF,GAElB,aAAc,CACV,SAAY,WACZ,QAAW,eACX,MAAS,OACT,OAAUtH,GAAqBgC,kBAAoB,KACnD,gBAAiB,cACjB,mBAAoBzzB,KAAKi4B,WAAWE,WACpC,WAAc,2BAA6Bn4B,KAAKi4B,WAAWI,SAAW,QAAUr4B,KAAKi4B,WAAWE,WAAa,SAC7G,WAAc,oBAAsBc,GAExC,yBAA0B,CACtB,mBAAoBj5B,KAAKi4B,WAAWO,YAExC,uBAAwB,CACpB,mBAAoBx4B,KAAKi4B,WAAWO,YAExC,iBAAkB,CACd,SAAY,WACZ,mBAAoB,OAASx4B,KAAKyyB,gBAAkB,IACpD,MAAS,OACT,OAAU,OACV,IAAO,OACP,KAAQ,QAEZ,WAAY,CACR,QAAW,sBAEf,gBAAiB,CACb,aAAc,OACd,OAAUhB,GAAqBgC,kBAAoB,KACnD,OAAU,WAEd,OAAQ,CACJ,MAAS,QACT,aAAc,OACd,gBAAiB,OAErB,SAAU,CACN,aAAc,QACd,SAAY,SACZ,YAAa,aACb,QAAW,oBACX,YAAa,OACb,cAAe,OACf,MAASzzB,KAAKi4B,WAAWQ,YAE7B,QAAS,CACL,aAAc,QACd,gBAAiB,OACjB,SAAY,SACZ,YAAa,aACb,cAAe,OACf,YAAa,OACb,cAAe,SACf,aAAc,QAElB,cAAe,CACX,QAAW,eACX,YAAa,QACb,OAAU,aACV,OAAUhH,GAAqBgC,kBAAoB,KACnD,YAAa,OACb,iBAAkB,QAClB,MAASzzB,KAAKi4B,WAAWQ,YAE7B,mBAAoB,CAChB,QAAW,QACX,OAAUhH,GAAqBgC,kBAAoB,MAEvD,uBAAwB,CACpB,QAAW,aACX,iBAAkB,UAEtB,WAAY,CACR,gBAAiB,OACjB,YAAa,OACb,cAAe,MACf,iBAAkB,QAClB,MAAS,UACT,aAAc,QAElB,aAAc,CACV,MAASzzB,KAAKi4B,WAAWU,aACzB,WAAc,SAAWM,GAE7B,mBAAoB,CAChB,MAASj5B,KAAKi4B,WAAWW,YAE7B,UAAW,CACP,SAAY,WACZ,MAAS,IACT,MAAS,MACT,OAAU,MACV,QAAW,OACX,gBAAiB,OACjB,OAAU,gBACV,aAAc,cACd,OAAU,UACV,WAAc,oBAAsBK,GAExC,gBAAiB,CACb,OAAU,eAEd,eAAgB,CACZ,MAAS,MACT,OAAU,MACV,SAAY,SACZ,mBAAoB,OAASj5B,KAAK6xB,SAAW,uDAC7C,QAAW7xB,KAAKi4B,WAAWM,gBAE/B,gBAAiB,CACb,mBAAoBv4B,KAAKi4B,WAAWG,UAExC,UAAW,CACP,QAAW,QACX,OAAU,OACV,cAAe,OACf,aAAc,SACd,mBAAoBp4B,KAAKi4B,WAAWE,WACpC,gBAAiB,cACjB,SAAY,SACZ,OAAU,UACV,WAAc,oBAAsBc,GAExC,gBAAiB,CACb,QAAW,eACX,MAAS,MACT,OAAU,OACV,eAAgB,MAChB,iBAAkB,MAClB,mBAAoB,OAASj5B,KAAK6xB,SAAW,kDAAoD7xB,KAAKiyB,MAAQ,QAC9G,oBAAqB,YACrB,sBAAuB,YAE3B,eAAgB,CACZ,QAAW,eACX,MAAS,OACT,OAAU,OACV,cAAe,OACf,mBAAoB,OAASjyB,KAAK6xB,SAAW,+CAAiD7xB,KAAKiyB,MAAQ,cAC3G,oBAAqB,YACrB,sBAAuB,YAE3B,gBAAiB,CACb,QAAW,eACX,iBAAkB,MAClB,aAAc,SACd,YAAa,OACb,cAAe,OACf,SAAY,SACZ,YAAa,aACb,MAASjyB,KAAKi4B,WAAWQ,WACzB,WAAc,SAAWQ,GAE7B,gBAAiB,CACb,mBAAoBj5B,KAAKi4B,WAAWG,SACpC,MAASp4B,KAAKi4B,WAAWW,YAE7B,kBAAmB,CACf,MAAS54B,KAAKi4B,WAAWW,YAG7B,gBAAiB,CACb,SAAY,WACZ,IAA6B,GAApB54B,KAAKoyB,aAAoB,MAEtC,cAAe,CACX,sBAAuB,SACvB,UAAa,mBAEjB,SAAU,CACN,SAAY,WACZ,MAAUpyB,KAAKkyB,YAAc,EAAK,KAClC,OAAUlyB,KAAKoyB,aAAe,KAC9B,IAAOX,GAAqB8B,UAAY,KACxC,aAAc,QACd,KAAQ,MACR,cAAexhB,KAAK8hB,OAAO7zB,KAAKkyB,YAAc,GAAK,KACnD,SAAY,SACZ,gBAAiB,MACjB,aAAc4G,EACd,UAAa,kBACb,WAAc,WAAaG,EAAe,SAAWA,GAEzD,iBAAkB,CACd,QAAW,MACX,IAAOj5B,KAAKoyB,aAAe,MAE/B,gBAAiB,CACb,SAAY,WACZ,MAAUpyB,KAAKkyB,YAAc,EAAK,KAClC,OAAUlyB,KAAKoyB,aAAe,KAC9B,SAAY,SACZ,gBAAiB,OAErB,eAAgB,CACZ,cAAe,OACf,MAASpyB,KAAKkyB,YAAc,MAEhC,kBAAmB,CACf,QAAW,IACX,WAAc,gBAElB,+BAAgC,CAC5B,QAAW,OAEf,4BAA6B,CACzB,SAAY,WACZ,OAAU,IACV,OAAU,OACV,gBAAiB,aAErB,kBAAmB,CACf,MAAS,OAEb,wBAAyB,CACrB,MAAS,OACT,mBAAoBlyB,KAAKi4B,WAAWC,GACpC,QAAW,OAEf,iBAAkB,CACd,MAAS,IACT,mBAAoB,UACpB,QAAW,OAEf,qBAAsB,CAClB,MAAS,MACT,MAAS,IACT,YAAa,OACb,cAAe,OACf,MAASl4B,KAAKi4B,WAAWS,UACzB,mBAAoB,OACpB,gBAAiB,cAKrB14B,KAAK+2B,aAAa,KAAM,IACxB/3B,EAAEmN,OAAOgtB,EAAc,CACnB,kBAAmB,CACf,SAAY,YAEhB,aAAc,CACV,SAAY,YAEhB,aAAc,CACV,OAAU,UAIlBn5B,KAAK+2B,aAAa,KAAM,IACxB/3B,EAAEmN,OAAOgtB,EAAc,CACnB,cAAe,CACX,QAAW,SACX,KAAQ,IACR,OAAU,aAAen5B,KAAKi4B,WAAWG,UAE7C,mBAAoB,CAChB,QAAW,QAEf,mBAAoB,CAChB,QAAW,UAMvB,IAAIkB,EAAgB,CACZ,sBAAuB,gBAAiB,aAAc,UACtD,cAAe,YAAa,kBAAmB,cAEnDC,EAAkB,CAAC,QAAS,MAAO,KAAM,IAAK,UAClD,IAAK,IAAIjiB,KAAY6hB,EACjB,IAAK,IAAIK,EAAK,EAAGA,EAAKF,EAAcn1B,OAAQq1B,IAAM,CAC9C,IAAIntB,EAAOitB,EAAcE,GACzB,GAAIntB,KAAQ8sB,EAAa7hB,GAErB,IADA,IAAInI,EAAMgqB,EAAa7hB,GAAUjL,GACxBotB,EAAK,EAAGA,EAAKF,EAAgBp1B,OAAQs1B,IAC1CN,EAAa7hB,GAAU,IAAMiiB,EAAgBE,GAAM,IAAMptB,GAAQ8C,EAMjF,IAAqCuqB,EAC7BC,EAuBAC,EACAC,EACAC,EA1B6BJ,EAmCTR,EAXpBU,GAvBAD,EAAoB,SAASI,GAC7B,IAAIC,EAAK,GACT,IAAK,IAAI1iB,KAAYyiB,EAAY,CAI7BC,GAAM,KAHY1iB,EACbvW,QAAQ,KAAM,IAAM0wB,GAAqB4B,cAAgB,KACzDtyB,QAAQ,MAAO,IAAM0wB,GAAqB4B,cAAgB,KACpC,KAC3B,IAAIzW,EAAQmd,EAAWziB,GACvB,IAAK,IAAI9V,KAAKob,EACVod,GAAMx4B,EAAI,IAAMob,EAAMpb,GAAK,IAE/Bw4B,GAAM,IAEV,OAAOA,IAqBDb,GAnBoB,SAASc,GACnC,IAAIC,EAAM,GACV,IAAK,IAAIC,KAAMF,EACXC,GAAO,KAAOC,EAAK,KAAOR,EAAkBM,EAAQE,IAAO,MAE/D,OAAOD,EAGkCE,CAAwBV,GACjEG,EAAUjxB,SAASyxB,MAAQzxB,SAASsO,qBAAqB,QAAQ,IAAMtO,SAAS0xB,gBAChFR,EAAWlxB,SAASwT,cAAc,SACtCyd,EAAQnd,YAAYod,GACpBA,EAASS,aAAa,OAAQ,YAC1BT,EAASU,WACTV,EAASU,WAAWC,QAAUb,EAE9BE,EAASjb,YAAc+a,GAMnCnI,GAAqBn2B,UAAU63B,YAAcn0B,EAAE2P,UAAS,WACpD,GAAK3O,KAAK0yB,UAAV,CAGA,IAAI9mB,EAAO5L,KAGX4L,EAAK+rB,UAAY,gBAAiB1uB,OAElC2C,EAAK2mB,SAAW3mB,EAAK8mB,UACrB,IAAIgI,EAAgB9uB,EAAK8mB,UAAUlf,MAE3B,0GAEJmnB,EAAc/uB,EAAK8mB,UAAUlf,MACzB,yBAER,GAAIknB,GAIA,GAHA9uB,EAAK2qB,YAAa,EAClB3qB,EAAK8rB,cAAgBgD,EAAc,GAE/B9uB,EAAK+rB,UAAW,CAChB1uB,OAAgC,wBAAI,WAC5B2C,EAAKgpB,QAAQ,gBACbhpB,EAAKgvB,mBAKb,IAAIzf,EAAMvS,SAASwT,cAAc,UACjCjB,EAAIkB,IAAMzQ,EAAKgmB,kBAAoB,6BACnC,IAAIiJ,EAAiBjyB,SAASsO,qBAAqB,UAAU,GAC7D2jB,EAAetf,WAAWiB,aAAarB,EAAK0f,SAEzCF,IACP/uB,EAAK2qB,YAAa,EAClB3qB,EAAKgsB,YAAc+C,EAAY,KAI/B/uB,EAAKmrB,aAAa,KAAM,IAAMnrB,EAAKmrB,aAAa,UAAW,MAC3DnrB,EAAK2qB,YAAa,EAClB3qB,EAAK+mB,cAAe,OAI5BlB,GAAqBn2B,UAAU+6B,eAAiBr3B,EAAE2P,UAAS,WAEvD,IAAI/C,EAAO5L,KACXhB,EAAE6W,eAAejK,EAAKgpB,QAAQ,MAAO,SAAS,WAC1ChpB,EAAKwoB,aAGT,IAAI0G,EAAY,SAAS/f,EAAIggB,GACzB,IAAIC,EAAS,GAMb,OALIpyB,SAASqyB,aAAeryB,SAASqyB,YAAYC,iBAC7CF,EAASpyB,SAASqyB,YAAYC,iBAAiBngB,EAAI,MAC5CA,EAAGogB,eACVH,EAASjgB,EAAGogB,cAETH,EAAOD,IAGlB,GAAI/6B,KAAK2sB,YAAa,CAClB,IAAIyJ,EAAWp2B,KAAK40B,QAAQ,WACxBwB,GAAkD,WAAtC0E,EAAU1E,EAAU,eAAiE,SAAnC0E,EAAU1E,EAAU,YAClFp2B,KAAKs0B,qBAKjB7C,GAAqBn2B,UAAUg5B,eAAiBt1B,EAAE2P,UAAS,SAASysB,GAC3Dp7B,KAAKq0B,kBACNr0B,KAAKq0B,iBAAkB,EAEnBr0B,KAAK2sB,cAEL3sB,KAAKk2B,uBAAuBl2B,KAAK2sB,aAAe,EAAI,IAAIze,KACxDlO,KAAK2xB,YAAYlG,QAIrBzrB,KAAKw2B,aAAa,qBAAsB4E,GAGxCp7B,KAAK4H,SAAiB,OAAU,OAAE,CAC9B,WAAc5H,KAAK2sB,YACnB,eAAkB,CACd,YAAe3sB,KAAK2sB,YACpB,WAAe3sB,KAAK8xB,WACpB,KAAe,MACf,KAAe,IAAI5jB,YAMnCujB,GAAqBn2B,UAAU44B,gBAAkB,SAASmH,GACtD,IAAIzvB,EAAO5L,KACX,GAAoC,IAAhCA,KAAKizB,gBAAgB9uB,OAAzB,CAcA,IATA,IAAIm3B,EAAiB,EACjBC,EAAW,GACXjf,EAAS,aACTgf,IACuB1vB,EAAKqnB,gBAAgB9uB,QAAUk3B,IAClDA,IACAA,EAAgB,OAGf3hC,EAAI,EAAGA,EAAIsG,KAAKizB,gBAAgB9uB,OAAQzK,IAAK,CAClD,IAAI8hC,EAAM,IAAIC,MACdD,EAAIlf,OAASA,EACbkf,EAAInf,IAAMrc,KAAKizB,gBAAgBv5B,GAC3B8hC,EAAIE,UACJpf,IAEJif,EAASr3B,KAAKs3B,GAIdx7B,KAAK+2B,aAAa,KAAM,IACxBrX,YAAW,WACP,IAAIic,GAAc,EAClB,IAAKjiC,EAAI,EAAGA,EAAI6hC,EAASp3B,OAAQzK,IACxB6hC,EAAS7hC,GAAGgiC,WACbC,GAAc,GAGlBA,GAAeN,IACfA,IACAA,EAAgB,QAErB,UApCHA,KAwCR5J,GAAqBn2B,UAAU25B,wBAA0Bj2B,EAAE2P,UAAS,WAChE1F,OAAO2yB,cAAc57B,KAAK67B,yBAC1B77B,KAAKm2B,gBAAgBlE,MAAM6J,WAAa,SACxC97B,KAAK+zB,QAAQgI,YAAY/7B,KAAKm2B,oBAGlC1E,GAAqBn2B,UAAU03B,mBAAqB,WAChD,IAAIgJ,EAAsB,SAASC,GAC/B,IAAIzoB,EAAQ9K,UAAUC,UAAU6K,MAAMyoB,GACtC,OAAOzoB,GAASA,EAAM,IAE1BxT,KAAKi3B,iBAAmB,GACxBj3B,KAAKi3B,iBAAyB,OAAK+E,EAAoB,iBACvDh8B,KAAKi3B,iBAA0B,QAAI+E,EAAoB,kBACvDh8B,KAAKi3B,iBAAqB,GAAS+E,EAAoB,gBAClDh8B,KAAKi3B,iBAAqB,IAAOhuB,OAAoB,iBAAK,kBAAmBA,UAC9EjJ,KAAKi3B,iBAAqB,GAAI,IAGlCj3B,KAAK+zB,QAAUnrB,SAAS6T,MAAQ7T,SAASsO,qBAAqB,QAAQ,GAClElX,KAAK+zB,UACL/zB,KAAKo5B,UAAYrnB,KAAKyU,IAClBxmB,KAAK+zB,QAAQmI,YAAatzB,SAAS0xB,gBAAgB4B,YACnDl8B,KAAK+zB,QAAQoI,YAAavzB,SAAS0xB,gBAAgB6B,YACnDn8B,KAAK+zB,QAAQqI,YAAaxzB,SAAS0xB,gBAAgB8B,aAEvDp8B,KAAKq5B,WAAatnB,KAAKyU,IACnBxmB,KAAK+zB,QAAQsI,aAAczzB,SAAS0xB,gBAAgB+B,aACpDr8B,KAAK+zB,QAAQuI,aAAc1zB,SAAS0xB,gBAAgBgC,aACpDt8B,KAAK+zB,QAAQwI,aAAc3zB,SAAS0xB,gBAAgBiC,eAK5D,IAAIC,EAASx8B,KAAKi3B,iBAAqB,GACnCwF,EAAgB7zB,SAASwT,cAAc,OAAO6V,MAC9CyK,EAAoB,SAASC,GACzB,GAAIA,KAAQF,EACR,OAAO,EAEX,IAAKD,EAGD,IADA,IAAI5f,EAAQ,CAAC,KADb+f,EAAOA,EAAK,GAAGC,cAAgBD,EAAK9yB,MAAM,IACjB,SAAW8yB,EAAM,MAAQA,GACzCjjC,EAAI,EAAGA,EAAIkjB,EAAMzY,OAAQzK,IAC9B,GAAIkjB,EAAMljB,KAAM+iC,EACZ,OAAO,EAInB,OAAO,GAEfz8B,KAAK80B,gBAAkB90B,KAAK+zB,SACxB2I,EAAkB,eAClBA,EAAkB,aACtB18B,KAAK83B,cAAgB93B,KAAKi3B,iBAAyB,QAAK,IAAMj3B,KAAKi3B,iBAA0B,SAAK,KAC9Fj3B,KAAK+zB,SACL2I,EAAkB,uBAClBA,EAAkB,gBAClBA,EAAkB,cAG1BjL,GAAqBn2B,UAAUm7B,iBAAmBz3B,EAAE2P,UAAS,WACzD,IAAI/C,EAAO5L,KACPq1B,EAAQ,CACJ,CACIta,GAAOnP,EAAKipB,+BACZhY,KAAO,UACPtL,MAAO,EACP4jB,KAAO,GAEX,CACIpa,GAAOnP,EAAKipB,+BACZhY,KAAO,MACPtL,MAAOkgB,GAAqB8B,UAC5B4B,MAAQ,KAEZ,CACIpa,GAAOnP,EAAKgpB,QAAQ,gBACpB/X,KAAO,UACPtL,MAAO,EACP4jB,KAAO,GAEX,CACIpa,GAAOnP,EAAKgpB,QAAQ,gBACpB/X,KAAO,MACPtL,MAA4B,GAApB3F,EAAKwmB,aACb+C,KAAO,IAInB,GAAIvpB,EAAKgnB,KAAM,CACX,IAAIsF,EAAKtsB,EAAKgpB,QAAQ,MAClBiI,EAAUjxB,EAAKgpB,QAAQ,WAC3BsD,EAAGjG,MAAMlpB,MAAQ,OACjBmvB,EAAGjG,MAAMjpB,OAAS,OAClB6zB,EAAQ5K,MAAMlpB,MAAQ,OAEtB6C,EAAKopB,WAAWppB,EAAKipB,+BAAgC,WACrDjpB,EAAKopB,WAAWkD,EAAI,WAEpB7C,EAAMnxB,KAAK,CACP6W,GAAOnP,EAAKgpB,QAAQ,MACpB/X,KAAO,UACPtL,MAAO,EACP4jB,KAAO1D,GAAqB6B,aAIrB1nB,EAAKgpB,QAAQ,gBACnBoD,UAAYpsB,EAAKisB,aAE1B,IAAIiF,EAAc,WACV7zB,OAAW,IAAKA,OAAW,GAAU,QACrC2C,EAAKgvB,kBAEThvB,EAAK+oB,eAAgB,EACrB/oB,EAAKipB,+BAA+B5C,MAAM6J,WAAa,UAEvDlwB,EAAKksB,cACLlsB,EAAKopB,WAAW,UAAW,WAC3BtV,WAAWod,EAAarL,GAAqB2B,YAE7CxnB,EAAKspB,aAAaG,EAAO5D,GAAqB2B,UAAW0J,MAIjErL,GAAqBn2B,UAAUk7B,aAAe,SAASxV,EAAYnH,EAAYiJ,GACvE9iB,KAAK2sB,aACL9S,EAAaA,GAAc,GAC3BA,EAAa7a,EAAEmN,OAAO0N,EAAY,CAC9B,YAAmB7Z,KAAK2sB,YACxB,WAAmB3sB,KAAK8xB,WACxB,aAAmB,YACnB,gBAAmB9xB,KAAKgyB,aAE5BhyB,KAAK4H,SAAgB,MAAEoZ,EAAYnH,EAAYiJ,IACxCA,GACPA,EAAGjpB,QAIX43B,GAAqBn2B,UAAUs/B,gBAAkB57B,EAAE2P,UAAS,WACxD,IAAI/C,EAAO5L,KACX,IAAI4L,EAAKmxB,aAAT,CAGAnxB,EAAKmxB,cAAe,EAEpB,IAAIC,EAAgBpxB,EAAKgpB,QAAQ,iBAC7BqI,EAAgBrxB,EAAKgpB,QAAQ,cAC7BsI,EAAgBtxB,EAAKgpB,QAAQ,kBAEjC,IAAI3rB,OAAW,GAAU,OAAEwoB,GAAqB4B,cAAgB,eAAgB,CAC5E,OAAU,CACN,QAAW,SAAShyB,GAChB,IAAI87B,EAAW97B,EAAc,OACzB+7B,EAAiBD,EAAsB,cACvC/uB,EAAM,SAAS1U,GACX,OAAQ,KAAOA,GAAGmQ,OAAO,IAE7BwzB,EAAoB,SAASC,GACzB,IAAIC,EAAOxrB,KAAK8hB,MAAMuJ,EAAiBE,GACnCE,EAAOzrB,KAAK0U,MAAM8W,EAAO,IACzBE,EAAQ1rB,KAAK0U,MAAM+W,EAAO,IAC9BD,GAAe,GAAPC,EACRA,GAAgB,GAARC,EACRR,EAAcjF,UAAY,KAAOyF,EAAQA,EAAQ,IAAM,IAAMrvB,EAAIovB,GAAQ,IAAMpvB,EAAImvB,IAE3FF,EAAkB,GAClBzxB,EAAKiwB,wBAA0B5yB,OAAOy0B,aAAY,WAC9C,IAAIJ,EAAeH,EAAyB,iBAC5CH,EAAa/K,MAAMlpB,MAASu0B,EAAeF,EAAiB,IAAO,IACnEC,EAAkBC,KACnB,KACHt+B,EAAE6W,eAAeqnB,EAAa,SAAS,SAAStuB,GAC5C,IAAI+uB,EAAS5rB,KAAKyU,IAAI,EAAG5X,EAAEgvB,MAAQV,EAAYW,wBAAwBC,MACvEX,EAAiB,OAAEC,EAAiBO,EAAST,EAAYd,aAAa,cAW1F,IAweI2B,GACAC,GAzeAC,GAAiB,aAErBj/B,EAAEmN,OAAO8xB,GAAe3iC,UAAWytB,IAEnCkV,GAAe3iC,UAAU2uB,MAAQ,SAASnJ,GACtC9gB,KAAKoqB,UAAYtJ,GAsBrBmd,GAAe3iC,UAAUsK,IAAMiiB,IAA6B,SAASxb,EAAM4c,EAAIrc,GAC3E,IAAIgE,EAAO5Q,KAAKgpB,WAAW3c,EAAM4c,GAgBjC,OAfIjqB,EAAEwO,SAASnB,KACXO,EAAWqc,GAGXjpB,KAAK8nB,YAAY,kBACjB9nB,KAAKoqB,UAAuB,YAAE0C,qBAAqBlkB,SAASC,UAIhE+H,EAAe,KAAI5R,EAAEmN,OACjB,GACAnN,EAAEyZ,KAAKsB,oBACP/Z,KAAKoqB,UAAuB,YAAE2C,oBAC9Bnc,EAAe,MAEZ5Q,KAAKsf,cAAc1O,EAAMhE,MAwBpCqxB,GAAe3iC,UAAUivB,SAAW1C,IAA6B,SAASxb,EAAM4c,EAAIrc,GAChF,IAAIgE,EAAO5Q,KAAKspB,gBAAgBjd,EAAM4c,GAItC,OAHIjqB,EAAEwO,SAASnB,KACXO,EAAWqc,GAERjpB,KAAKsf,cAAc1O,EAAMhE,MAgBpCqxB,GAAe3iC,UAAUkvB,MAAQ3C,IAA6B,SAASxb,EAAMO,GACzE,IAAIgE,EAAO5Q,KAAKopB,aAAa/c,GAC7B,OAAOrM,KAAKsf,cAAc1O,EAAMhE,MA4BpCqxB,GAAe3iC,UAAU4iC,UAAYrW,IAA6B,SAASxb,EAAM8xB,EAAIvxB,GACjF,IAAIgE,EAAO,GACPwtB,EAAO,GAuBX,OAtBIp/B,EAAEwO,SAASnB,IACXrN,EAAEkM,KAAKmB,GAAM,SAAS0B,EAAGvM,GACrB,IAAKxB,KAAKmpB,sBAAsB3nB,GAAI,CAChC,GAAIuB,MAAM0W,WAAW1L,IAEjB,YADAhD,EAAU5E,MAAM,kFAGhBi4B,EAAK58B,GAAKuM,KAGnB/N,MACH4M,EAAWuxB,IAIPn/B,EAAEiM,YAAYkzB,KACdA,EAAK,GAETC,EAAK/xB,GAAQ8xB,GAEjBvtB,EAAe,KAAIwtB,EAEZp+B,KAAKsf,cAAc1O,EAAMhE,MAsBpCqxB,GAAe3iC,UAAU+iC,OAASxW,IAA6B,SAAS4B,EAAW9uB,EAAOiS,GAClF5N,EAAEwO,SAASic,KACX7c,EAAWjS,GAEf,IAAIiW,EAAO5Q,KAAK2pB,cAAcF,EAAW9uB,GACzC,OAAOqF,KAAKsf,cAAc1O,EAAMhE,MAcpCqxB,GAAe3iC,UAAUyZ,OAAS8S,IAA6B,SAAS4B,EAAW9uB,EAAOiS,GAClF5N,EAAEwO,SAASic,KACX7c,EAAWjS,GAEf,IAAIiW,EAAO5Q,KAAK6pB,cAAcJ,EAAW9uB,GACzC,OAAOqF,KAAKsf,cAAc1O,EAAMhE,MA6BpCqxB,GAAe3iC,UAAUmvB,MAAQ5C,IAA6B,SAAS4B,EAAW9c,EAAQC,GAClF5N,EAAEwO,SAASic,KACX7c,EAAWD,GAEf,IAAIiE,EAAO5Q,KAAKwpB,aAAaC,EAAW9c,GACxC,OAAO3M,KAAKsf,cAAc1O,EAAMhE,MAsBpCqxB,GAAe3iC,UAAUgjC,aAAezW,IAA6B,SAAS0W,EAAQ1kB,EAAYjN,GAC9F,GAAK5N,EAAE2O,SAAS4wB,KACZA,EAAS9kB,WAAW8kB,IAChBx7B,MAAMw7B,IAMd,OAAOv+B,KAAKq+B,OAAO,gBAAiBr/B,EAAEmN,OAAO,CACzC,QAAWoyB,GACZ1kB,GAAajN,GAPR7B,EAAU5E,MAAM,8EAoB5B83B,GAAe3iC,UAAUkjC,cAAgB,SAAS5xB,GAC9C,OAAO5M,KAAK4F,IAAI,gBAAiB,GAAIgH,IAazCqxB,GAAe3iC,UAAUmjC,YAAc,WACnC,GAAKz+B,KAAK0+B,mBAAV,CAIA,IAAI9tB,EAAO,CAAC,QAAW5Q,KAAKoqB,UAAUuU,mBACtC,OAAO3+B,KAAKsf,cAAc1O,GAJtB7F,EAAU5E,MAAM,wEAOxB83B,GAAe3iC,UAAUwO,SAAW,WAChC,OAAO9J,KAAKoqB,UAAUtgB,WAAa,WAGvCm0B,GAAe3iC,UAAUgkB,cAAgB,SAAS1O,EAAMhE,GACpDgE,EAAa,OAAI5Q,KAAK8nB,YAAY,SAClClX,EAAmB,aAAI5Q,KAAKoqB,UAAUuU,kBACtC,IAAIC,EAAY5+B,KAAKoqB,UAAUyU,aAAa,cACxCC,EAAU9+B,KAAKoqB,UAAUyU,aAAa,YACtCE,EAA4B/+B,KAAKoqB,UAAUyU,aAAa,8BACxDD,IACAhuB,EAAiB,WAAIguB,GAErBE,IACAluB,EAAe,SAAIkuB,GAEnBC,IACAnuB,EAAiC,2BAAImuB,GAGzC,IAAIrU,EAAoB1rB,EAAE8O,YAAY8C,GAClCga,EAAiB5rB,EAAEkQ,SAASwb,EAAmB,KAEnD,OAAK1qB,KAAK0+B,mBAYH1+B,KAAKoqB,UAAUO,gBAAgB,CAClCC,eAAgBA,EAChB7F,SAAU/kB,KAAK8nB,YAAY,YAAc,WACzC+C,QAAS7qB,KAAKoqB,UAAUU,iBAAiBkU,QAC1CpyB,IAfC5M,KAAKi/B,SAASruB,GACT5R,EAAEiM,YAAY2B,KACX5M,KAAK8nB,YAAY,WACjBlb,EAAS,CAACsyB,QAAS,EAAG/4B,MAAO,OAE7ByG,GAAU,IAGXge,IAUfqT,GAAe3iC,UAAUwsB,YAAc,SAASqX,GAC5C,OAAOn/B,KAAKoqB,UAAUnL,WAAWkgB,IAGrClB,GAAe3iC,UAAUojC,iBAAmB,WACxC,OAAiD,IAA1C1+B,KAAKoqB,UAAUgV,OAAOC,iBAIjCpB,GAAe3iC,UAAU2jC,SAAW,SAASruB,GAj2FT,SAk2FdA,EACd5Q,KAAKoqB,UAAuB,YAAEmD,qBAn2FF,OAm2FmC3c,GAl2FnC,cAm2FFA,EAC1B5Q,KAAKoqB,UAAuB,YAAEmD,qBAp2FF,YAo2FwC3c,GAn2FxC,WAo2FLA,EACvB5Q,KAAKoqB,UAAuB,YAAEmD,qBAr2FF,SAq2FqC3c,GAp2FrC,SAq2FPA,EACrB5Q,KAAKoqB,UAAuB,YAAEmD,qBAt2FF,OAs2FmC3c,GAr2FnC,YAs2FJA,EACxB5Q,KAAKoqB,UAAuB,YAAEmD,qBAv2FF,UAu2FsC3c,GAr2FtC,YAs2FJA,EACxB5Q,KAAKoqB,UAAuB,YAAEmD,qBAv2FF,UAu2FsC3c,GAx2FtC,WAy2FLA,EACvB5Q,KAAKoqB,UAAuB,YAAEmD,qBA12FF,SA02FqC3c,GAEjE7F,EAAU5E,MAAM,8BAA+ByK,IAIvDqtB,GAAe3iC,UAAUgkC,iBAAmB,SAASC,EAAQC,EAAe5yB,EAAU6yB,GAClF,IAAIC,EAAQ1/B,KACR2/B,EAAc3gC,EAAEmN,OAAO,GAAInM,KAAKoqB,UAAuB,YAAEmE,WAAWgR,IACpEK,EAAgBD,EAEf3gC,EAAEiM,YAAY00B,KAAgB3gC,EAAEwO,SAASmyB,IAAiB3gC,EAAEyO,cAAckyB,KAC3ED,EAAMtV,UAAuB,YAAE+D,uBAAuBoR,EAAQI,GAC1DF,IACAG,EAAgBH,EAAmBE,IAEvCH,EAAc3lC,KAAK6lC,EAAOE,GAAe,SAASxgB,EAAUxO,GAEvC,IAAbwO,GACAsgB,EAAMtV,UAAuB,YAAEmD,qBAAqBgS,EAAQI,GAE3D3gC,EAAEiM,YAAY2B,IACfA,EAASwS,EAAUxO,QAQnCqtB,GAAe3iC,UAAUukC,OAAS,SAC9BC,EAAeC,EAAeC,EAAkBC,EAAoBC,EAAiBC,EAAiBC,GAEtG,IAAIV,EAAQ1/B,KACRqgC,EAAgBrgC,KAAKoqB,UAAuB,YAAEmE,WA74FlB,WA84F5B+R,EAAgBtgC,KAAKoqB,UAAuB,YAAEmE,WA54FlB,WAs5FhC,GARAvuB,KAAKs/B,iBAp5F2B,OAo5FEt/B,KAAK4F,IAAKk6B,GAC5C9/B,KAAKs/B,iBAp5F2B,YAo5FOt/B,KAAKuqB,SAAU0V,GACtDjgC,KAAKs/B,iBAp5F2B,SAo5FIt/B,KAAKwqB,MAAO2V,GAAiB,SAASxb,GAAS,OAAO3lB,EAAEuI,KAAKod,MACjG3kB,KAAKs/B,iBAp5F2B,OAo5FEt/B,KAAKk+B,UAAW6B,GAClD//B,KAAKs/B,iBAn5F2B,SAm5FIt/B,KAAKyqB,MAAOyV,IAI3ClhC,EAAEiM,YAAYo1B,IAAkBrhC,EAAE2L,QAAQ01B,IAAkBA,EAAcl8B,OAAQ,CAUnF,IATA,IAAIo8B,EACAC,EAAkB,SAASphB,EAAUxO,GACpB,IAAbwO,GACAsgB,EAAMtV,UAAuB,YAAEmD,qBA55FX,UA45F+CgT,GAElEvhC,EAAEiM,YAAY+0B,IACfA,EAAiB5gB,EAAUxO,IAG1BlX,EAAI2mC,EAAcl8B,OAAS,EAAGzK,GAAK,EAAGA,IAC3C6mC,EAAeF,EAAcl5B,MACxBnI,EAAEyO,cAAc8yB,IACjBb,EAAMrB,OAAOkC,EAAcC,GAInCd,EAAMtV,UAAuB,YAAEqB,OAInC,IAAKzsB,EAAEiM,YAAYq1B,IAAkBthC,EAAE2L,QAAQ21B,IAAkBA,EAAcn8B,OAAQ,CAUnF,IATA,IAAIs8B,EACAC,EAAkB,SAASthB,EAAUxO,GACpB,IAAbwO,GACAsgB,EAAMtV,UAAuB,YAAEmD,qBA/6FX,UA+6F+CkT,GAElEzhC,EAAEiM,YAAYm1B,IACfA,EAAiBhhB,EAAUxO,IAG1ByB,EAAIiuB,EAAcn8B,OAAS,EAAGkO,GAAK,EAAGA,IAC3CouB,EAAeH,EAAcn5B,MACxBnI,EAAEyO,cAAcgzB,IACjBf,EAAM3qB,OAAO0rB,EAAcC,GAGnChB,EAAMtV,UAAuB,YAAEqB,SAIvCwS,GAAe3iC,UAAU6tB,sBAAwB,SAAS9c,GACtD,MAAgB,iBAATA,GAAoC,WAATA,GAA8B,eAATA,GAAkC,aAATA,GAAgC,+BAATA,GAI3G4xB,GAAe3iC,UAAe,IAAc2iC,GAAe3iC,UAAUsK,IACrEq4B,GAAe3iC,UAAoB,SAAS2iC,GAAe3iC,UAAUivB,SACrE0T,GAAe3iC,UAAiB,MAAY2iC,GAAe3iC,UAAUkvB,MACrEyT,GAAe3iC,UAAqB,UAAQ2iC,GAAe3iC,UAAU4iC,UACrED,GAAe3iC,UAAkB,OAAW2iC,GAAe3iC,UAAU+iC,OACrEJ,GAAe3iC,UAAkB,OAAW2iC,GAAe3iC,UAAUyZ,OACrEkpB,GAAe3iC,UAAiB,MAAY2iC,GAAe3iC,UAAUmvB,MACrEwT,GAAe3iC,UAAwB,aAAK2iC,GAAe3iC,UAAUgjC,aACrEL,GAAe3iC,UAAyB,cAAI2iC,GAAe3iC,UAAUkjC,cACrEP,GAAe3iC,UAAuB,YAAM2iC,GAAe3iC,UAAUmjC,YACrER,GAAe3iC,UAAoB,SAAS2iC,GAAe3iC,UAAUwO,SA+BrE,IAWI62B,GAAWv4B,EAASw4B,gBAAkB,oBAAqB,IAAIA,eAK/DC,IAAoBF,KAA2C,IAA/Bh4B,EAAU4B,QAAQ,UAAsD,IAAlC5B,EAAU4B,QAAQ,WAGxFuc,GAAa,KACb9c,EAAwB,aACxB8c,GAAa,WAET,OAAO9c,EAAwB,WAAE3H,MAAM2H,EAAalF,aAO5D,IAAIg8B,GAAiB,CACjB,SAAqC,8BACrC,WAAqC,OACrC,cAAqC,MACrC,SAAqC,uBACrC,WAAqC,EACrC,IAAqC,wBACrC,mBAAqC,EACrC,wBAAqC,EACrC,YAAqC,SACrC,iBAAqC,GACrC,cAAqC,GACrC,YAAqC,GACrC,OAAqC,aACrC,cAAqC,EACrC,eAAqC,EACrC,MAAqC,EACrC,SAAqC,EACrC,KAAqC,EACrC,OAAqC,EACrC,oBAAqC,IACrC,kBAAqC,IACrC,SAAqC,EACrC,qBAAqC,EACrC,gBAAqC,EACrC,eAAqC,EACrC,IAAqC,EACrC,6BAAqC,EACrC,gCAAqC,EACrC,kCAAqC,eACrC,+BAAqC,KACrC,mBAAqC,GACrC,YAAqC,GACrC,eAAqC,KACrC,uBAAqC,EACrC,YAAqC,EACrC,gBAAqC,EACrC,WAAqC,GACrC,wBAAqC,IACrC,yBAAqC,KAGrCC,IAAa,EAMbC,GAAc,aAWdC,GAAe,SAASv5B,EAAOyjB,EAAQlxB,GACvC,IAAIkkB,EACAvhB,EAxFkC,aAwFxB3C,EAAkC+jC,GAAkBA,GAAgB/jC,GAElF,GAAI2C,GA7FW,IA6FDmhC,GACV5f,EAAWvhB,MACR,CACH,GAAIA,IAAWoC,EAAE2L,QAAQ/N,GAErB,YADAmO,EAAU5E,MAAM,gCAAkClM,GAGtDkkB,EAAW,IAAI6iB,GAiBnB,GAdA7iB,EAAS+iB,eAAiB,GAC1B/iB,EAASgjB,6BAA8B,EACvChjB,EAASijB,kDAAoD,GAE7DjjB,EAAS8L,MAAMviB,EAAOyjB,EAAQlxB,GAE9BkkB,EAAiB,OAAI,IAAI8f,GACzB9f,EAAiB,OAAE8L,MAAM9L,GAIzB9V,EAAOC,MAAQD,EAAOC,OAAS6V,EAASc,WAAW,SAEnDd,EAA8B,oBAAIA,EAASc,WAAW,aAClDd,EAASc,WAAW,aAAc,CAG7BrD,GAAUyE,kBAAkBlC,EAASc,WAAW,SAFnC,IACQ,KAIdrD,GAAU6E,qBAIlB7E,GAAU5Y,KAAKmb,IAHfA,EAA8B,qBAAI,EAClCpT,EAAUC,IAAI,gFAJdmT,EAA8B,qBAAI,EAClCpT,EAAUC,IAAI,gEAkBtB,OAPKhM,EAAEiM,YAAYrO,IAAWoC,EAAE2L,QAAQ/N,KAGpCuhB,EAASkjB,eAAexnC,KAAKskB,EAAiB,OAAGvhB,EAAe,QAChEuhB,EAASkjB,eAAezkC,IAGrBuhB,GAGPmjB,GAA0B,SAAS1wB,GACnC,IAAI2wB,EAAYviC,EAAEoQ,WAAWwB,GAE7B,MAAO,CAAC,KADW5R,EAAE2R,aAAa4wB,KAsBtCP,GAAY1lC,UAAU0H,KAAO,SAAU0E,EAAOyjB,EAAQlxB,GAClD,GAAI+E,EAAEiM,YAAYhR,GACd8Q,EAAU5E,MAAM,iEADpB,CAIA,GAzKsC,aAyKlClM,EAAJ,CAKA,IAAIkkB,EAAW8iB,GAAav5B,EAAOyjB,EAAQlxB,GAI3C,OAHA+jC,GAAgB/jC,GAAQkkB,EACxBA,EAASqjB,UAEFrjB,EARHpT,EAAU5E,MAAM,kGAkBxB66B,GAAY1lC,UAAU2uB,MAAQ,SAASviB,EAAOyjB,EAAQlxB,GAClD+F,KAAe,UAAI,EACnBA,KAAa,OAAI,GACjBA,KAAwB,kBAAI,GAI5B,IAAIyhC,EAAoB,KAClB,mBAAqBtW,GAAU,MAAQ/Q,EAAsB1S,EAAO,QAAS,MAC/E+5B,EAAkC,gBAAI,GAG1CzhC,KAAK0hC,WAAW1iC,EAAEmN,OAAO,GAAI20B,GAAgBW,EAAmBtW,EAAQ,CACpE,KAAQlxB,EACR,MAASyN,EACT,aA3MkC,aA2MjBzN,EAAkCA,EAAO0nC,YAA8B1nC,GAAQ,WAGpG+F,KAAW,KAAI,aAEfA,KAAK4hC,mBAAqB,GAC1B5hC,KAAK6hC,gBAAkB,GACvB7hC,KAAK8hC,kBAAoB,GACzB9hC,KAAKo/B,OAAS,CACV,oBAAsB,EACtB,iBAAmB,GAIvBp/B,KAAK8qB,iBAAmB,GACxB9qB,KAAK+hC,gBAAkB/hC,KAAKif,WAAW,kBACnCjf,KAAK+hC,kBACA/iC,EAAEqW,aAAaK,cAAa,IAAUirB,IAIvC3gC,KAAKgiC,uBACDlb,IAAc1e,EAASkO,kBACvBlO,EAASkO,iBAAiB,SAAUtX,EAAE9D,MAAK,WAKvC8E,KAAK8qB,iBAAiBjnB,OAAOuhB,MAAM,CAAC0B,YAAY,MACjD9mB,SAXPA,KAAK+hC,iBAAkB,EACvBh3B,EAAUC,IAAI,+EAetBhL,KAAkB,YAAIA,KAAa,OAAI,IAAIkrB,GAAoBlrB,KAAa,QAC5EA,KAAKiiC,aAEL,IAAIC,EAAOljC,EAAE6S,OACR7R,KAAK2+B,mBAIN3+B,KAAK+rB,cAAc,CACf,YAAemW,EACf,WAAcA,GACf,KAMXlB,GAAY1lC,UAAUkmC,QAAU,WAC5BxhC,KAAKif,WAAW,SAAhBjf,CAA0BA,MAC1BA,KAAKmiC,2BAITnB,GAAY1lC,UAAU6mC,wBAA0B,WAC5CniC,KAAkB,YAAE6sB,sBAAsB5iB,EAAWpB,UACjD7I,KAAKif,WAAW,iBAChBjf,KAAkB,YAAE4sB,yBAEpB5sB,KAAKif,WAAW,kBAChBjf,KAAkB,YAAE8sB,qBAAqB7iB,EAAWpB,WAI5Dm4B,GAAY1lC,UAAU8mC,YAAc,WAChCpjC,EAAEkM,KAAKlL,KAAK4hC,oBAAoB,SAAS90B,GACrC9M,KAAKqiC,WAAWhgC,MAAMrC,KAAM8M,KAC7B9M,MAEEA,KAAKsiC,0BACNtjC,EAAEkM,KAAKlL,KAAK6hC,iBAAiB,SAAS/0B,GAClC9M,KAAKsf,cAAcjd,MAAMrC,KAAM8M,KAChC9M,aAGAA,KAAK4hC,0BACL5hC,KAAK6hC,iBAGhBb,GAAY1lC,UAAU+mC,WAAa,SAASE,EAAUhgC,GAClD,GAAIvC,KAAKif,WAAW,OAEhB,OADAlU,EAAU5E,MAAM,0DACT,EAGX,IAAK46B,GAED,OADA/gC,KAAK4hC,mBAAmB19B,KAAK,CAACq+B,EAAUhgC,KACjC,EAGX,IAAIigC,GAAK,IAAID,GAAWv/B,KAAKhD,MAC7B,OAAOwiC,EAAG5gC,MAAMS,MAAMmgC,EAAIjgC,IAY9By+B,GAAY1lC,UAAUmkB,kBAAoB,SAAS7S,EAAUgE,GACzD,GAAI5R,EAAEiM,YAAY2B,GACd,OAAO,KAGX,GAAI+zB,GAAS,CAIT,OAHwB,SAASvhB,GAC7BxS,EAASwS,EAAUxO,IAOvB,IAAI6xB,EAAMziC,KAAW,KACjB0iC,EAAgB,GAAK3wB,KAAK0U,MAAsB,IAAhB1U,KAAKC,UACrC2wB,EAAkB3iC,KAAKif,WAAW,eAAiB,IAAMyjB,EAAgB,IAK7E,OAJAD,EAAIC,GAAiB,SAAStjB,UACnBqjB,EAAIC,GACX91B,EAASwS,EAAUxO,IAEhB+xB,GAIf3B,GAAY1lC,UAAUgkB,cAAgB,SAAStM,EAAKpC,EAAMjJ,EAASiF,GAC/D,IAAIgX,GAAY,EAEhB,GAAIid,GAEA,OADA7gC,KAAK6hC,gBAAgB39B,KAAKY,WACnB8e,EAGX,IAAIgf,EAAkB,CAClBrjB,OAAQvf,KAAKif,WAAW,cACxBO,UAAWxf,KAAKif,WAAW,iBAC3B0H,QAAS3mB,KAAKif,WAAW,YAEzB4jB,EAAY,KAEXj2B,IAAa5N,EAAE0M,WAAW/D,IAA+B,iBAAZA,IAC9CiF,EAAWjF,EACXA,EAAU,MAEdA,EAAU3I,EAAEmN,OAAOy2B,EAAiBj7B,GAAW,IAC1Cg5B,KACDh5B,EAAQ4X,OAAS,OAErB,IAAIujB,EAA8B,SAAnBn7B,EAAQ4X,OACnBwjB,EAAiBjc,IAAcgc,GAAgD,eAApCn7B,EAAQ6X,UAAU1e,cAG7DkiC,EAAer7B,EAAQgf,QA4B3B,GA3BI/V,EAAc,UAAKoyB,GAAe,GAElChjC,KAAKif,WAAW,UAAWrO,EAAW,KAAI,GAC1CoyB,IAAgBpyB,EAAc,QAAI,GAClC5Q,KAAKif,WAAW,SAAUrO,EAAU,IAAI,GACvC+vB,KACG/zB,EACAgE,EAAe,SAAIhE,GACZo2B,GAAgBhjC,KAAKif,WAAW,WAKvCrO,EAAe,SAAI,mBAI3BA,EAAS,GAAI5Q,KAAKif,WAAW,MAAM,EAAE,EACrCrO,EAAQ,GAAI,IAAI1C,MAAOyG,UAAU7K,WAE7Bg5B,IACAD,EAAY,QAAUjyB,EAAW,YAC1BA,EAAW,MAGtBoC,GAAO,IAAMhU,EAAEyT,eAAe7B,GAE1B,QAASA,EAAM,CACf,IAAI4qB,EAAMvxB,EAAWmS,cAAc,OACnCof,EAAInf,IAAMrJ,EACV/I,EAAWwS,KAAKC,YAAY8e,QACzB,GAAIuH,EACP,IACInf,EAAYkD,GAAW9T,EAAK6vB,GAC9B,MAAOj0B,GACL7D,EAAU5E,MAAMyI,GAChBgV,GAAY,OAEb,GAAI+c,GACP,IACI,IAAIsC,EAAM,IAAIrC,eACdqC,EAAItM,KAAKhvB,EAAQ4X,OAAQvM,GAAK,GAE9B,IAAIoT,EAAUpmB,KAAKif,WAAW,eAQ9B,GAPI6jB,IACA1c,EAAQ,gBAAkB,qCAE9BpnB,EAAEkM,KAAKkb,GAAS,SAAS8c,EAAaC,GAClCF,EAAIG,iBAAiBD,EAAYD,MAGjCv7B,EAAQkf,iBAAqC,IAAhBoc,EAAI9hB,QAAyB,CAC1D8hB,EAAI9hB,QAAUxZ,EAAQkf,WACtB,IAAI2O,GAAa,IAAItnB,MAAOyG,UAKhCsuB,EAAII,iBAAkB,EACtBJ,EAAIK,mBAAqB,WAsBb,IAAIn9B,EArBZ,GAAuB,IAAnB88B,EAAIM,WACJ,GAAmB,MAAfN,EAAI/D,QACJ,GAAItyB,EACA,GAAIo2B,EAAc,CACd,IAAI5jB,EACJ,IACIA,EAAWpgB,EAAEkR,WAAW+yB,EAAIO,cAC9B,MAAO50B,GAEL,GADA7D,EAAU5E,MAAMyI,IACZjH,EAAQif,mBAGR,OAFAxH,EAAW6jB,EAAIO,aAKvB52B,EAASwS,QAETxS,EAAS9J,OAAOmgC,EAAIO,oBAUxBr9B,EAJA88B,EAAI9hB,UACH8hB,EAAI/D,SACL,IAAIhxB,MAAOyG,UAAY6gB,GAAcyN,EAAI9hB,QAEjC,UAEA,oBAAsB8hB,EAAI/D,OAAS,IAAM+D,EAAIQ,WAEzD14B,EAAU5E,MAAMA,GACZyG,GAEIA,EADAo2B,EACS,CAAC9D,OAAQ,EAAG/4B,MAAOA,EAAO+f,QAAS+c,GAEnC,IAM7BA,EAAIS,KAAKb,GACX,MAAOj0B,GACL7D,EAAU5E,MAAMyI,GAChBgV,GAAY,MAEb,CACH,IAAI+f,EAAS15B,EAAWmS,cAAc,UACtCunB,EAAOhgC,KAAO,kBACdggC,EAAOC,OAAQ,EACfD,EAAOE,OAAQ,EACfF,EAAOtnB,IAAMrJ,EACb,IAAIvX,EAAIwO,EAAWiN,qBAAqB,UAAU,GAClDzb,EAAE8f,WAAWiB,aAAamnB,EAAQloC,GAGtC,OAAOmoB,GAeXod,GAAY1lC,UAAU+lC,eAAiB,SAAS5wB,GAC5C,IAAIqzB,EAASC,EAAc,GAAIC,EAAc,GAAIC,EAAiB,GAClEjlC,EAAEkM,KAAKuF,GAAO,SAAS3D,GACfA,IACAg3B,EAAUh3B,EAAK,GACX9N,EAAE2L,QAAQm5B,GACVG,EAAe//B,KAAK4I,GACI,mBAAX,EACbA,EAAKjT,KAAKmG,MACHhB,EAAE2L,QAAQmC,IAAqB,UAAZg3B,EAC1BC,EAAY7/B,KAAK4I,GACV9N,EAAE2L,QAAQmC,KAAuC,IAA9Bg3B,EAAQv5B,QAAQ,UAA6C,mBAAnBvK,KAAK8jC,GACzEG,EAAe//B,KAAK4I,GAEpBk3B,EAAY9/B,KAAK4I,MAG1B9M,MAEH,IAAIkkC,EAAU,SAASC,EAAO79B,GAC1BtH,EAAEkM,KAAKi5B,GAAO,SAASr3B,GACnB,GAAI9N,EAAE2L,QAAQmC,EAAK,IAAK,CAEpB,IAAIs3B,EAAS99B,EACbtH,EAAEkM,KAAK4B,GAAM,SAASjT,GAClBuqC,EAASA,EAAOvqC,EAAK,IAAIwI,MAAM+hC,EAAQvqC,EAAKgQ,MAAM,YAGtD7J,KAAK8M,EAAK,IAAIzK,MAAMrC,KAAM8M,EAAKjD,MAAM,MAE1CvD,IAGP49B,EAAQH,EAAa/jC,MACrBkkC,EAAQF,EAAahkC,MACrBkkC,EAAQD,EAAgBjkC,OAK5BghC,GAAY1lC,UAAU0mC,qBAAuB,WACzC,IAAIt6B,EAAQ1H,KAAKif,WAAW,SAC5B,IAAKjf,KAAK8qB,iBAAiBjnB,OAAQ,CAC/B,IAAIwgC,EAAiB,CACjBrf,UAAWhlB,KAAa,OACxBklB,gBAAiBlmB,EAAE9D,MAAK,SAAS6pB,EAAUnU,EAAMjJ,EAASmb,GACtD9iB,KAAKsf,cACDtf,KAAKif,WAAW,YAAc8F,EAC9Buc,GAAwB1wB,GACxBjJ,EACA3H,KAAKyf,kBAAkBqD,EAAIlS,MAEhC5Q,OAEPA,KAAK8qB,iBAAmB,CACpBjnB,OAAQ,IAAIihB,GAAe,SAAWpd,EAAQ,MAAO,UAAW28B,GAChErF,OAAQ,IAAIla,GAAe,SAAWpd,EAAQ,MAAO,WAAY28B,GACjEtZ,OAAQ,IAAIjG,GAAe,SAAWpd,EAAQ,MAAO,WAAY28B,IAGzErlC,EAAEkM,KAAKlL,KAAK8qB,kBAAkB,SAASD,GACnCA,EAAQtZ,YAIhByvB,GAAY1lC,UAAUgpC,oBAAsB,WACxCtkC,KAAK+hC,iBAAkB,EACvB/iC,EAAEkM,KAAKlL,KAAK8qB,kBAAkB,SAASD,GACnCA,EAAQxF,OACRwF,EAAQjG,YAgBhBoc,GAAY1lC,UAAU4I,KAAO,SAAS4I,GAClC9M,KAAKqhC,eAAe,CAACv0B,KAczBk0B,GAAY1lC,UAAU8E,QAAU,SAASyD,QACd,IAAb,EACN7D,KAAKo/B,OAAOmF,oBAAqB,EAEjCvkC,KAAK8hC,kBAAoB9hC,KAAK8hC,kBAAkBl/B,OAAOiB,IAK/Dm9B,GAAY1lC,UAAUqvB,gBAAkB,SAAShjB,EAASiF,GACtD,IAAIge,EAAiBjjB,EAAQijB,eACzB7F,EAAWpd,EAAQod,SACnB8F,EAAUljB,EAAQkjB,QAClB2Z,EAA0B78B,EAAQ68B,wBAClCC,EAAuB98B,EAAQ88B,sBAAwB,GAC3D73B,EAAWA,GAAY,aAEvB,IAAI83B,GAAgC,EAChCC,EAA2B3lC,EAAE9D,MAAK,WAGlC,OAFA6P,EAAUC,IAAI,qBACdD,EAAUC,IAAI4f,GACP5qB,KAAKsf,cACRyF,EACAuc,GAAwB1W,GACxB6Z,EACAzkC,KAAKyf,kBAAkB7S,EAAUge,MAEtC5qB,MAcH,OAZIA,KAAK+hC,kBAAoByC,EACzB3Z,EAAQpH,QAAQmH,GAAgB,SAAShH,GACjCA,EACAhX,EAAS,EAAGge,GAEZ+Z,OAIRD,EAAgCC,IAG7BD,GAAiC9Z,GA0B5CoW,GAAY1lC,UAAUsG,MAAQ+lB,IAA0B,SAAS3G,EAAYnH,EAAYlS,EAASiF,GACzFA,GAA+B,mBAAZjF,IACpBiF,EAAWjF,EACXA,EAAU,MAGd,IAAI6X,GADJ7X,EAAUA,GAAW,IACc,UAC/B6X,IACA7X,EAAQ6X,UAAYA,GAExB,IAAIglB,EAA0B78B,EAA0B,iBAKxD,GAJwB,mBAAbiF,IACPA,EAAW,cAGX5N,EAAEiM,YAAY+V,GACdjW,EAAU5E,MAAM,gDADpB,CAKA,IAAInG,KAAK4kC,mBAAmB5jB,GAA5B,EAMAnH,EAAaA,GAAc,IACT,MAAI7Z,KAAKif,WAAW,SAGtC,IAAI4lB,EAAkB7kC,KAAkB,YAAE4uB,mBAAmB5N,GAC7D,IAAKhiB,EAAEiM,YAAY45B,GAAkB,CACjC,IAAIC,GAAiB,IAAI52B,MAAOyG,UAAYkwB,EAC5ChrB,EAAsB,UAAIJ,YAAYqrB,EAAiB,KAAMC,QAAQ,IAGzE/kC,KAAKmiC,0BAOLtoB,EAAa7a,EAAEmN,OACX,GACAnN,EAAEyZ,KAAKoB,aACP7Z,KAAkB,YAAE6Z,aACpBA,GAGJ,IAAImrB,EAAqBhlC,KAAKif,WAAW,sBACrCjgB,EAAE2L,QAAQq6B,GACVhmC,EAAEkM,KAAK85B,GAAoB,SAASC,UACzBprB,EAAWorB,MAGtBl6B,EAAU5E,MAAM,gDAAkD6+B,GAGtE,IAAIp0B,EAAO,CACP,MAASoQ,EACT,WAAcnH,GAEdvU,EAAMtF,KAAK2qB,gBAAgB,CAC3BC,eAAgB5rB,EAAEkQ,SAAS0B,EAAM,KACjCmU,SAAU/kB,KAAKif,WAAW,YAAc,UACxC4L,QAAS7qB,KAAK8qB,iBAAiBjnB,OAC/B2gC,wBAAyBA,EACzBC,qBAAsB98B,GACvBiF,GAIH,OAFA5M,KAAKklC,0CAA0Ct0B,GAExCtL,EApDHsH,EAAS,OAqEjBo0B,GAAY1lC,UAAU6pC,UAAYxd,IAA0B,SAASuC,EAAWkb,EAAWx4B,GAClF5N,EAAE2L,QAAQy6B,KACXA,EAAY,CAACA,IAEjB,IAAI/4B,EAAO,GAGX,OAFAA,EAAK6d,GAAakb,EAClBplC,KAAKusB,SAASlgB,GACPrM,KAAa,OAAE4F,IAAIskB,EAAWkb,EAAWx4B,MAcpDo0B,GAAY1lC,UAAU+pC,UAAY1d,IAA0B,SAASuC,EAAWC,EAAUvd,GACtF,IAAI04B,EAAatlC,KAAK6+B,aAAa3U,GACnC,QAAmBxrB,IAAf4mC,EAA0B,CAC1B,IAAIj5B,EAAO,GACXA,EAAK6d,GAAa,CAACC,GACnBnqB,KAAKusB,SAASlgB,QAEwB,IAAlCi5B,EAAW/6B,QAAQ4f,KACnBmb,EAAWphC,KAAKimB,GAChBnqB,KAAKusB,SAASlgB,IAGtB,OAAOrM,KAAa,OAAEyqB,MAAMP,EAAWC,EAAUvd,MAcrDo0B,GAAY1lC,UAAUiqC,aAAe5d,IAA0B,SAASuC,EAAWC,EAAUvd,GACzF,IAAI44B,EAAYxlC,KAAK6+B,aAAa3U,GAElC,QAAkBxrB,IAAd8mC,EAAyB,CACzB,IAAIC,EAAMD,EAAUj7B,QAAQ4f,GACxBsb,GAAO,IACPD,EAAUE,OAAOD,EAAK,GACtBzlC,KAAKusB,SAAS,CAACrC,UAAWsb,KAEL,IAArBA,EAAUrhC,QACVnE,KAAKwsB,WAAWtC,GAGxB,OAAOlqB,KAAa,OAAE+U,OAAOmV,EAAWC,EAAUvd,MAetDo0B,GAAY1lC,UAAUqqC,kBAAoBhe,IAA0B,SAAS3G,EAAYnH,EAAYkR,EAAQne,GACzG,IAAIg5B,EAAiB5mC,EAAEmN,OAAO,GAAI0N,GAAc,IAMhD,OALA7a,EAAEkM,KAAK6f,GAAQ,SAAShd,EAAGvM,GACnBuM,UACA63B,EAAepkC,GAAKuM,MAGrB/N,KAAK4B,MAAMof,EAAY4kB,EAAgBh5B,MAGlDo0B,GAAY1lC,UAAUuqC,gBAAkB,SAAU3b,EAAWC,GACzD,OAAOD,EAAY,IAAMxO,KAAKC,UAAUwO,IAG5C6W,GAAY1lC,UAAUwqC,yBAA2B,SAAU5b,EAAWC,UAC3DnqB,KAAKkhC,eAAelhC,KAAK6lC,gBAAgB3b,EAAWC,KAc/D6W,GAAY1lC,UAAUyqC,UAAY,SAAU7b,EAAWC,GACnD,IAAI6b,EAAUhmC,KAAK6lC,gBAAgB3b,EAAWC,GAC1C8b,EAAQjmC,KAAKkhC,eAAe8E,GAMhC,YALctnC,IAAVunC,GAAuBA,EAAM5b,aAAeH,GAAa+b,EAAM3b,YAAcH,KAC7E8b,EAAQ,IAAIjc,IACNC,MAAMjqB,KAAMkqB,EAAWC,GAC7BnqB,KAAKkhC,eAAe8E,GAAWC,GAE5BA,GASXjF,GAAY1lC,UAAU4qC,eAAiB,SAASjsB,GACxCjb,EAAEiM,YAAYgP,KACdA,EAAOhQ,EAAWxN,SAASqd,MAE/B9Z,KAAK4B,MAAM,eAAgB5C,EAAEyZ,KAAKuB,aAAaC,KA+BnD+mB,GAAY1lC,UAAU6qC,YAAc,WAChC,OAAOnmC,KAAKqiC,WAAWxoC,KAAKmG,KAAMuhB,GAAazc,YA8BnDk8B,GAAY1lC,UAAU8qC,YAAc,WAChC,OAAOpmC,KAAKqiC,WAAWxoC,KAAKmG,KAAM6hB,GAAa/c,YAoBnDk8B,GAAY1lC,UAAU+qC,WAAa,SAASrlB,GACpChiB,EAAEiM,YAAY+V,GACdjW,EAAU5E,MAAM,iDAIhBnG,KAAK4kC,mBAAmB5jB,IAI5BhhB,KAAkB,YAAE0uB,gBAAgB1N,GAAa,IAAI9S,MAAOyG,YAqBhEqsB,GAAY1lC,UAAUixB,SAAW,SAAS3P,EAAO/H,GAC7C7U,KAAkB,YAAEusB,SAAS3P,EAAO/H,IAuBxCmsB,GAAY1lC,UAAUywB,cAAgB,SAASnP,EAAOyP,EAAexX,GACjE7U,KAAkB,YAAE+rB,cAAcnP,EAAOyP,EAAexX,IAQ5DmsB,GAAY1lC,UAAUkxB,WAAa,SAASnxB,GACxC2E,KAAkB,YAAEwsB,WAAWnxB,IAGnC2lC,GAAY1lC,UAAUgrC,iBAAmB,SAASj6B,EAAM1R,GACpD,IAAIiiB,EAAQ,GACZA,EAAMvQ,GAAQ1R,EACdqF,KAAKusB,SAAS3P,IA2BlBokB,GAAY1lC,UAAU4E,SAAW,SAC7BqmC,EAAiBzG,EAAeC,EAAeC,EAAkBC,EAAoBC,EAAiBC,EAAiBC,GAUvH,IAAIoG,EAAuBxmC,KAAK2+B,kBAGhC,GAFA3+B,KAAKusB,SAAS,CAAC,SAAYga,KAEtBvmC,KAAK6+B,aAAa,cAAe,CAGlC,IAAID,EAAY4H,EAChBxmC,KAAK+rB,cAAc,CACf,4BAA8B,EAC9B,WAAc6S,GACf,IAKH2H,IAAoBC,GAAwBD,IAAoBvmC,KAAK6+B,aA7wHlC,aA8wHnC7+B,KAAKwsB,WA9wH8B,WA+wHnCxsB,KAAKusB,SAAS,CAAC,YAAega,KAElCvmC,KAAKymC,gCAAgCzmC,KAAK2+B,mBAC1C3+B,KAAKo/B,OAAOC,iBAAkB,EAE9Br/B,KAAa,OAAE6/B,OAAOC,EAAeC,EAAeC,EAAkBC,EAAoBC,EAAiBC,EAAiBC,GAIxHmG,IAAoBC,GACpBxmC,KAAK4B,MAAM,YAAa,CAAE,YAAe2kC,EAAiB,kBAAqBC,KAQvFxF,GAAY1lC,UAAU6E,MAAQ,WAC1BH,KAAkB,YAAE4kB,QACpB5kB,KAAKo/B,OAAOC,iBAAkB,EAC9B,IAAI6C,EAAOljC,EAAE6S,OACb7R,KAAK+rB,cAAc,CACf,YAAemW,EACf,WAAcA,GACf,KAmBPlB,GAAY1lC,UAAUqjC,gBAAkB,WACpC,OAAO3+B,KAAK6+B,aAAa,gBAuC7BmC,GAAY1lC,UAAUorC,MAAQ,SAASA,EAAOC,GAI1C,GAAID,IAAU1mC,KAAK6+B,aAx2HoB,uBA02HnC,OADA9zB,EAAUK,SAAS,oEACX,EAGZ,IAAIs0B,EAAQ1/B,KAIZ,OAHIhB,EAAEiM,YAAY07B,KACdA,EAAW3mC,KAAK2+B,mBAEhB+H,IAAUC,GACV3mC,KAAKsmC,iBAj3H8B,UAi3HCI,GAC7B1mC,KAAK4B,MAAM,gBAAiB,CAAE,MAAS8kC,EAAO,YAAeC,IAAY,WAE5EjH,EAAMx/B,SAASwmC,QAGnB37B,EAAU5E,MAAM,0DAChBnG,KAAKE,SAASwmC,IACN,IAehB1F,GAAY1lC,UAAUsrC,SAAW,SAASA,GACtC5mC,KAAKsmC,iBAAiB,cAAeM,IA4HzC5F,GAAY1lC,UAAUomC,WAAa,SAASvW,GACpCnsB,EAAEwO,SAAS2d,KACXnsB,EAAEmN,OAAOnM,KAAa,OAAGmrB,GAEJA,EAAmB,YAEpCnsB,EAAEkM,KAAKlL,KAAK8qB,kBAAkB,SAASD,GACnCA,EAAQrF,oBAIXxlB,KAAKif,WAAW,sBACjBjf,KAAa,OAAoB,iBAAIA,KAAa,OAAe,aAEhEA,KAAKif,WAAW,yBACjBjf,KAAa,OAAuB,oBAAIA,KAAa,OAAkB,gBAGvEA,KAAkB,aAClBA,KAAkB,YAAEurB,cAAcvrB,KAAa,QAEnDqI,EAAOC,MAAQD,EAAOC,OAAStI,KAAKif,WAAW,WAOvD+hB,GAAY1lC,UAAU2jB,WAAa,SAAS4nB,GACxC,OAAO7mC,KAAa,OAAE6mC,IAqB1B7F,GAAY1lC,UAAUujC,aAAe,SAASiI,GAC1C,OAAO9mC,KAAkB,YAAS,MAAE8mC,IAGxC9F,GAAY1lC,UAAUwO,SAAW,WAC7B,IAAI7P,EAAO+F,KAAKif,WAAW,QAI3B,MA92CsC,aA22ClChlB,IACAA,EAAO0nC,YAA8B1nC,GAElCA,GAGX+mC,GAAY1lC,UAAUspC,mBAAqB,SAAS5jB,GAChD,OAAOhiB,EAAEwT,YAAY7J,IACjB3I,KAAKo/B,OAAOmF,oBACZvlC,EAAEgO,QAAQhN,KAAK8hC,kBAAmB9gB,IAG1CggB,GAAY1lC,UAAU4pC,0CAA4Cvd,IAA0B,SAASkP,GACjG,GAAK72B,KAAKmhC,4BAIN,IADA,IAAI97B,EAAMrF,KAAwB,kBACzBtG,EAAI,EAAGA,EAAI2L,EAAIlB,OAAQzK,IAAK,CAEjC,GADY,IAAI+3B,GAAqBpsB,EAAI3L,GAAIsG,MACnC42B,oBAAoBC,GAE1B,YADA72B,KAAK+mC,mBAAmB1hC,EAAI3L,SANpCsG,KAAKohC,kDAAkDl9B,KAAK2yB,MAapEmK,GAAY1lC,UAAUmrC,gCAAkC9e,IAA0B,SAASqf,GACvF,GACKA,IACDhnC,KAAKo/B,OAAOC,kBACZr/B,KAAKif,WAAW,yBAHpB,CAQAlU,EAAUC,IAAI,+BAEd,IAAI4F,EAAO,CACP,SAAe,EACf,QAAe,IACf,IAAe,MACf,MAAe5Q,KAAKif,WAAW,SAC/B,YAAe+nB,GAEnBhnC,KAAKsf,cACDtf,KAAKif,WAAW,YAAc,WAC9BrO,EACA,CAAC2O,OAAQ,MAAOC,UAAW,OAC3Bxf,KAAKyf,kBAAkBzgB,EAAE9D,MAAK,SAAS2Q,GACnC,GAAIA,EAAsB,eAAKA,EAAsB,cAAE1H,OAAS,EAAG,CAC/DnE,KAAwB,kBAAI,GAC5B,IAAIinC,EAAgB,GACpBjoC,EAAEkM,KAAKW,EAAsB,eAAG,SAASq7B,IACpCA,EAAwB,kBAAKA,EAAwB,iBAAE/iC,OAAS,EAAInE,KAAwB,kBAAIinC,GAAe/iC,KAAKgjC,KACtHlnC,MACCinC,EAAc9iC,OAAS,GACvBnE,KAAK+mC,mBAAmBltC,KAAKmG,KAAMinC,EAAc,IAGzDjnC,KAAKmnC,uCACNnnC,YAIXghC,GAAY1lC,UAAU6rC,mCAAqC,WACvDnnC,KAAKmhC,6BAA8B,EAInC,IADA,IAAIt9B,EAAS7D,KAAKohC,kDACXv9B,EAAOM,OAAS,GAAG,CACtB,IAAIyM,EAAO/M,EAAOoD,QAClBjH,KAAKklC,0CAA0Ct0B,KAIvDowB,GAAY1lC,UAAUyrC,mBAAqB,SAASrV,GAC7B,IAAID,GAAqBC,EAAY1xB,MAC3C8zB,QAIjBkN,GAAY1lC,UAAU2mC,WAAa,WAC0D,iBAAzDjiC,KAAKif,WAAW,sCAGfjgB,EAAEqW,aAAaK,kBACvC1V,KAAKonC,yBAA2BpnC,KAAKonC,sBAAsB,CAAC,iBAAoB,YACjFpnC,KAAKmI,gBAAgB,CAAC,oBAAsB,KAE3CnI,KAAKsiC,0BAA4BtiC,KAAKsiC,uBAAuB,CAAC,iBAAoB,YACnFtiC,KAAKkI,iBAAiB,CAAC,mBAAqB,IAEhDlI,KAAKqnC,0BAA0B,CAC3B,iBAAoB,SACpB,oBAAsB,KAK1BrnC,KAAKsiC,yBACLtiC,KAAKsnC,yBAAyB,CAAC,mBAAqB,IAK5CtnC,KAAKonC,0BACbpnC,KAAKif,WAAW,iCAAkCjgB,EAAEyU,OAAOlZ,IAAI,eAE/DyE,EAAEyU,OAAOsB,OAAO,aAChB/U,KAAKkI,iBAAiB,CAClB,kBAAqBlI,KAAKif,WAAW,sCAWjD+hB,GAAY1lC,UAAUgsC,yBAA2B,SAAS3/B,GACtD,IAAI+jB,EACJ,GAAI/jB,GAAWA,EAA2B,kBACtC+jB,GAAW,MACR,KAAI/jB,IAAWA,EAA4B,mBAG9C,OAFA+jB,GAAW,EAKV1rB,KAAKif,WAAW,wBAA0Bjf,KAAkB,YAAE0rB,WAAaA,GAC5E1rB,KAAkB,YAAEitB,aAAavB,GAGjCA,GACA1sB,EAAEkM,KAAKlL,KAAK8qB,kBAAkB,SAASD,GACnCA,EAAQjG,YAMpBoc,GAAY1lC,UAAUisC,gBAAkB,SAASj8B,EAAM3D,GAkBnD,OAjBAA,EAAU3I,EAAEmN,OAAO,CACf,MAASnN,EAAE9D,KAAK8E,KAAK4B,MAAO5B,MAC5B,iBAAoBA,KAAKif,WAAW,qCACpC,cAAiBjf,KAAKif,WAAW,kCACjC,kBAAqBjf,KAAKif,WAAW,qBACrC,kBAAqBjf,KAAKif,WAAW,qBACrC,uBAA0Bjf,KAAKif,WAAW,0BAC1C,cAAiBjf,KAAKif,WAAW,iBACjC,cAAiBjf,KAAKif,WAAW,iBACjC,WAAcjf,KAAKif,WAAW,eAC/BtX,GAGE3I,EAAEqW,aAAaK,iBAChB/N,EAA0B,iBAAI,UAG3B2D,EAAKtL,KAAKif,WAAW,SAAU,CAClCrd,MAAO+F,EAAe,MACtBghB,eAAgBhhB,EAA0B,iBAC1CihB,gBAAiBjhB,EAA0B,iBAC3C0gB,gBAAiB1gB,EAA0B,iBAC3C2gB,kBAAmB3gB,EAAuB,cAC1CygB,aAAczgB,EAAuB,cACrC6gB,iBAAkB7gB,EAA2B,kBAC7C+gB,gBAAiB/gB,EAA2B,kBAC5CwgB,qBAAsBxgB,EAAgC,uBACtD8gB,aAAc9gB,EAAuB,cACrC0f,UAAW1f,EAAoB,cAmCvCq5B,GAAY1lC,UAAU6M,gBAAkB,SAASR,GAC7CA,EAAU3I,EAAEmN,OAAO,CACf,oBAAsB,GACvBxE,GAEH3H,KAAKunC,gBAAgBxgB,GAAOpf,GAC5B3H,KAAKsnC,yBAAyB3/B,IA4BlCq5B,GAAY1lC,UAAU4M,iBAAmB,SAASP,IAC9CA,EAAU3I,EAAEmN,OAAO,CACf,mBAAqB,EACrB,aAAe,GAChBxE,IAGsB,aAAK3H,KAAa,QAAKA,KAAa,OAAE0+B,qBAC3D1+B,KAAa,OAAEy+B,cACfz+B,KAAa,OAAEw+B,iBAGnBx+B,KAAKunC,gBAAgBtgB,GAAQtf,GAC7B3H,KAAKsnC,yBAAyB3/B,IAgBlCq5B,GAAY1lC,UAAU8rC,sBAAwB,SAASz/B,GACnD,OAAO3H,KAAKunC,gBAAgBrgB,GAAYvf,IAgB5Cq5B,GAAY1lC,UAAUgnC,uBAAyB,SAAS36B,GACpD,OAAO3H,KAAKunC,gBAAgBngB,GAAazf,IA4B7Cq5B,GAAY1lC,UAAU+rC,0BAA4B,SAAS1/B,GACvDA,EAAU3I,EAAEmN,OAAO,CACf,oBAAsB,GACvBxE,GAEH3H,KAAKunC,gBAAgBvf,GAAergB,GACpC3H,KAAKsnC,yBAAyB3/B,IAMlCq5B,GAAY1lC,UAAgB,KAAkC0lC,GAAY1lC,UAAU0H,KACpFg+B,GAAY1lC,UAAiB,MAAiC0lC,GAAY1lC,UAAU6E,MACpF6gC,GAAY1lC,UAAmB,QAA+B0lC,GAAY1lC,UAAU8E,QACpF4gC,GAAY1lC,UAAsB,WAA4B0lC,GAAY1lC,UAAU+qC,WACpFrF,GAAY1lC,UAAiB,MAAiC0lC,GAAY1lC,UAAUsG,MACpFo/B,GAAY1lC,UAAuB,YAA2B0lC,GAAY1lC,UAAU6qC,YACpFnF,GAAY1lC,UAAuB,YAA2B0lC,GAAY1lC,UAAU8qC,YACpFpF,GAAY1lC,UAA0B,eAAwB0lC,GAAY1lC,UAAU4qC,eACpFlF,GAAY1lC,UAAoB,SAA8B0lC,GAAY1lC,UAAUixB,SACpFyU,GAAY1lC,UAAyB,cAAyB0lC,GAAY1lC,UAAUywB,cACpFiV,GAAY1lC,UAAsB,WAA4B0lC,GAAY1lC,UAAUkxB,WACpFwU,GAAY1lC,UAAoB,SAA8B0lC,GAAY1lC,UAAU4E,SACpF8gC,GAAY1lC,UAAiB,MAAiC0lC,GAAY1lC,UAAUorC,MACpF1F,GAAY1lC,UAAoB,SAA8B0lC,GAAY1lC,UAAUsrC,SACpF5F,GAAY1lC,UAAsB,WAA4B0lC,GAAY1lC,UAAUomC,WACpFV,GAAY1lC,UAAsB,WAA4B0lC,GAAY1lC,UAAU2jB,WACpF+hB,GAAY1lC,UAAwB,aAA0B0lC,GAAY1lC,UAAUujC,aACpFmC,GAAY1lC,UAA2B,gBAAuB0lC,GAAY1lC,UAAUqjC,gBACpFqC,GAAY1lC,UAAoB,SAA8B0lC,GAAY1lC,UAAUwO,SACpFk3B,GAAY1lC,UAA2C,gCAAO0lC,GAAY1lC,UAAUmrC,gCACpFzF,GAAY1lC,UAA8C,mCAAI0lC,GAAY1lC,UAAU6rC,mCACpFnG,GAAY1lC,UAA8B,mBAAoB0lC,GAAY1lC,UAAUyrC,mBACpF/F,GAAY1lC,UAA4B,iBAAsB0lC,GAAY1lC,UAAU4M,iBACpF84B,GAAY1lC,UAA2B,gBAAuB0lC,GAAY1lC,UAAU6M,gBACpF64B,GAAY1lC,UAAkC,uBAAgB0lC,GAAY1lC,UAAUgnC,uBACpFtB,GAAY1lC,UAAiC,sBAAiB0lC,GAAY1lC,UAAU8rC,sBACpFpG,GAAY1lC,UAAqC,0BAAa0lC,GAAY1lC,UAAU+rC,0BACpFrG,GAAY1lC,UAAqB,UAA6B0lC,GAAY1lC,UAAUyqC,UACpF/E,GAAY1lC,UAAqB,UAA6B0lC,GAAY1lC,UAAU6pC,UACpFnE,GAAY1lC,UAAqB,UAA6B0lC,GAAY1lC,UAAU+pC,UACpFrE,GAAY1lC,UAAwB,aAA0B0lC,GAAY1lC,UAAUiqC,aACpFvE,GAAY1lC,UAA6B,kBAAqB0lC,GAAY1lC,UAAUqqC,kBACpF3E,GAAY1lC,UAA+B,oBAAmB0lC,GAAY1lC,UAAUgpC,oBAGpFpZ,GAAoB5vB,UAAsB,WAAe4vB,GAAoB5vB,UAAUue,WACvFqR,GAAoB5vB,UAAiC,sBAAI4vB,GAAoB5vB,UAAUuxB,sBACvF3B,GAAoB5vB,UAAgC,qBAAK4vB,GAAoB5vB,UAAUwxB,qBACvF5B,GAAoB5vB,UAA+B,oBAAM4vB,GAAoB5vB,UAAUgyB,oBACvFpC,GAAoB5vB,UAAiB,MAAoB4vB,GAAoB5vB,UAAUspB,MAEvF5lB,EAAE6P,eAAemyB,GAAa,CAAC,WAAY,kCAAmC,uBAG9E,IAAIwG,GAAY,GAWZC,GAAwB,WAGxBzJ,GAAsB,KAAI,SAASt2B,EAAOyjB,EAAQlxB,GAC9C,GAAIA,EAMA,OAJK+jC,GAAgB/jC,KACjB+jC,GAAgB/jC,GAAQutC,GAAUvtC,GAAQgnC,GAAav5B,EAAOyjB,EAAQlxB,GACtE+jC,GAAgB/jC,GAAMunC,WAEnBxD,GAAgB/jC,GAEvB,IAAIkkB,EAAW6f,GAEXwJ,GAA+B,SAE/BrpB,EAAWqpB,GAA+B,SACnC9/B,KAEPyW,EAAW8iB,GAAav5B,EAAOyjB,EA9vDL,aA+vDjBqW,UACTgG,GAA+B,SAAIrpB,GAGvC6f,GAAkB7f,EArwDX,IAswDH4f,KACA31B,EAA8B,SAAI41B,IAlC9Ch/B,EAAEkM,KAAKs8B,IAAW,SAASrpB,EAAUlkB,GAnuDC,aAouD9BA,IAAkC+jC,GAAgB/jC,GAAQkkB,MAIlE6f,GAAmB,EAAIh/B,IAwG3B,IAAI4I,IAVAm2B,GAz0De,EA00DfC,GAAkB,IAAIgD,GAEtByG,KACAzJ,GAAsB,OA9DG,WAEzB,SAAS0J,IAEDA,EAAmBC,OACvBD,EAAmBC,MAAO,EAE1B5G,IAAa,EACbF,IAAmB,EAEnB7hC,EAAEkM,KAAKs8B,IAAW,SAASI,GACvBA,EAAKxF,kBAeb,GAAIn4B,EAAWqM,iBACmB,aAA1BrM,EAAWs5B,WAKXmE,IAEAz9B,EAAWqM,iBAAiB,mBAAoBoxB,GAAoB,QAErE,GAAIz9B,EAAW49B,YAAa,CAE/B59B,EAAW49B,YAAY,qBAAsBH,GAG7C,IAAII,GAAW,EACf,IACIA,EAAqC,OAA1B1/B,EAAS2/B,aACtB,MAAMn5B,IAIJ3E,EAAWqwB,gBAAgB0N,UAAYF,GAjC/C,SAASG,IACL,IACIh+B,EAAWqwB,gBAAgB0N,SAAS,QACtC,MAAMp5B,GAEJ,YADA8Q,WAAWuoB,EAAiB,GAIhCP,IA0BIO,GAKRjpC,EAAE6W,eAAezN,EAAU,OAAQs/B,GAAoB,GASvDQ,GAEOlK,IAKXvkC,EAAOD,QAAUoO","file":"uw_tracking.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","/* eslint-disable */\n\n\nexport interface Account {\n  id: string;\n  number: string;\n}\n\nexport interface Application {\n  id: string;\n}\n\nexport interface Person {\n}\n\nexport interface StageEvent {\n  account?: Account;\n  application?: Application;\n  subject: Subject;\n  intent: Intent;\n  stage: Stage;\n  attributes: { [key: string]: string };\n}\n\nexport interface StageEvent_AttributesEntry {\n  key: string;\n  value: string;\n}\n\nexport interface InteractionEvent {\n  account?: Account;\n  application?: Application;\n  subject: Subject;\n  intent: Intent;\n  interaction: Interaction;\n  channel: InteractionChannel;\n  attributes: { [key: string]: string };\n}\n\nexport interface InteractionEvent_AttributesEntry {\n  key: string;\n  value: string;\n}\n\nexport interface VisitEvent {\n  account?: Account;\n  application?: Application;\n  location: string;\n  attributes: { [key: string]: string };\n}\n\nexport interface VisitEvent_AttributesEntry {\n  key: string;\n  value: string;\n}\n\nexport interface ClickEvent {\n  account?: Account;\n  application?: Application;\n  target: string;\n  attributes: { [key: string]: string };\n}\n\nexport interface ClickEvent_AttributesEntry {\n  key: string;\n  value: string;\n}\n\nconst baseAccount: object = {\n  id: \"\",\n  number: \"\",\n};\n\nconst baseApplication: object = {\n  id: \"\",\n};\n\nconst basePerson: object = {\n};\n\nconst baseStageEvent: object = {\n  subject: 0,\n  intent: 0,\n  stage: 0,\n};\n\nconst baseStageEvent_AttributesEntry: object = {\n  key: \"\",\n  value: \"\",\n};\n\nconst baseInteractionEvent: object = {\n  subject: 0,\n  intent: 0,\n  interaction: 0,\n  channel: 0,\n};\n\nconst baseInteractionEvent_AttributesEntry: object = {\n  key: \"\",\n  value: \"\",\n};\n\nconst baseVisitEvent: object = {\n  location: \"\",\n};\n\nconst baseVisitEvent_AttributesEntry: object = {\n  key: \"\",\n  value: \"\",\n};\n\nconst baseClickEvent: object = {\n  target: \"\",\n};\n\nconst baseClickEvent_AttributesEntry: object = {\n  key: \"\",\n  value: \"\",\n};\n\nexport const Subject = {\n  SUBJECT_NONE: 0 as const,\n  SUBJECT_METER_READING: 1 as const,\n  UNRECOGNIZED: -1 as const,\n  fromJSON(object: any): Subject {\n    switch (object) {\n      case 0:\n      case \"SUBJECT_NONE\":\n        return Subject.SUBJECT_NONE;\n      case 1:\n      case \"SUBJECT_METER_READING\":\n        return Subject.SUBJECT_METER_READING;\n      case -1:\n      case \"UNRECOGNIZED\":\n      default:\n        return Subject.UNRECOGNIZED;\n    }\n  },\n  toJSON(object: Subject): string {\n    switch (object) {\n      case Subject.SUBJECT_NONE:\n        return \"SUBJECT_NONE\";\n      case Subject.SUBJECT_METER_READING:\n        return \"SUBJECT_METER_READING\";\n      default:\n        return \"UNKNOWN\";\n    }\n  },\n}\n\nexport type Subject = 0 | 1 | -1;\n\nexport const Intent = {\n  INTENT_NONE: 0 as const,\n  INTENT_METER_READING_SUBMIT: 1 as const,\n  UNRECOGNIZED: -1 as const,\n  fromJSON(object: any): Intent {\n    switch (object) {\n      case 0:\n      case \"INTENT_NONE\":\n        return Intent.INTENT_NONE;\n      case 1:\n      case \"INTENT_METER_READING_SUBMIT\":\n        return Intent.INTENT_METER_READING_SUBMIT;\n      case -1:\n      case \"UNRECOGNIZED\":\n      default:\n        return Intent.UNRECOGNIZED;\n    }\n  },\n  toJSON(object: Intent): string {\n    switch (object) {\n      case Intent.INTENT_NONE:\n        return \"INTENT_NONE\";\n      case Intent.INTENT_METER_READING_SUBMIT:\n        return \"INTENT_METER_READING_SUBMIT\";\n      default:\n        return \"UNKNOWN\";\n    }\n  },\n}\n\nexport type Intent = 0 | 1 | -1;\n\nexport const Stage = {\n  STAGE_NONE: 0 as const,\n  STAGE_SUBMITTED: 1 as const,\n  STAGE_RECEIVED_REQUEST_FOR_AMEND: 2 as const,\n  STAGE_COMPLETED: 3 as const,\n  STAGE_REJECTED: 4 as const,\n  STAGE_ENTERED: 5 as const,\n  STAGE_STARTED: 6 as const,\n  STAGE_FAILED: 7 as const,\n  UNRECOGNIZED: -1 as const,\n  fromJSON(object: any): Stage {\n    switch (object) {\n      case 0:\n      case \"STAGE_NONE\":\n        return Stage.STAGE_NONE;\n      case 1:\n      case \"STAGE_SUBMITTED\":\n        return Stage.STAGE_SUBMITTED;\n      case 2:\n      case \"STAGE_RECEIVED_REQUEST_FOR_AMEND\":\n        return Stage.STAGE_RECEIVED_REQUEST_FOR_AMEND;\n      case 3:\n      case \"STAGE_COMPLETED\":\n        return Stage.STAGE_COMPLETED;\n      case 4:\n      case \"STAGE_REJECTED\":\n        return Stage.STAGE_REJECTED;\n      case 5:\n      case \"STAGE_ENTERED\":\n        return Stage.STAGE_ENTERED;\n      case 6:\n      case \"STAGE_STARTED\":\n        return Stage.STAGE_STARTED;\n      case 7:\n      case \"STAGE_FAILED\":\n        return Stage.STAGE_FAILED;\n      case -1:\n      case \"UNRECOGNIZED\":\n      default:\n        return Stage.UNRECOGNIZED;\n    }\n  },\n  toJSON(object: Stage): string {\n    switch (object) {\n      case Stage.STAGE_NONE:\n        return \"STAGE_NONE\";\n      case Stage.STAGE_SUBMITTED:\n        return \"STAGE_SUBMITTED\";\n      case Stage.STAGE_RECEIVED_REQUEST_FOR_AMEND:\n        return \"STAGE_RECEIVED_REQUEST_FOR_AMEND\";\n      case Stage.STAGE_COMPLETED:\n        return \"STAGE_COMPLETED\";\n      case Stage.STAGE_REJECTED:\n        return \"STAGE_REJECTED\";\n      case Stage.STAGE_ENTERED:\n        return \"STAGE_ENTERED\";\n      case Stage.STAGE_STARTED:\n        return \"STAGE_STARTED\";\n      case Stage.STAGE_FAILED:\n        return \"STAGE_FAILED\";\n      default:\n        return \"UNKNOWN\";\n    }\n  },\n}\n\nexport type Stage = 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | -1;\n\nexport const Interaction = {\n  INTERACTION_NONE: 0 as const,\n  INTERACTION_CLICKED: 1 as const,\n  INTERACTION_VIEWED: 2 as const,\n  UNRECOGNIZED: -1 as const,\n  fromJSON(object: any): Interaction {\n    switch (object) {\n      case 0:\n      case \"INTERACTION_NONE\":\n        return Interaction.INTERACTION_NONE;\n      case 1:\n      case \"INTERACTION_CLICKED\":\n        return Interaction.INTERACTION_CLICKED;\n      case 2:\n      case \"INTERACTION_VIEWED\":\n        return Interaction.INTERACTION_VIEWED;\n      case -1:\n      case \"UNRECOGNIZED\":\n      default:\n        return Interaction.UNRECOGNIZED;\n    }\n  },\n  toJSON(object: Interaction): string {\n    switch (object) {\n      case Interaction.INTERACTION_NONE:\n        return \"INTERACTION_NONE\";\n      case Interaction.INTERACTION_CLICKED:\n        return \"INTERACTION_CLICKED\";\n      case Interaction.INTERACTION_VIEWED:\n        return \"INTERACTION_VIEWED\";\n      default:\n        return \"UNKNOWN\";\n    }\n  },\n}\n\nexport type Interaction = 0 | 1 | 2 | -1;\n\nexport const InteractionChannel = {\n  INTERACTION_CHANNEL_NONE: 0 as const,\n  INTERACTION_CHANNEL_EMAIL: 1 as const,\n  INTERACTION_CHANNEL_WILLIAM: 2 as const,\n  UNRECOGNIZED: -1 as const,\n  fromJSON(object: any): InteractionChannel {\n    switch (object) {\n      case 0:\n      case \"INTERACTION_CHANNEL_NONE\":\n        return InteractionChannel.INTERACTION_CHANNEL_NONE;\n      case 1:\n      case \"INTERACTION_CHANNEL_EMAIL\":\n        return InteractionChannel.INTERACTION_CHANNEL_EMAIL;\n      case 2:\n      case \"INTERACTION_CHANNEL_WILLIAM\":\n        return InteractionChannel.INTERACTION_CHANNEL_WILLIAM;\n      case -1:\n      case \"UNRECOGNIZED\":\n      default:\n        return InteractionChannel.UNRECOGNIZED;\n    }\n  },\n  toJSON(object: InteractionChannel): string {\n    switch (object) {\n      case InteractionChannel.INTERACTION_CHANNEL_NONE:\n        return \"INTERACTION_CHANNEL_NONE\";\n      case InteractionChannel.INTERACTION_CHANNEL_EMAIL:\n        return \"INTERACTION_CHANNEL_EMAIL\";\n      case InteractionChannel.INTERACTION_CHANNEL_WILLIAM:\n        return \"INTERACTION_CHANNEL_WILLIAM\";\n      default:\n        return \"UNKNOWN\";\n    }\n  },\n}\n\nexport type InteractionChannel = 0 | 1 | 2 | -1;\n\nexport const Account = {\n  fromJSON(object: any): Account {\n    const message = { ...baseAccount } as Account;\n    if (object.id !== undefined && object.id !== null) {\n      message.id = String(object.id);\n    } else {\n      message.id = \"\";\n    }\n    if (object.number !== undefined && object.number !== null) {\n      message.number = String(object.number);\n    } else {\n      message.number = \"\";\n    }\n    return message;\n  },\n  fromPartial(object: DeepPartial<Account>): Account {\n    const message = { ...baseAccount } as Account;\n    if (object.id !== undefined && object.id !== null) {\n      message.id = object.id;\n    } else {\n      message.id = \"\";\n    }\n    if (object.number !== undefined && object.number !== null) {\n      message.number = object.number;\n    } else {\n      message.number = \"\";\n    }\n    return message;\n  },\n  toJSON(message: Account): unknown {\n    const obj: any = {};\n    obj.id = message.id || \"\";\n    obj.number = message.number || \"\";\n    return obj;\n  },\n};\n\nexport const Application = {\n  fromJSON(object: any): Application {\n    const message = { ...baseApplication } as Application;\n    if (object.id !== undefined && object.id !== null) {\n      message.id = String(object.id);\n    } else {\n      message.id = \"\";\n    }\n    return message;\n  },\n  fromPartial(object: DeepPartial<Application>): Application {\n    const message = { ...baseApplication } as Application;\n    if (object.id !== undefined && object.id !== null) {\n      message.id = object.id;\n    } else {\n      message.id = \"\";\n    }\n    return message;\n  },\n  toJSON(message: Application): unknown {\n    const obj: any = {};\n    obj.id = message.id || \"\";\n    return obj;\n  },\n};\n\nexport const Person = {\n  fromJSON(_: any): Person {\n    const message = { ...basePerson } as Person;\n    return message;\n  },\n  fromPartial(_: DeepPartial<Person>): Person {\n    const message = { ...basePerson } as Person;\n    return message;\n  },\n  toJSON(_: Person): unknown {\n    const obj: any = {};\n    return obj;\n  },\n};\n\nexport const StageEvent = {\n  fromJSON(object: any): StageEvent {\n    const message = { ...baseStageEvent } as StageEvent;\n    message.attributes = {};\n    if (object.account !== undefined && object.account !== null) {\n      message.account = Account.fromJSON(object.account);\n    } else {\n      message.account = undefined;\n    }\n    if (object.application !== undefined && object.application !== null) {\n      message.application = Application.fromJSON(object.application);\n    } else {\n      message.application = undefined;\n    }\n    if (object.subject !== undefined && object.subject !== null) {\n      message.subject = Subject.fromJSON(object.subject);\n    } else {\n      message.subject = 0;\n    }\n    if (object.intent !== undefined && object.intent !== null) {\n      message.intent = Intent.fromJSON(object.intent);\n    } else {\n      message.intent = 0;\n    }\n    if (object.stage !== undefined && object.stage !== null) {\n      message.stage = Stage.fromJSON(object.stage);\n    } else {\n      message.stage = 0;\n    }\n    if (object.attributes !== undefined && object.attributes !== null) {\n      Object.entries(object.attributes).forEach(([key, value]) => {\n        message.attributes[key] = String(value);\n      })\n    }\n    return message;\n  },\n  fromPartial(object: DeepPartial<StageEvent>): StageEvent {\n    const message = { ...baseStageEvent } as StageEvent;\n    message.attributes = {};\n    if (object.account !== undefined && object.account !== null) {\n      message.account = Account.fromPartial(object.account);\n    } else {\n      message.account = undefined;\n    }\n    if (object.application !== undefined && object.application !== null) {\n      message.application = Application.fromPartial(object.application);\n    } else {\n      message.application = undefined;\n    }\n    if (object.subject !== undefined && object.subject !== null) {\n      message.subject = object.subject;\n    } else {\n      message.subject = 0;\n    }\n    if (object.intent !== undefined && object.intent !== null) {\n      message.intent = object.intent;\n    } else {\n      message.intent = 0;\n    }\n    if (object.stage !== undefined && object.stage !== null) {\n      message.stage = object.stage;\n    } else {\n      message.stage = 0;\n    }\n    if (object.attributes !== undefined && object.attributes !== null) {\n      Object.entries(object.attributes).forEach(([key, value]) => {\n        if (value !== undefined) {\n          message.attributes[key] = String(value);\n        }\n      })\n    }\n    return message;\n  },\n  toJSON(message: StageEvent): unknown {\n    const obj: any = {};\n    obj.account = message.account ? Account.toJSON(message.account) : undefined;\n    obj.application = message.application ? Application.toJSON(message.application) : undefined;\n    obj.subject = Subject.toJSON(message.subject);\n    obj.intent = Intent.toJSON(message.intent);\n    obj.stage = Stage.toJSON(message.stage);\n    obj.attributes = message.attributes || undefined;\n    return obj;\n  },\n};\n\nexport const StageEvent_AttributesEntry = {\n  fromJSON(object: any): StageEvent_AttributesEntry {\n    const message = { ...baseStageEvent_AttributesEntry } as StageEvent_AttributesEntry;\n    if (object.key !== undefined && object.key !== null) {\n      message.key = String(object.key);\n    } else {\n      message.key = \"\";\n    }\n    if (object.value !== undefined && object.value !== null) {\n      message.value = String(object.value);\n    } else {\n      message.value = \"\";\n    }\n    return message;\n  },\n  fromPartial(object: DeepPartial<StageEvent_AttributesEntry>): StageEvent_AttributesEntry {\n    const message = { ...baseStageEvent_AttributesEntry } as StageEvent_AttributesEntry;\n    if (object.key !== undefined && object.key !== null) {\n      message.key = object.key;\n    } else {\n      message.key = \"\";\n    }\n    if (object.value !== undefined && object.value !== null) {\n      message.value = object.value;\n    } else {\n      message.value = \"\";\n    }\n    return message;\n  },\n  toJSON(message: StageEvent_AttributesEntry): unknown {\n    const obj: any = {};\n    obj.key = message.key || \"\";\n    obj.value = message.value || \"\";\n    return obj;\n  },\n};\n\nexport const InteractionEvent = {\n  fromJSON(object: any): InteractionEvent {\n    const message = { ...baseInteractionEvent } as InteractionEvent;\n    message.attributes = {};\n    if (object.account !== undefined && object.account !== null) {\n      message.account = Account.fromJSON(object.account);\n    } else {\n      message.account = undefined;\n    }\n    if (object.application !== undefined && object.application !== null) {\n      message.application = Application.fromJSON(object.application);\n    } else {\n      message.application = undefined;\n    }\n    if (object.subject !== undefined && object.subject !== null) {\n      message.subject = Subject.fromJSON(object.subject);\n    } else {\n      message.subject = 0;\n    }\n    if (object.intent !== undefined && object.intent !== null) {\n      message.intent = Intent.fromJSON(object.intent);\n    } else {\n      message.intent = 0;\n    }\n    if (object.interaction !== undefined && object.interaction !== null) {\n      message.interaction = Interaction.fromJSON(object.interaction);\n    } else {\n      message.interaction = 0;\n    }\n    if (object.channel !== undefined && object.channel !== null) {\n      message.channel = InteractionChannel.fromJSON(object.channel);\n    } else {\n      message.channel = 0;\n    }\n    if (object.attributes !== undefined && object.attributes !== null) {\n      Object.entries(object.attributes).forEach(([key, value]) => {\n        message.attributes[key] = String(value);\n      })\n    }\n    return message;\n  },\n  fromPartial(object: DeepPartial<InteractionEvent>): InteractionEvent {\n    const message = { ...baseInteractionEvent } as InteractionEvent;\n    message.attributes = {};\n    if (object.account !== undefined && object.account !== null) {\n      message.account = Account.fromPartial(object.account);\n    } else {\n      message.account = undefined;\n    }\n    if (object.application !== undefined && object.application !== null) {\n      message.application = Application.fromPartial(object.application);\n    } else {\n      message.application = undefined;\n    }\n    if (object.subject !== undefined && object.subject !== null) {\n      message.subject = object.subject;\n    } else {\n      message.subject = 0;\n    }\n    if (object.intent !== undefined && object.intent !== null) {\n      message.intent = object.intent;\n    } else {\n      message.intent = 0;\n    }\n    if (object.interaction !== undefined && object.interaction !== null) {\n      message.interaction = object.interaction;\n    } else {\n      message.interaction = 0;\n    }\n    if (object.channel !== undefined && object.channel !== null) {\n      message.channel = object.channel;\n    } else {\n      message.channel = 0;\n    }\n    if (object.attributes !== undefined && object.attributes !== null) {\n      Object.entries(object.attributes).forEach(([key, value]) => {\n        if (value !== undefined) {\n          message.attributes[key] = String(value);\n        }\n      })\n    }\n    return message;\n  },\n  toJSON(message: InteractionEvent): unknown {\n    const obj: any = {};\n    obj.account = message.account ? Account.toJSON(message.account) : undefined;\n    obj.application = message.application ? Application.toJSON(message.application) : undefined;\n    obj.subject = Subject.toJSON(message.subject);\n    obj.intent = Intent.toJSON(message.intent);\n    obj.interaction = Interaction.toJSON(message.interaction);\n    obj.channel = InteractionChannel.toJSON(message.channel);\n    obj.attributes = message.attributes || undefined;\n    return obj;\n  },\n};\n\nexport const InteractionEvent_AttributesEntry = {\n  fromJSON(object: any): InteractionEvent_AttributesEntry {\n    const message = { ...baseInteractionEvent_AttributesEntry } as InteractionEvent_AttributesEntry;\n    if (object.key !== undefined && object.key !== null) {\n      message.key = String(object.key);\n    } else {\n      message.key = \"\";\n    }\n    if (object.value !== undefined && object.value !== null) {\n      message.value = String(object.value);\n    } else {\n      message.value = \"\";\n    }\n    return message;\n  },\n  fromPartial(object: DeepPartial<InteractionEvent_AttributesEntry>): InteractionEvent_AttributesEntry {\n    const message = { ...baseInteractionEvent_AttributesEntry } as InteractionEvent_AttributesEntry;\n    if (object.key !== undefined && object.key !== null) {\n      message.key = object.key;\n    } else {\n      message.key = \"\";\n    }\n    if (object.value !== undefined && object.value !== null) {\n      message.value = object.value;\n    } else {\n      message.value = \"\";\n    }\n    return message;\n  },\n  toJSON(message: InteractionEvent_AttributesEntry): unknown {\n    const obj: any = {};\n    obj.key = message.key || \"\";\n    obj.value = message.value || \"\";\n    return obj;\n  },\n};\n\nexport const VisitEvent = {\n  fromJSON(object: any): VisitEvent {\n    const message = { ...baseVisitEvent } as VisitEvent;\n    message.attributes = {};\n    if (object.account !== undefined && object.account !== null) {\n      message.account = Account.fromJSON(object.account);\n    } else {\n      message.account = undefined;\n    }\n    if (object.application !== undefined && object.application !== null) {\n      message.application = Application.fromJSON(object.application);\n    } else {\n      message.application = undefined;\n    }\n    if (object.location !== undefined && object.location !== null) {\n      message.location = String(object.location);\n    } else {\n      message.location = \"\";\n    }\n    if (object.attributes !== undefined && object.attributes !== null) {\n      Object.entries(object.attributes).forEach(([key, value]) => {\n        message.attributes[key] = String(value);\n      })\n    }\n    return message;\n  },\n  fromPartial(object: DeepPartial<VisitEvent>): VisitEvent {\n    const message = { ...baseVisitEvent } as VisitEvent;\n    message.attributes = {};\n    if (object.account !== undefined && object.account !== null) {\n      message.account = Account.fromPartial(object.account);\n    } else {\n      message.account = undefined;\n    }\n    if (object.application !== undefined && object.application !== null) {\n      message.application = Application.fromPartial(object.application);\n    } else {\n      message.application = undefined;\n    }\n    if (object.location !== undefined && object.location !== null) {\n      message.location = object.location;\n    } else {\n      message.location = \"\";\n    }\n    if (object.attributes !== undefined && object.attributes !== null) {\n      Object.entries(object.attributes).forEach(([key, value]) => {\n        if (value !== undefined) {\n          message.attributes[key] = String(value);\n        }\n      })\n    }\n    return message;\n  },\n  toJSON(message: VisitEvent): unknown {\n    const obj: any = {};\n    obj.account = message.account ? Account.toJSON(message.account) : undefined;\n    obj.application = message.application ? Application.toJSON(message.application) : undefined;\n    obj.location = message.location || \"\";\n    obj.attributes = message.attributes || undefined;\n    return obj;\n  },\n};\n\nexport const VisitEvent_AttributesEntry = {\n  fromJSON(object: any): VisitEvent_AttributesEntry {\n    const message = { ...baseVisitEvent_AttributesEntry } as VisitEvent_AttributesEntry;\n    if (object.key !== undefined && object.key !== null) {\n      message.key = String(object.key);\n    } else {\n      message.key = \"\";\n    }\n    if (object.value !== undefined && object.value !== null) {\n      message.value = String(object.value);\n    } else {\n      message.value = \"\";\n    }\n    return message;\n  },\n  fromPartial(object: DeepPartial<VisitEvent_AttributesEntry>): VisitEvent_AttributesEntry {\n    const message = { ...baseVisitEvent_AttributesEntry } as VisitEvent_AttributesEntry;\n    if (object.key !== undefined && object.key !== null) {\n      message.key = object.key;\n    } else {\n      message.key = \"\";\n    }\n    if (object.value !== undefined && object.value !== null) {\n      message.value = object.value;\n    } else {\n      message.value = \"\";\n    }\n    return message;\n  },\n  toJSON(message: VisitEvent_AttributesEntry): unknown {\n    const obj: any = {};\n    obj.key = message.key || \"\";\n    obj.value = message.value || \"\";\n    return obj;\n  },\n};\n\nexport const ClickEvent = {\n  fromJSON(object: any): ClickEvent {\n    const message = { ...baseClickEvent } as ClickEvent;\n    message.attributes = {};\n    if (object.account !== undefined && object.account !== null) {\n      message.account = Account.fromJSON(object.account);\n    } else {\n      message.account = undefined;\n    }\n    if (object.application !== undefined && object.application !== null) {\n      message.application = Application.fromJSON(object.application);\n    } else {\n      message.application = undefined;\n    }\n    if (object.target !== undefined && object.target !== null) {\n      message.target = String(object.target);\n    } else {\n      message.target = \"\";\n    }\n    if (object.attributes !== undefined && object.attributes !== null) {\n      Object.entries(object.attributes).forEach(([key, value]) => {\n        message.attributes[key] = String(value);\n      })\n    }\n    return message;\n  },\n  fromPartial(object: DeepPartial<ClickEvent>): ClickEvent {\n    const message = { ...baseClickEvent } as ClickEvent;\n    message.attributes = {};\n    if (object.account !== undefined && object.account !== null) {\n      message.account = Account.fromPartial(object.account);\n    } else {\n      message.account = undefined;\n    }\n    if (object.application !== undefined && object.application !== null) {\n      message.application = Application.fromPartial(object.application);\n    } else {\n      message.application = undefined;\n    }\n    if (object.target !== undefined && object.target !== null) {\n      message.target = object.target;\n    } else {\n      message.target = \"\";\n    }\n    if (object.attributes !== undefined && object.attributes !== null) {\n      Object.entries(object.attributes).forEach(([key, value]) => {\n        if (value !== undefined) {\n          message.attributes[key] = String(value);\n        }\n      })\n    }\n    return message;\n  },\n  toJSON(message: ClickEvent): unknown {\n    const obj: any = {};\n    obj.account = message.account ? Account.toJSON(message.account) : undefined;\n    obj.application = message.application ? Application.toJSON(message.application) : undefined;\n    obj.target = message.target || \"\";\n    obj.attributes = message.attributes || undefined;\n    return obj;\n  },\n};\n\nexport const ClickEvent_AttributesEntry = {\n  fromJSON(object: any): ClickEvent_AttributesEntry {\n    const message = { ...baseClickEvent_AttributesEntry } as ClickEvent_AttributesEntry;\n    if (object.key !== undefined && object.key !== null) {\n      message.key = String(object.key);\n    } else {\n      message.key = \"\";\n    }\n    if (object.value !== undefined && object.value !== null) {\n      message.value = String(object.value);\n    } else {\n      message.value = \"\";\n    }\n    return message;\n  },\n  fromPartial(object: DeepPartial<ClickEvent_AttributesEntry>): ClickEvent_AttributesEntry {\n    const message = { ...baseClickEvent_AttributesEntry } as ClickEvent_AttributesEntry;\n    if (object.key !== undefined && object.key !== null) {\n      message.key = object.key;\n    } else {\n      message.key = \"\";\n    }\n    if (object.value !== undefined && object.value !== null) {\n      message.value = object.value;\n    } else {\n      message.value = \"\";\n    }\n    return message;\n  },\n  toJSON(message: ClickEvent_AttributesEntry): unknown {\n    const obj: any = {};\n    obj.key = message.key || \"\";\n    obj.value = message.value || \"\";\n    return obj;\n  },\n};\n\ntype Builtin = Date | Function | Uint8Array | string | number | undefined;\ntype DeepPartial<T> = T extends Builtin\n  ? T\n  : T extends Array<infer U>\n  ? Array<DeepPartial<U>>\n  : T extends ReadonlyArray<infer U>\n  ? ReadonlyArray<DeepPartial<U>>\n  : T extends {}\n  ? { [K in keyof T]?: DeepPartial<T[K]> }\n  : Partial<T>;","import {Tracker as BaseTracker} from \"./tracker\";\nimport {MixpanelBrowserBackend} from \"./backend/mixpanel-browser\";\nimport {\n    StageEvent, InteractionEvent, VisitEvent, ClickEvent,\n    InteractionChannel, Interaction, Subject, Intent, Stage,\n    Account, Application, Person\n} from \"./../generated/tracking\";\nimport {BrowserBackend} from \"./browser_backend\";\n\n\nexport class Tracker {\n    private account: Account;\n    private baseTracker: BaseTracker;\n    constructor(private readonly backend: BrowserBackend, private readonly application: Application) {\n        this.baseTracker = new BaseTracker(backend);\n    }\n\n    async identify(account: Account): Promise<void> {\n        this.account = account;\n        return this.backend.identify(account);\n    }\n    async reset(): Promise<void> {\n        return this.backend.reset()\n    }\n    async disable(): Promise<void> {\n        return this.backend.disable()\n    }\n    async enable(): Promise<void> {\n        return this.backend.enable()\n    }\n\n    async trackStage(\n        subject: Subject,\n        intent: Intent,\n        stage: Stage,\n        attributes?: (Promise<{ [k: string]: string }> | { [k: string]: string } | null),\n    ): Promise<void> {\n        return this.baseTracker.trackStage(this.account, this.application, subject, intent, stage, attributes)\n    }\n\n    async trackInteraction(\n        subject: Subject,\n        intent: Intent,\n        interaction: Interaction,\n        channel: InteractionChannel,\n        attributes?: (Promise<{ [k: string]: string }> | { [k: string]: string } | null),\n    ): Promise<void> {\n        return this.baseTracker.trackInteraction(this.account, this.application, subject, intent, interaction, channel, attributes)\n    }\n\n    async trackClick(\n        target: string,\n        attributes?: (Promise<{ [k: string]: string }> | { [k: string]: string } | null),\n    ): Promise<void> {\n        return this.baseTracker.trackClick(this.account, this.application, target, attributes)\n    }\n\n    async trackVisit(\n        location: string,\n        attributes?: (Promise<{ [k: string]: string }> | { [k: string]: string } | null),\n    ): Promise<void> {\n        return this.baseTracker.trackVisit(this.account, this.application, location, attributes)\n    }\n}\n\nexport {\n    MixpanelBrowserBackend,\n    StageEvent, InteractionEvent, VisitEvent, ClickEvent,\n    InteractionChannel, Interaction, Subject, Intent, Stage,\n    Account, Application, Person\n}","import {\n    Account,\n    Application, ClickEvent,\n    Intent,\n    Interaction, InteractionChannel,\n    InteractionEvent,\n    Stage,\n    StageEvent,\n    Subject, VisitEvent\n} from \"../generated/tracking\";\nimport {Backend} from \"./backend\";\nimport {EventEmitter} from \"events\";\n\nexport class Tracker {\n    private emitter: EventEmitter;\n\n    constructor(private readonly backend: Backend) {\n        this.emitter = new EventEmitter();\n    }\n\n    private stageValue(m: Stage): string {\n        return Stage.toJSON(m)\n            .toLowerCase()\n            .replace(/^stage_/, \"\")\n            .replace(/[^a-z]/g, \"-\")\n    }\n\n    private subjectValue(m: Subject): string {\n        return Subject.toJSON(m)\n            .toLowerCase()\n            .replace(/^subject_/, \"\")\n            .replace(/[^a-z]/g, \"-\")\n    }\n\n    private intentValue(m: Intent): string {\n        return Intent.toJSON(m)\n            .toLowerCase()\n            .replace(/^intent_/, \"\")\n            .replace(/[^a-z]/g, \"-\")\n    }\n\n    private interactionValue(m: Interaction): string {\n        return Interaction.toJSON(m)\n            .toLowerCase()\n            .replace(/^interaction_/, \"\")\n            .replace(/[^a-z]/g, \"-\")\n    }\n\n    private interactionChannelValue(m: InteractionChannel): string {\n        return InteractionChannel.toJSON(m)\n            .toLowerCase()\n            .replace(/^interaction_channel_/, \"\")\n            .replace(/[^a-z]/g, \"-\")\n    }\n\n    private stageEventName(event: StageEvent): string {\n        return this.stageValue(event.stage) + \".\" + this.intentValue(event.intent)\n    }\n\n    private interactionEventName(event: InteractionEvent): string {\n        return this.interactionChannelValue(event.channel) + \".\" + this.interactionValue(event.interaction)\n    }\n\n    private attributes(attributes: { [k: string]: string }): { [k: string]: string } {\n        const mapped: { [k: string]: string } = {};\n\n        for (const k in attributes) {\n            mapped[k.toLowerCase().replace(/[^a-z]/g, \"_\")] = attributes[k];\n        }\n\n        return mapped;\n    }\n\n    onError(fn: (err: Error) => void): void {\n        this.emitter.on(\"error\", fn);\n    }\n\n    async trackStage(\n        account: Account,\n        application: Application,\n        subject: Subject,\n        intent: Intent,\n        stage: Stage,\n        attributes?: (Promise<{ [k: string]: string }> | { [k: string]: string } | null),\n    ): Promise<void> {\n\n        try {\n\n            const event: StageEvent = {\n                account,\n                application,\n                subject,\n                intent,\n                stage,\n                attributes: await attributes,\n            }\n\n            return this.backend.track(\n                this.stageEventName(event),\n                {\n                    account_number: account.number,\n                    client_id: application.id,\n                    subject: this.subjectValue(event.subject),\n                    intent: this.intentValue(event.intent),\n                    stage: this.stageValue(event.stage),\n                    ...this.attributes(event.attributes),\n                },\n            )\n        } catch (e) {\n            this.emitter.emit(\"error\", e);\n        }\n    }\n\n    async trackInteraction(\n        account: Account,\n        application: Application,\n        subject: Subject,\n        intent: Intent,\n        interaction: Interaction,\n        channel: InteractionChannel,\n        attributes?: (Promise<{ [k: string]: string }> | { [k: string]: string } | null),\n    ): Promise<void> {\n        try {\n            const event: InteractionEvent = {\n                account,\n                application,\n                subject,\n                intent,\n                interaction,\n                channel,\n                attributes: await attributes,\n            }\n\n            return this.backend.track(\n                this.interactionEventName(event),\n                {\n                    account_number: account.number,\n                    client_id: application.id,\n                    subject: this.subjectValue(event.subject),\n                    intent: this.intentValue(event.intent),\n                    interaction: this.interactionValue(event.interaction),\n                    interaction_channel: this.interactionChannelValue(event.channel),\n                    ...this.attributes(event.attributes),\n                },\n            )\n        } catch (e) {\n            this.emitter.emit(\"error\", e);\n        }\n    }\n\n    async trackClick(\n        account: Account,\n        application: Application,\n        target: string,\n        attributes?: (Promise<{ [k: string]: string }> | { [k: string]: string } | null),\n    ): Promise<void> {\n        try {\n            const event: ClickEvent = {\n                account,\n                application,\n                target,\n                attributes: await attributes,\n            }\n\n            return this.backend.track(\n                \"click\",\n                {\n                    account_number: account.number,\n                    client_id: application.id,\n                    target,\n                    ...this.attributes(event.attributes),\n                },\n            )\n        } catch (e) {\n            this.emitter.emit(\"error\", e);\n        }\n    }\n\n    async trackVisit(\n        account: Account,\n        application: Application,\n        location: string,\n        attributes?: (Promise<{ [k: string]: string }> | { [k: string]: string } | null),\n    ): Promise<void> {\n        try {\n            const event: VisitEvent = {\n                account,\n                application,\n                location,\n                attributes: await attributes,\n            }\n\n            return this.backend.track(\n                \"visit\",\n                {\n                    account_number: account.number,\n                    client_id: application.id,\n                    location,\n                    ...this.attributes(event.attributes),\n                },\n            )\n        } catch (e) {\n            this.emitter.emit(\"error\", e);\n        }\n    }\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","\n\nimport * as mixpanel from \"mixpanel-browser\";\nimport {BrowserBackend} from \"../browser_backend\";\nimport {Account} from \"../../generated/tracking\";\n\nexport class MixpanelBrowserBackend implements BrowserBackend {\n    constructor(token: string, options?: mixpanel.Config | null) {\n        mixpanel.init(token, options);\n    }\n    \n    track(eventName: string, eventAttributes: { [p: string]: string }): Promise<void> {\n        return new Promise((resolve, reject) => {\n            mixpanel.track(eventName, eventAttributes, (err) => {\n                if (err) {\n                    reject(err);\n                } else {\n                    resolve();\n                }\n            })\n        })\n    }\n\n    disable(): Promise<void> {\n        return Promise.resolve(mixpanel.opt_out_tracking())\n    }\n\n    enable(): Promise<void> {\n        return Promise.resolve(mixpanel.opt_in_tracking());\n    }\n\n    identify(account: Account): Promise<void> {\n        return Promise.resolve(mixpanel.identify(account.number));\n    }\n\n    reset(): Promise<void> {\n        return Promise.resolve(mixpanel.reset());\n    }\n\n}","'use strict';\n\nvar Config = {\n    DEBUG: false,\n    LIB_VERSION: '2.38.0'\n};\n\n// since es6 imports are static and we run unit tests from the console, window won't be defined when importing this file\nvar window$1;\nif (typeof(window) === 'undefined') {\n    var loc = {\n        hostname: ''\n    };\n    window$1 = {\n        navigator: { userAgent: '' },\n        document: {\n            location: loc,\n            referrer: ''\n        },\n        screen: { width: 0, height: 0 },\n        location: loc\n    };\n} else {\n    window$1 = window;\n}\n\n/*\n * Saved references to long variable names, so that closure compiler can\n * minimize file size.\n */\n\nvar ArrayProto = Array.prototype;\nvar FuncProto = Function.prototype;\nvar ObjProto = Object.prototype;\nvar slice = ArrayProto.slice;\nvar toString = ObjProto.toString;\nvar hasOwnProperty = ObjProto.hasOwnProperty;\nvar windowConsole = window$1.console;\nvar navigator$1 = window$1.navigator;\nvar document$1 = window$1.document;\nvar windowOpera = window$1.opera;\nvar screen = window$1.screen;\nvar userAgent = navigator$1.userAgent;\nvar nativeBind = FuncProto.bind;\nvar nativeForEach = ArrayProto.forEach;\nvar nativeIndexOf = ArrayProto.indexOf;\nvar nativeMap = ArrayProto.map;\nvar nativeIsArray = Array.isArray;\nvar breaker = {};\nvar _ = {\n    trim: function(str) {\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/Trim#Polyfill\n        return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n    }\n};\n\n// Console override\nvar console$1 = {\n    /** @type {function(...*)} */\n    log: function() {\n        if (Config.DEBUG && !_.isUndefined(windowConsole) && windowConsole) {\n            try {\n                windowConsole.log.apply(windowConsole, arguments);\n            } catch (err) {\n                _.each(arguments, function(arg) {\n                    windowConsole.log(arg);\n                });\n            }\n        }\n    },\n    /** @type {function(...*)} */\n    error: function() {\n        if (Config.DEBUG && !_.isUndefined(windowConsole) && windowConsole) {\n            var args = ['Mixpanel error:'].concat(_.toArray(arguments));\n            try {\n                windowConsole.error.apply(windowConsole, args);\n            } catch (err) {\n                _.each(args, function(arg) {\n                    windowConsole.error(arg);\n                });\n            }\n        }\n    },\n    /** @type {function(...*)} */\n    critical: function() {\n        if (!_.isUndefined(windowConsole) && windowConsole) {\n            var args = ['Mixpanel error:'].concat(_.toArray(arguments));\n            try {\n                windowConsole.error.apply(windowConsole, args);\n            } catch (err) {\n                _.each(args, function(arg) {\n                    windowConsole.error(arg);\n                });\n            }\n        }\n    }\n};\n\nvar log_func_with_prefix = function(func, prefix) {\n    return function() {\n        arguments[0] = '[' + prefix + '] ' + arguments[0];\n        return func.apply(console$1, arguments);\n    };\n};\nvar console_with_prefix = function(prefix) {\n    return {\n        log: log_func_with_prefix(console$1.log, prefix),\n        error: log_func_with_prefix(console$1.error, prefix),\n        critical: log_func_with_prefix(console$1.critical, prefix)\n    };\n};\n\n\n// UNDERSCORE\n// Embed part of the Underscore Library\n_.bind = function(func, context) {\n    var args, bound;\n    if (nativeBind && func.bind === nativeBind) {\n        return nativeBind.apply(func, slice.call(arguments, 1));\n    }\n    if (!_.isFunction(func)) {\n        throw new TypeError();\n    }\n    args = slice.call(arguments, 2);\n    bound = function() {\n        if (!(this instanceof bound)) {\n            return func.apply(context, args.concat(slice.call(arguments)));\n        }\n        var ctor = {};\n        ctor.prototype = func.prototype;\n        var self = new ctor();\n        ctor.prototype = null;\n        var result = func.apply(self, args.concat(slice.call(arguments)));\n        if (Object(result) === result) {\n            return result;\n        }\n        return self;\n    };\n    return bound;\n};\n\n_.bind_instance_methods = function(obj) {\n    for (var func in obj) {\n        if (typeof(obj[func]) === 'function') {\n            obj[func] = _.bind(obj[func], obj);\n        }\n    }\n};\n\n/**\n * @param {*=} obj\n * @param {function(...*)=} iterator\n * @param {Object=} context\n */\n_.each = function(obj, iterator, context) {\n    if (obj === null || obj === undefined) {\n        return;\n    }\n    if (nativeForEach && obj.forEach === nativeForEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length === +obj.length) {\n        for (var i = 0, l = obj.length; i < l; i++) {\n            if (i in obj && iterator.call(context, obj[i], i, obj) === breaker) {\n                return;\n            }\n        }\n    } else {\n        for (var key in obj) {\n            if (hasOwnProperty.call(obj, key)) {\n                if (iterator.call(context, obj[key], key, obj) === breaker) {\n                    return;\n                }\n            }\n        }\n    }\n};\n\n_.escapeHTML = function(s) {\n    var escaped = s;\n    if (escaped && _.isString(escaped)) {\n        escaped = escaped\n            .replace(/&/g, '&amp;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;')\n            .replace(/\"/g, '&quot;')\n            .replace(/'/g, '&#039;');\n    }\n    return escaped;\n};\n\n_.extend = function(obj) {\n    _.each(slice.call(arguments, 1), function(source) {\n        for (var prop in source) {\n            if (source[prop] !== void 0) {\n                obj[prop] = source[prop];\n            }\n        }\n    });\n    return obj;\n};\n\n_.isArray = nativeIsArray || function(obj) {\n    return toString.call(obj) === '[object Array]';\n};\n\n// from a comment on http://dbj.org/dbj/?p=286\n// fails on only one very rare and deliberate custom object:\n// var bomb = { toString : undefined, valueOf: function(o) { return \"function BOMBA!\"; }};\n_.isFunction = function(f) {\n    try {\n        return /^\\s*\\bfunction\\b/.test(f);\n    } catch (x) {\n        return false;\n    }\n};\n\n_.isArguments = function(obj) {\n    return !!(obj && hasOwnProperty.call(obj, 'callee'));\n};\n\n_.toArray = function(iterable) {\n    if (!iterable) {\n        return [];\n    }\n    if (iterable.toArray) {\n        return iterable.toArray();\n    }\n    if (_.isArray(iterable)) {\n        return slice.call(iterable);\n    }\n    if (_.isArguments(iterable)) {\n        return slice.call(iterable);\n    }\n    return _.values(iterable);\n};\n\n_.map = function(arr, callback) {\n    if (nativeMap && arr.map === nativeMap) {\n        return arr.map(callback);\n    } else {\n        var results = [];\n        _.each(arr, function(item) {\n            results.push(callback(item));\n        });\n        return results;\n    }\n};\n\n_.keys = function(obj) {\n    var results = [];\n    if (obj === null) {\n        return results;\n    }\n    _.each(obj, function(value, key) {\n        results[results.length] = key;\n    });\n    return results;\n};\n\n_.values = function(obj) {\n    var results = [];\n    if (obj === null) {\n        return results;\n    }\n    _.each(obj, function(value) {\n        results[results.length] = value;\n    });\n    return results;\n};\n\n_.identity = function(value) {\n    return value;\n};\n\n_.include = function(obj, target) {\n    var found = false;\n    if (obj === null) {\n        return found;\n    }\n    if (nativeIndexOf && obj.indexOf === nativeIndexOf) {\n        return obj.indexOf(target) != -1;\n    }\n    _.each(obj, function(value) {\n        if (found || (found = (value === target))) {\n            return breaker;\n        }\n    });\n    return found;\n};\n\n_.includes = function(str, needle) {\n    return str.indexOf(needle) !== -1;\n};\n\n// Underscore Addons\n_.inherit = function(subclass, superclass) {\n    subclass.prototype = new superclass();\n    subclass.prototype.constructor = subclass;\n    subclass.superclass = superclass.prototype;\n    return subclass;\n};\n\n_.isObject = function(obj) {\n    return (obj === Object(obj) && !_.isArray(obj));\n};\n\n_.isEmptyObject = function(obj) {\n    if (_.isObject(obj)) {\n        for (var key in obj) {\n            if (hasOwnProperty.call(obj, key)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    return false;\n};\n\n_.isUndefined = function(obj) {\n    return obj === void 0;\n};\n\n_.isString = function(obj) {\n    return toString.call(obj) == '[object String]';\n};\n\n_.isDate = function(obj) {\n    return toString.call(obj) == '[object Date]';\n};\n\n_.isNumber = function(obj) {\n    return toString.call(obj) == '[object Number]';\n};\n\n_.isElement = function(obj) {\n    return !!(obj && obj.nodeType === 1);\n};\n\n_.encodeDates = function(obj) {\n    _.each(obj, function(v, k) {\n        if (_.isDate(v)) {\n            obj[k] = _.formatDate(v);\n        } else if (_.isObject(v)) {\n            obj[k] = _.encodeDates(v); // recurse\n        }\n    });\n    return obj;\n};\n\n_.timestamp = function() {\n    Date.now = Date.now || function() {\n        return +new Date;\n    };\n    return Date.now();\n};\n\n_.formatDate = function(d) {\n    // YYYY-MM-DDTHH:MM:SS in UTC\n    function pad(n) {\n        return n < 10 ? '0' + n : n;\n    }\n    return d.getUTCFullYear() + '-' +\n        pad(d.getUTCMonth() + 1) + '-' +\n        pad(d.getUTCDate()) + 'T' +\n        pad(d.getUTCHours()) + ':' +\n        pad(d.getUTCMinutes()) + ':' +\n        pad(d.getUTCSeconds());\n};\n\n_.safewrap = function(f) {\n    return function() {\n        try {\n            return f.apply(this, arguments);\n        } catch (e) {\n            console$1.critical('Implementation error. Please turn on debug and contact support@mixpanel.com.');\n            if (Config.DEBUG){\n                console$1.critical(e);\n            }\n        }\n    };\n};\n\n_.safewrap_class = function(klass, functions) {\n    for (var i = 0; i < functions.length; i++) {\n        klass.prototype[functions[i]] = _.safewrap(klass.prototype[functions[i]]);\n    }\n};\n\n_.safewrap_instance_methods = function(obj) {\n    for (var func in obj) {\n        if (typeof(obj[func]) === 'function') {\n            obj[func] = _.safewrap(obj[func]);\n        }\n    }\n};\n\n_.strip_empty_properties = function(p) {\n    var ret = {};\n    _.each(p, function(v, k) {\n        if (_.isString(v) && v.length > 0) {\n            ret[k] = v;\n        }\n    });\n    return ret;\n};\n\n/*\n * this function returns a copy of object after truncating it.  If\n * passed an Array or Object it will iterate through obj and\n * truncate all the values recursively.\n */\n_.truncate = function(obj, length) {\n    var ret;\n\n    if (typeof(obj) === 'string') {\n        ret = obj.slice(0, length);\n    } else if (_.isArray(obj)) {\n        ret = [];\n        _.each(obj, function(val) {\n            ret.push(_.truncate(val, length));\n        });\n    } else if (_.isObject(obj)) {\n        ret = {};\n        _.each(obj, function(val, key) {\n            ret[key] = _.truncate(val, length);\n        });\n    } else {\n        ret = obj;\n    }\n\n    return ret;\n};\n\n_.JSONEncode = (function() {\n    return function(mixed_val) {\n        var value = mixed_val;\n        var quote = function(string) {\n            var escapable = /[\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g; // eslint-disable-line no-control-regex\n            var meta = { // table of character substitutions\n                '\\b': '\\\\b',\n                '\\t': '\\\\t',\n                '\\n': '\\\\n',\n                '\\f': '\\\\f',\n                '\\r': '\\\\r',\n                '\"': '\\\\\"',\n                '\\\\': '\\\\\\\\'\n            };\n\n            escapable.lastIndex = 0;\n            return escapable.test(string) ?\n                '\"' + string.replace(escapable, function(a) {\n                    var c = meta[a];\n                    return typeof c === 'string' ? c :\n                        '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n                }) + '\"' :\n                '\"' + string + '\"';\n        };\n\n        var str = function(key, holder) {\n            var gap = '';\n            var indent = '    ';\n            var i = 0; // The loop counter.\n            var k = ''; // The member key.\n            var v = ''; // The member value.\n            var length = 0;\n            var mind = gap;\n            var partial = [];\n            var value = holder[key];\n\n            // If the value has a toJSON method, call it to obtain a replacement value.\n            if (value && typeof value === 'object' &&\n                typeof value.toJSON === 'function') {\n                value = value.toJSON(key);\n            }\n\n            // What happens next depends on the value's type.\n            switch (typeof value) {\n                case 'string':\n                    return quote(value);\n\n                case 'number':\n                    // JSON numbers must be finite. Encode non-finite numbers as null.\n                    return isFinite(value) ? String(value) : 'null';\n\n                case 'boolean':\n                case 'null':\n                    // If the value is a boolean or null, convert it to a string. Note:\n                    // typeof null does not produce 'null'. The case is included here in\n                    // the remote chance that this gets fixed someday.\n\n                    return String(value);\n\n                case 'object':\n                    // If the type is 'object', we might be dealing with an object or an array or\n                    // null.\n                    // Due to a specification blunder in ECMAScript, typeof null is 'object',\n                    // so watch out for that case.\n                    if (!value) {\n                        return 'null';\n                    }\n\n                    // Make an array to hold the partial results of stringifying this object value.\n                    gap += indent;\n                    partial = [];\n\n                    // Is the value an array?\n                    if (toString.apply(value) === '[object Array]') {\n                        // The value is an array. Stringify every element. Use null as a placeholder\n                        // for non-JSON values.\n\n                        length = value.length;\n                        for (i = 0; i < length; i += 1) {\n                            partial[i] = str(i, value) || 'null';\n                        }\n\n                        // Join all of the elements together, separated with commas, and wrap them in\n                        // brackets.\n                        v = partial.length === 0 ? '[]' :\n                            gap ? '[\\n' + gap +\n                            partial.join(',\\n' + gap) + '\\n' +\n                            mind + ']' :\n                                '[' + partial.join(',') + ']';\n                        gap = mind;\n                        return v;\n                    }\n\n                    // Iterate through all of the keys in the object.\n                    for (k in value) {\n                        if (hasOwnProperty.call(value, k)) {\n                            v = str(k, value);\n                            if (v) {\n                                partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                            }\n                        }\n                    }\n\n                    // Join all of the member texts together, separated with commas,\n                    // and wrap them in braces.\n                    v = partial.length === 0 ? '{}' :\n                        gap ? '{' + partial.join(',') + '' +\n                        mind + '}' : '{' + partial.join(',') + '}';\n                    gap = mind;\n                    return v;\n            }\n        };\n\n        // Make a fake root object containing our value under the key of ''.\n        // Return the result of stringifying the value.\n        return str('', {\n            '': value\n        });\n    };\n})();\n\n/**\n * From https://github.com/douglascrockford/JSON-js/blob/master/json_parse.js\n * Slightly modified to throw a real Error rather than a POJO\n */\n_.JSONDecode = (function() {\n    var at, // The index of the current character\n        ch, // The current character\n        escapee = {\n            '\"': '\"',\n            '\\\\': '\\\\',\n            '/': '/',\n            'b': '\\b',\n            'f': '\\f',\n            'n': '\\n',\n            'r': '\\r',\n            't': '\\t'\n        },\n        text,\n        error = function(m) {\n            var e = new SyntaxError(m);\n            e.at = at;\n            e.text = text;\n            throw e;\n        },\n        next = function(c) {\n            // If a c parameter is provided, verify that it matches the current character.\n            if (c && c !== ch) {\n                error('Expected \\'' + c + '\\' instead of \\'' + ch + '\\'');\n            }\n            // Get the next character. When there are no more characters,\n            // return the empty string.\n            ch = text.charAt(at);\n            at += 1;\n            return ch;\n        },\n        number = function() {\n            // Parse a number value.\n            var number,\n                string = '';\n\n            if (ch === '-') {\n                string = '-';\n                next('-');\n            }\n            while (ch >= '0' && ch <= '9') {\n                string += ch;\n                next();\n            }\n            if (ch === '.') {\n                string += '.';\n                while (next() && ch >= '0' && ch <= '9') {\n                    string += ch;\n                }\n            }\n            if (ch === 'e' || ch === 'E') {\n                string += ch;\n                next();\n                if (ch === '-' || ch === '+') {\n                    string += ch;\n                    next();\n                }\n                while (ch >= '0' && ch <= '9') {\n                    string += ch;\n                    next();\n                }\n            }\n            number = +string;\n            if (!isFinite(number)) {\n                error('Bad number');\n            } else {\n                return number;\n            }\n        },\n\n        string = function() {\n            // Parse a string value.\n            var hex,\n                i,\n                string = '',\n                uffff;\n            // When parsing for string values, we must look for \" and \\ characters.\n            if (ch === '\"') {\n                while (next()) {\n                    if (ch === '\"') {\n                        next();\n                        return string;\n                    }\n                    if (ch === '\\\\') {\n                        next();\n                        if (ch === 'u') {\n                            uffff = 0;\n                            for (i = 0; i < 4; i += 1) {\n                                hex = parseInt(next(), 16);\n                                if (!isFinite(hex)) {\n                                    break;\n                                }\n                                uffff = uffff * 16 + hex;\n                            }\n                            string += String.fromCharCode(uffff);\n                        } else if (typeof escapee[ch] === 'string') {\n                            string += escapee[ch];\n                        } else {\n                            break;\n                        }\n                    } else {\n                        string += ch;\n                    }\n                }\n            }\n            error('Bad string');\n        },\n        white = function() {\n            // Skip whitespace.\n            while (ch && ch <= ' ') {\n                next();\n            }\n        },\n        word = function() {\n            // true, false, or null.\n            switch (ch) {\n                case 't':\n                    next('t');\n                    next('r');\n                    next('u');\n                    next('e');\n                    return true;\n                case 'f':\n                    next('f');\n                    next('a');\n                    next('l');\n                    next('s');\n                    next('e');\n                    return false;\n                case 'n':\n                    next('n');\n                    next('u');\n                    next('l');\n                    next('l');\n                    return null;\n            }\n            error('Unexpected \"' + ch + '\"');\n        },\n        value, // Placeholder for the value function.\n        array = function() {\n            // Parse an array value.\n            var array = [];\n\n            if (ch === '[') {\n                next('[');\n                white();\n                if (ch === ']') {\n                    next(']');\n                    return array; // empty array\n                }\n                while (ch) {\n                    array.push(value());\n                    white();\n                    if (ch === ']') {\n                        next(']');\n                        return array;\n                    }\n                    next(',');\n                    white();\n                }\n            }\n            error('Bad array');\n        },\n        object = function() {\n            // Parse an object value.\n            var key,\n                object = {};\n\n            if (ch === '{') {\n                next('{');\n                white();\n                if (ch === '}') {\n                    next('}');\n                    return object; // empty object\n                }\n                while (ch) {\n                    key = string();\n                    white();\n                    next(':');\n                    if (Object.hasOwnProperty.call(object, key)) {\n                        error('Duplicate key \"' + key + '\"');\n                    }\n                    object[key] = value();\n                    white();\n                    if (ch === '}') {\n                        next('}');\n                        return object;\n                    }\n                    next(',');\n                    white();\n                }\n            }\n            error('Bad object');\n        };\n\n    value = function() {\n        // Parse a JSON value. It could be an object, an array, a string,\n        // a number, or a word.\n        white();\n        switch (ch) {\n            case '{':\n                return object();\n            case '[':\n                return array();\n            case '\"':\n                return string();\n            case '-':\n                return number();\n            default:\n                return ch >= '0' && ch <= '9' ? number() : word();\n        }\n    };\n\n    // Return the json_parse function. It will have access to all of the\n    // above functions and variables.\n    return function(source) {\n        var result;\n\n        text = source;\n        at = 0;\n        ch = ' ';\n        result = value();\n        white();\n        if (ch) {\n            error('Syntax error');\n        }\n\n        return result;\n    };\n})();\n\n_.base64Encode = function(data) {\n    var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    var o1, o2, o3, h1, h2, h3, h4, bits, i = 0,\n        ac = 0,\n        enc = '',\n        tmp_arr = [];\n\n    if (!data) {\n        return data;\n    }\n\n    data = _.utf8Encode(data);\n\n    do { // pack three octets into four hexets\n        o1 = data.charCodeAt(i++);\n        o2 = data.charCodeAt(i++);\n        o3 = data.charCodeAt(i++);\n\n        bits = o1 << 16 | o2 << 8 | o3;\n\n        h1 = bits >> 18 & 0x3f;\n        h2 = bits >> 12 & 0x3f;\n        h3 = bits >> 6 & 0x3f;\n        h4 = bits & 0x3f;\n\n        // use hexets to index into b64, and append result to encoded string\n        tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);\n    } while (i < data.length);\n\n    enc = tmp_arr.join('');\n\n    switch (data.length % 3) {\n        case 1:\n            enc = enc.slice(0, -2) + '==';\n            break;\n        case 2:\n            enc = enc.slice(0, -1) + '=';\n            break;\n    }\n\n    return enc;\n};\n\n_.utf8Encode = function(string) {\n    string = (string + '').replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n\n    var utftext = '',\n        start,\n        end;\n    var stringl = 0,\n        n;\n\n    start = end = 0;\n    stringl = string.length;\n\n    for (n = 0; n < stringl; n++) {\n        var c1 = string.charCodeAt(n);\n        var enc = null;\n\n        if (c1 < 128) {\n            end++;\n        } else if ((c1 > 127) && (c1 < 2048)) {\n            enc = String.fromCharCode((c1 >> 6) | 192, (c1 & 63) | 128);\n        } else {\n            enc = String.fromCharCode((c1 >> 12) | 224, ((c1 >> 6) & 63) | 128, (c1 & 63) | 128);\n        }\n        if (enc !== null) {\n            if (end > start) {\n                utftext += string.substring(start, end);\n            }\n            utftext += enc;\n            start = end = n + 1;\n        }\n    }\n\n    if (end > start) {\n        utftext += string.substring(start, string.length);\n    }\n\n    return utftext;\n};\n\n_.UUID = (function() {\n\n    // Time/ticks information\n    // 1*new Date() is a cross browser version of Date.now()\n    var T = function() {\n        var d = 1 * new Date(),\n            i = 0;\n\n        // this while loop figures how many browser ticks go by\n        // before 1*new Date() returns a new number, ie the amount\n        // of ticks that go by per millisecond\n        while (d == 1 * new Date()) {\n            i++;\n        }\n\n        return d.toString(16) + i.toString(16);\n    };\n\n    // Math.Random entropy\n    var R = function() {\n        return Math.random().toString(16).replace('.', '');\n    };\n\n    // User agent entropy\n    // This function takes the user agent string, and then xors\n    // together each sequence of 8 bytes.  This produces a final\n    // sequence of 8 bytes which it returns as hex.\n    var UA = function() {\n        var ua = userAgent,\n            i, ch, buffer = [],\n            ret = 0;\n\n        function xor(result, byte_array) {\n            var j, tmp = 0;\n            for (j = 0; j < byte_array.length; j++) {\n                tmp |= (buffer[j] << j * 8);\n            }\n            return result ^ tmp;\n        }\n\n        for (i = 0; i < ua.length; i++) {\n            ch = ua.charCodeAt(i);\n            buffer.unshift(ch & 0xFF);\n            if (buffer.length >= 4) {\n                ret = xor(ret, buffer);\n                buffer = [];\n            }\n        }\n\n        if (buffer.length > 0) {\n            ret = xor(ret, buffer);\n        }\n\n        return ret.toString(16);\n    };\n\n    return function() {\n        var se = (screen.height * screen.width).toString(16);\n        return (T() + '-' + R() + '-' + UA() + '-' + se + '-' + T());\n    };\n})();\n\n// _.isBlockedUA()\n// This is to block various web spiders from executing our JS and\n// sending false tracking data\n_.isBlockedUA = function(ua) {\n    if (/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp)/i.test(ua)) {\n        return true;\n    }\n    return false;\n};\n\n/**\n * @param {Object=} formdata\n * @param {string=} arg_separator\n */\n_.HTTPBuildQuery = function(formdata, arg_separator) {\n    var use_val, use_key, tmp_arr = [];\n\n    if (_.isUndefined(arg_separator)) {\n        arg_separator = '&';\n    }\n\n    _.each(formdata, function(val, key) {\n        use_val = encodeURIComponent(val.toString());\n        use_key = encodeURIComponent(key);\n        tmp_arr[tmp_arr.length] = use_key + '=' + use_val;\n    });\n\n    return tmp_arr.join(arg_separator);\n};\n\n_.getQueryParam = function(url, param) {\n    // Expects a raw URL\n\n    param = param.replace(/[[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n    var regexS = '[\\\\?&]' + param + '=([^&#]*)',\n        regex = new RegExp(regexS),\n        results = regex.exec(url);\n    if (results === null || (results && typeof(results[1]) !== 'string' && results[1].length)) {\n        return '';\n    } else {\n        var result = results[1];\n        try {\n            result = decodeURIComponent(result);\n        } catch(err) {\n            console$1.error('Skipping decoding for malformed query param: ' + result);\n        }\n        return result.replace(/\\+/g, ' ');\n    }\n};\n\n_.getHashParam = function(hash, param) {\n    var matches = hash.match(new RegExp(param + '=([^&]*)'));\n    return matches ? matches[1] : null;\n};\n\n// _.cookie\n// Methods partially borrowed from quirksmode.org/js/cookies.html\n_.cookie = {\n    get: function(name) {\n        var nameEQ = name + '=';\n        var ca = document$1.cookie.split(';');\n        for (var i = 0; i < ca.length; i++) {\n            var c = ca[i];\n            while (c.charAt(0) == ' ') {\n                c = c.substring(1, c.length);\n            }\n            if (c.indexOf(nameEQ) === 0) {\n                return decodeURIComponent(c.substring(nameEQ.length, c.length));\n            }\n        }\n        return null;\n    },\n\n    parse: function(name) {\n        var cookie;\n        try {\n            cookie = _.JSONDecode(_.cookie.get(name)) || {};\n        } catch (err) {\n            // noop\n        }\n        return cookie;\n    },\n\n    set_seconds: function(name, value, seconds, is_cross_subdomain, is_secure, is_cross_site, domain_override) {\n        var cdomain = '',\n            expires = '',\n            secure = '';\n\n        if (domain_override) {\n            cdomain = '; domain=' + domain_override;\n        } else if (is_cross_subdomain) {\n            var domain = extract_domain(document$1.location.hostname);\n            cdomain = domain ? '; domain=.' + domain : '';\n        }\n\n        if (seconds) {\n            var date = new Date();\n            date.setTime(date.getTime() + (seconds * 1000));\n            expires = '; expires=' + date.toGMTString();\n        }\n\n        if (is_cross_site) {\n            is_secure = true;\n            secure = '; SameSite=None';\n        }\n        if (is_secure) {\n            secure += '; secure';\n        }\n\n        document$1.cookie = name + '=' + encodeURIComponent(value) + expires + '; path=/' + cdomain + secure;\n    },\n\n    set: function(name, value, days, is_cross_subdomain, is_secure, is_cross_site, domain_override) {\n        var cdomain = '', expires = '', secure = '';\n\n        if (domain_override) {\n            cdomain = '; domain=' + domain_override;\n        } else if (is_cross_subdomain) {\n            var domain = extract_domain(document$1.location.hostname);\n            cdomain = domain ? '; domain=.' + domain : '';\n        }\n\n        if (days) {\n            var date = new Date();\n            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n            expires = '; expires=' + date.toGMTString();\n        }\n\n        if (is_cross_site) {\n            is_secure = true;\n            secure = '; SameSite=None';\n        }\n        if (is_secure) {\n            secure += '; secure';\n        }\n\n        var new_cookie_val = name + '=' + encodeURIComponent(value) + expires + '; path=/' + cdomain + secure;\n        document$1.cookie = new_cookie_val;\n        return new_cookie_val;\n    },\n\n    remove: function(name, is_cross_subdomain, domain_override) {\n        _.cookie.set(name, '', -1, is_cross_subdomain, false, false, domain_override);\n    }\n};\n\nvar _localStorageSupported = null;\nvar localStorageSupported = function(storage, forceCheck) {\n    if (_localStorageSupported !== null && !forceCheck) {\n        return _localStorageSupported;\n    }\n\n    var supported = true;\n    try {\n        storage = storage || window.localStorage;\n        var key = '__mplss_' + cheap_guid(8),\n            val = 'xyz';\n        storage.setItem(key, val);\n        if (storage.getItem(key) !== val) {\n            supported = false;\n        }\n        storage.removeItem(key);\n    } catch (err) {\n        supported = false;\n    }\n\n    _localStorageSupported = supported;\n    return supported;\n};\n\n// _.localStorage\n_.localStorage = {\n    is_supported: function(force_check) {\n        var supported = localStorageSupported(null, force_check);\n        if (!supported) {\n            console$1.error('localStorage unsupported; falling back to cookie store');\n        }\n        return supported;\n    },\n\n    error: function(msg) {\n        console$1.error('localStorage error: ' + msg);\n    },\n\n    get: function(name) {\n        try {\n            return window.localStorage.getItem(name);\n        } catch (err) {\n            _.localStorage.error(err);\n        }\n        return null;\n    },\n\n    parse: function(name) {\n        try {\n            return _.JSONDecode(_.localStorage.get(name)) || {};\n        } catch (err) {\n            // noop\n        }\n        return null;\n    },\n\n    set: function(name, value) {\n        try {\n            window.localStorage.setItem(name, value);\n        } catch (err) {\n            _.localStorage.error(err);\n        }\n    },\n\n    remove: function(name) {\n        try {\n            window.localStorage.removeItem(name);\n        } catch (err) {\n            _.localStorage.error(err);\n        }\n    }\n};\n\n_.register_event = (function() {\n    // written by Dean Edwards, 2005\n    // with input from Tino Zijdel - crisp@xs4all.nl\n    // with input from Carl Sverre - mail@carlsverre.com\n    // with input from Mixpanel\n    // http://dean.edwards.name/weblog/2005/10/add-event/\n    // https://gist.github.com/1930440\n\n    /**\n     * @param {Object} element\n     * @param {string} type\n     * @param {function(...*)} handler\n     * @param {boolean=} oldSchool\n     * @param {boolean=} useCapture\n     */\n    var register_event = function(element, type, handler, oldSchool, useCapture) {\n        if (!element) {\n            console$1.error('No valid element provided to register_event');\n            return;\n        }\n\n        if (element.addEventListener && !oldSchool) {\n            element.addEventListener(type, handler, !!useCapture);\n        } else {\n            var ontype = 'on' + type;\n            var old_handler = element[ontype]; // can be undefined\n            element[ontype] = makeHandler(element, handler, old_handler);\n        }\n    };\n\n    function makeHandler(element, new_handler, old_handlers) {\n        var handler = function(event) {\n            event = event || fixEvent(window.event);\n\n            // this basically happens in firefox whenever another script\n            // overwrites the onload callback and doesn't pass the event\n            // object to previously defined callbacks.  All the browsers\n            // that don't define window.event implement addEventListener\n            // so the dom_loaded handler will still be fired as usual.\n            if (!event) {\n                return undefined;\n            }\n\n            var ret = true;\n            var old_result, new_result;\n\n            if (_.isFunction(old_handlers)) {\n                old_result = old_handlers(event);\n            }\n            new_result = new_handler.call(element, event);\n\n            if ((false === old_result) || (false === new_result)) {\n                ret = false;\n            }\n\n            return ret;\n        };\n\n        return handler;\n    }\n\n    function fixEvent(event) {\n        if (event) {\n            event.preventDefault = fixEvent.preventDefault;\n            event.stopPropagation = fixEvent.stopPropagation;\n        }\n        return event;\n    }\n    fixEvent.preventDefault = function() {\n        this.returnValue = false;\n    };\n    fixEvent.stopPropagation = function() {\n        this.cancelBubble = true;\n    };\n\n    return register_event;\n})();\n\n\nvar TOKEN_MATCH_REGEX = new RegExp('^(\\\\w*)\\\\[(\\\\w+)([=~\\\\|\\\\^\\\\$\\\\*]?)=?\"?([^\\\\]\"]*)\"?\\\\]$');\n\n_.dom_query = (function() {\n    /* document.getElementsBySelector(selector)\n    - returns an array of element objects from the current document\n    matching the CSS selector. Selectors can contain element names,\n    class names and ids and can be nested. For example:\n\n    elements = document.getElementsBySelector('div#main p a.external')\n\n    Will return an array of all 'a' elements with 'external' in their\n    class attribute that are contained inside 'p' elements that are\n    contained inside the 'div' element which has id=\"main\"\n\n    New in version 0.4: Support for CSS2 and CSS3 attribute selectors:\n    See http://www.w3.org/TR/css3-selectors/#attribute-selectors\n\n    Version 0.4 - Simon Willison, March 25th 2003\n    -- Works in Phoenix 0.5, Mozilla 1.3, Opera 7, Internet Explorer 6, Internet Explorer 5 on Windows\n    -- Opera 7 fails\n\n    Version 0.5 - Carl Sverre, Jan 7th 2013\n    -- Now uses jQuery-esque `hasClass` for testing class name\n    equality.  This fixes a bug related to '-' characters being\n    considered not part of a 'word' in regex.\n    */\n\n    function getAllChildren(e) {\n        // Returns all children of element. Workaround required for IE5/Windows. Ugh.\n        return e.all ? e.all : e.getElementsByTagName('*');\n    }\n\n    var bad_whitespace = /[\\t\\r\\n]/g;\n\n    function hasClass(elem, selector) {\n        var className = ' ' + selector + ' ';\n        return ((' ' + elem.className + ' ').replace(bad_whitespace, ' ').indexOf(className) >= 0);\n    }\n\n    function getElementsBySelector(selector) {\n        // Attempt to fail gracefully in lesser browsers\n        if (!document$1.getElementsByTagName) {\n            return [];\n        }\n        // Split selector in to tokens\n        var tokens = selector.split(' ');\n        var token, bits, tagName, found, foundCount, i, j, k, elements, currentContextIndex;\n        var currentContext = [document$1];\n        for (i = 0; i < tokens.length; i++) {\n            token = tokens[i].replace(/^\\s+/, '').replace(/\\s+$/, '');\n            if (token.indexOf('#') > -1) {\n                // Token is an ID selector\n                bits = token.split('#');\n                tagName = bits[0];\n                var id = bits[1];\n                var element = document$1.getElementById(id);\n                if (!element || (tagName && element.nodeName.toLowerCase() != tagName)) {\n                    // element not found or tag with that ID not found, return false\n                    return [];\n                }\n                // Set currentContext to contain just this element\n                currentContext = [element];\n                continue; // Skip to next token\n            }\n            if (token.indexOf('.') > -1) {\n                // Token contains a class selector\n                bits = token.split('.');\n                tagName = bits[0];\n                var className = bits[1];\n                if (!tagName) {\n                    tagName = '*';\n                }\n                // Get elements matching tag, filter them for class selector\n                found = [];\n                foundCount = 0;\n                for (j = 0; j < currentContext.length; j++) {\n                    if (tagName == '*') {\n                        elements = getAllChildren(currentContext[j]);\n                    } else {\n                        elements = currentContext[j].getElementsByTagName(tagName);\n                    }\n                    for (k = 0; k < elements.length; k++) {\n                        found[foundCount++] = elements[k];\n                    }\n                }\n                currentContext = [];\n                currentContextIndex = 0;\n                for (j = 0; j < found.length; j++) {\n                    if (found[j].className &&\n                        _.isString(found[j].className) && // some SVG elements have classNames which are not strings\n                        hasClass(found[j], className)\n                    ) {\n                        currentContext[currentContextIndex++] = found[j];\n                    }\n                }\n                continue; // Skip to next token\n            }\n            // Code to deal with attribute selectors\n            var token_match = token.match(TOKEN_MATCH_REGEX);\n            if (token_match) {\n                tagName = token_match[1];\n                var attrName = token_match[2];\n                var attrOperator = token_match[3];\n                var attrValue = token_match[4];\n                if (!tagName) {\n                    tagName = '*';\n                }\n                // Grab all of the tagName elements within current context\n                found = [];\n                foundCount = 0;\n                for (j = 0; j < currentContext.length; j++) {\n                    if (tagName == '*') {\n                        elements = getAllChildren(currentContext[j]);\n                    } else {\n                        elements = currentContext[j].getElementsByTagName(tagName);\n                    }\n                    for (k = 0; k < elements.length; k++) {\n                        found[foundCount++] = elements[k];\n                    }\n                }\n                currentContext = [];\n                currentContextIndex = 0;\n                var checkFunction; // This function will be used to filter the elements\n                switch (attrOperator) {\n                    case '=': // Equality\n                        checkFunction = function(e) {\n                            return (e.getAttribute(attrName) == attrValue);\n                        };\n                        break;\n                    case '~': // Match one of space seperated words\n                        checkFunction = function(e) {\n                            return (e.getAttribute(attrName).match(new RegExp('\\\\b' + attrValue + '\\\\b')));\n                        };\n                        break;\n                    case '|': // Match start with value followed by optional hyphen\n                        checkFunction = function(e) {\n                            return (e.getAttribute(attrName).match(new RegExp('^' + attrValue + '-?')));\n                        };\n                        break;\n                    case '^': // Match starts with value\n                        checkFunction = function(e) {\n                            return (e.getAttribute(attrName).indexOf(attrValue) === 0);\n                        };\n                        break;\n                    case '$': // Match ends with value - fails with \"Warning\" in Opera 7\n                        checkFunction = function(e) {\n                            return (e.getAttribute(attrName).lastIndexOf(attrValue) == e.getAttribute(attrName).length - attrValue.length);\n                        };\n                        break;\n                    case '*': // Match ends with value\n                        checkFunction = function(e) {\n                            return (e.getAttribute(attrName).indexOf(attrValue) > -1);\n                        };\n                        break;\n                    default:\n                        // Just test for existence of attribute\n                        checkFunction = function(e) {\n                            return e.getAttribute(attrName);\n                        };\n                }\n                currentContext = [];\n                currentContextIndex = 0;\n                for (j = 0; j < found.length; j++) {\n                    if (checkFunction(found[j])) {\n                        currentContext[currentContextIndex++] = found[j];\n                    }\n                }\n                // alert('Attribute Selector: '+tagName+' '+attrName+' '+attrOperator+' '+attrValue);\n                continue; // Skip to next token\n            }\n            // If we get here, token is JUST an element (not a class or ID selector)\n            tagName = token;\n            found = [];\n            foundCount = 0;\n            for (j = 0; j < currentContext.length; j++) {\n                elements = currentContext[j].getElementsByTagName(tagName);\n                for (k = 0; k < elements.length; k++) {\n                    found[foundCount++] = elements[k];\n                }\n            }\n            currentContext = found;\n        }\n        return currentContext;\n    }\n\n    return function(query) {\n        if (_.isElement(query)) {\n            return [query];\n        } else if (_.isObject(query) && !_.isUndefined(query.length)) {\n            return query;\n        } else {\n            return getElementsBySelector.call(this, query);\n        }\n    };\n})();\n\n_.info = {\n    campaignParams: function() {\n        var campaign_keywords = 'utm_source utm_medium utm_campaign utm_content utm_term'.split(' '),\n            kw = '',\n            params = {};\n        _.each(campaign_keywords, function(kwkey) {\n            kw = _.getQueryParam(document$1.URL, kwkey);\n            if (kw.length) {\n                params[kwkey] = kw;\n            }\n        });\n\n        return params;\n    },\n\n    searchEngine: function(referrer) {\n        if (referrer.search('https?://(.*)google.([^/?]*)') === 0) {\n            return 'google';\n        } else if (referrer.search('https?://(.*)bing.com') === 0) {\n            return 'bing';\n        } else if (referrer.search('https?://(.*)yahoo.com') === 0) {\n            return 'yahoo';\n        } else if (referrer.search('https?://(.*)duckduckgo.com') === 0) {\n            return 'duckduckgo';\n        } else {\n            return null;\n        }\n    },\n\n    searchInfo: function(referrer) {\n        var search = _.info.searchEngine(referrer),\n            param = (search != 'yahoo') ? 'q' : 'p',\n            ret = {};\n\n        if (search !== null) {\n            ret['$search_engine'] = search;\n\n            var keyword = _.getQueryParam(referrer, param);\n            if (keyword.length) {\n                ret['mp_keyword'] = keyword;\n            }\n        }\n\n        return ret;\n    },\n\n    /**\n     * This function detects which browser is running this script.\n     * The order of the checks are important since many user agents\n     * include key words used in later checks.\n     */\n    browser: function(user_agent, vendor, opera) {\n        vendor = vendor || ''; // vendor is undefined for at least IE9\n        if (opera || _.includes(user_agent, ' OPR/')) {\n            if (_.includes(user_agent, 'Mini')) {\n                return 'Opera Mini';\n            }\n            return 'Opera';\n        } else if (/(BlackBerry|PlayBook|BB10)/i.test(user_agent)) {\n            return 'BlackBerry';\n        } else if (_.includes(user_agent, 'IEMobile') || _.includes(user_agent, 'WPDesktop')) {\n            return 'Internet Explorer Mobile';\n        } else if (_.includes(user_agent, 'SamsungBrowser/')) {\n            // https://developer.samsung.com/internet/user-agent-string-format\n            return 'Samsung Internet';\n        } else if (_.includes(user_agent, 'Edge') || _.includes(user_agent, 'Edg/')) {\n            return 'Microsoft Edge';\n        } else if (_.includes(user_agent, 'FBIOS')) {\n            return 'Facebook Mobile';\n        } else if (_.includes(user_agent, 'Chrome')) {\n            return 'Chrome';\n        } else if (_.includes(user_agent, 'CriOS')) {\n            return 'Chrome iOS';\n        } else if (_.includes(user_agent, 'UCWEB') || _.includes(user_agent, 'UCBrowser')) {\n            return 'UC Browser';\n        } else if (_.includes(user_agent, 'FxiOS')) {\n            return 'Firefox iOS';\n        } else if (_.includes(vendor, 'Apple')) {\n            if (_.includes(user_agent, 'Mobile')) {\n                return 'Mobile Safari';\n            }\n            return 'Safari';\n        } else if (_.includes(user_agent, 'Android')) {\n            return 'Android Mobile';\n        } else if (_.includes(user_agent, 'Konqueror')) {\n            return 'Konqueror';\n        } else if (_.includes(user_agent, 'Firefox')) {\n            return 'Firefox';\n        } else if (_.includes(user_agent, 'MSIE') || _.includes(user_agent, 'Trident/')) {\n            return 'Internet Explorer';\n        } else if (_.includes(user_agent, 'Gecko')) {\n            return 'Mozilla';\n        } else {\n            return '';\n        }\n    },\n\n    /**\n     * This function detects which browser version is running this script,\n     * parsing major and minor version (e.g., 42.1). User agent strings from:\n     * http://www.useragentstring.com/pages/useragentstring.php\n     */\n    browserVersion: function(userAgent, vendor, opera) {\n        var browser = _.info.browser(userAgent, vendor, opera);\n        var versionRegexs = {\n            'Internet Explorer Mobile': /rv:(\\d+(\\.\\d+)?)/,\n            'Microsoft Edge': /Edge?\\/(\\d+(\\.\\d+)?)/,\n            'Chrome': /Chrome\\/(\\d+(\\.\\d+)?)/,\n            'Chrome iOS': /CriOS\\/(\\d+(\\.\\d+)?)/,\n            'UC Browser' : /(UCBrowser|UCWEB)\\/(\\d+(\\.\\d+)?)/,\n            'Safari': /Version\\/(\\d+(\\.\\d+)?)/,\n            'Mobile Safari': /Version\\/(\\d+(\\.\\d+)?)/,\n            'Opera': /(Opera|OPR)\\/(\\d+(\\.\\d+)?)/,\n            'Firefox': /Firefox\\/(\\d+(\\.\\d+)?)/,\n            'Firefox iOS': /FxiOS\\/(\\d+(\\.\\d+)?)/,\n            'Konqueror': /Konqueror:(\\d+(\\.\\d+)?)/,\n            'BlackBerry': /BlackBerry (\\d+(\\.\\d+)?)/,\n            'Android Mobile': /android\\s(\\d+(\\.\\d+)?)/,\n            'Samsung Internet': /SamsungBrowser\\/(\\d+(\\.\\d+)?)/,\n            'Internet Explorer': /(rv:|MSIE )(\\d+(\\.\\d+)?)/,\n            'Mozilla': /rv:(\\d+(\\.\\d+)?)/\n        };\n        var regex = versionRegexs[browser];\n        if (regex === undefined) {\n            return null;\n        }\n        var matches = userAgent.match(regex);\n        if (!matches) {\n            return null;\n        }\n        return parseFloat(matches[matches.length - 2]);\n    },\n\n    os: function() {\n        var a = userAgent;\n        if (/Windows/i.test(a)) {\n            if (/Phone/.test(a) || /WPDesktop/.test(a)) {\n                return 'Windows Phone';\n            }\n            return 'Windows';\n        } else if (/(iPhone|iPad|iPod)/.test(a)) {\n            return 'iOS';\n        } else if (/Android/.test(a)) {\n            return 'Android';\n        } else if (/(BlackBerry|PlayBook|BB10)/i.test(a)) {\n            return 'BlackBerry';\n        } else if (/Mac/i.test(a)) {\n            return 'Mac OS X';\n        } else if (/Linux/.test(a)) {\n            return 'Linux';\n        } else if (/CrOS/.test(a)) {\n            return 'Chrome OS';\n        } else {\n            return '';\n        }\n    },\n\n    device: function(user_agent) {\n        if (/Windows Phone/i.test(user_agent) || /WPDesktop/.test(user_agent)) {\n            return 'Windows Phone';\n        } else if (/iPad/.test(user_agent)) {\n            return 'iPad';\n        } else if (/iPod/.test(user_agent)) {\n            return 'iPod Touch';\n        } else if (/iPhone/.test(user_agent)) {\n            return 'iPhone';\n        } else if (/(BlackBerry|PlayBook|BB10)/i.test(user_agent)) {\n            return 'BlackBerry';\n        } else if (/Android/.test(user_agent)) {\n            return 'Android';\n        } else {\n            return '';\n        }\n    },\n\n    referringDomain: function(referrer) {\n        var split = referrer.split('/');\n        if (split.length >= 3) {\n            return split[2];\n        }\n        return '';\n    },\n\n    properties: function() {\n        return _.extend(_.strip_empty_properties({\n            '$os': _.info.os(),\n            '$browser': _.info.browser(userAgent, navigator$1.vendor, windowOpera),\n            '$referrer': document$1.referrer,\n            '$referring_domain': _.info.referringDomain(document$1.referrer),\n            '$device': _.info.device(userAgent)\n        }), {\n            '$current_url': window$1.location.href,\n            '$browser_version': _.info.browserVersion(userAgent, navigator$1.vendor, windowOpera),\n            '$screen_height': screen.height,\n            '$screen_width': screen.width,\n            'mp_lib': 'web',\n            '$lib_version': Config.LIB_VERSION,\n            '$insert_id': cheap_guid(),\n            'time': _.timestamp() / 1000 // epoch time in seconds\n        });\n    },\n\n    people_properties: function() {\n        return _.extend(_.strip_empty_properties({\n            '$os': _.info.os(),\n            '$browser': _.info.browser(userAgent, navigator$1.vendor, windowOpera)\n        }), {\n            '$browser_version': _.info.browserVersion(userAgent, navigator$1.vendor, windowOpera)\n        });\n    },\n\n    pageviewInfo: function(page) {\n        return _.strip_empty_properties({\n            'mp_page': page,\n            'mp_referrer': document$1.referrer,\n            'mp_browser': _.info.browser(userAgent, navigator$1.vendor, windowOpera),\n            'mp_platform': _.info.os()\n        });\n    }\n};\n\nvar cheap_guid = function(maxlen) {\n    var guid = Math.random().toString(36).substring(2, 10) + Math.random().toString(36).substring(2, 10);\n    return maxlen ? guid.substring(0, maxlen) : guid;\n};\n\n/**\n * Check deterministically whether to include or exclude from a feature rollout/test based on the\n * given string and the desired percentage to include.\n * @param {String} str - string to run the check against (for instance a project's token)\n * @param {String} feature - name of feature (for inclusion in hash, to ensure different results\n * for different features)\n * @param {Number} percent_allowed - percentage chance that a given string will be included\n * @returns {Boolean} whether the given string should be included\n */\nvar determine_eligibility = _.safewrap(function(str, feature, percent_allowed) {\n    str = str + feature;\n\n    // Bernstein's hash: http://www.cse.yorku.ca/~oz/hash.html#djb2\n    var hash = 5381;\n    for (var i = 0; i < str.length; i++) {\n        hash = ((hash << 5) + hash) + str.charCodeAt(i);\n        hash = hash & hash;\n    }\n    var dart = (hash >>> 0) % 100;\n    return dart < percent_allowed;\n});\n\n// naive way to extract domain name (example.com) from full hostname (my.sub.example.com)\nvar SIMPLE_DOMAIN_MATCH_REGEX = /[a-z0-9][a-z0-9-]*\\.[a-z]+$/i;\n// this next one attempts to account for some ccSLDs, e.g. extracting oxford.ac.uk from www.oxford.ac.uk\nvar DOMAIN_MATCH_REGEX = /[a-z0-9][a-z0-9-]+\\.[a-z.]{2,6}$/i;\n/**\n * Attempts to extract main domain name from full hostname, using a few blunt heuristics. For\n * common TLDs like .com/.org that always have a simple SLD.TLD structure (example.com), we\n * simply extract the last two .-separated parts of the hostname (SIMPLE_DOMAIN_MATCH_REGEX).\n * For others, we attempt to account for short ccSLD+TLD combos (.ac.uk) with the legacy\n * DOMAIN_MATCH_REGEX (kept to maintain backwards compatibility with existing Mixpanel\n * integrations). The only _reliable_ way to extract domain from hostname is with an up-to-date\n * list like at https://publicsuffix.org/ so for cases that this helper fails at, the SDK\n * offers the 'cookie_domain' config option to set it explicitly.\n * @example\n * extract_domain('my.sub.example.com')\n * // 'example.com'\n */\nvar extract_domain = function(hostname) {\n    var domain_regex = DOMAIN_MATCH_REGEX;\n    var parts = hostname.split('.');\n    var tld = parts[parts.length - 1];\n    if (tld.length > 4 || tld === 'com' || tld === 'org') {\n        domain_regex = SIMPLE_DOMAIN_MATCH_REGEX;\n    }\n    var matches = hostname.match(domain_regex);\n    return matches ? matches[0] : '';\n};\n\nvar JSONStringify = null;\nvar JSONParse = null;\nif (typeof JSON !== 'undefined') {\n    JSONStringify = JSON.stringify;\n    JSONParse = JSON.parse;\n}\nJSONStringify = JSONStringify || _.JSONEncode;\nJSONParse = JSONParse || _.JSONDecode;\n\n// EXPORTS (for closure compiler)\n_['toArray']                = _.toArray;\n_['isObject']               = _.isObject;\n_['JSONEncode']             = _.JSONEncode;\n_['JSONDecode']             = _.JSONDecode;\n_['isBlockedUA']            = _.isBlockedUA;\n_['isEmptyObject']          = _.isEmptyObject;\n_['info']                   = _.info;\n_['info']['device']         = _.info.device;\n_['info']['browser']        = _.info.browser;\n_['info']['browserVersion'] = _.info.browserVersion;\n_['info']['properties']     = _.info.properties;\n\n/*\n * Get the className of an element, accounting for edge cases where element.className is an object\n * @param {Element} el - element to get the className of\n * @returns {string} the element's class\n */\nfunction getClassName(el) {\n    switch(typeof el.className) {\n        case 'string':\n            return el.className;\n        case 'object': // handle cases where className might be SVGAnimatedString or some other type\n            return el.className.baseVal || el.getAttribute('class') || '';\n        default: // future proof\n            return '';\n    }\n}\n\n/*\n * Get the direct text content of an element, protecting against sensitive data collection.\n * Concats textContent of each of the element's text node children; this avoids potential\n * collection of sensitive data that could happen if we used element.textContent and the\n * element had sensitive child elements, since element.textContent includes child content.\n * Scrubs values that look like they could be sensitive (i.e. cc or ssn number).\n * @param {Element} el - element to get the text of\n * @returns {string} the element's direct text content\n */\nfunction getSafeText(el) {\n    var elText = '';\n\n    if (shouldTrackElement(el) && el.childNodes && el.childNodes.length) {\n        _.each(el.childNodes, function(child) {\n            if (isTextNode(child) && child.textContent) {\n                elText += _.trim(child.textContent)\n                    // scrub potentially sensitive values\n                    .split(/(\\s+)/).filter(shouldTrackValue).join('')\n                    // normalize whitespace\n                    .replace(/[\\r\\n]/g, ' ').replace(/[ ]+/g, ' ')\n                    // truncate\n                    .substring(0, 255);\n            }\n        });\n    }\n\n    return _.trim(elText);\n}\n\n/*\n * Check whether an element has nodeType Node.ELEMENT_NODE\n * @param {Element} el - element to check\n * @returns {boolean} whether el is of the correct nodeType\n */\nfunction isElementNode(el) {\n    return el && el.nodeType === 1; // Node.ELEMENT_NODE - use integer constant for browser portability\n}\n\n/*\n * Check whether an element is of a given tag type.\n * Due to potential reference discrepancies (such as the webcomponents.js polyfill),\n * we want to match tagNames instead of specific references because something like\n * element === document.body won't always work because element might not be a native\n * element.\n * @param {Element} el - element to check\n * @param {string} tag - tag name (e.g., \"div\")\n * @returns {boolean} whether el is of the given tag type\n */\nfunction isTag(el, tag) {\n    return el && el.tagName && el.tagName.toLowerCase() === tag.toLowerCase();\n}\n\n/*\n * Check whether an element has nodeType Node.TEXT_NODE\n * @param {Element} el - element to check\n * @returns {boolean} whether el is of the correct nodeType\n */\nfunction isTextNode(el) {\n    return el && el.nodeType === 3; // Node.TEXT_NODE - use integer constant for browser portability\n}\n\n/*\n * Check whether a DOM event should be \"tracked\" or if it may contain sentitive data\n * using a variety of heuristics.\n * @param {Element} el - element to check\n * @param {Event} event - event to check\n * @returns {boolean} whether the event should be tracked\n */\nfunction shouldTrackDomEvent(el, event) {\n    if (!el || isTag(el, 'html') || !isElementNode(el)) {\n        return false;\n    }\n    var tag = el.tagName.toLowerCase();\n    switch (tag) {\n        case 'html':\n            return false;\n        case 'form':\n            return event.type === 'submit';\n        case 'input':\n            if (['button', 'submit'].indexOf(el.getAttribute('type')) === -1) {\n                return event.type === 'change';\n            } else {\n                return event.type === 'click';\n            }\n        case 'select':\n        case 'textarea':\n            return event.type === 'change';\n        default:\n            return event.type === 'click';\n    }\n}\n\n/*\n * Check whether a DOM element should be \"tracked\" or if it may contain sentitive data\n * using a variety of heuristics.\n * @param {Element} el - element to check\n * @returns {boolean} whether the element should be tracked\n */\nfunction shouldTrackElement(el) {\n    for (var curEl = el; curEl.parentNode && !isTag(curEl, 'body'); curEl = curEl.parentNode) {\n        var classes = getClassName(curEl).split(' ');\n        if (_.includes(classes, 'mp-sensitive') || _.includes(classes, 'mp-no-track')) {\n            return false;\n        }\n    }\n\n    if (_.includes(getClassName(el).split(' '), 'mp-include')) {\n        return true;\n    }\n\n    // don't send data from inputs or similar elements since there will always be\n    // a risk of clientside javascript placing sensitive data in attributes\n    if (\n        isTag(el, 'input') ||\n        isTag(el, 'select') ||\n        isTag(el, 'textarea') ||\n        el.getAttribute('contenteditable') === 'true'\n    ) {\n        return false;\n    }\n\n    // don't include hidden or password fields\n    var type = el.type || '';\n    if (typeof type === 'string') { // it's possible for el.type to be a DOM element if el is a form with a child input[name=\"type\"]\n        switch(type.toLowerCase()) {\n            case 'hidden':\n                return false;\n            case 'password':\n                return false;\n        }\n    }\n\n    // filter out data from fields that look like sensitive fields\n    var name = el.name || el.id || '';\n    if (typeof name === 'string') { // it's possible for el.name or el.id to be a DOM element if el is a form with a child input[name=\"name\"]\n        var sensitiveNameRegex = /^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i;\n        if (sensitiveNameRegex.test(name.replace(/[^a-zA-Z0-9]/g, ''))) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\n/*\n * Check whether a string value should be \"tracked\" or if it may contain sentitive data\n * using a variety of heuristics.\n * @param {string} value - string value to check\n * @returns {boolean} whether the element should be tracked\n */\nfunction shouldTrackValue(value) {\n    if (value === null || _.isUndefined(value)) {\n        return false;\n    }\n\n    if (typeof value === 'string') {\n        value = _.trim(value);\n\n        // check to see if input value looks like a credit card number\n        // see: https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9781449327453/ch04s20.html\n        var ccRegex = /^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/;\n        if (ccRegex.test((value || '').replace(/[- ]/g, ''))) {\n            return false;\n        }\n\n        // check to see if input value looks like a social security number\n        var ssnRegex = /(^\\d{3}-?\\d{2}-?\\d{4}$)/;\n        if (ssnRegex.test(value)) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\nvar autotrack = {\n    _initializedTokens: [],\n\n    _previousElementSibling: function(el) {\n        if (el.previousElementSibling) {\n            return el.previousElementSibling;\n        } else {\n            do {\n                el = el.previousSibling;\n            } while (el && !isElementNode(el));\n            return el;\n        }\n    },\n\n    _loadScript: function(scriptUrlToLoad, callback) {\n        var scriptTag = document.createElement('script');\n        scriptTag.type = 'text/javascript';\n        scriptTag.src = scriptUrlToLoad;\n        scriptTag.onload = callback;\n\n        var scripts = document.getElementsByTagName('script');\n        if (scripts.length > 0) {\n            scripts[0].parentNode.insertBefore(scriptTag, scripts[0]);\n        } else {\n            document.body.appendChild(scriptTag);\n        }\n    },\n\n    _getPropertiesFromElement: function(elem) {\n        var props = {\n            'classes': getClassName(elem).split(' '),\n            'tag_name': elem.tagName.toLowerCase()\n        };\n\n        if (shouldTrackElement(elem)) {\n            _.each(elem.attributes, function(attr) {\n                if (shouldTrackValue(attr.value)) {\n                    props['attr__' + attr.name] = attr.value;\n                }\n            });\n        }\n\n        var nthChild = 1;\n        var nthOfType = 1;\n        var currentElem = elem;\n        while (currentElem = this._previousElementSibling(currentElem)) { // eslint-disable-line no-cond-assign\n            nthChild++;\n            if (currentElem.tagName === elem.tagName) {\n                nthOfType++;\n            }\n        }\n        props['nth_child'] = nthChild;\n        props['nth_of_type'] = nthOfType;\n\n        return props;\n    },\n\n    _getDefaultProperties: function(eventType) {\n        return {\n            '$event_type': eventType,\n            '$ce_version': 1,\n            '$host': window.location.host,\n            '$pathname': window.location.pathname\n        };\n    },\n\n    _extractCustomPropertyValue: function(customProperty) {\n        var propValues = [];\n        _.each(document.querySelectorAll(customProperty['css_selector']), function(matchedElem) {\n            var value;\n\n            if (['input', 'select'].indexOf(matchedElem.tagName.toLowerCase()) > -1) {\n                value = matchedElem['value'];\n            } else if (matchedElem['textContent']) {\n                value = matchedElem['textContent'];\n            }\n\n            if (shouldTrackValue(value)) {\n                propValues.push(value);\n            }\n        });\n        return propValues.join(', ');\n    },\n\n    _getCustomProperties: function(targetElementList) {\n        var props = {};\n        _.each(this._customProperties, function(customProperty) {\n            _.each(customProperty['event_selectors'], function(eventSelector) {\n                var eventElements = document.querySelectorAll(eventSelector);\n                _.each(eventElements, function(eventElement) {\n                    if (_.includes(targetElementList, eventElement) && shouldTrackElement(eventElement)) {\n                        props[customProperty['name']] = this._extractCustomPropertyValue(customProperty);\n                    }\n                }, this);\n            }, this);\n        }, this);\n        return props;\n    },\n\n    _getEventTarget: function(e) {\n        // https://developer.mozilla.org/en-US/docs/Web/API/Event/target#Compatibility_notes\n        if (typeof e.target === 'undefined') {\n            return e.srcElement;\n        } else {\n            return e.target;\n        }\n    },\n\n    _trackEvent: function(e, instance) {\n        /*** Don't mess with this code without running IE8 tests on it ***/\n        var target = this._getEventTarget(e);\n        if (isTextNode(target)) { // defeat Safari bug (see: http://www.quirksmode.org/js/events_properties.html)\n            target = target.parentNode;\n        }\n\n        if (shouldTrackDomEvent(target, e)) {\n            var targetElementList = [target];\n            var curEl = target;\n            while (curEl.parentNode && !isTag(curEl, 'body')) {\n                targetElementList.push(curEl.parentNode);\n                curEl = curEl.parentNode;\n            }\n\n            var elementsJson = [];\n            var href, explicitNoTrack = false;\n            _.each(targetElementList, function(el) {\n                var shouldTrackEl = shouldTrackElement(el);\n\n                // if the element or a parent element is an anchor tag\n                // include the href as a property\n                if (el.tagName.toLowerCase() === 'a') {\n                    href = el.getAttribute('href');\n                    href = shouldTrackEl && shouldTrackValue(href) && href;\n                }\n\n                // allow users to programatically prevent tracking of elements by adding class 'mp-no-track'\n                var classes = getClassName(el).split(' ');\n                if (_.includes(classes, 'mp-no-track')) {\n                    explicitNoTrack = true;\n                }\n\n                elementsJson.push(this._getPropertiesFromElement(el));\n            }, this);\n\n            if (explicitNoTrack) {\n                return false;\n            }\n\n            // only populate text content from target element (not parents)\n            // to prevent text within a sensitive element from being collected\n            // as part of a parent's el.textContent\n            var elementText;\n            var safeElementText = getSafeText(target);\n            if (safeElementText && safeElementText.length) {\n                elementText = safeElementText;\n            }\n\n            var props = _.extend(\n                this._getDefaultProperties(e.type),\n                {\n                    '$elements':  elementsJson,\n                    '$el_attr__href': href,\n                    '$el_text': elementText\n                },\n                this._getCustomProperties(targetElementList)\n            );\n\n            instance.track('$web_event', props);\n            return true;\n        }\n    },\n\n    // only reason is to stub for unit tests\n    // since you can't override window.location props\n    _navigate: function(href) {\n        window.location.href = href;\n    },\n\n    _addDomEventHandlers: function(instance) {\n        var handler = _.bind(function(e) {\n            e = e || window.event;\n            this._trackEvent(e, instance);\n        }, this);\n        _.register_event(document, 'submit', handler, false, true);\n        _.register_event(document, 'change', handler, false, true);\n        _.register_event(document, 'click', handler, false, true);\n    },\n\n    _customProperties: {},\n    init: function(instance) {\n        if (!(document && document.body)) {\n            console.log('document not ready yet, trying again in 500 milliseconds...');\n            var that = this;\n            setTimeout(function() { that.init(instance); }, 500);\n            return;\n        }\n\n        var token = instance.get_config('token');\n        if (this._initializedTokens.indexOf(token) > -1) {\n            console.log('autotrack already initialized for token \"' + token + '\"');\n            return;\n        }\n        this._initializedTokens.push(token);\n\n        if (!this._maybeLoadEditor(instance)) { // don't autotrack actions when the editor is enabled\n            var parseDecideResponse = _.bind(function(response) {\n                if (response && response['config'] && response['config']['enable_collect_everything'] === true) {\n\n                    if (response['custom_properties']) {\n                        this._customProperties = response['custom_properties'];\n                    }\n\n                    instance.track('$web_event', _.extend({\n                        '$title': document.title\n                    }, this._getDefaultProperties('pageview')));\n\n                    this._addDomEventHandlers(instance);\n\n                } else {\n                    instance['__autotrack_enabled'] = false;\n                }\n            }, this);\n\n            instance._send_request(\n                instance.get_config('api_host') + '/decide/', {\n                    'verbose': true,\n                    'version': '1',\n                    'lib': 'web',\n                    'token': token\n                },\n                {method: 'GET', transport: 'XHR'},\n                instance._prepare_callback(parseDecideResponse)\n            );\n        }\n    },\n\n    _editorParamsFromHash: function(instance, hash) {\n        var editorParams;\n        try {\n            var state = _.getHashParam(hash, 'state');\n            state = JSON.parse(decodeURIComponent(state));\n            var expiresInSeconds = _.getHashParam(hash, 'expires_in');\n            editorParams = {\n                'accessToken': _.getHashParam(hash, 'access_token'),\n                'accessTokenExpiresAt': (new Date()).getTime() + (Number(expiresInSeconds) * 1000),\n                'bookmarkletMode': !!state['bookmarkletMode'],\n                'projectId': state['projectId'],\n                'projectOwnerId': state['projectOwnerId'],\n                'projectToken': state['token'],\n                'readOnly': state['readOnly'],\n                'userFlags': state['userFlags'],\n                'userId': state['userId']\n            };\n            window.sessionStorage.setItem('editorParams', JSON.stringify(editorParams));\n\n            if (state['desiredHash']) {\n                window.location.hash = state['desiredHash'];\n            } else if (window.history) {\n                history.replaceState('', document.title, window.location.pathname + window.location.search); // completely remove hash\n            } else {\n                window.location.hash = ''; // clear hash (but leaves # unfortunately)\n            }\n        } catch (e) {\n            console.error('Unable to parse data from hash', e);\n        }\n        return editorParams;\n    },\n\n    /**\n     * To load the visual editor, we need an access token and other state. That state comes from one of three places:\n     * 1. In the URL hash params if the customer is using an old snippet\n     * 2. From session storage under the key `_mpcehash` if the snippet already parsed the hash\n     * 3. From session storage under the key `editorParams` if the editor was initialized on a previous page\n     */\n    _maybeLoadEditor: function(instance) {\n        try {\n            var parseFromUrl = false;\n            if (_.getHashParam(window.location.hash, 'state')) {\n                var state = _.getHashParam(window.location.hash, 'state');\n                state = JSON.parse(decodeURIComponent(state));\n                parseFromUrl = state['action'] === 'mpeditor';\n            }\n            var parseFromStorage = !!window.sessionStorage.getItem('_mpcehash');\n            var editorParams;\n\n            if (parseFromUrl) { // happens if they are initializing the editor using an old snippet\n                editorParams = this._editorParamsFromHash(instance, window.location.hash);\n            } else if (parseFromStorage) { // happens if they are initialized the editor and using the new snippet\n                editorParams = this._editorParamsFromHash(instance, window.sessionStorage.getItem('_mpcehash'));\n                window.sessionStorage.removeItem('_mpcehash');\n            } else { // get credentials from sessionStorage from a previous initialzation\n                editorParams = JSON.parse(window.sessionStorage.getItem('editorParams') || '{}');\n            }\n\n            if (editorParams['projectToken'] && instance.get_config('token') === editorParams['projectToken']) {\n                this._loadEditor(instance, editorParams);\n                return true;\n            } else {\n                return false;\n            }\n        } catch (e) {\n            return false;\n        }\n    },\n\n    _loadEditor: function(instance, editorParams) {\n        if (!window['_mpEditorLoaded']) { // only load the codeless event editor once, even if there are multiple instances of MixpanelLib\n            window['_mpEditorLoaded'] = true;\n            var editorUrl = instance.get_config('app_host')\n              + '/js-bundle/reports/collect-everything/editor.js?_ts='\n              + (new Date()).getTime();\n            this._loadScript(editorUrl, function() {\n                window['mp_load_editor'](editorParams);\n            });\n            return true;\n        }\n        return false;\n    },\n\n    // this is a mechanism to ramp up CE with no server-side interaction.\n    // when CE is active, every page load results in a decide request. we\n    // need to gently ramp this up so we don't overload decide. this decides\n    // deterministically if CE is enabled for this project by modding the char\n    // value of the project token.\n    enabledForProject: function(token, numBuckets, numEnabledBuckets) {\n        numBuckets = !_.isUndefined(numBuckets) ? numBuckets : 10;\n        numEnabledBuckets = !_.isUndefined(numEnabledBuckets) ? numEnabledBuckets : 10;\n        var charCodeSum = 0;\n        for (var i = 0; i < token.length; i++) {\n            charCodeSum += token.charCodeAt(i);\n        }\n        return (charCodeSum % numBuckets) < numEnabledBuckets;\n    },\n\n    isBrowserSupported: function() {\n        return _.isFunction(document.querySelectorAll);\n    }\n};\n\n_.bind_instance_methods(autotrack);\n_.safewrap_instance_methods(autotrack);\n\n/**\n * DomTracker Object\n * @constructor\n */\nvar DomTracker = function() {};\n\n\n// interface\nDomTracker.prototype.create_properties = function() {};\nDomTracker.prototype.event_handler = function() {};\nDomTracker.prototype.after_track_handler = function() {};\n\nDomTracker.prototype.init = function(mixpanel_instance) {\n    this.mp = mixpanel_instance;\n    return this;\n};\n\n/**\n * @param {Object|string} query\n * @param {string} event_name\n * @param {Object=} properties\n * @param {function=} user_callback\n */\nDomTracker.prototype.track = function(query, event_name, properties, user_callback) {\n    var that = this;\n    var elements = _.dom_query(query);\n\n    if (elements.length === 0) {\n        console$1.error('The DOM query (' + query + ') returned 0 elements');\n        return;\n    }\n\n    _.each(elements, function(element) {\n        _.register_event(element, this.override_event, function(e) {\n            var options = {};\n            var props = that.create_properties(properties, this);\n            var timeout = that.mp.get_config('track_links_timeout');\n\n            that.event_handler(e, this, options);\n\n            // in case the mixpanel servers don't get back to us in time\n            window.setTimeout(that.track_callback(user_callback, props, options, true), timeout);\n\n            // fire the tracking event\n            that.mp.track(event_name, props, that.track_callback(user_callback, props, options));\n        });\n    }, this);\n\n    return true;\n};\n\n/**\n * @param {function} user_callback\n * @param {Object} props\n * @param {boolean=} timeout_occured\n */\nDomTracker.prototype.track_callback = function(user_callback, props, options, timeout_occured) {\n    timeout_occured = timeout_occured || false;\n    var that = this;\n\n    return function() {\n        // options is referenced from both callbacks, so we can have\n        // a 'lock' of sorts to ensure only one fires\n        if (options.callback_fired) { return; }\n        options.callback_fired = true;\n\n        if (user_callback && user_callback(timeout_occured, props) === false) {\n            // user can prevent the default functionality by\n            // returning false from their callback\n            return;\n        }\n\n        that.after_track_handler(props, options, timeout_occured);\n    };\n};\n\nDomTracker.prototype.create_properties = function(properties, element) {\n    var props;\n\n    if (typeof(properties) === 'function') {\n        props = properties(element);\n    } else {\n        props = _.extend({}, properties);\n    }\n\n    return props;\n};\n\n/**\n * LinkTracker Object\n * @constructor\n * @extends DomTracker\n */\nvar LinkTracker = function() {\n    this.override_event = 'click';\n};\n_.inherit(LinkTracker, DomTracker);\n\nLinkTracker.prototype.create_properties = function(properties, element) {\n    var props = LinkTracker.superclass.create_properties.apply(this, arguments);\n\n    if (element.href) { props['url'] = element.href; }\n\n    return props;\n};\n\nLinkTracker.prototype.event_handler = function(evt, element, options) {\n    options.new_tab = (\n        evt.which === 2 ||\n        evt.metaKey ||\n        evt.ctrlKey ||\n        element.target === '_blank'\n    );\n    options.href = element.href;\n\n    if (!options.new_tab) {\n        evt.preventDefault();\n    }\n};\n\nLinkTracker.prototype.after_track_handler = function(props, options) {\n    if (options.new_tab) { return; }\n\n    setTimeout(function() {\n        window.location = options.href;\n    }, 0);\n};\n\n/**\n * FormTracker Object\n * @constructor\n * @extends DomTracker\n */\nvar FormTracker = function() {\n    this.override_event = 'submit';\n};\n_.inherit(FormTracker, DomTracker);\n\nFormTracker.prototype.event_handler = function(evt, element, options) {\n    options.element = element;\n    evt.preventDefault();\n};\n\nFormTracker.prototype.after_track_handler = function(props, options) {\n    setTimeout(function() {\n        options.element.submit();\n    }, 0);\n};\n\n// eslint-disable-line camelcase\n\nvar logger$2 = console_with_prefix('lock');\n\n/**\n * SharedLock: a mutex built on HTML5 localStorage, to ensure that only one browser\n * window/tab at a time will be able to access shared resources.\n *\n * Based on the Alur and Taubenfeld fast lock\n * (http://www.cs.rochester.edu/research/synchronization/pseudocode/fastlock.html)\n * with an added timeout to ensure there will be eventual progress in the event\n * that a window is closed in the middle of the callback.\n *\n * Implementation based on the original version by David Wolever (https://github.com/wolever)\n * at https://gist.github.com/wolever/5fd7573d1ef6166e8f8c4af286a69432.\n *\n * @example\n * const myLock = new SharedLock('some-key');\n * myLock.withLock(function() {\n *   console.log('I hold the mutex!');\n * });\n *\n * @constructor\n */\nvar SharedLock = function(key, options) {\n    options = options || {};\n\n    this.storageKey = key;\n    this.storage = options.storage || window.localStorage;\n    this.pollIntervalMS = options.pollIntervalMS || 100;\n    this.timeoutMS = options.timeoutMS || 2000;\n};\n\n// pass in a specific pid to test contention scenarios; otherwise\n// it is chosen randomly for each acquisition attempt\nSharedLock.prototype.withLock = function(lockedCB, errorCB, pid) {\n    if (!pid && typeof errorCB !== 'function') {\n        pid = errorCB;\n        errorCB = null;\n    }\n\n    var i = pid || (new Date().getTime() + '|' + Math.random());\n    var startTime = new Date().getTime();\n\n    var key = this.storageKey;\n    var pollIntervalMS = this.pollIntervalMS;\n    var timeoutMS = this.timeoutMS;\n    var storage = this.storage;\n\n    var keyX = key + ':X';\n    var keyY = key + ':Y';\n    var keyZ = key + ':Z';\n\n    var reportError = function(err) {\n        errorCB && errorCB(err);\n    };\n\n    var delay = function(cb) {\n        if (new Date().getTime() - startTime > timeoutMS) {\n            logger$2.error('Timeout waiting for mutex on ' + key + '; clearing lock. [' + i + ']');\n            storage.removeItem(keyZ);\n            storage.removeItem(keyY);\n            loop();\n            return;\n        }\n        setTimeout(function() {\n            try {\n                cb();\n            } catch(err) {\n                reportError(err);\n            }\n        }, pollIntervalMS * (Math.random() + 0.1));\n    };\n\n    var waitFor = function(predicate, cb) {\n        if (predicate()) {\n            cb();\n        } else {\n            delay(function() {\n                waitFor(predicate, cb);\n            });\n        }\n    };\n\n    var getSetY = function() {\n        var valY = storage.getItem(keyY);\n        if (valY && valY !== i) { // if Y == i then this process already has the lock (useful for test cases)\n            return false;\n        } else {\n            storage.setItem(keyY, i);\n            if (storage.getItem(keyY) === i) {\n                return true;\n            } else {\n                if (!localStorageSupported(storage, true)) {\n                    throw new Error('localStorage support dropped while acquiring lock');\n                }\n                return false;\n            }\n        }\n    };\n\n    var loop = function() {\n        storage.setItem(keyX, i);\n\n        waitFor(getSetY, function() {\n            if (storage.getItem(keyX) === i) {\n                criticalSection();\n                return;\n            }\n\n            delay(function() {\n                if (storage.getItem(keyY) !== i) {\n                    loop();\n                    return;\n                }\n                waitFor(function() {\n                    return !storage.getItem(keyZ);\n                }, criticalSection);\n            });\n        });\n    };\n\n    var criticalSection = function() {\n        storage.setItem(keyZ, '1');\n        try {\n            lockedCB();\n        } finally {\n            storage.removeItem(keyZ);\n            if (storage.getItem(keyY) === i) {\n                storage.removeItem(keyY);\n            }\n            if (storage.getItem(keyX) === i) {\n                storage.removeItem(keyX);\n            }\n        }\n    };\n\n    try {\n        if (localStorageSupported(storage, true)) {\n            loop();\n        } else {\n            throw new Error('localStorage support check failed');\n        }\n    } catch(err) {\n        reportError(err);\n    }\n};\n\n// eslint-disable-line camelcase\n\nvar logger$1 = console_with_prefix('batch');\n\n/**\n * RequestQueue: queue for batching API requests with localStorage backup for retries.\n * Maintains an in-memory queue which represents the source of truth for the current\n * page, but also writes all items out to a copy in the browser's localStorage, which\n * can be read on subsequent pageloads and retried. For batchability, all the request\n * items in the queue should be of the same type (events, people updates, group updates)\n * so they can be sent in a single request to the same API endpoint.\n *\n * LocalStorage keying and locking: In order for reloads and subsequent pageloads of\n * the same site to access the same persisted data, they must share the same localStorage\n * key (for instance based on project token and queue type). Therefore access to the\n * localStorage entry is guarded by an asynchronous mutex (SharedLock) to prevent\n * simultaneously open windows/tabs from overwriting each other's data (which would lead\n * to data loss in some situations).\n * @constructor\n */\nvar RequestQueue = function(storageKey, options) {\n    options = options || {};\n    this.storageKey = storageKey;\n    this.storage = options.storage || window.localStorage;\n    this.lock = new SharedLock(storageKey, {storage: this.storage});\n\n    this.pid = options.pid || null; // pass pid to test out storage lock contention scenarios\n\n    this.memQueue = [];\n};\n\n/**\n * Add one item to queues (memory and localStorage). The queued entry includes\n * the given item along with an auto-generated ID and a \"flush-after\" timestamp.\n * It is expected that the item will be sent over the network and dequeued\n * before the flush-after time; if this doesn't happen it is considered orphaned\n * (e.g., the original tab where it was enqueued got closed before it could be\n * sent) and the item can be sent by any tab that finds it in localStorage.\n *\n * The final callback param is called with a param indicating success or\n * failure of the enqueue operation; it is asynchronous because the localStorage\n * lock is asynchronous.\n */\nRequestQueue.prototype.enqueue = function(item, flushInterval, cb) {\n    var queueEntry = {\n        'id': cheap_guid(),\n        'flushAfter': new Date().getTime() + flushInterval * 2,\n        'payload': item\n    };\n\n    this.lock.withLock(_.bind(function lockAcquired() {\n        var succeeded;\n        try {\n            var storedQueue = this.readFromStorage();\n            storedQueue.push(queueEntry);\n            succeeded = this.saveToStorage(storedQueue);\n            if (succeeded) {\n                // only add to in-memory queue when storage succeeds\n                this.memQueue.push(queueEntry);\n            }\n        } catch(err) {\n            logger$1.error('Error enqueueing item', item);\n            succeeded = false;\n        }\n        if (cb) {\n            cb(succeeded);\n        }\n    }, this), function lockFailure(err) {\n        logger$1.error('Error acquiring storage lock', err);\n        if (cb) {\n            cb(false);\n        }\n    }, this.pid);\n};\n\n/**\n * Read out the given number of queue entries. If this.memQueue\n * has fewer than batchSize items, then look for \"orphaned\" items\n * in the persisted queue (items where the 'flushAfter' time has\n * already passed).\n */\nRequestQueue.prototype.fillBatch = function(batchSize) {\n    var batch = this.memQueue.slice(0, batchSize);\n    if (batch.length < batchSize) {\n        // don't need lock just to read events; localStorage is thread-safe\n        // and the worst that could happen is a duplicate send of some\n        // orphaned events, which will be deduplicated on the server side\n        var storedQueue = this.readFromStorage();\n        if (storedQueue.length) {\n            // item IDs already in batch; don't duplicate out of storage\n            var idsInBatch = {}; // poor man's Set\n            _.each(batch, function(item) { idsInBatch[item['id']] = true; });\n\n            for (var i = 0; i < storedQueue.length; i++) {\n                var item = storedQueue[i];\n                if (new Date().getTime() > item['flushAfter'] && !idsInBatch[item['id']]) {\n                    batch.push(item);\n                    if (batch.length >= batchSize) {\n                        break;\n                    }\n                }\n            }\n        }\n    }\n    return batch;\n};\n\n/**\n * Remove items with matching 'id' from array (immutably)\n * also remove any item without a valid id (e.g., malformed\n * storage entries).\n */\nvar filterOutIDsAndInvalid = function(items, idSet) {\n    var filteredItems = [];\n    _.each(items, function(item) {\n        if (item['id'] && !idSet[item['id']]) {\n            filteredItems.push(item);\n        }\n    });\n    return filteredItems;\n};\n\n/**\n * Remove items with matching IDs from both in-memory queue\n * and persisted queue\n */\nRequestQueue.prototype.removeItemsByID = function(ids, cb) {\n    var idSet = {}; // poor man's Set\n    _.each(ids, function(id) { idSet[id] = true; });\n\n    this.memQueue = filterOutIDsAndInvalid(this.memQueue, idSet);\n    this.lock.withLock(_.bind(function lockAcquired() {\n        var succeeded;\n        try {\n            var storedQueue = this.readFromStorage();\n            storedQueue = filterOutIDsAndInvalid(storedQueue, idSet);\n            succeeded = this.saveToStorage(storedQueue);\n        } catch(err) {\n            logger$1.error('Error removing items', ids);\n            succeeded = false;\n        }\n        if (cb) {\n            cb(succeeded);\n        }\n    }, this), function lockFailure(err) {\n        logger$1.error('Error acquiring storage lock', err);\n        if (cb) {\n            cb(false);\n        }\n    }, this.pid);\n};\n\n/**\n * Read and parse items array from localStorage entry, handling\n * malformed/missing data if necessary.\n */\nRequestQueue.prototype.readFromStorage = function() {\n    var storageEntry;\n    try {\n        storageEntry = this.storage.getItem(this.storageKey);\n        if (storageEntry) {\n            storageEntry = JSONParse(storageEntry);\n            if (!_.isArray(storageEntry)) {\n                logger$1.error('Invalid storage entry:', storageEntry);\n                storageEntry = null;\n            }\n        }\n    } catch (err) {\n        logger$1.error('Error retrieving queue', err);\n        storageEntry = null;\n    }\n    return storageEntry || [];\n};\n\n/**\n * Serialize the given items array to localStorage.\n */\nRequestQueue.prototype.saveToStorage = function(queue) {\n    try {\n        this.storage.setItem(this.storageKey, JSONStringify(queue));\n        return true;\n    } catch (err) {\n        logger$1.error('Error saving queue', err);\n        return false;\n    }\n};\n\n/**\n * Clear out queues (memory and localStorage).\n */\nRequestQueue.prototype.clear = function() {\n    this.memQueue = [];\n    this.storage.removeItem(this.storageKey);\n};\n\n// eslint-disable-line camelcase\n\n// maximum interval between request retries after exponential backoff\nvar MAX_RETRY_INTERVAL_MS = 10 * 60 * 1000; // 10 minutes\n\nvar logger = console_with_prefix('batch');\n\n/**\n * RequestBatcher: manages the queueing, flushing, retry etc of requests of one\n * type (events, people, groups).\n * Uses RequestQueue to manage the backing store.\n * @constructor\n */\nvar RequestBatcher = function(storageKey, endpoint, options) {\n    this.queue = new RequestQueue(storageKey, {storage: options.storage});\n    this.endpoint = endpoint;\n\n    this.libConfig = options.libConfig;\n    this.sendRequest = options.sendRequestFunc;\n\n    // seed variable batch size + flush interval with configured values\n    this.batchSize = this.libConfig['batch_size'];\n    this.flushInterval = this.libConfig['batch_flush_interval_ms'];\n\n    this.stopped = false;\n};\n\n/**\n * Add one item to queue.\n */\nRequestBatcher.prototype.enqueue = function(item, cb) {\n    this.queue.enqueue(item, this.flushInterval, cb);\n};\n\n/**\n * Start flushing batches at the configured time interval. Must call\n * this method upon SDK init in order to send anything over the network.\n */\nRequestBatcher.prototype.start = function() {\n    this.stopped = false;\n    this.flush();\n};\n\n/**\n * Stop flushing batches. Can be restarted by calling start().\n */\nRequestBatcher.prototype.stop = function() {\n    this.stopped = true;\n    if (this.timeoutID) {\n        clearTimeout(this.timeoutID);\n        this.timeoutID = null;\n    }\n};\n\n/**\n * Clear out queue.\n */\nRequestBatcher.prototype.clear = function() {\n    this.queue.clear();\n};\n\n/**\n * Restore batch size configuration to whatever is set in the main SDK.\n */\nRequestBatcher.prototype.resetBatchSize = function() {\n    this.batchSize = this.libConfig['batch_size'];\n};\n\n/**\n * Restore flush interval time configuration to whatever is set in the main SDK.\n */\nRequestBatcher.prototype.resetFlush = function() {\n    this.scheduleFlush(this.libConfig['batch_flush_interval_ms']);\n};\n\n/**\n * Schedule the next flush in the given number of milliseconds.\n */\nRequestBatcher.prototype.scheduleFlush = function(flushMS) {\n    this.flushInterval = flushMS;\n    if (!this.stopped) { // don't schedule anymore if batching has been stopped\n        this.timeoutID = setTimeout(_.bind(this.flush, this), this.flushInterval);\n    }\n};\n\n/**\n * Flush one batch to network. Depending on success/failure modes, it will either\n * remove the batch from the queue or leave it in for retry, and schedule the next\n * flush. In cases of most network or API failures, it will back off exponentially\n * when retrying.\n * @param {Object} [options]\n * @param {boolean} [options.sendBeacon] - whether to send batch with\n * navigator.sendBeacon (only useful for sending batches before page unloads, as\n * sendBeacon offers no callbacks or status indications)\n */\nRequestBatcher.prototype.flush = function(options) {\n    try {\n\n        if (this.requestInProgress) {\n            logger.log('Flush: Request already in progress');\n            return;\n        }\n\n        options = options || {};\n        var currentBatchSize = this.batchSize;\n        var batch = this.queue.fillBatch(currentBatchSize);\n        if (batch.length < 1) {\n            this.resetFlush();\n            return; // nothing to do\n        }\n\n        this.requestInProgress = true;\n\n        var timeoutMS = this.libConfig['batch_request_timeout_ms'];\n        var startTime = new Date().getTime();\n        var dataForRequest = _.map(batch, function(item) { return item['payload']; });\n        var batchSendCallback = _.bind(function(res) {\n            this.requestInProgress = false;\n\n            try {\n\n                // handle API response in a try-catch to make sure we can reset the\n                // flush operation if something goes wrong\n\n                var removeItemsFromQueue = false;\n                if (\n                    _.isObject(res) &&\n                    res.error === 'timeout' &&\n                    new Date().getTime() - startTime >= timeoutMS\n                ) {\n                    logger.error('Network timeout; retrying');\n                    this.flush();\n                } else if (\n                    _.isObject(res) &&\n                    res.xhr_req &&\n                    (res.xhr_req['status'] >= 500 || res.xhr_req['status'] <= 0)\n                ) {\n                    // network or API error, retry\n                    var retryMS = this.flushInterval * 2;\n                    var headers = res.xhr_req['responseHeaders'];\n                    if (headers) {\n                        var retryAfter = headers['Retry-After'];\n                        if (retryAfter) {\n                            retryMS = (parseInt(retryAfter, 10) * 1000) || retryMS;\n                        }\n                    }\n                    retryMS = Math.min(MAX_RETRY_INTERVAL_MS, retryMS);\n                    logger.error('Error; retry in ' + retryMS + ' ms');\n                    this.scheduleFlush(retryMS);\n                } else if (_.isObject(res) && res.xhr_req && res.xhr_req['status'] === 413) {\n                    // 413 Payload Too Large\n                    if (batch.length > 1) {\n                        var halvedBatchSize = Math.max(1, Math.floor(currentBatchSize / 2));\n                        this.batchSize = Math.min(this.batchSize, halvedBatchSize, batch.length - 1);\n                        logger.error('413 response; reducing batch size to ' + this.batchSize);\n                        this.resetFlush();\n                    } else {\n                        logger.error('Single-event request too large; dropping', batch);\n                        this.resetBatchSize();\n                        removeItemsFromQueue = true;\n                    }\n                } else {\n                    // successful network request+response; remove each item in batch from queue\n                    // (even if it was e.g. a 400, in which case retrying won't help)\n                    removeItemsFromQueue = true;\n                }\n\n                if (removeItemsFromQueue) {\n                    this.queue.removeItemsByID(\n                        _.map(batch, function(item) { return item['id']; }),\n                        _.bind(this.flush, this) // handle next batch if the queue isn't empty\n                    );\n                }\n\n            } catch(err) {\n                logger.error('Error handling API response', err);\n                this.resetFlush();\n            }\n        }, this);\n        var requestOptions = {\n            method: 'POST',\n            verbose: true,\n            ignore_json_errors: true, // eslint-disable-line camelcase\n            timeout_ms: timeoutMS // eslint-disable-line camelcase\n        };\n        if (options.sendBeacon) {\n            requestOptions.transport = 'sendBeacon';\n        }\n        logger.log('MIXPANEL REQUEST:', this.endpoint, dataForRequest);\n        this.sendRequest(this.endpoint, dataForRequest, requestOptions, batchSendCallback);\n\n    } catch(err) {\n        logger.error('Error flushing request queue', err);\n        this.resetFlush();\n    }\n};\n\n/**\n * A function used to track a Mixpanel event (e.g. MixpanelLib.track)\n * @callback trackFunction\n * @param {String} event_name The name of the event. This can be anything the user does - 'Button Click', 'Sign Up', 'Item Purchased', etc.\n * @param {Object} [properties] A set of properties to include with the event you're sending. These describe the user who did the event or details about the event itself.\n * @param {Function} [callback] If provided, the callback function will be called after tracking the event.\n */\n\n/** Public **/\n\nvar GDPR_DEFAULT_PERSISTENCE_PREFIX = '__mp_opt_in_out_';\n\n/**\n * Opt the user in to data tracking and cookies/localstorage for the given token\n * @param {string} token - Mixpanel project tracking token\n * @param {Object} [options]\n * @param {trackFunction} [options.track] - function used for tracking a Mixpanel event to record the opt-in action\n * @param {string} [options.trackEventName] - event name to be used for tracking the opt-in action\n * @param {Object} [options.trackProperties] - set of properties to be tracked along with the opt-in action\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__mp_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-in cookie expires\n * @param {string} [options.cookieDomain] - custom cookie domain\n * @param {boolean} [options.crossSiteCookie] - whether the opt-in cookie is set as cross-site-enabled\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-in cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-in cookie is set as secure or not\n */\nfunction optIn(token, options) {\n    _optInOut(true, token, options);\n}\n\n/**\n * Opt the user out of data tracking and cookies/localstorage for the given token\n * @param {string} token - Mixpanel project tracking token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__mp_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-out cookie expires\n * @param {string} [options.cookieDomain] - custom cookie domain\n * @param {boolean} [options.crossSiteCookie] - whether the opt-in cookie is set as cross-site-enabled\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-out cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-out cookie is set as secure or not\n */\nfunction optOut(token, options) {\n    _optInOut(false, token, options);\n}\n\n/**\n * Check whether the user has opted in to data tracking and cookies/localstorage for the given token\n * @param {string} token - Mixpanel project tracking token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__mp_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @returns {boolean} whether the user has opted in to the given opt type\n */\nfunction hasOptedIn(token, options) {\n    return _getStorageValue(token, options) === '1';\n}\n\n/**\n * Check whether the user has opted out of data tracking and cookies/localstorage for the given token\n * @param {string} token - Mixpanel project tracking token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__mp_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {boolean} [options.ignoreDnt] - flag to ignore browser DNT settings and always return false\n * @returns {boolean} whether the user has opted out of the given opt type\n */\nfunction hasOptedOut(token, options) {\n    if (_hasDoNotTrackFlagOn(options)) {\n        return true;\n    }\n    return _getStorageValue(token, options) === '0';\n}\n\n/**\n * Wrap a MixpanelLib method with a check for whether the user is opted out of data tracking and cookies/localstorage for the given token\n * If the user has opted out, return early instead of executing the method.\n * If a callback argument was provided, execute it passing the 0 error code.\n * @param {function} method - wrapped method to be executed if the user has not opted out\n * @returns {*} the result of executing method OR undefined if the user has opted out\n */\nfunction addOptOutCheckMixpanelLib(method) {\n    return _addOptOutCheck(method, function(name) {\n        return this.get_config(name);\n    });\n}\n\n/**\n * Wrap a MixpanelPeople method with a check for whether the user is opted out of data tracking and cookies/localstorage for the given token\n * If the user has opted out, return early instead of executing the method.\n * If a callback argument was provided, execute it passing the 0 error code.\n * @param {function} method - wrapped method to be executed if the user has not opted out\n * @returns {*} the result of executing method OR undefined if the user has opted out\n */\nfunction addOptOutCheckMixpanelPeople(method) {\n    return _addOptOutCheck(method, function(name) {\n        return this._get_config(name);\n    });\n}\n\n/**\n * Wrap a MixpanelGroup method with a check for whether the user is opted out of data tracking and cookies/localstorage for the given token\n * If the user has opted out, return early instead of executing the method.\n * If a callback argument was provided, execute it passing the 0 error code.\n * @param {function} method - wrapped method to be executed if the user has not opted out\n * @returns {*} the result of executing method OR undefined if the user has opted out\n */\nfunction addOptOutCheckMixpanelGroup(method) {\n    return _addOptOutCheck(method, function(name) {\n        return this._get_config(name);\n    });\n}\n\n/**\n * Clear the user's opt in/out status of data tracking and cookies/localstorage for the given token\n * @param {string} token - Mixpanel project tracking token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__mp_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-in cookie expires\n * @param {string} [options.cookieDomain] - custom cookie domain\n * @param {boolean} [options.crossSiteCookie] - whether the opt-in cookie is set as cross-site-enabled\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-in cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-in cookie is set as secure or not\n */\nfunction clearOptInOut(token, options) {\n    options = options || {};\n    _getStorage(options).remove(\n        _getStorageKey(token, options), !!options.crossSubdomainCookie, options.cookieDomain\n    );\n}\n\n/** Private **/\n\n/**\n * Get storage util\n * @param {Object} [options]\n * @param {string} [options.persistenceType]\n * @returns {object} either _.cookie or _.localstorage\n */\nfunction _getStorage(options) {\n    options = options || {};\n    return options.persistenceType === 'localStorage' ? _.localStorage : _.cookie;\n}\n\n/**\n * Get the name of the cookie that is used for the given opt type (tracking, cookie, etc.)\n * @param {string} token - Mixpanel project tracking token\n * @param {Object} [options]\n * @param {string} [options.persistencePrefix=__mp_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @returns {string} the name of the cookie for the given opt type\n */\nfunction _getStorageKey(token, options) {\n    options = options || {};\n    return (options.persistencePrefix || GDPR_DEFAULT_PERSISTENCE_PREFIX) + token;\n}\n\n/**\n * Get the value of the cookie that is used for the given opt type (tracking, cookie, etc.)\n * @param {string} token - Mixpanel project tracking token\n * @param {Object} [options]\n * @param {string} [options.persistencePrefix=__mp_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @returns {string} the value of the cookie for the given opt type\n */\nfunction _getStorageValue(token, options) {\n    return _getStorage(options).get(_getStorageKey(token, options));\n}\n\n/**\n * Check whether the user has set the DNT/doNotTrack setting to true in their browser\n * @param {Object} [options]\n * @param {string} [options.window] - alternate window object to check; used to force various DNT settings in browser tests\n * @param {boolean} [options.ignoreDnt] - flag to ignore browser DNT settings and always return false\n * @returns {boolean} whether the DNT setting is true\n */\nfunction _hasDoNotTrackFlagOn(options) {\n    if (options && options.ignoreDnt) {\n        return false;\n    }\n    var win = (options && options.window) || window$1;\n    var nav = win['navigator'] || {};\n    var hasDntOn = false;\n\n    _.each([\n        nav['doNotTrack'], // standard\n        nav['msDoNotTrack'],\n        win['doNotTrack']\n    ], function(dntValue) {\n        if (_.includes([true, 1, '1', 'yes'], dntValue)) {\n            hasDntOn = true;\n        }\n    });\n\n    return hasDntOn;\n}\n\n/**\n * Set cookie/localstorage for the user indicating that they are opted in or out for the given opt type\n * @param {boolean} optValue - whether to opt the user in or out for the given opt type\n * @param {string} token - Mixpanel project tracking token\n * @param {Object} [options]\n * @param {trackFunction} [options.track] - function used for tracking a Mixpanel event to record the opt-in action\n * @param {string} [options.trackEventName] - event name to be used for tracking the opt-in action\n * @param {Object} [options.trackProperties] - set of properties to be tracked along with the opt-in action\n * @param {string} [options.persistencePrefix=__mp_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-in cookie expires\n * @param {string} [options.cookieDomain] - custom cookie domain\n * @param {boolean} [options.crossSiteCookie] - whether the opt-in cookie is set as cross-site-enabled\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-in cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-in cookie is set as secure or not\n */\nfunction _optInOut(optValue, token, options) {\n    if (!_.isString(token) || !token.length) {\n        console.error('gdpr.' + (optValue ? 'optIn' : 'optOut') + ' called with an invalid token');\n        return;\n    }\n\n    options = options || {};\n\n    _getStorage(options).set(\n        _getStorageKey(token, options),\n        optValue ? 1 : 0,\n        _.isNumber(options.cookieExpiration) ? options.cookieExpiration : null,\n        !!options.crossSubdomainCookie,\n        !!options.secureCookie,\n        !!options.crossSiteCookie,\n        options.cookieDomain\n    );\n\n    if (options.track && optValue) { // only track event if opting in (optValue=true)\n        options.track(options.trackEventName || '$opt_in', options.trackProperties, {\n            'send_immediately': true\n        });\n    }\n}\n\n/**\n * Wrap a method with a check for whether the user is opted out of data tracking and cookies/localstorage for the given token\n * If the user has opted out, return early instead of executing the method.\n * If a callback argument was provided, execute it passing the 0 error code.\n * @param {function} method - wrapped method to be executed if the user has not opted out\n * @param {function} getConfigValue - getter function for the Mixpanel API token and other options to be used with opt-out check\n * @returns {*} the result of executing method OR undefined if the user has opted out\n */\nfunction _addOptOutCheck(method, getConfigValue) {\n    return function() {\n        var optedOut = false;\n\n        try {\n            var token = getConfigValue.call(this, 'token');\n            var ignoreDnt = getConfigValue.call(this, 'ignore_dnt');\n            var persistenceType = getConfigValue.call(this, 'opt_out_tracking_persistence_type');\n            var persistencePrefix = getConfigValue.call(this, 'opt_out_tracking_cookie_prefix');\n            var win = getConfigValue.call(this, 'window'); // used to override window during browser tests\n\n            if (token) { // if there was an issue getting the token, continue method execution as normal\n                optedOut = hasOptedOut(token, {\n                    ignoreDnt: ignoreDnt,\n                    persistenceType: persistenceType,\n                    persistencePrefix: persistencePrefix,\n                    window: win\n                });\n            }\n        } catch(err) {\n            console.error('Unexpected error when checking tracking opt-out status: ' + err);\n        }\n\n        if (!optedOut) {\n            return method.apply(this, arguments);\n        }\n\n        var callback = arguments[arguments.length - 1];\n        if (typeof(callback) === 'function') {\n            callback(0);\n        }\n\n        return;\n    };\n}\n\n/** @const */ var SET_ACTION      = '$set';\n/** @const */ var SET_ONCE_ACTION = '$set_once';\n/** @const */ var UNSET_ACTION    = '$unset';\n/** @const */ var ADD_ACTION      = '$add';\n/** @const */ var APPEND_ACTION   = '$append';\n/** @const */ var UNION_ACTION    = '$union';\n/** @const */ var REMOVE_ACTION   = '$remove';\n/** @const */ var DELETE_ACTION   = '$delete';\n\n// Common internal methods for mixpanel.people and mixpanel.group APIs.\n// These methods shouldn't involve network I/O.\nvar apiActions = {\n    set_action: function(prop, to) {\n        var data = {};\n        var $set = {};\n        if (_.isObject(prop)) {\n            _.each(prop, function(v, k) {\n                if (!this._is_reserved_property(k)) {\n                    $set[k] = v;\n                }\n            }, this);\n        } else {\n            $set[prop] = to;\n        }\n\n        data[SET_ACTION] = $set;\n        return data;\n    },\n\n    unset_action: function(prop) {\n        var data = {};\n        var $unset = [];\n        if (!_.isArray(prop)) {\n            prop = [prop];\n        }\n\n        _.each(prop, function(k) {\n            if (!this._is_reserved_property(k)) {\n                $unset.push(k);\n            }\n        }, this);\n\n        data[UNSET_ACTION] = $unset;\n        return data;\n    },\n\n    set_once_action: function(prop, to) {\n        var data = {};\n        var $set_once = {};\n        if (_.isObject(prop)) {\n            _.each(prop, function(v, k) {\n                if (!this._is_reserved_property(k)) {\n                    $set_once[k] = v;\n                }\n            }, this);\n        } else {\n            $set_once[prop] = to;\n        }\n        data[SET_ONCE_ACTION] = $set_once;\n        return data;\n    },\n\n    union_action: function(list_name, values) {\n        var data = {};\n        var $union = {};\n        if (_.isObject(list_name)) {\n            _.each(list_name, function(v, k) {\n                if (!this._is_reserved_property(k)) {\n                    $union[k] = _.isArray(v) ? v : [v];\n                }\n            }, this);\n        } else {\n            $union[list_name] = _.isArray(values) ? values : [values];\n        }\n        data[UNION_ACTION] = $union;\n        return data;\n    },\n\n    append_action: function(list_name, value) {\n        var data = {};\n        var $append = {};\n        if (_.isObject(list_name)) {\n            _.each(list_name, function(v, k) {\n                if (!this._is_reserved_property(k)) {\n                    $append[k] = v;\n                }\n            }, this);\n        } else {\n            $append[list_name] = value;\n        }\n        data[APPEND_ACTION] = $append;\n        return data;\n    },\n\n    remove_action: function(list_name, value) {\n        var data = {};\n        var $remove = {};\n        if (_.isObject(list_name)) {\n            _.each(list_name, function(v, k) {\n                if (!this._is_reserved_property(k)) {\n                    $remove[k] = v;\n                }\n            }, this);\n        } else {\n            $remove[list_name] = value;\n        }\n        data[REMOVE_ACTION] = $remove;\n        return data;\n    },\n\n    delete_action: function() {\n        var data = {};\n        data[DELETE_ACTION] = '';\n        return data;\n    }\n};\n\n/**\n * Mixpanel Group Object\n * @constructor\n */\nvar MixpanelGroup = function() {};\n\n_.extend(MixpanelGroup.prototype, apiActions);\n\nMixpanelGroup.prototype._init = function(mixpanel_instance, group_key, group_id) {\n    this._mixpanel = mixpanel_instance;\n    this._group_key = group_key;\n    this._group_id = group_id;\n};\n\n/**\n * Set properties on a group.\n *\n * ### Usage:\n *\n *     mixpanel.get_group('company', 'mixpanel').set('Location', '405 Howard');\n *\n *     // or set multiple properties at once\n *     mixpanel.get_group('company', 'mixpanel').set({\n *          'Location': '405 Howard',\n *          'Founded' : 2009,\n *     });\n *     // properties can be strings, integers, dates, or lists\n *\n * @param {Object|String} prop If a string, this is the name of the property. If an object, this is an associative array of names and values.\n * @param {*} [to] A value to set on the given property name\n * @param {Function} [callback] If provided, the callback will be called after the tracking event\n */\nMixpanelGroup.prototype.set = addOptOutCheckMixpanelGroup(function(prop, to, callback) {\n    var data = this.set_action(prop, to);\n    if (_.isObject(prop)) {\n        callback = to;\n    }\n    return this._send_request(data, callback);\n});\n\n/**\n * Set properties on a group, only if they do not yet exist.\n * This will not overwrite previous group property values, unlike\n * group.set().\n *\n * ### Usage:\n *\n *     mixpanel.get_group('company', 'mixpanel').set_once('Location', '405 Howard');\n *\n *     // or set multiple properties at once\n *     mixpanel.get_group('company', 'mixpanel').set_once({\n *          'Location': '405 Howard',\n *          'Founded' : 2009,\n *     });\n *     // properties can be strings, integers, lists or dates\n *\n * @param {Object|String} prop If a string, this is the name of the property. If an object, this is an associative array of names and values.\n * @param {*} [to] A value to set on the given property name\n * @param {Function} [callback] If provided, the callback will be called after the tracking event\n */\nMixpanelGroup.prototype.set_once = addOptOutCheckMixpanelGroup(function(prop, to, callback) {\n    var data = this.set_once_action(prop, to);\n    if (_.isObject(prop)) {\n        callback = to;\n    }\n    return this._send_request(data, callback);\n});\n\n/**\n * Unset properties on a group permanently.\n *\n * ### Usage:\n *\n *     mixpanel.get_group('company', 'mixpanel').unset('Founded');\n *\n * @param {String} prop The name of the property.\n * @param {Function} [callback] If provided, the callback will be called after the tracking event\n */\nMixpanelGroup.prototype.unset = addOptOutCheckMixpanelGroup(function(prop, callback) {\n    var data = this.unset_action(prop);\n    return this._send_request(data, callback);\n});\n\n/**\n * Merge a given list with a list-valued group property, excluding duplicate values.\n *\n * ### Usage:\n *\n *     // merge a value to a list, creating it if needed\n *     mixpanel.get_group('company', 'mixpanel').union('Location', ['San Francisco', 'London']);\n *\n * @param {String} list_name Name of the property.\n * @param {Array} values Values to merge with the given property\n * @param {Function} [callback] If provided, the callback will be called after the tracking event\n */\nMixpanelGroup.prototype.union = addOptOutCheckMixpanelGroup(function(list_name, values, callback) {\n    if (_.isObject(list_name)) {\n        callback = values;\n    }\n    var data = this.union_action(list_name, values);\n    return this._send_request(data, callback);\n});\n\n/**\n * Permanently delete a group.\n *\n * ### Usage:\n *     mixpanel.get_group('company', 'mixpanel').delete();\n */\nMixpanelGroup.prototype['delete'] = addOptOutCheckMixpanelGroup(function(callback) {\n    var data = this.delete_action();\n    return this._send_request(data, callback);\n});\n\n/**\n * Remove a property from a group. The value will be ignored if doesn't exist.\n *\n * ### Usage:\n *\n *     mixpanel.get_group('company', 'mixpanel').remove('Location', 'London');\n *\n * @param {String} list_name Name of the property.\n * @param {Object} value Value to remove from the given group property\n * @param {Function} [callback] If provided, the callback will be called after the tracking event\n */\nMixpanelGroup.prototype.remove = addOptOutCheckMixpanelGroup(function(list_name, value, callback) {\n    var data = this.remove_action(list_name, value);\n    return this._send_request(data, callback);\n});\n\nMixpanelGroup.prototype._send_request = function(data, callback) {\n    data['$group_key'] = this._group_key;\n    data['$group_id'] = this._group_id;\n    data['$token'] = this._get_config('token');\n\n    var date_encoded_data = _.encodeDates(data);\n    return this._mixpanel._track_or_batch({\n        truncated_data: _.truncate(date_encoded_data, 255),\n        endpoint: this._get_config('api_host') + '/groups/',\n        batcher: this._mixpanel.request_batchers.groups\n    }, callback);\n};\n\nMixpanelGroup.prototype._is_reserved_property = function(prop) {\n    return prop === '$group_key' || prop === '$group_id';\n};\n\nMixpanelGroup.prototype._get_config = function(conf) {\n    return this._mixpanel.get_config(conf);\n};\n\nMixpanelGroup.prototype.toString = function() {\n    return this._mixpanel.toString() + '.group.' + this._group_key + '.' + this._group_id;\n};\n\n// MixpanelGroup Exports\nMixpanelGroup.prototype['remove']   = MixpanelGroup.prototype.remove;\nMixpanelGroup.prototype['set']      = MixpanelGroup.prototype.set;\nMixpanelGroup.prototype['set_once'] = MixpanelGroup.prototype.set_once;\nMixpanelGroup.prototype['union']    = MixpanelGroup.prototype.union;\nMixpanelGroup.prototype['unset']    = MixpanelGroup.prototype.unset;\nMixpanelGroup.prototype['toString'] = MixpanelGroup.prototype.toString;\n\n/*\n * Constants\n */\n/** @const */ var SET_QUEUE_KEY          = '__mps';\n/** @const */ var SET_ONCE_QUEUE_KEY     = '__mpso';\n/** @const */ var UNSET_QUEUE_KEY        = '__mpus';\n/** @const */ var ADD_QUEUE_KEY          = '__mpa';\n/** @const */ var APPEND_QUEUE_KEY       = '__mpap';\n/** @const */ var REMOVE_QUEUE_KEY       = '__mpr';\n/** @const */ var UNION_QUEUE_KEY        = '__mpu';\n// This key is deprecated, but we want to check for it to see whether aliasing is allowed.\n/** @const */ var PEOPLE_DISTINCT_ID_KEY = '$people_distinct_id';\n/** @const */ var ALIAS_ID_KEY           = '__alias';\n/** @const */ var CAMPAIGN_IDS_KEY       = '__cmpns';\n/** @const */ var EVENT_TIMERS_KEY       = '__timers';\n/** @const */ var RESERVED_PROPERTIES = [\n    SET_QUEUE_KEY,\n    SET_ONCE_QUEUE_KEY,\n    UNSET_QUEUE_KEY,\n    ADD_QUEUE_KEY,\n    APPEND_QUEUE_KEY,\n    REMOVE_QUEUE_KEY,\n    UNION_QUEUE_KEY,\n    PEOPLE_DISTINCT_ID_KEY,\n    ALIAS_ID_KEY,\n    CAMPAIGN_IDS_KEY,\n    EVENT_TIMERS_KEY\n];\n\n/**\n * Mixpanel Persistence Object\n * @constructor\n */\nvar MixpanelPersistence = function(config) {\n    this['props'] = {};\n    this.campaign_params_saved = false;\n\n    if (config['persistence_name']) {\n        this.name = 'mp_' + config['persistence_name'];\n    } else {\n        this.name = 'mp_' + config['token'] + '_mixpanel';\n    }\n\n    var storage_type = config['persistence'];\n    if (storage_type !== 'cookie' && storage_type !== 'localStorage') {\n        console$1.critical('Unknown persistence type ' + storage_type + '; falling back to cookie');\n        storage_type = config['persistence'] = 'cookie';\n    }\n\n    if (storage_type === 'localStorage' && _.localStorage.is_supported()) {\n        this.storage = _.localStorage;\n    } else {\n        this.storage = _.cookie;\n    }\n\n    this.load();\n    this.update_config(config);\n    this.upgrade(config);\n    this.save();\n};\n\nMixpanelPersistence.prototype.properties = function() {\n    var p = {};\n    // Filter out reserved properties\n    _.each(this['props'], function(v, k) {\n        if (!_.include(RESERVED_PROPERTIES, k)) {\n            p[k] = v;\n        }\n    });\n    return p;\n};\n\nMixpanelPersistence.prototype.load = function() {\n    if (this.disabled) { return; }\n\n    var entry = this.storage.parse(this.name);\n\n    if (entry) {\n        this['props'] = _.extend({}, entry);\n    }\n};\n\nMixpanelPersistence.prototype.upgrade = function(config) {\n    var upgrade_from_old_lib = config['upgrade'],\n        old_cookie_name,\n        old_cookie;\n\n    if (upgrade_from_old_lib) {\n        old_cookie_name = 'mp_super_properties';\n        // Case where they had a custom cookie name before.\n        if (typeof(upgrade_from_old_lib) === 'string') {\n            old_cookie_name = upgrade_from_old_lib;\n        }\n\n        old_cookie = this.storage.parse(old_cookie_name);\n\n        // remove the cookie\n        this.storage.remove(old_cookie_name);\n        this.storage.remove(old_cookie_name, true);\n\n        if (old_cookie) {\n            this['props'] = _.extend(\n                this['props'],\n                old_cookie['all'],\n                old_cookie['events']\n            );\n        }\n    }\n\n    if (!config['cookie_name'] && config['name'] !== 'mixpanel') {\n        // special case to handle people with cookies of the form\n        // mp_TOKEN_INSTANCENAME from the first release of this library\n        old_cookie_name = 'mp_' + config['token'] + '_' + config['name'];\n        old_cookie = this.storage.parse(old_cookie_name);\n\n        if (old_cookie) {\n            this.storage.remove(old_cookie_name);\n            this.storage.remove(old_cookie_name, true);\n\n            // Save the prop values that were in the cookie from before -\n            // this should only happen once as we delete the old one.\n            this.register_once(old_cookie);\n        }\n    }\n\n    if (this.storage === _.localStorage) {\n        old_cookie = _.cookie.parse(this.name);\n\n        _.cookie.remove(this.name);\n        _.cookie.remove(this.name, true);\n\n        if (old_cookie) {\n            this.register_once(old_cookie);\n        }\n    }\n};\n\nMixpanelPersistence.prototype.save = function() {\n    if (this.disabled) { return; }\n    this._expire_notification_campaigns();\n    this.storage.set(\n        this.name,\n        _.JSONEncode(this['props']),\n        this.expire_days,\n        this.cross_subdomain,\n        this.secure,\n        this.cross_site,\n        this.cookie_domain\n    );\n};\n\nMixpanelPersistence.prototype.remove = function() {\n    // remove both domain and subdomain cookies\n    this.storage.remove(this.name, false, this.cookie_domain);\n    this.storage.remove(this.name, true, this.cookie_domain);\n};\n\n// removes the storage entry and deletes all loaded data\n// forced name for tests\nMixpanelPersistence.prototype.clear = function() {\n    this.remove();\n    this['props'] = {};\n};\n\n/**\n* @param {Object} props\n* @param {*=} default_value\n* @param {number=} days\n*/\nMixpanelPersistence.prototype.register_once = function(props, default_value, days) {\n    if (_.isObject(props)) {\n        if (typeof(default_value) === 'undefined') { default_value = 'None'; }\n        this.expire_days = (typeof(days) === 'undefined') ? this.default_expiry : days;\n\n        _.each(props, function(val, prop) {\n            if (!this['props'].hasOwnProperty(prop) || this['props'][prop] === default_value) {\n                this['props'][prop] = val;\n            }\n        }, this);\n\n        this.save();\n\n        return true;\n    }\n    return false;\n};\n\n/**\n* @param {Object} props\n* @param {number=} days\n*/\nMixpanelPersistence.prototype.register = function(props, days) {\n    if (_.isObject(props)) {\n        this.expire_days = (typeof(days) === 'undefined') ? this.default_expiry : days;\n\n        _.extend(this['props'], props);\n\n        this.save();\n\n        return true;\n    }\n    return false;\n};\n\nMixpanelPersistence.prototype.unregister = function(prop) {\n    if (prop in this['props']) {\n        delete this['props'][prop];\n        this.save();\n    }\n};\n\nMixpanelPersistence.prototype._expire_notification_campaigns = _.safewrap(function() {\n    var campaigns_shown = this['props'][CAMPAIGN_IDS_KEY],\n        EXPIRY_TIME = Config.DEBUG ? 60 * 1000 : 60 * 60 * 1000; // 1 minute (Config.DEBUG) / 1 hour (PDXN)\n    if (!campaigns_shown) {\n        return;\n    }\n    for (var campaign_id in campaigns_shown) {\n        if (1 * new Date() - campaigns_shown[campaign_id] > EXPIRY_TIME) {\n            delete campaigns_shown[campaign_id];\n        }\n    }\n    if (_.isEmptyObject(campaigns_shown)) {\n        delete this['props'][CAMPAIGN_IDS_KEY];\n    }\n});\n\nMixpanelPersistence.prototype.update_campaign_params = function() {\n    if (!this.campaign_params_saved) {\n        this.register_once(_.info.campaignParams());\n        this.campaign_params_saved = true;\n    }\n};\n\nMixpanelPersistence.prototype.update_search_keyword = function(referrer) {\n    this.register(_.info.searchInfo(referrer));\n};\n\n// EXPORTED METHOD, we test this directly.\nMixpanelPersistence.prototype.update_referrer_info = function(referrer) {\n    // If referrer doesn't exist, we want to note the fact that it was type-in traffic.\n    this.register_once({\n        '$initial_referrer': referrer || '$direct',\n        '$initial_referring_domain': _.info.referringDomain(referrer) || '$direct'\n    }, '');\n};\n\nMixpanelPersistence.prototype.get_referrer_info = function() {\n    return _.strip_empty_properties({\n        '$initial_referrer': this['props']['$initial_referrer'],\n        '$initial_referring_domain': this['props']['$initial_referring_domain']\n    });\n};\n\n// safely fills the passed in object with stored properties,\n// does not override any properties defined in both\n// returns the passed in object\nMixpanelPersistence.prototype.safe_merge = function(props) {\n    _.each(this['props'], function(val, prop) {\n        if (!(prop in props)) {\n            props[prop] = val;\n        }\n    });\n\n    return props;\n};\n\nMixpanelPersistence.prototype.update_config = function(config) {\n    this.default_expiry = this.expire_days = config['cookie_expiration'];\n    this.set_disabled(config['disable_persistence']);\n    this.set_cookie_domain(config['cookie_domain']);\n    this.set_cross_site(config['cross_site_cookie']);\n    this.set_cross_subdomain(config['cross_subdomain_cookie']);\n    this.set_secure(config['secure_cookie']);\n};\n\nMixpanelPersistence.prototype.set_disabled = function(disabled) {\n    this.disabled = disabled;\n    if (this.disabled) {\n        this.remove();\n    } else {\n        this.save();\n    }\n};\n\nMixpanelPersistence.prototype.set_cookie_domain = function(cookie_domain) {\n    if (cookie_domain !== this.cookie_domain) {\n        this.remove();\n        this.cookie_domain = cookie_domain;\n        this.save();\n    }\n};\n\nMixpanelPersistence.prototype.set_cross_site = function(cross_site) {\n    if (cross_site !== this.cross_site) {\n        this.cross_site = cross_site;\n        this.remove();\n        this.save();\n    }\n};\n\nMixpanelPersistence.prototype.set_cross_subdomain = function(cross_subdomain) {\n    if (cross_subdomain !== this.cross_subdomain) {\n        this.cross_subdomain = cross_subdomain;\n        this.remove();\n        this.save();\n    }\n};\n\nMixpanelPersistence.prototype.get_cross_subdomain = function() {\n    return this.cross_subdomain;\n};\n\nMixpanelPersistence.prototype.set_secure = function(secure) {\n    if (secure !== this.secure) {\n        this.secure = secure ? true : false;\n        this.remove();\n        this.save();\n    }\n};\n\nMixpanelPersistence.prototype._add_to_people_queue = function(queue, data) {\n    var q_key = this._get_queue_key(queue),\n        q_data = data[queue],\n        set_q = this._get_or_create_queue(SET_ACTION),\n        set_once_q = this._get_or_create_queue(SET_ONCE_ACTION),\n        unset_q = this._get_or_create_queue(UNSET_ACTION),\n        add_q = this._get_or_create_queue(ADD_ACTION),\n        union_q = this._get_or_create_queue(UNION_ACTION),\n        remove_q = this._get_or_create_queue(REMOVE_ACTION, []),\n        append_q = this._get_or_create_queue(APPEND_ACTION, []);\n\n    if (q_key === SET_QUEUE_KEY) {\n        // Update the set queue - we can override any existing values\n        _.extend(set_q, q_data);\n        // if there was a pending increment, override it\n        // with the set.\n        this._pop_from_people_queue(ADD_ACTION, q_data);\n        // if there was a pending union, override it\n        // with the set.\n        this._pop_from_people_queue(UNION_ACTION, q_data);\n        this._pop_from_people_queue(UNSET_ACTION, q_data);\n    } else if (q_key === SET_ONCE_QUEUE_KEY) {\n        // only queue the data if there is not already a set_once call for it.\n        _.each(q_data, function(v, k) {\n            if (!(k in set_once_q)) {\n                set_once_q[k] = v;\n            }\n        });\n        this._pop_from_people_queue(UNSET_ACTION, q_data);\n    } else if (q_key === UNSET_QUEUE_KEY) {\n        _.each(q_data, function(prop) {\n\n            // undo previously-queued actions on this key\n            _.each([set_q, set_once_q, add_q, union_q], function(enqueued_obj) {\n                if (prop in enqueued_obj) {\n                    delete enqueued_obj[prop];\n                }\n            });\n            _.each(append_q, function(append_obj) {\n                if (prop in append_obj) {\n                    delete append_obj[prop];\n                }\n            });\n\n            unset_q[prop] = true;\n\n        });\n    } else if (q_key === ADD_QUEUE_KEY) {\n        _.each(q_data, function(v, k) {\n            // If it exists in the set queue, increment\n            // the value\n            if (k in set_q) {\n                set_q[k] += v;\n            } else {\n                // If it doesn't exist, update the add\n                // queue\n                if (!(k in add_q)) {\n                    add_q[k] = 0;\n                }\n                add_q[k] += v;\n            }\n        }, this);\n        this._pop_from_people_queue(UNSET_ACTION, q_data);\n    } else if (q_key === UNION_QUEUE_KEY) {\n        _.each(q_data, function(v, k) {\n            if (_.isArray(v)) {\n                if (!(k in union_q)) {\n                    union_q[k] = [];\n                }\n                // We may send duplicates, the server will dedup them.\n                union_q[k] = union_q[k].concat(v);\n            }\n        });\n        this._pop_from_people_queue(UNSET_ACTION, q_data);\n    } else if (q_key === REMOVE_QUEUE_KEY) {\n        remove_q.push(q_data);\n        this._pop_from_people_queue(APPEND_ACTION, q_data);\n    } else if (q_key === APPEND_QUEUE_KEY) {\n        append_q.push(q_data);\n        this._pop_from_people_queue(UNSET_ACTION, q_data);\n    }\n\n    console$1.log('MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):');\n    console$1.log(data);\n\n    this.save();\n};\n\nMixpanelPersistence.prototype._pop_from_people_queue = function(queue, data) {\n    var q = this._get_queue(queue);\n    if (!_.isUndefined(q)) {\n        _.each(data, function(v, k) {\n            if (queue === APPEND_ACTION || queue === REMOVE_ACTION) {\n                // list actions: only remove if both k+v match\n                // e.g. remove should not override append in a case like\n                // append({foo: 'bar'}); remove({foo: 'qux'})\n                _.each(q, function(queued_action) {\n                    if (queued_action[k] === v) {\n                        delete queued_action[k];\n                    }\n                });\n            } else {\n                delete q[k];\n            }\n        }, this);\n\n        this.save();\n    }\n};\n\nMixpanelPersistence.prototype._get_queue_key = function(queue) {\n    if (queue === SET_ACTION) {\n        return SET_QUEUE_KEY;\n    } else if (queue === SET_ONCE_ACTION) {\n        return SET_ONCE_QUEUE_KEY;\n    } else if (queue === UNSET_ACTION) {\n        return UNSET_QUEUE_KEY;\n    } else if (queue === ADD_ACTION) {\n        return ADD_QUEUE_KEY;\n    } else if (queue === APPEND_ACTION) {\n        return APPEND_QUEUE_KEY;\n    } else if (queue === REMOVE_ACTION) {\n        return REMOVE_QUEUE_KEY;\n    } else if (queue === UNION_ACTION) {\n        return UNION_QUEUE_KEY;\n    } else {\n        console$1.error('Invalid queue:', queue);\n    }\n};\n\nMixpanelPersistence.prototype._get_queue = function(queue) {\n    return this['props'][this._get_queue_key(queue)];\n};\nMixpanelPersistence.prototype._get_or_create_queue = function(queue, default_val) {\n    var key = this._get_queue_key(queue);\n    default_val = _.isUndefined(default_val) ? {} : default_val;\n\n    return this['props'][key] || (this['props'][key] = default_val);\n};\n\nMixpanelPersistence.prototype.set_event_timer = function(event_name, timestamp) {\n    var timers = this['props'][EVENT_TIMERS_KEY] || {};\n    timers[event_name] = timestamp;\n    this['props'][EVENT_TIMERS_KEY] = timers;\n    this.save();\n};\n\nMixpanelPersistence.prototype.remove_event_timer = function(event_name) {\n    var timers = this['props'][EVENT_TIMERS_KEY] || {};\n    var timestamp = timers[event_name];\n    if (!_.isUndefined(timestamp)) {\n        delete this['props'][EVENT_TIMERS_KEY][event_name];\n        this.save();\n    }\n    return timestamp;\n};\n\n/*\n * This file is a js implementation for a subset in eval_node.c\n */\n\n/*\n * Constants\n */\n// Metadata keys\n/** @const */   var OPERATOR_KEY                  = 'operator';\n/** @const */   var PROPERTY_KEY                  = 'property';\n/** @const */   var WINDOW_KEY                    = 'window';\n/** @const */   var UNIT_KEY                      = 'unit';\n/** @const */   var VALUE_KEY                     = 'value';\n/** @const */   var HOUR_KEY                      = 'hour';\n/** @const */   var DAY_KEY                       = 'day';\n/** @const */   var WEEK_KEY                      = 'week';\n/** @const */   var MONTH_KEY                     = 'month';\n\n// Operands\n/** @const */   var EVENT_PROPERTY         = 'event';\n/** @const */   var LITERAL_PROPERTY       = 'literal';\n\n// Binary Operators\n/** @const */   var AND_OPERATOR           = 'and';\n/** @const */   var OR_OPERATOR            = 'or';\n/** @const */   var IN_OPERATOR            = 'in';\n/** @const */   var NOT_IN_OPERATOR        = 'not in';\n/** @const */   var PLUS_OPERATOR          = '+';\n/** @const */   var MINUS_OPERATOR         = '-';\n/** @const */   var MUL_OPERATOR           = '*';\n/** @const */   var DIV_OPERATOR           = '/';\n/** @const */   var MOD_OPERATOR           = '%';\n/** @const */   var EQUALS_OPERATOR        = '==';\n/** @const */   var NOT_EQUALS_OPERATOR    = '!=';\n/** @const */   var GREATER_OPERATOR       = '>';\n/** @const */   var LESS_OPERATOR          = '<';\n/** @const */   var GREATER_EQUAL_OPERATOR = '>=';\n/** @const */   var LESS_EQUAL_OPERATOR    = '<=';\n\n// Typecast Operators\n/** @const */   var BOOLEAN_OPERATOR       = 'boolean';\n/** @const */   var DATETIME_OPERATOR      = 'datetime';\n/** @const */   var LIST_OPERATOR          = 'list';\n/** @const */   var NUMBER_OPERATOR        = 'number';\n/** @const */   var STRING_OPERATOR        = 'string';\n\n// Unary Operators\n/** @const */   var NOT_OPERATOR           = 'not';\n/** @const */   var DEFINED_OPERATOR       = 'defined';\n/** @const */   var NOT_DEFINED_OPERATOR   = 'not defined';\n\n// Special literals\n/** @const */   var NOW_LITERAL            = 'now';\n\n// Type cast functions\nfunction toNumber(value) {\n    if (value === null) {\n        return null;\n    }\n\n    switch (typeof(value)) {\n        case 'object':\n            if (_.isDate(value) && value.getTime() >= 0) {\n                return value.getTime();\n            }\n            return null;\n        case 'boolean':\n            return Number(value);\n        case 'number':\n            return value;\n        case 'string':\n            value = Number(value);\n            if (!isNaN(value)) {\n                return value;\n            }\n            return 0;\n    }\n    return null;\n}\n\nfunction evaluateNumber(op, properties) {\n    if (!op['operator'] || op['operator'] !== NUMBER_OPERATOR || !op['children'] || op['children'].length !== 1) {\n        throw ('Invalid cast operator: number ' + op);\n    }\n\n    return toNumber(evaluateSelector(op['children'][0], properties));\n}\n\nfunction toBoolean(value) {\n    if (value === null) {\n        return false;\n    }\n\n    switch (typeof value) {\n        case 'boolean':\n            return value;\n        case 'number':\n            return value !== 0.0;\n        case 'string':\n            return value.length > 0;\n        case 'object':\n            if (_.isArray(value) && value.length > 0) {\n                return true;\n            }\n            if (_.isDate(value) && value.getTime() > 0) {\n                return true;\n            }\n            if (_.isObject(value) && !_.isEmptyObject(value)) {\n                return true;\n            }\n            return false;\n    }\n    return false;\n}\n\nfunction evaluateBoolean(op, properties) {\n    if (!op['operator'] || op['operator'] !== BOOLEAN_OPERATOR || !op['children'] || op['children'].length !== 1) {\n        throw ('Invalid cast operator: boolean ' + op);\n    }\n\n    return toBoolean(evaluateSelector(op['children'][0], properties));\n}\n\nfunction evaluateDateTime(op, properties) {\n    if (!op['operator'] || op['operator'] !== DATETIME_OPERATOR || !op['children'] || op['children'].length !== 1) {\n        throw ('Invalid cast operator: datetime ' + op);\n    }\n\n    var v = evaluateSelector(op['children'][0], properties);\n    if (v === null) {\n        return null;\n    }\n\n    switch (typeof(v)) {\n        case 'number':\n        case 'string':\n            var d = new Date(v);\n            if (isNaN(d.getTime())) {\n                return null;\n            }\n            return d;\n        case 'object':\n            if (_.isDate(v)) {\n                return v;\n            }\n    }\n\n    return null;\n}\n\nfunction evaluateList(op, properties) {\n    if (!op['operator'] || op['operator'] !== LIST_OPERATOR || !op['children'] || op['children'].length !== 1) {\n        throw ('Invalid cast operator: list ' + op);\n    }\n\n    var v = evaluateSelector(op['children'][0], properties);\n    if (v === null) {\n        return null;\n    }\n\n    if (_.isArray(v)) {\n        return v;\n    }\n\n    return null;\n}\n\nfunction evaluateString(op, properties) {\n    if (!op['operator'] || op['operator'] !== STRING_OPERATOR || !op['children'] || op['children'].length !== 1) {\n        throw ('Invalid cast operator: string ' + op);\n    }\n\n    var v = evaluateSelector(op['children'][0], properties);\n    switch (typeof(v)) {\n        case 'object':\n            if (_.isDate(v)) {\n                return v.toJSON();\n            }\n            return JSON.stringify(v);\n    }\n    return String(v);\n}\n\n// Operators\nfunction evaluateAnd(op, properties) {\n    if (!op['operator'] || op['operator'] !== AND_OPERATOR || !op['children'] || op['children'].length !== 2) {\n        throw ('Invalid operator: AND ' + op);\n    }\n\n    return toBoolean(evaluateSelector(op['children'][0], properties)) && toBoolean(evaluateSelector(op['children'][1], properties));\n}\n\nfunction evaluateOr(op, properties) {\n    if (!op['operator'] || op['operator'] !== OR_OPERATOR || !op['children'] || op['children'].length !== 2) {\n        throw ('Invalid operator: OR ' + op);\n    }\n\n    return toBoolean(evaluateSelector(op['children'][0], properties)) || toBoolean(evaluateSelector(op['children'][1], properties));\n}\n\nfunction evaluateIn(op, properties) {\n    if (!op['operator'] || [IN_OPERATOR, NOT_IN_OPERATOR].indexOf(op['operator']) === -1 || !op['children'] || op['children'].length !== 2) {\n        throw ('Invalid operator: IN/NOT IN ' + op);\n    }\n    var leftValue = evaluateSelector(op['children'][0], properties);\n    var rightValue = evaluateSelector(op['children'][1], properties);\n\n    if (!_.isArray(rightValue) && !_.isString(rightValue)) {\n        throw ('Invalid operand for operator IN: invalid type' + rightValue);\n    }\n\n    var v = rightValue.indexOf(leftValue) > -1;\n    if (op['operator'] === NOT_IN_OPERATOR) {\n        return !v;\n    }\n    return v;\n}\n\nfunction evaluatePlus(op, properties) {\n    if (!op['operator'] || op['operator'] !== PLUS_OPERATOR || !op['children'] || op['children'].length < 2) {\n        throw ('Invalid operator: PLUS ' + op);\n    }\n    var l = evaluateSelector(op['children'][0], properties);\n    var r = evaluateSelector(op['children'][1], properties);\n\n    if (typeof l === 'number' && typeof r === 'number') {\n        return l + r;\n    }\n    if (typeof l === 'string' && typeof r === 'string') {\n        return l + r;\n    }\n    return null;\n}\n\nfunction evaluateArithmetic(op, properties) {\n    if (!op['operator'] || [MINUS_OPERATOR, MUL_OPERATOR, DIV_OPERATOR, MOD_OPERATOR].indexOf(op['operator']) === -1 ||\n        !op['children'] || op['children'].length < 2) {\n        throw ('Invalid arithmetic operator ' + op);\n    }\n\n    var l = evaluateSelector(op['children'][0], properties);\n    var r = evaluateSelector(op['children'][1], properties);\n\n    if (typeof l === 'number' && typeof r === 'number') {\n        switch (op['operator']) {\n            case MINUS_OPERATOR:\n                return l - r;\n            case MUL_OPERATOR:\n                return l * r;\n            case DIV_OPERATOR:\n                if (r !== 0) {\n                    return l / r;\n                }\n                return null;\n            case MOD_OPERATOR:\n                if (r === 0) {\n                    return null;\n                }\n                if (l === 0) {\n                    return 0;\n                }\n                if ((l < 0 && r > 0) || (l > 0 && r < 0)) {\n                    /* Mimic python modulo - result takes sign of the divisor\n                     * if one operand is negative. */\n                    return -(Math.floor(l / r) * r - l);\n                }\n                return l % r;\n            default:\n                throw('Unknown operator: ' + op['operator']);\n        }\n    }\n\n    return null;\n}\n\nfunction _isArrayEqual(l, r) {\n    if (l === r) return true;\n    if (l === null || r === null) return false;\n    if (l.length !== r.length) return false;\n\n    for (var i = 0; i < l.length; i++) {\n        if (l[i] !== r[i]) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\nfunction _isEqual(l, r) {\n    if ( l === null && l === r ) {\n        return true;\n    }\n    if (typeof l === typeof r) {\n        switch (typeof l) {\n            case 'number':\n            case 'string':\n            case 'boolean':\n                return l === r;\n            case 'object':\n                if (_.isArray(l) && _.isArray(r)) {\n                    return _isArrayEqual(l, r);\n                }\n                if (_.isDate(l) && _.isDate(r)) {\n                    return l.getTime() === r.getTime();\n                }\n                if (_.isObject(l) && _.isObject(r)) {\n                    return JSON.stringify(l) === JSON.stringify(r);\n                }\n        }\n    }\n    return false;\n}\n\nfunction evaluateEquality(op, properties) {\n    if (!op['operator'] || [EQUALS_OPERATOR, NOT_EQUALS_OPERATOR].indexOf(op['operator']) === -1 || !op['children'] || op['children'].length !== 2) {\n        throw ('Invalid equality operator ' + op);\n    }\n\n    var v = _isEqual(evaluateSelector(op['children'][0], properties), evaluateSelector(op['children'][1], properties));\n\n    switch (op['operator']) {\n        case EQUALS_OPERATOR:\n            return v;\n        case NOT_EQUALS_OPERATOR:\n            return !v;\n    }\n}\n\nfunction evaluateComparison(op, properties) {\n    if (!op['operator'] ||\n        [GREATER_OPERATOR, GREATER_EQUAL_OPERATOR, LESS_OPERATOR, LESS_EQUAL_OPERATOR].indexOf(op['operator']) === -1 ||\n        !op['children'] || op['children'].length !== 2) {\n        throw ('Invalid comparison operator ' + op);\n    }\n    var l = evaluateSelector(op['children'][0], properties);\n    var r = evaluateSelector(op['children'][1], properties);\n\n    if (typeof(l) === typeof(r)) {\n        if (typeof(r) === 'number' || _.isDate(r)) {\n            l = toNumber(l);\n            r = toNumber(r);\n            switch (op['operator']) {\n                case GREATER_OPERATOR:\n                    return l > r;\n                case GREATER_EQUAL_OPERATOR:\n                    return l >= r;\n                case LESS_OPERATOR:\n                    return l < r;\n                case LESS_EQUAL_OPERATOR:\n                    return l <= r;\n            }\n        } else if (typeof(r) === 'string') {\n            var compare = l.localeCompare(r);\n            switch (op['operator']) {\n                case GREATER_OPERATOR:\n                    return compare > 0;\n                case GREATER_EQUAL_OPERATOR:\n                    return compare >= 0;\n                case LESS_OPERATOR:\n                    return compare < 0;\n                case LESS_EQUAL_OPERATOR:\n                    return compare <= 0;\n            }\n        }\n    }\n\n    return null;\n}\n\nfunction evaluateDefined(op, properties) {\n    if (!op['operator'] || [DEFINED_OPERATOR, NOT_DEFINED_OPERATOR].indexOf(op['operator']) === -1 ||\n        !op['children'] || op['children'].length !== 1) {\n        throw ('Invalid defined/not defined operator: ' + op);\n    }\n\n    var b = evaluateSelector(op['children'][0], properties) !== null;\n    if (op['operator'] === NOT_DEFINED_OPERATOR) {\n        return !b;\n    }\n\n    return b;\n}\n\nfunction evaluateNot(op, properties) {\n    if (!op['operator'] || op['operator'] !== NOT_OPERATOR || !op['children'] || op['children'].length !== 1) {\n        throw ('Invalid not operator: ' + op);\n    }\n\n    var v = evaluateSelector(op['children'][0], properties);\n    if (v === null) {\n        return true;\n    }\n\n    if (typeof(v) === 'boolean') {\n        return !v;\n    }\n\n    return null;\n}\n\nfunction evaluateOperator(op, properties) {\n    if (!op['operator']) {\n        throw ('Invalid operator: operator key missing ' + op);\n    }\n\n    switch (op['operator']) {\n        case AND_OPERATOR:\n            return evaluateAnd(op, properties);\n        case OR_OPERATOR:\n            return evaluateOr(op, properties);\n        case IN_OPERATOR:\n        case NOT_IN_OPERATOR:\n            return evaluateIn(op, properties);\n        case PLUS_OPERATOR:\n            return evaluatePlus(op, properties);\n        case MINUS_OPERATOR:\n        case MUL_OPERATOR:\n        case DIV_OPERATOR:\n        case MOD_OPERATOR:\n            return evaluateArithmetic(op, properties);\n        case EQUALS_OPERATOR:\n        case NOT_EQUALS_OPERATOR:\n            return evaluateEquality(op, properties);\n        case GREATER_OPERATOR:\n        case LESS_OPERATOR:\n        case GREATER_EQUAL_OPERATOR:\n        case LESS_EQUAL_OPERATOR:\n            return evaluateComparison(op, properties);\n        case BOOLEAN_OPERATOR:\n            return evaluateBoolean(op, properties);\n        case DATETIME_OPERATOR:\n            return evaluateDateTime(op, properties);\n        case LIST_OPERATOR:\n            return evaluateList(op, properties);\n        case NUMBER_OPERATOR:\n            return evaluateNumber(op, properties);\n        case STRING_OPERATOR:\n            return evaluateString(op, properties);\n        case DEFINED_OPERATOR:\n        case NOT_DEFINED_OPERATOR:\n            return evaluateDefined(op, properties);\n        case NOT_OPERATOR:\n            return evaluateNot(op, properties);\n    }\n}\n\nfunction evaluateWindow(value) {\n    var win = value[WINDOW_KEY];\n    if (!win || !win[UNIT_KEY] || !win[VALUE_KEY]) {\n        throw('Invalid window: missing required keys ' + JSON.stringify(value));\n    }\n    var out = new Date();\n    switch (win[UNIT_KEY]) {\n        case HOUR_KEY:\n            out.setTime(out.getTime() + (win[VALUE_KEY]*-1*60*60*1000));\n            break;\n        case DAY_KEY:\n            out.setTime(out.getTime() + (win[VALUE_KEY]*-1*24*60*60*1000));\n            break;\n        case WEEK_KEY:\n            out.setTime(out.getTime() + (win[VALUE_KEY]*-1*7*24*60*60*1000));\n            break;\n        case MONTH_KEY:\n            out.setTime(out.getTime() + (win[VALUE_KEY]*-1*30*24*60*60*1000));\n            break;\n        default:\n            throw('Invalid unit: ' + win[UNIT_KEY]);\n    }\n\n    return out;\n}\n\nfunction evaluateOperand(op, properties) {\n    if (!op['property'] || !op['value']) {\n        throw('Invalid operand: missing required keys ' + op);\n    }\n    switch (op['property']) {\n        case EVENT_PROPERTY:\n            if (properties[op['value']] !== undefined) {\n                return properties[op['value']];\n            }\n            return null;\n        case LITERAL_PROPERTY:\n            if (op['value'] === NOW_LITERAL) {\n                return new Date();\n            }\n            if (typeof(op['value']) === 'object') {\n                return evaluateWindow(op['value']);\n            }\n            return op['value'];\n        default:\n            throw('Invalid operand: Invalid property type ' + op['property']);\n    }\n}\n\nfunction evaluateSelector(filters, properties) {\n    if (filters[PROPERTY_KEY]) {\n        return evaluateOperand(filters, properties);\n    }\n    if (filters[OPERATOR_KEY]) {\n        return evaluateOperator(filters, properties);\n    }\n}\n\n// Internal class for notification display\n\nvar MixpanelNotification = function(notif_data, mixpanel_instance) {\n    _.bind_instance_methods(this);\n\n    this.mixpanel          = mixpanel_instance;\n    this.persistence       = this.mixpanel['persistence'];\n    this.resource_protocol = this.mixpanel.get_config('inapp_protocol');\n    this.cdn_host          = this.mixpanel.get_config('cdn');\n\n    this.campaign_id = _.escapeHTML(notif_data['id']);\n    this.message_id  = _.escapeHTML(notif_data['message_id']);\n\n    this.body            = (_.escapeHTML(notif_data['body']) || '').replace(/\\n/g, '<br/>');\n    this.cta             = _.escapeHTML(notif_data['cta']) || 'Close';\n    this.notif_type      = _.escapeHTML(notif_data['type']) || 'takeover';\n    this.style           = _.escapeHTML(notif_data['style']) || 'light';\n    this.title           = _.escapeHTML(notif_data['title']) || '';\n    this.video_width     = MixpanelNotification.VIDEO_WIDTH;\n    this.video_height    = MixpanelNotification.VIDEO_HEIGHT;\n\n    this.display_triggers = notif_data['display_triggers'] || [];\n\n    // These fields are url-sanitized in the backend already.\n    this.dest_url        = notif_data['cta_url'] || null;\n    this.image_url       = notif_data['image_url'] || null;\n    this.thumb_image_url = notif_data['thumb_image_url'] || null;\n    this.video_url       = notif_data['video_url'] || null;\n\n    if (this.thumb_image_url && this.thumb_image_url.indexOf('//') === 0) {\n        this.thumb_image_url = this.thumb_image_url.replace('//', this.resource_protocol);\n    }\n\n    this.clickthrough = true;\n    if (!this.dest_url) {\n        this.dest_url = '#dismiss';\n        this.clickthrough = false;\n    }\n\n    this.mini = this.notif_type === 'mini';\n    if (!this.mini) {\n        this.notif_type = 'takeover';\n    }\n    this.notif_width = !this.mini ? MixpanelNotification.NOTIF_WIDTH : MixpanelNotification.NOTIF_WIDTH_MINI;\n\n    this._set_client_config();\n    this.imgs_to_preload = this._init_image_html();\n    this._init_video();\n};\n\nMixpanelNotification.ANIM_TIME         = 200;\nMixpanelNotification.MARKUP_PREFIX     = 'mixpanel-notification';\nMixpanelNotification.BG_OPACITY        = 0.6;\nMixpanelNotification.NOTIF_TOP         = 25;\nMixpanelNotification.NOTIF_START_TOP   = 200;\nMixpanelNotification.NOTIF_WIDTH       = 388;\nMixpanelNotification.NOTIF_WIDTH_MINI  = 420;\nMixpanelNotification.NOTIF_HEIGHT_MINI = 85;\nMixpanelNotification.THUMB_BORDER_SIZE = 5;\nMixpanelNotification.THUMB_IMG_SIZE    = 60;\nMixpanelNotification.THUMB_OFFSET      = Math.round(MixpanelNotification.THUMB_IMG_SIZE / 2);\nMixpanelNotification.VIDEO_WIDTH       = 595;\nMixpanelNotification.VIDEO_HEIGHT      = 334;\n\nMixpanelNotification.prototype.show = function() {\n    var self = this;\n    this._set_client_config();\n\n    // don't display until HTML body exists\n    if (!this.body_el) {\n        setTimeout(function() { self.show(); }, 300);\n        return;\n    }\n\n    this._init_styles();\n    this._init_notification_el();\n\n    // wait for any images to load before showing notification\n    this._preload_images(this._attach_and_animate);\n};\n\nMixpanelNotification.prototype.dismiss = _.safewrap(function() {\n    if (!this.marked_as_shown) {\n        // unexpected condition: user interacted with notif even though we didn't consider it\n        // visible (see _mark_as_shown()); send tracking signals to mark delivery\n        this._mark_delivery({'invisible': true});\n    }\n\n    var exiting_el = this.showing_video ? this._get_el('video') : this._get_notification_display_el();\n    if (this.use_transitions) {\n        this._remove_class('bg', 'visible');\n        this._add_class(exiting_el, 'exiting');\n        setTimeout(this._remove_notification_el, MixpanelNotification.ANIM_TIME);\n    } else {\n        var notif_attr, notif_start, notif_goal;\n        if (this.mini) {\n            notif_attr  = 'right';\n            notif_start = 20;\n            notif_goal  = -100;\n        } else {\n            notif_attr  = 'top';\n            notif_start = MixpanelNotification.NOTIF_TOP;\n            notif_goal  = MixpanelNotification.NOTIF_START_TOP + MixpanelNotification.NOTIF_TOP;\n        }\n        this._animate_els([\n            {\n                el:    this._get_el('bg'),\n                attr:  'opacity',\n                start: MixpanelNotification.BG_OPACITY,\n                goal:  0.0\n            },\n            {\n                el:    exiting_el,\n                attr:  'opacity',\n                start: 1.0,\n                goal:  0.0\n            },\n            {\n                el:    exiting_el,\n                attr:  notif_attr,\n                start: notif_start,\n                goal:  notif_goal\n            }\n        ], MixpanelNotification.ANIM_TIME, this._remove_notification_el);\n    }\n});\n\nMixpanelNotification.prototype._add_class = _.safewrap(function(el, class_name) {\n    class_name = MixpanelNotification.MARKUP_PREFIX + '-' + class_name;\n    if (typeof el === 'string') {\n        el = this._get_el(el);\n    }\n    if (!el.className) {\n        el.className = class_name;\n    } else if (!~(' ' + el.className + ' ').indexOf(' ' + class_name + ' ')) {\n        el.className += ' ' + class_name;\n    }\n});\nMixpanelNotification.prototype._remove_class = _.safewrap(function(el, class_name) {\n    class_name = MixpanelNotification.MARKUP_PREFIX + '-' + class_name;\n    if (typeof el === 'string') {\n        el = this._get_el(el);\n    }\n    if (el.className) {\n        el.className = (' ' + el.className + ' ')\n            .replace(' ' + class_name + ' ', '')\n            .replace(/^[\\s\\xA0]+/, '')\n            .replace(/[\\s\\xA0]+$/, '');\n    }\n});\n\nMixpanelNotification.prototype._animate_els = _.safewrap(function(anims, mss, done_cb, start_time) {\n    var self = this,\n        in_progress = false,\n        ai, anim,\n        cur_time = 1 * new Date(), time_diff;\n\n    start_time = start_time || cur_time;\n    time_diff = cur_time - start_time;\n\n    for (ai = 0; ai < anims.length; ai++) {\n        anim = anims[ai];\n        if (typeof anim.val === 'undefined') {\n            anim.val = anim.start;\n        }\n        if (anim.val !== anim.goal) {\n            in_progress = true;\n            var anim_diff = anim.goal - anim.start,\n                anim_dir = anim.goal >= anim.start ? 1 : -1;\n            anim.val = anim.start + anim_diff * time_diff / mss;\n            if (anim.attr !== 'opacity') {\n                anim.val = Math.round(anim.val);\n            }\n            if ((anim_dir > 0 && anim.val >= anim.goal) || (anim_dir < 0 && anim.val <= anim.goal)) {\n                anim.val = anim.goal;\n            }\n        }\n    }\n    if (!in_progress) {\n        if (done_cb) {\n            done_cb();\n        }\n        return;\n    }\n\n    for (ai = 0; ai < anims.length; ai++) {\n        anim = anims[ai];\n        if (anim.el) {\n            var suffix = anim.attr === 'opacity' ? '' : 'px';\n            anim.el.style[anim.attr] = String(anim.val) + suffix;\n        }\n    }\n    setTimeout(function() { self._animate_els(anims, mss, done_cb, start_time); }, 10);\n});\n\nMixpanelNotification.prototype._attach_and_animate = _.safewrap(function() {\n    var self = this;\n\n    // no possibility to double-display\n    if (this.shown || this._get_shown_campaigns()[this.campaign_id]) {\n        return;\n    }\n    this.shown = true;\n\n    this.body_el.appendChild(this.notification_el);\n    setTimeout(function() {\n        var notif_el = self._get_notification_display_el();\n        if (self.use_transitions) {\n            if (!self.mini) {\n                self._add_class('bg', 'visible');\n            }\n            self._add_class(notif_el, 'visible');\n            self._mark_as_shown();\n        } else {\n            var notif_attr, notif_start, notif_goal;\n            if (self.mini) {\n                notif_attr  = 'right';\n                notif_start = -100;\n                notif_goal  = 20;\n            } else {\n                notif_attr  = 'top';\n                notif_start = MixpanelNotification.NOTIF_START_TOP + MixpanelNotification.NOTIF_TOP;\n                notif_goal  = MixpanelNotification.NOTIF_TOP;\n            }\n            self._animate_els([\n                {\n                    el:    self._get_el('bg'),\n                    attr:  'opacity',\n                    start: 0.0,\n                    goal:  MixpanelNotification.BG_OPACITY\n                },\n                {\n                    el:    notif_el,\n                    attr:  'opacity',\n                    start: 0.0,\n                    goal:  1.0\n                },\n                {\n                    el:    notif_el,\n                    attr:  notif_attr,\n                    start: notif_start,\n                    goal:  notif_goal\n                }\n            ], MixpanelNotification.ANIM_TIME, self._mark_as_shown);\n        }\n    }, 100);\n    _.register_event(self._get_el('cancel'), 'click', function(e) {\n        e.preventDefault();\n        self.dismiss();\n    });\n    var click_el = self._get_el('button') ||\n                        self._get_el('mini-content');\n    _.register_event(click_el, 'click', function(e) {\n        e.preventDefault();\n        if (self.show_video) {\n            self._track_event('$campaign_open', {'$resource_type': 'video'});\n            self._switch_to_video();\n        } else {\n            self.dismiss();\n            if (self.clickthrough) {\n                var tracking_cb = null;\n                if (self.mixpanel.get_config('inapp_link_new_window')) {\n                    window.open(self.dest_url);\n                } else {\n                    tracking_cb = function() {\n                        window.location.href = self.dest_url;\n                    };\n                }\n                self._track_event('$campaign_open', {'$resource_type': 'link'}, tracking_cb);\n            }\n        }\n    });\n});\n\nMixpanelNotification.prototype._get_el = function(id) {\n    return document.getElementById(MixpanelNotification.MARKUP_PREFIX + '-' + id);\n};\n\nMixpanelNotification.prototype._get_notification_display_el = function() {\n    return this._get_el(this.notif_type);\n};\n\nMixpanelNotification.prototype._get_shown_campaigns = function() {\n    return this.persistence['props'][CAMPAIGN_IDS_KEY] || (this.persistence['props'][CAMPAIGN_IDS_KEY] = {});\n};\n\nMixpanelNotification.prototype._matches_event_data = _.safewrap(function(event_data) {\n    var event_name = event_data['event'] || '';\n    for (var i = 0; i < this.display_triggers.length; i++) {\n        var display_trigger = this.display_triggers[i];\n        var match_event = display_trigger['event'] || '';\n        if (match_event === '$any_event' || event_name === display_trigger['event']) {\n            if (display_trigger['selector'] && !_.isEmptyObject(display_trigger['selector'])) {\n                if (evaluateSelector(display_trigger['selector'], event_data['properties'])) {\n                    return true;\n                }\n            } else {\n                return true;\n            }\n        }\n    }\n    return false;\n});\n\n\nMixpanelNotification.prototype._browser_lte = function(browser, version) {\n    return this.browser_versions[browser] && this.browser_versions[browser] <= version;\n};\n\nMixpanelNotification.prototype._init_image_html = function() {\n    var imgs_to_preload = [];\n\n    if (!this.mini) {\n        if (this.image_url) {\n            imgs_to_preload.push(this.image_url);\n            this.img_html = '<img id=\"img\" src=\"' + this.image_url + '\"/>';\n        } else {\n            this.img_html = '';\n        }\n        if (this.thumb_image_url) {\n            imgs_to_preload.push(this.thumb_image_url);\n            this.thumb_img_html =\n                    '<div id=\"thumbborder-wrapper\"><div id=\"thumbborder\"></div></div>' +\n                    '<img id=\"thumbnail\"' +\n                        ' src=\"' + this.thumb_image_url + '\"' +\n                        ' width=\"' + MixpanelNotification.THUMB_IMG_SIZE + '\"' +\n                        ' height=\"' + MixpanelNotification.THUMB_IMG_SIZE + '\"' +\n                    '/>' +\n                    '<div id=\"thumbspacer\"></div>';\n        } else {\n            this.thumb_img_html = '';\n        }\n    } else {\n        this.thumb_image_url = this.thumb_image_url || (this.cdn_host + '/site_media/images/icons/notifications/mini-news-dark.png');\n        imgs_to_preload.push(this.thumb_image_url);\n    }\n\n    return imgs_to_preload;\n};\n\nMixpanelNotification.prototype._init_notification_el = function() {\n    var notification_html = '';\n    var video_src         = '';\n    var video_html        = '';\n    var cancel_html       = '<div id=\"cancel\">' +\n                                    '<div id=\"cancel-icon\"></div>' +\n                                '</div>';\n\n    this.notification_el = document.createElement('div');\n    this.notification_el.id = MixpanelNotification.MARKUP_PREFIX + '-wrapper';\n    if (!this.mini) {\n        // TAKEOVER notification\n        var close_html  = (this.clickthrough || this.show_video) ? '' : '<div id=\"button-close\"></div>',\n            play_html   = this.show_video ? '<div id=\"button-play\"></div>' : '';\n        if (this._browser_lte('ie', 7)) {\n            close_html = '';\n            play_html = '';\n        }\n        notification_html =\n                '<div id=\"takeover\">' +\n                    this.thumb_img_html +\n                    '<div id=\"mainbox\">' +\n                        cancel_html +\n                        '<div id=\"content\">' +\n                            this.img_html +\n                            '<div id=\"title\">' + this.title + '</div>' +\n                            '<div id=\"body\">' + this.body + '</div>' +\n                            '<div id=\"tagline\">' +\n                                '<a href=\"http://mixpanel.com?from=inapp\" target=\"_blank\">POWERED BY MIXPANEL</a>' +\n                            '</div>' +\n                        '</div>' +\n                        '<div id=\"button\">' +\n                            close_html +\n                            '<a id=\"button-link\" href=\"' + this.dest_url + '\">' + this.cta + '</a>' +\n                            play_html +\n                        '</div>' +\n                    '</div>' +\n                '</div>';\n    } else {\n        // MINI notification\n        notification_html =\n                '<div id=\"mini\">' +\n                    '<div id=\"mainbox\">' +\n                        cancel_html +\n                        '<div id=\"mini-content\">' +\n                            '<div id=\"mini-icon\">' +\n                                '<div id=\"mini-icon-img\"></div>' +\n                            '</div>' +\n                            '<div id=\"body\">' +\n                                '<div id=\"body-text\"><div>' + this.body + '</div></div>' +\n                            '</div>' +\n                        '</div>' +\n                    '</div>' +\n                    '<div id=\"mini-border\"></div>' +\n                '</div>';\n    }\n    if (this.youtube_video) {\n        video_src = this.resource_protocol + 'www.youtube.com/embed/' + this.youtube_video +\n                '?wmode=transparent&showinfo=0&modestbranding=0&rel=0&autoplay=1&loop=0&vq=hd1080';\n        if (this.yt_custom) {\n            video_src += '&enablejsapi=1&html5=1&controls=0';\n            video_html =\n                    '<div id=\"video-controls\">' +\n                        '<div id=\"video-progress\" class=\"video-progress-el\">' +\n                            '<div id=\"video-progress-total\" class=\"video-progress-el\"></div>' +\n                            '<div id=\"video-elapsed\" class=\"video-progress-el\"></div>' +\n                        '</div>' +\n                        '<div id=\"video-time\" class=\"video-progress-el\"></div>' +\n                    '</div>';\n        }\n    } else if (this.vimeo_video) {\n        video_src = this.resource_protocol + 'player.vimeo.com/video/' + this.vimeo_video + '?autoplay=1&title=0&byline=0&portrait=0';\n    }\n    if (this.show_video) {\n        this.video_iframe =\n                '<iframe id=\"' + MixpanelNotification.MARKUP_PREFIX + '-video-frame\" ' +\n                    'width=\"' + this.video_width + '\" height=\"' + this.video_height + '\" ' +\n                    ' src=\"' + video_src + '\"' +\n                    ' frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen=\"1\" scrolling=\"no\"' +\n                '></iframe>';\n        video_html =\n                '<div id=\"video-' + (this.flip_animate ? '' : 'no') + 'flip\">' +\n                    '<div id=\"video\">' +\n                        '<div id=\"video-holder\"></div>' +\n                        video_html +\n                    '</div>' +\n                '</div>';\n    }\n    var main_html = video_html + notification_html;\n    if (this.flip_animate) {\n        main_html =\n                (this.mini ? notification_html : '') +\n                '<div id=\"flipcontainer\"><div id=\"flipper\">' +\n                    (this.mini ? video_html : main_html) +\n                '</div></div>';\n    }\n\n    this.notification_el.innerHTML =\n        ('<div id=\"overlay\" class=\"' + this.notif_type + '\">' +\n            '<div id=\"campaignid-' + this.campaign_id + '\">' +\n                '<div id=\"bgwrapper\">' +\n                    '<div id=\"bg\"></div>' +\n                    main_html +\n                '</div>' +\n            '</div>' +\n        '</div>')\n            .replace(/class=\"/g, 'class=\"' + MixpanelNotification.MARKUP_PREFIX + '-')\n            .replace(/id=\"/g, 'id=\"' + MixpanelNotification.MARKUP_PREFIX + '-');\n};\n\nMixpanelNotification.prototype._init_styles = function() {\n    if (this.style === 'dark') {\n        this.style_vals = {\n            bg:             '#1d1f25',\n            bg_actions:     '#282b32',\n            bg_hover:       '#3a4147',\n            bg_light:       '#4a5157',\n            border_gray:    '#32353c',\n            cancel_opacity: '0.4',\n            mini_hover:     '#2a3137',\n            text_title:     '#fff',\n            text_main:      '#9498a3',\n            text_tagline:   '#464851',\n            text_hover:     '#ddd'\n        };\n    } else {\n        this.style_vals = {\n            bg:             '#fff',\n            bg_actions:     '#e7eaee',\n            bg_hover:       '#eceff3',\n            bg_light:       '#f5f5f5',\n            border_gray:    '#e4ecf2',\n            cancel_opacity: '1.0',\n            mini_hover:     '#fafafa',\n            text_title:     '#5c6578',\n            text_main:      '#8b949b',\n            text_tagline:   '#ced9e6',\n            text_hover:     '#7c8598'\n        };\n    }\n    var shadow = '0px 0px 35px 0px rgba(45, 49, 56, 0.7)',\n        video_shadow = shadow,\n        mini_shadow = shadow,\n        thumb_total_size = MixpanelNotification.THUMB_IMG_SIZE + MixpanelNotification.THUMB_BORDER_SIZE * 2,\n        anim_seconds = (MixpanelNotification.ANIM_TIME / 1000) + 's';\n    if (this.mini) {\n        shadow = 'none';\n    }\n\n    // don't display on small viewports\n    var notif_media_queries = {},\n        min_width = MixpanelNotification.NOTIF_WIDTH_MINI + 20;\n    notif_media_queries['@media only screen and (max-width: ' + (min_width - 1) + 'px)'] = {\n        '#overlay': {\n            'display': 'none'\n        }\n    };\n    var notif_styles = {\n        '.flipped': {\n            'transform': 'rotateY(180deg)'\n        },\n        '#overlay': {\n            'position': 'fixed',\n            'top': '0',\n            'left': '0',\n            'width': '100%',\n            'height': '100%',\n            'overflow': 'auto',\n            'text-align': 'center',\n            'z-index': '10000',\n            'font-family': '\"Helvetica\", \"Arial\", sans-serif',\n            '-webkit-font-smoothing': 'antialiased',\n            '-moz-osx-font-smoothing': 'grayscale'\n        },\n        '#overlay.mini': {\n            'height': '0',\n            'overflow': 'visible'\n        },\n        '#overlay a': {\n            'width': 'initial',\n            'padding': '0',\n            'text-decoration': 'none',\n            'text-transform': 'none',\n            'color': 'inherit'\n        },\n        '#bgwrapper': {\n            'position': 'relative',\n            'width': '100%',\n            'height': '100%'\n        },\n        '#bg': {\n            'position': 'fixed',\n            'top': '0',\n            'left': '0',\n            'width': '100%',\n            'height': '100%',\n            'min-width': this.doc_width * 4 + 'px',\n            'min-height': this.doc_height * 4 + 'px',\n            'background-color': 'black',\n            'opacity': '0.0',\n            '-ms-filter': 'progid:DXImageTransform.Microsoft.Alpha(Opacity=60)', // IE8\n            'filter': 'alpha(opacity=60)', // IE5-7\n            'transition': 'opacity ' + anim_seconds\n        },\n        '#bg.visible': {\n            'opacity': MixpanelNotification.BG_OPACITY\n        },\n        '.mini #bg': {\n            'width': '0',\n            'height': '0',\n            'min-width': '0'\n        },\n        '#flipcontainer': {\n            'perspective': '1000px',\n            'position': 'absolute',\n            'width': '100%'\n        },\n        '#flipper': {\n            'position': 'relative',\n            'transform-style': 'preserve-3d',\n            'transition': '0.3s'\n        },\n        '#takeover': {\n            'position': 'absolute',\n            'left': '50%',\n            'width': MixpanelNotification.NOTIF_WIDTH + 'px',\n            'margin-left': Math.round(-MixpanelNotification.NOTIF_WIDTH / 2) + 'px',\n            'backface-visibility': 'hidden',\n            'transform': 'rotateY(0deg)',\n            'opacity': '0.0',\n            'top': MixpanelNotification.NOTIF_START_TOP + 'px',\n            'transition': 'opacity ' + anim_seconds + ', top ' + anim_seconds\n        },\n        '#takeover.visible': {\n            'opacity': '1.0',\n            'top': MixpanelNotification.NOTIF_TOP + 'px'\n        },\n        '#takeover.exiting': {\n            'opacity': '0.0',\n            'top': MixpanelNotification.NOTIF_START_TOP + 'px'\n        },\n        '#thumbspacer': {\n            'height': MixpanelNotification.THUMB_OFFSET + 'px'\n        },\n        '#thumbborder-wrapper': {\n            'position': 'absolute',\n            'top': (-MixpanelNotification.THUMB_BORDER_SIZE) + 'px',\n            'left': (MixpanelNotification.NOTIF_WIDTH / 2 - MixpanelNotification.THUMB_OFFSET - MixpanelNotification.THUMB_BORDER_SIZE) + 'px',\n            'width': thumb_total_size + 'px',\n            'height': (thumb_total_size / 2) + 'px',\n            'overflow': 'hidden'\n        },\n        '#thumbborder': {\n            'position': 'absolute',\n            'width': thumb_total_size + 'px',\n            'height': thumb_total_size + 'px',\n            'border-radius': thumb_total_size + 'px',\n            'background-color': this.style_vals.bg_actions,\n            'opacity': '0.5'\n        },\n        '#thumbnail': {\n            'position': 'absolute',\n            'top': '0px',\n            'left': (MixpanelNotification.NOTIF_WIDTH / 2 - MixpanelNotification.THUMB_OFFSET) + 'px',\n            'width': MixpanelNotification.THUMB_IMG_SIZE + 'px',\n            'height': MixpanelNotification.THUMB_IMG_SIZE + 'px',\n            'overflow': 'hidden',\n            'z-index': '100',\n            'border-radius': MixpanelNotification.THUMB_IMG_SIZE + 'px'\n        },\n        '#mini': {\n            'position': 'absolute',\n            'right': '20px',\n            'top': MixpanelNotification.NOTIF_TOP + 'px',\n            'width': this.notif_width + 'px',\n            'height': MixpanelNotification.NOTIF_HEIGHT_MINI * 2 + 'px',\n            'margin-top': 20 - MixpanelNotification.NOTIF_HEIGHT_MINI + 'px',\n            'backface-visibility': 'hidden',\n            'opacity': '0.0',\n            'transform': 'rotateX(90deg)',\n            'transition': 'opacity 0.3s, transform 0.3s, right 0.3s'\n        },\n        '#mini.visible': {\n            'opacity': '1.0',\n            'transform': 'rotateX(0deg)'\n        },\n        '#mini.exiting': {\n            'opacity': '0.0',\n            'right': '-150px'\n        },\n        '#mainbox': {\n            'border-radius': '4px',\n            'box-shadow': shadow,\n            'text-align': 'center',\n            'background-color': this.style_vals.bg,\n            'font-size': '14px',\n            'color': this.style_vals.text_main\n        },\n        '#mini #mainbox': {\n            'height': MixpanelNotification.NOTIF_HEIGHT_MINI + 'px',\n            'margin-top': MixpanelNotification.NOTIF_HEIGHT_MINI + 'px',\n            'border-radius': '3px',\n            'transition': 'background-color ' + anim_seconds\n        },\n        '#mini-border': {\n            'height': (MixpanelNotification.NOTIF_HEIGHT_MINI + 6) + 'px',\n            'width': (MixpanelNotification.NOTIF_WIDTH_MINI + 6) + 'px',\n            'position': 'absolute',\n            'top': '-3px',\n            'left': '-3px',\n            'margin-top': MixpanelNotification.NOTIF_HEIGHT_MINI + 'px',\n            'border-radius': '6px',\n            'opacity': '0.25',\n            'background-color': '#fff',\n            'z-index': '-1',\n            'box-shadow': mini_shadow\n        },\n        '#mini-icon': {\n            'position': 'relative',\n            'display': 'inline-block',\n            'width': '75px',\n            'height': MixpanelNotification.NOTIF_HEIGHT_MINI + 'px',\n            'border-radius': '3px 0 0 3px',\n            'background-color': this.style_vals.bg_actions,\n            'background': 'linear-gradient(135deg, ' + this.style_vals.bg_light + ' 0%, ' + this.style_vals.bg_actions + ' 100%)',\n            'transition': 'background-color ' + anim_seconds\n        },\n        '#mini:hover #mini-icon': {\n            'background-color': this.style_vals.mini_hover\n        },\n        '#mini:hover #mainbox': {\n            'background-color': this.style_vals.mini_hover\n        },\n        '#mini-icon-img': {\n            'position': 'absolute',\n            'background-image': 'url(' + this.thumb_image_url + ')',\n            'width': '48px',\n            'height': '48px',\n            'top': '20px',\n            'left': '12px'\n        },\n        '#content': {\n            'padding': '30px 20px 0px 20px'\n        },\n        '#mini-content': {\n            'text-align': 'left',\n            'height': MixpanelNotification.NOTIF_HEIGHT_MINI + 'px',\n            'cursor': 'pointer'\n        },\n        '#img': {\n            'width': '328px',\n            'margin-top': '30px',\n            'border-radius': '5px'\n        },\n        '#title': {\n            'max-height': '600px',\n            'overflow': 'hidden',\n            'word-wrap': 'break-word',\n            'padding': '25px 0px 20px 0px',\n            'font-size': '19px',\n            'font-weight': 'bold',\n            'color': this.style_vals.text_title\n        },\n        '#body': {\n            'max-height': '600px',\n            'margin-bottom': '25px',\n            'overflow': 'hidden',\n            'word-wrap': 'break-word',\n            'line-height': '21px',\n            'font-size': '15px',\n            'font-weight': 'normal',\n            'text-align': 'left'\n        },\n        '#mini #body': {\n            'display': 'inline-block',\n            'max-width': '250px',\n            'margin': '0 0 0 30px',\n            'height': MixpanelNotification.NOTIF_HEIGHT_MINI + 'px',\n            'font-size': '16px',\n            'letter-spacing': '0.8px',\n            'color': this.style_vals.text_title\n        },\n        '#mini #body-text': {\n            'display': 'table',\n            'height': MixpanelNotification.NOTIF_HEIGHT_MINI + 'px'\n        },\n        '#mini #body-text div': {\n            'display': 'table-cell',\n            'vertical-align': 'middle'\n        },\n        '#tagline': {\n            'margin-bottom': '15px',\n            'font-size': '10px',\n            'font-weight': '600',\n            'letter-spacing': '0.8px',\n            'color': '#ccd7e0',\n            'text-align': 'left'\n        },\n        '#tagline a': {\n            'color': this.style_vals.text_tagline,\n            'transition': 'color ' + anim_seconds\n        },\n        '#tagline a:hover': {\n            'color': this.style_vals.text_hover\n        },\n        '#cancel': {\n            'position': 'absolute',\n            'right': '0',\n            'width': '8px',\n            'height': '8px',\n            'padding': '10px',\n            'border-radius': '20px',\n            'margin': '12px 12px 0 0',\n            'box-sizing': 'content-box',\n            'cursor': 'pointer',\n            'transition': 'background-color ' + anim_seconds\n        },\n        '#mini #cancel': {\n            'margin': '7px 7px 0 0'\n        },\n        '#cancel-icon': {\n            'width': '8px',\n            'height': '8px',\n            'overflow': 'hidden',\n            'background-image': 'url(' + this.cdn_host + '/site_media/images/icons/notifications/cancel-x.png)',\n            'opacity': this.style_vals.cancel_opacity\n        },\n        '#cancel:hover': {\n            'background-color': this.style_vals.bg_hover\n        },\n        '#button': {\n            'display': 'block',\n            'height': '60px',\n            'line-height': '60px',\n            'text-align': 'center',\n            'background-color': this.style_vals.bg_actions,\n            'border-radius': '0 0 4px 4px',\n            'overflow': 'hidden',\n            'cursor': 'pointer',\n            'transition': 'background-color ' + anim_seconds\n        },\n        '#button-close': {\n            'display': 'inline-block',\n            'width': '9px',\n            'height': '60px',\n            'margin-right': '8px',\n            'vertical-align': 'top',\n            'background-image': 'url(' + this.cdn_host + '/site_media/images/icons/notifications/close-x-' + this.style + '.png)',\n            'background-repeat': 'no-repeat',\n            'background-position': '0px 25px'\n        },\n        '#button-play': {\n            'display': 'inline-block',\n            'width': '30px',\n            'height': '60px',\n            'margin-left': '15px',\n            'background-image': 'url(' + this.cdn_host + '/site_media/images/icons/notifications/play-' + this.style + '-small.png)',\n            'background-repeat': 'no-repeat',\n            'background-position': '0px 15px'\n        },\n        'a#button-link': {\n            'display': 'inline-block',\n            'vertical-align': 'top',\n            'text-align': 'center',\n            'font-size': '17px',\n            'font-weight': 'bold',\n            'overflow': 'hidden',\n            'word-wrap': 'break-word',\n            'color': this.style_vals.text_title,\n            'transition': 'color ' + anim_seconds\n        },\n        '#button:hover': {\n            'background-color': this.style_vals.bg_hover,\n            'color': this.style_vals.text_hover\n        },\n        '#button:hover a': {\n            'color': this.style_vals.text_hover\n        },\n\n        '#video-noflip': {\n            'position': 'relative',\n            'top': (-this.video_height * 2) + 'px'\n        },\n        '#video-flip': {\n            'backface-visibility': 'hidden',\n            'transform': 'rotateY(180deg)'\n        },\n        '#video': {\n            'position': 'absolute',\n            'width': (this.video_width - 1) + 'px',\n            'height': this.video_height + 'px',\n            'top': MixpanelNotification.NOTIF_TOP + 'px',\n            'margin-top': '100px',\n            'left': '50%',\n            'margin-left': Math.round(-this.video_width / 2) + 'px',\n            'overflow': 'hidden',\n            'border-radius': '5px',\n            'box-shadow': video_shadow,\n            'transform': 'translateZ(1px)', // webkit rendering bug http://stackoverflow.com/questions/18167981/clickable-link-area-unexpectedly-smaller-after-css-transform\n            'transition': 'opacity ' + anim_seconds + ', top ' + anim_seconds\n        },\n        '#video.exiting': {\n            'opacity': '0.0',\n            'top': this.video_height + 'px'\n        },\n        '#video-holder': {\n            'position': 'absolute',\n            'width': (this.video_width - 1) + 'px',\n            'height': this.video_height + 'px',\n            'overflow': 'hidden',\n            'border-radius': '5px'\n        },\n        '#video-frame': {\n            'margin-left': '-1px',\n            'width': this.video_width + 'px'\n        },\n        '#video-controls': {\n            'opacity': '0',\n            'transition': 'opacity 0.5s'\n        },\n        '#video:hover #video-controls': {\n            'opacity': '1.0'\n        },\n        '#video .video-progress-el': {\n            'position': 'absolute',\n            'bottom': '0',\n            'height': '25px',\n            'border-radius': '0 0 0 5px'\n        },\n        '#video-progress': {\n            'width': '90%'\n        },\n        '#video-progress-total': {\n            'width': '100%',\n            'background-color': this.style_vals.bg,\n            'opacity': '0.7'\n        },\n        '#video-elapsed': {\n            'width': '0',\n            'background-color': '#6cb6f5',\n            'opacity': '0.9'\n        },\n        '#video #video-time': {\n            'width': '10%',\n            'right': '0',\n            'font-size': '11px',\n            'line-height': '25px',\n            'color': this.style_vals.text_main,\n            'background-color': '#666',\n            'border-radius': '0 0 5px 0'\n        }\n    };\n\n    // IE hacks\n    if (this._browser_lte('ie', 8)) {\n        _.extend(notif_styles, {\n            '* html #overlay': {\n                'position': 'absolute'\n            },\n            '* html #bg': {\n                'position': 'absolute'\n            },\n            'html, body': {\n                'height': '100%'\n            }\n        });\n    }\n    if (this._browser_lte('ie', 7)) {\n        _.extend(notif_styles, {\n            '#mini #body': {\n                'display': 'inline',\n                'zoom': '1',\n                'border': '1px solid ' + this.style_vals.bg_hover\n            },\n            '#mini #body-text': {\n                'padding': '20px'\n            },\n            '#mini #mini-icon': {\n                'display': 'none'\n            }\n        });\n    }\n\n    // add vendor-prefixed style rules\n    var VENDOR_STYLES = [\n            'backface-visibility', 'border-radius', 'box-shadow', 'opacity',\n            'perspective', 'transform', 'transform-style', 'transition'\n        ],\n        VENDOR_PREFIXES = ['khtml', 'moz', 'ms', 'o', 'webkit'];\n    for (var selector in notif_styles) {\n        for (var si = 0; si < VENDOR_STYLES.length; si++) {\n            var prop = VENDOR_STYLES[si];\n            if (prop in notif_styles[selector]) {\n                var val = notif_styles[selector][prop];\n                for (var pi = 0; pi < VENDOR_PREFIXES.length; pi++) {\n                    notif_styles[selector]['-' + VENDOR_PREFIXES[pi] + '-' + prop] = val;\n                }\n            }\n        }\n    }\n\n    var inject_styles = function(styles, media_queries) {\n        var create_style_text = function(style_defs) {\n            var st = '';\n            for (var selector in style_defs) {\n                var mp_selector = selector\n                    .replace(/#/g, '#' + MixpanelNotification.MARKUP_PREFIX + '-')\n                    .replace(/\\./g, '.' + MixpanelNotification.MARKUP_PREFIX + '-');\n                st += '\\n' + mp_selector + ' {';\n                var props = style_defs[selector];\n                for (var k in props) {\n                    st += k + ':' + props[k] + ';';\n                }\n                st += '}';\n            }\n            return st;\n        };\n        var create_media_query_text = function(mq_defs) {\n            var mqt = '';\n            for (var mq in mq_defs) {\n                mqt += '\\n' + mq + ' {' + create_style_text(mq_defs[mq]) + '\\n}';\n            }\n            return mqt;\n        };\n\n        var style_text = create_style_text(styles) + create_media_query_text(media_queries),\n            head_el = document.head || document.getElementsByTagName('head')[0] || document.documentElement,\n            style_el = document.createElement('style');\n        head_el.appendChild(style_el);\n        style_el.setAttribute('type', 'text/css');\n        if (style_el.styleSheet) { // IE\n            style_el.styleSheet.cssText = style_text;\n        } else {\n            style_el.textContent = style_text;\n        }\n    };\n    inject_styles(notif_styles, notif_media_queries);\n};\n\nMixpanelNotification.prototype._init_video = _.safewrap(function() {\n    if (!this.video_url) {\n        return;\n    }\n    var self = this;\n\n    // Youtube iframe API compatibility\n    self.yt_custom = 'postMessage' in window;\n\n    self.dest_url = self.video_url;\n    var youtube_match = self.video_url.match(\n            // http://stackoverflow.com/questions/2936467/parse-youtube-video-id-using-preg-match\n            /(?:youtube(?:-nocookie)?\\.com\\/(?:[^/]+\\/.+\\/|(?:v|e(?:mbed)?)\\/|.*[?&]v=)|youtu\\.be\\/)([^\"&?/ ]{11})/i\n        ),\n        vimeo_match = self.video_url.match(\n            /vimeo\\.com\\/.*?(\\d+)/i\n        );\n    if (youtube_match) {\n        self.show_video = true;\n        self.youtube_video = youtube_match[1];\n\n        if (self.yt_custom) {\n            window['onYouTubeIframeAPIReady'] = function() {\n                if (self._get_el('video-frame')) {\n                    self._yt_video_ready();\n                }\n            };\n\n            // load Youtube iframe API; see https://developers.google.com/youtube/iframe_api_reference\n            var tag = document.createElement('script');\n            tag.src = self.resource_protocol + 'www.youtube.com/iframe_api';\n            var firstScriptTag = document.getElementsByTagName('script')[0];\n            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n        }\n    } else if (vimeo_match) {\n        self.show_video = true;\n        self.vimeo_video = vimeo_match[1];\n    }\n\n    // IE <= 7, FF <= 3: fall through to video link rather than embedded player\n    if (self._browser_lte('ie', 7) || self._browser_lte('firefox', 3)) {\n        self.show_video = false;\n        self.clickthrough = true;\n    }\n});\n\nMixpanelNotification.prototype._mark_as_shown = _.safewrap(function() {\n    // click on background to dismiss\n    var self = this;\n    _.register_event(self._get_el('bg'), 'click', function() {\n        self.dismiss();\n    });\n\n    var get_style = function(el, style_name) {\n        var styles = {};\n        if (document.defaultView && document.defaultView.getComputedStyle) {\n            styles = document.defaultView.getComputedStyle(el, null); // FF3 requires both args\n        } else if (el.currentStyle) { // IE\n            styles = el.currentStyle;\n        }\n        return styles[style_name];\n    };\n\n    if (this.campaign_id) {\n        var notif_el = this._get_el('overlay');\n        if (notif_el && get_style(notif_el, 'visibility') !== 'hidden' && get_style(notif_el, 'display') !== 'none') {\n            this._mark_delivery();\n        }\n    }\n});\n\nMixpanelNotification.prototype._mark_delivery = _.safewrap(function(extra_props) {\n    if (!this.marked_as_shown) {\n        this.marked_as_shown = true;\n\n        if (this.campaign_id) {\n            // mark notification shown (local cache)\n            this._get_shown_campaigns()[this.campaign_id] = 1 * new Date();\n            this.persistence.save();\n        }\n\n        // track delivery\n        this._track_event('$campaign_delivery', extra_props);\n\n        // mark notification shown (mixpanel property)\n        this.mixpanel['people']['append']({\n            '$campaigns': this.campaign_id,\n            '$notifications': {\n                'campaign_id': this.campaign_id,\n                'message_id':  this.message_id,\n                'type':        'web',\n                'time':        new Date()\n            }\n        });\n    }\n});\n\nMixpanelNotification.prototype._preload_images = function(all_loaded_cb) {\n    var self = this;\n    if (this.imgs_to_preload.length === 0) {\n        all_loaded_cb();\n        return;\n    }\n\n    var preloaded_imgs = 0;\n    var img_objs = [];\n    var onload = function() {\n        preloaded_imgs++;\n        if (preloaded_imgs === self.imgs_to_preload.length && all_loaded_cb) {\n            all_loaded_cb();\n            all_loaded_cb = null;\n        }\n    };\n    for (var i = 0; i < this.imgs_to_preload.length; i++) {\n        var img = new Image();\n        img.onload = onload;\n        img.src = this.imgs_to_preload[i];\n        if (img.complete) {\n            onload();\n        }\n        img_objs.push(img);\n    }\n\n    // IE6/7 doesn't fire onload reliably\n    if (this._browser_lte('ie', 7)) {\n        setTimeout(function() {\n            var imgs_loaded = true;\n            for (i = 0; i < img_objs.length; i++) {\n                if (!img_objs[i].complete) {\n                    imgs_loaded = false;\n                }\n            }\n            if (imgs_loaded && all_loaded_cb) {\n                all_loaded_cb();\n                all_loaded_cb = null;\n            }\n        }, 500);\n    }\n};\n\nMixpanelNotification.prototype._remove_notification_el = _.safewrap(function() {\n    window.clearInterval(this._video_progress_checker);\n    this.notification_el.style.visibility = 'hidden';\n    this.body_el.removeChild(this.notification_el);\n});\n\nMixpanelNotification.prototype._set_client_config = function() {\n    var get_browser_version = function(browser_ex) {\n        var match = navigator.userAgent.match(browser_ex);\n        return match && match[1];\n    };\n    this.browser_versions = {};\n    this.browser_versions['chrome']  = get_browser_version(/Chrome\\/(\\d+)/);\n    this.browser_versions['firefox'] = get_browser_version(/Firefox\\/(\\d+)/);\n    this.browser_versions['ie']      = get_browser_version(/MSIE (\\d+).+/);\n    if (!this.browser_versions['ie'] && !(window.ActiveXObject) && 'ActiveXObject' in window) {\n        this.browser_versions['ie'] = 11;\n    }\n\n    this.body_el = document.body || document.getElementsByTagName('body')[0];\n    if (this.body_el) {\n        this.doc_width = Math.max(\n            this.body_el.scrollWidth, document.documentElement.scrollWidth,\n            this.body_el.offsetWidth, document.documentElement.offsetWidth,\n            this.body_el.clientWidth, document.documentElement.clientWidth\n        );\n        this.doc_height = Math.max(\n            this.body_el.scrollHeight, document.documentElement.scrollHeight,\n            this.body_el.offsetHeight, document.documentElement.offsetHeight,\n            this.body_el.clientHeight, document.documentElement.clientHeight\n        );\n    }\n\n    // detect CSS compatibility\n    var ie_ver = this.browser_versions['ie'];\n    var sample_styles = document.createElement('div').style,\n        is_css_compatible = function(rule) {\n            if (rule in sample_styles) {\n                return true;\n            }\n            if (!ie_ver) {\n                rule = rule[0].toUpperCase() + rule.slice(1);\n                var props = ['O' + rule, 'Webkit' + rule, 'Moz' + rule];\n                for (var i = 0; i < props.length; i++) {\n                    if (props[i] in sample_styles) {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        };\n    this.use_transitions = this.body_el &&\n        is_css_compatible('transition') &&\n        is_css_compatible('transform');\n    this.flip_animate = (this.browser_versions['chrome'] >= 33 || this.browser_versions['firefox'] >= 15) &&\n        this.body_el &&\n        is_css_compatible('backfaceVisibility') &&\n        is_css_compatible('perspective') &&\n        is_css_compatible('transform');\n};\n\nMixpanelNotification.prototype._switch_to_video = _.safewrap(function() {\n    var self = this,\n        anims = [\n            {\n                el:    self._get_notification_display_el(),\n                attr:  'opacity',\n                start: 1.0,\n                goal:  0.0\n            },\n            {\n                el:    self._get_notification_display_el(),\n                attr:  'top',\n                start: MixpanelNotification.NOTIF_TOP,\n                goal:  -500\n            },\n            {\n                el:    self._get_el('video-noflip'),\n                attr:  'opacity',\n                start: 0.0,\n                goal:  1.0\n            },\n            {\n                el:    self._get_el('video-noflip'),\n                attr:  'top',\n                start: -self.video_height * 2,\n                goal:  0\n            }\n        ];\n\n    if (self.mini) {\n        var bg = self._get_el('bg'),\n            overlay = self._get_el('overlay');\n        bg.style.width = '100%';\n        bg.style.height = '100%';\n        overlay.style.width = '100%';\n\n        self._add_class(self._get_notification_display_el(), 'exiting');\n        self._add_class(bg, 'visible');\n\n        anims.push({\n            el:    self._get_el('bg'),\n            attr:  'opacity',\n            start: 0.0,\n            goal:  MixpanelNotification.BG_OPACITY\n        });\n    }\n\n    var video_el = self._get_el('video-holder');\n    video_el.innerHTML = self.video_iframe;\n\n    var video_ready = function() {\n        if (window['YT'] && window['YT']['loaded']) {\n            self._yt_video_ready();\n        }\n        self.showing_video = true;\n        self._get_notification_display_el().style.visibility = 'hidden';\n    };\n    if (self.flip_animate) {\n        self._add_class('flipper', 'flipped');\n        setTimeout(video_ready, MixpanelNotification.ANIM_TIME);\n    } else {\n        self._animate_els(anims, MixpanelNotification.ANIM_TIME, video_ready);\n    }\n});\n\nMixpanelNotification.prototype._track_event = function(event_name, properties, cb) {\n    if (this.campaign_id) {\n        properties = properties || {};\n        properties = _.extend(properties, {\n            'campaign_id':     this.campaign_id,\n            'message_id':      this.message_id,\n            'message_type':    'web_inapp',\n            'message_subtype': this.notif_type\n        });\n        this.mixpanel['track'](event_name, properties, cb);\n    } else if (cb) {\n        cb.call();\n    }\n};\n\nMixpanelNotification.prototype._yt_video_ready = _.safewrap(function() {\n    var self = this;\n    if (self.video_inited) {\n        return;\n    }\n    self.video_inited = true;\n\n    var progress_bar  = self._get_el('video-elapsed'),\n        progress_time = self._get_el('video-time'),\n        progress_el   = self._get_el('video-progress');\n\n    new window['YT']['Player'](MixpanelNotification.MARKUP_PREFIX + '-video-frame', {\n        'events': {\n            'onReady': function(event) {\n                var ytplayer = event['target'],\n                    video_duration = ytplayer['getDuration'](),\n                    pad = function(i) {\n                        return ('00' + i).slice(-2);\n                    },\n                    update_video_time = function(current_time) {\n                        var secs = Math.round(video_duration - current_time),\n                            mins = Math.floor(secs / 60),\n                            hours = Math.floor(mins / 60);\n                        secs -= mins * 60;\n                        mins -= hours * 60;\n                        progress_time.innerHTML = '-' + (hours ? hours + ':' : '') + pad(mins) + ':' + pad(secs);\n                    };\n                update_video_time(0);\n                self._video_progress_checker = window.setInterval(function() {\n                    var current_time = ytplayer['getCurrentTime']();\n                    progress_bar.style.width = (current_time / video_duration * 100) + '%';\n                    update_video_time(current_time);\n                }, 250);\n                _.register_event(progress_el, 'click', function(e) {\n                    var clickx = Math.max(0, e.pageX - progress_el.getBoundingClientRect().left);\n                    ytplayer['seekTo'](video_duration * clickx / progress_el.clientWidth, true);\n                });\n            }\n        }\n    });\n});\n\n/**\n * Mixpanel People Object\n * @constructor\n */\nvar MixpanelPeople = function() {};\n\n_.extend(MixpanelPeople.prototype, apiActions);\n\nMixpanelPeople.prototype._init = function(mixpanel_instance) {\n    this._mixpanel = mixpanel_instance;\n};\n\n/*\n* Set properties on a user record.\n*\n* ### Usage:\n*\n*     mixpanel.people.set('gender', 'm');\n*\n*     // or set multiple properties at once\n*     mixpanel.people.set({\n*         'Company': 'Acme',\n*         'Plan': 'Premium',\n*         'Upgrade date': new Date()\n*     });\n*     // properties can be strings, integers, dates, or lists\n*\n* @param {Object|String} prop If a string, this is the name of the property. If an object, this is an associative array of names and values.\n* @param {*} [to] A value to set on the given property name\n* @param {Function} [callback] If provided, the callback will be called after tracking the event.\n*/\nMixpanelPeople.prototype.set = addOptOutCheckMixpanelPeople(function(prop, to, callback) {\n    var data = this.set_action(prop, to);\n    if (_.isObject(prop)) {\n        callback = to;\n    }\n    // make sure that the referrer info has been updated and saved\n    if (this._get_config('save_referrer')) {\n        this._mixpanel['persistence'].update_referrer_info(document.referrer);\n    }\n\n    // update $set object with default people properties\n    data[SET_ACTION] = _.extend(\n        {},\n        _.info.people_properties(),\n        this._mixpanel['persistence'].get_referrer_info(),\n        data[SET_ACTION]\n    );\n    return this._send_request(data, callback);\n});\n\n/*\n* Set properties on a user record, only if they do not yet exist.\n* This will not overwrite previous people property values, unlike\n* people.set().\n*\n* ### Usage:\n*\n*     mixpanel.people.set_once('First Login Date', new Date());\n*\n*     // or set multiple properties at once\n*     mixpanel.people.set_once({\n*         'First Login Date': new Date(),\n*         'Starting Plan': 'Premium'\n*     });\n*\n*     // properties can be strings, integers or dates\n*\n* @param {Object|String} prop If a string, this is the name of the property. If an object, this is an associative array of names and values.\n* @param {*} [to] A value to set on the given property name\n* @param {Function} [callback] If provided, the callback will be called after tracking the event.\n*/\nMixpanelPeople.prototype.set_once = addOptOutCheckMixpanelPeople(function(prop, to, callback) {\n    var data = this.set_once_action(prop, to);\n    if (_.isObject(prop)) {\n        callback = to;\n    }\n    return this._send_request(data, callback);\n});\n\n/*\n* Unset properties on a user record (permanently removes the properties and their values from a profile).\n*\n* ### Usage:\n*\n*     mixpanel.people.unset('gender');\n*\n*     // or unset multiple properties at once\n*     mixpanel.people.unset(['gender', 'Company']);\n*\n* @param {Array|String} prop If a string, this is the name of the property. If an array, this is a list of property names.\n* @param {Function} [callback] If provided, the callback will be called after tracking the event.\n*/\nMixpanelPeople.prototype.unset = addOptOutCheckMixpanelPeople(function(prop, callback) {\n    var data = this.unset_action(prop);\n    return this._send_request(data, callback);\n});\n\n/*\n* Increment/decrement numeric people analytics properties.\n*\n* ### Usage:\n*\n*     mixpanel.people.increment('page_views', 1);\n*\n*     // or, for convenience, if you're just incrementing a counter by\n*     // 1, you can simply do\n*     mixpanel.people.increment('page_views');\n*\n*     // to decrement a counter, pass a negative number\n*     mixpanel.people.increment('credits_left', -1);\n*\n*     // like mixpanel.people.set(), you can increment multiple\n*     // properties at once:\n*     mixpanel.people.increment({\n*         counter1: 1,\n*         counter2: 6\n*     });\n*\n* @param {Object|String} prop If a string, this is the name of the property. If an object, this is an associative array of names and numeric values.\n* @param {Number} [by] An amount to increment the given property\n* @param {Function} [callback] If provided, the callback will be called after tracking the event.\n*/\nMixpanelPeople.prototype.increment = addOptOutCheckMixpanelPeople(function(prop, by, callback) {\n    var data = {};\n    var $add = {};\n    if (_.isObject(prop)) {\n        _.each(prop, function(v, k) {\n            if (!this._is_reserved_property(k)) {\n                if (isNaN(parseFloat(v))) {\n                    console$1.error('Invalid increment value passed to mixpanel.people.increment - must be a number');\n                    return;\n                } else {\n                    $add[k] = v;\n                }\n            }\n        }, this);\n        callback = by;\n    } else {\n        // convenience: mixpanel.people.increment('property'); will\n        // increment 'property' by 1\n        if (_.isUndefined(by)) {\n            by = 1;\n        }\n        $add[prop] = by;\n    }\n    data[ADD_ACTION] = $add;\n\n    return this._send_request(data, callback);\n});\n\n/*\n* Append a value to a list-valued people analytics property.\n*\n* ### Usage:\n*\n*     // append a value to a list, creating it if needed\n*     mixpanel.people.append('pages_visited', 'homepage');\n*\n*     // like mixpanel.people.set(), you can append multiple\n*     // properties at once:\n*     mixpanel.people.append({\n*         list1: 'bob',\n*         list2: 123\n*     });\n*\n* @param {Object|String} list_name If a string, this is the name of the property. If an object, this is an associative array of names and values.\n* @param {*} [value] value An item to append to the list\n* @param {Function} [callback] If provided, the callback will be called after tracking the event.\n*/\nMixpanelPeople.prototype.append = addOptOutCheckMixpanelPeople(function(list_name, value, callback) {\n    if (_.isObject(list_name)) {\n        callback = value;\n    }\n    var data = this.append_action(list_name, value);\n    return this._send_request(data, callback);\n});\n\n/*\n* Remove a value from a list-valued people analytics property.\n*\n* ### Usage:\n*\n*     mixpanel.people.remove('School', 'UCB');\n*\n* @param {Object|String} list_name If a string, this is the name of the property. If an object, this is an associative array of names and values.\n* @param {*} [value] value Item to remove from the list\n* @param {Function} [callback] If provided, the callback will be called after tracking the event.\n*/\nMixpanelPeople.prototype.remove = addOptOutCheckMixpanelPeople(function(list_name, value, callback) {\n    if (_.isObject(list_name)) {\n        callback = value;\n    }\n    var data = this.remove_action(list_name, value);\n    return this._send_request(data, callback);\n});\n\n/*\n* Merge a given list with a list-valued people analytics property,\n* excluding duplicate values.\n*\n* ### Usage:\n*\n*     // merge a value to a list, creating it if needed\n*     mixpanel.people.union('pages_visited', 'homepage');\n*\n*     // like mixpanel.people.set(), you can append multiple\n*     // properties at once:\n*     mixpanel.people.union({\n*         list1: 'bob',\n*         list2: 123\n*     });\n*\n*     // like mixpanel.people.append(), you can append multiple\n*     // values to the same list:\n*     mixpanel.people.union({\n*         list1: ['bob', 'billy']\n*     });\n*\n* @param {Object|String} list_name If a string, this is the name of the property. If an object, this is an associative array of names and values.\n* @param {*} [value] Value / values to merge with the given property\n* @param {Function} [callback] If provided, the callback will be called after tracking the event.\n*/\nMixpanelPeople.prototype.union = addOptOutCheckMixpanelPeople(function(list_name, values, callback) {\n    if (_.isObject(list_name)) {\n        callback = values;\n    }\n    var data = this.union_action(list_name, values);\n    return this._send_request(data, callback);\n});\n\n/*\n* Record that you have charged the current user a certain amount\n* of money. Charges recorded with track_charge() will appear in the\n* Mixpanel revenue report.\n*\n* ### Usage:\n*\n*     // charge a user $50\n*     mixpanel.people.track_charge(50);\n*\n*     // charge a user $30.50 on the 2nd of january\n*     mixpanel.people.track_charge(30.50, {\n*         '$time': new Date('jan 1 2012')\n*     });\n*\n* @param {Number} amount The amount of money charged to the current user\n* @param {Object} [properties] An associative array of properties associated with the charge\n* @param {Function} [callback] If provided, the callback will be called when the server responds\n*/\nMixpanelPeople.prototype.track_charge = addOptOutCheckMixpanelPeople(function(amount, properties, callback) {\n    if (!_.isNumber(amount)) {\n        amount = parseFloat(amount);\n        if (isNaN(amount)) {\n            console$1.error('Invalid value passed to mixpanel.people.track_charge - must be a number');\n            return;\n        }\n    }\n\n    return this.append('$transactions', _.extend({\n        '$amount': amount\n    }, properties), callback);\n});\n\n/*\n* Permanently clear all revenue report transactions from the\n* current user's people analytics profile.\n*\n* ### Usage:\n*\n*     mixpanel.people.clear_charges();\n*\n* @param {Function} [callback] If provided, the callback will be called after tracking the event.\n*/\nMixpanelPeople.prototype.clear_charges = function(callback) {\n    return this.set('$transactions', [], callback);\n};\n\n/*\n* Permanently deletes the current people analytics profile from\n* Mixpanel (using the current distinct_id).\n*\n* ### Usage:\n*\n*     // remove the all data you have stored about the current user\n*     mixpanel.people.delete_user();\n*\n*/\nMixpanelPeople.prototype.delete_user = function() {\n    if (!this._identify_called()) {\n        console$1.error('mixpanel.people.delete_user() requires you to call identify() first');\n        return;\n    }\n    var data = {'$delete': this._mixpanel.get_distinct_id()};\n    return this._send_request(data);\n};\n\nMixpanelPeople.prototype.toString = function() {\n    return this._mixpanel.toString() + '.people';\n};\n\nMixpanelPeople.prototype._send_request = function(data, callback) {\n    data['$token'] = this._get_config('token');\n    data['$distinct_id'] = this._mixpanel.get_distinct_id();\n    var device_id = this._mixpanel.get_property('$device_id');\n    var user_id = this._mixpanel.get_property('$user_id');\n    var had_persisted_distinct_id = this._mixpanel.get_property('$had_persisted_distinct_id');\n    if (device_id) {\n        data['$device_id'] = device_id;\n    }\n    if (user_id) {\n        data['$user_id'] = user_id;\n    }\n    if (had_persisted_distinct_id) {\n        data['$had_persisted_distinct_id'] = had_persisted_distinct_id;\n    }\n\n    var date_encoded_data = _.encodeDates(data);\n    var truncated_data = _.truncate(date_encoded_data, 255);\n\n    if (!this._identify_called()) {\n        this._enqueue(data);\n        if (!_.isUndefined(callback)) {\n            if (this._get_config('verbose')) {\n                callback({status: -1, error: null});\n            } else {\n                callback(-1);\n            }\n        }\n        return truncated_data;\n    }\n\n    return this._mixpanel._track_or_batch({\n        truncated_data: truncated_data,\n        endpoint: this._get_config('api_host') + '/engage/',\n        batcher: this._mixpanel.request_batchers.people\n    }, callback);\n};\n\nMixpanelPeople.prototype._get_config = function(conf_var) {\n    return this._mixpanel.get_config(conf_var);\n};\n\nMixpanelPeople.prototype._identify_called = function() {\n    return this._mixpanel._flags.identify_called === true;\n};\n\n// Queue up engage operations if identify hasn't been called yet.\nMixpanelPeople.prototype._enqueue = function(data) {\n    if (SET_ACTION in data) {\n        this._mixpanel['persistence']._add_to_people_queue(SET_ACTION, data);\n    } else if (SET_ONCE_ACTION in data) {\n        this._mixpanel['persistence']._add_to_people_queue(SET_ONCE_ACTION, data);\n    } else if (UNSET_ACTION in data) {\n        this._mixpanel['persistence']._add_to_people_queue(UNSET_ACTION, data);\n    } else if (ADD_ACTION in data) {\n        this._mixpanel['persistence']._add_to_people_queue(ADD_ACTION, data);\n    } else if (APPEND_ACTION in data) {\n        this._mixpanel['persistence']._add_to_people_queue(APPEND_ACTION, data);\n    } else if (REMOVE_ACTION in data) {\n        this._mixpanel['persistence']._add_to_people_queue(REMOVE_ACTION, data);\n    } else if (UNION_ACTION in data) {\n        this._mixpanel['persistence']._add_to_people_queue(UNION_ACTION, data);\n    } else {\n        console$1.error('Invalid call to _enqueue():', data);\n    }\n};\n\nMixpanelPeople.prototype._flush_one_queue = function(action, action_method, callback, queue_to_params_fn) {\n    var _this = this;\n    var queued_data = _.extend({}, this._mixpanel['persistence']._get_queue(action));\n    var action_params = queued_data;\n\n    if (!_.isUndefined(queued_data) && _.isObject(queued_data) && !_.isEmptyObject(queued_data)) {\n        _this._mixpanel['persistence']._pop_from_people_queue(action, queued_data);\n        if (queue_to_params_fn) {\n            action_params = queue_to_params_fn(queued_data);\n        }\n        action_method.call(_this, action_params, function(response, data) {\n            // on bad response, we want to add it back to the queue\n            if (response === 0) {\n                _this._mixpanel['persistence']._add_to_people_queue(action, queued_data);\n            }\n            if (!_.isUndefined(callback)) {\n                callback(response, data);\n            }\n        });\n    }\n};\n\n// Flush queued engage operations - order does not matter,\n// and there are network level race conditions anyway\nMixpanelPeople.prototype._flush = function(\n    _set_callback, _add_callback, _append_callback, _set_once_callback, _union_callback, _unset_callback, _remove_callback\n) {\n    var _this = this;\n    var $append_queue = this._mixpanel['persistence']._get_queue(APPEND_ACTION);\n    var $remove_queue = this._mixpanel['persistence']._get_queue(REMOVE_ACTION);\n\n    this._flush_one_queue(SET_ACTION, this.set, _set_callback);\n    this._flush_one_queue(SET_ONCE_ACTION, this.set_once, _set_once_callback);\n    this._flush_one_queue(UNSET_ACTION, this.unset, _unset_callback, function(queue) { return _.keys(queue); });\n    this._flush_one_queue(ADD_ACTION, this.increment, _add_callback);\n    this._flush_one_queue(UNION_ACTION, this.union, _union_callback);\n\n    // we have to fire off each $append individually since there is\n    // no concat method server side\n    if (!_.isUndefined($append_queue) && _.isArray($append_queue) && $append_queue.length) {\n        var $append_item;\n        var append_callback = function(response, data) {\n            if (response === 0) {\n                _this._mixpanel['persistence']._add_to_people_queue(APPEND_ACTION, $append_item);\n            }\n            if (!_.isUndefined(_append_callback)) {\n                _append_callback(response, data);\n            }\n        };\n        for (var i = $append_queue.length - 1; i >= 0; i--) {\n            $append_item = $append_queue.pop();\n            if (!_.isEmptyObject($append_item)) {\n                _this.append($append_item, append_callback);\n            }\n        }\n        // Save the shortened append queue\n        _this._mixpanel['persistence'].save();\n    }\n\n    // same for $remove\n    if (!_.isUndefined($remove_queue) && _.isArray($remove_queue) && $remove_queue.length) {\n        var $remove_item;\n        var remove_callback = function(response, data) {\n            if (response === 0) {\n                _this._mixpanel['persistence']._add_to_people_queue(REMOVE_ACTION, $remove_item);\n            }\n            if (!_.isUndefined(_remove_callback)) {\n                _remove_callback(response, data);\n            }\n        };\n        for (var j = $remove_queue.length - 1; j >= 0; j--) {\n            $remove_item = $remove_queue.pop();\n            if (!_.isEmptyObject($remove_item)) {\n                _this.remove($remove_item, remove_callback);\n            }\n        }\n        _this._mixpanel['persistence'].save();\n    }\n};\n\nMixpanelPeople.prototype._is_reserved_property = function(prop) {\n    return prop === '$distinct_id' || prop === '$token' || prop === '$device_id' || prop === '$user_id' || prop === '$had_persisted_distinct_id';\n};\n\n// MixpanelPeople Exports\nMixpanelPeople.prototype['set']           = MixpanelPeople.prototype.set;\nMixpanelPeople.prototype['set_once']      = MixpanelPeople.prototype.set_once;\nMixpanelPeople.prototype['unset']         = MixpanelPeople.prototype.unset;\nMixpanelPeople.prototype['increment']     = MixpanelPeople.prototype.increment;\nMixpanelPeople.prototype['append']        = MixpanelPeople.prototype.append;\nMixpanelPeople.prototype['remove']        = MixpanelPeople.prototype.remove;\nMixpanelPeople.prototype['union']         = MixpanelPeople.prototype.union;\nMixpanelPeople.prototype['track_charge']  = MixpanelPeople.prototype.track_charge;\nMixpanelPeople.prototype['clear_charges'] = MixpanelPeople.prototype.clear_charges;\nMixpanelPeople.prototype['delete_user']   = MixpanelPeople.prototype.delete_user;\nMixpanelPeople.prototype['toString']      = MixpanelPeople.prototype.toString;\n\n/*\n * Mixpanel JS Library\n *\n * Copyright 2012, Mixpanel, Inc. All Rights Reserved\n * http://mixpanel.com/\n *\n * Includes portions of Underscore.js\n * http://documentcloud.github.com/underscore/\n * (c) 2011 Jeremy Ashkenas, DocumentCloud Inc.\n * Released under the MIT License.\n */\n\n// ==ClosureCompiler==\n// @compilation_level ADVANCED_OPTIMIZATIONS\n// @output_file_name mixpanel-2.8.min.js\n// ==/ClosureCompiler==\n\n/*\nSIMPLE STYLE GUIDE:\n\nthis.x === public function\nthis._x === internal - only use within this file\nthis.__x === private - only use within the class\n\nGlobals should be all caps\n*/\n\nvar init_type;       // MODULE or SNIPPET loader\nvar mixpanel_master; // main mixpanel instance / object\nvar INIT_MODULE  = 0;\nvar INIT_SNIPPET = 1;\n\n/** @const */ var PRIMARY_INSTANCE_NAME = 'mixpanel';\n\n\n/*\n * Dynamic... constants? Is that an oxymoron?\n */\n// http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/\n// https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#withCredentials\nvar USE_XHR = (window$1.XMLHttpRequest && 'withCredentials' in new XMLHttpRequest());\n\n// IE<10 does not support cross-origin XHR's but script tags\n// with defer won't block window.onload; ENQUEUE_REQUESTS\n// should only be true for Opera<12\nvar ENQUEUE_REQUESTS = !USE_XHR && (userAgent.indexOf('MSIE') === -1) && (userAgent.indexOf('Mozilla') === -1);\n\n// save reference to navigator.sendBeacon so it can be minified\nvar sendBeacon = null;\nif (navigator$1['sendBeacon']) {\n    sendBeacon = function() {\n        // late reference to navigator.sendBeacon to allow patching/spying\n        return navigator$1['sendBeacon'].apply(navigator$1, arguments);\n    };\n}\n\n/*\n * Module-level globals\n */\nvar DEFAULT_CONFIG = {\n    'api_host':                          'https://api-js.mixpanel.com',\n    'api_method':                        'POST',\n    'api_transport':                     'XHR',\n    'app_host':                          'https://mixpanel.com',\n    'autotrack':                         true,\n    'cdn':                               'https://cdn.mxpnl.com',\n    'cross_site_cookie':                 false,\n    'cross_subdomain_cookie':            true,\n    'persistence':                       'cookie',\n    'persistence_name':                  '',\n    'cookie_domain':                     '',\n    'cookie_name':                       '',\n    'loaded':                            function() {},\n    'store_google':                      true,\n    'save_referrer':                     true,\n    'test':                              false,\n    'verbose':                           false,\n    'img':                               false,\n    'debug':                             false,\n    'track_links_timeout':               300,\n    'cookie_expiration':                 365,\n    'upgrade':                           false,\n    'disable_persistence':               false,\n    'disable_cookie':                    false,\n    'secure_cookie':                     false,\n    'ip':                                true,\n    'opt_out_tracking_by_default':       false,\n    'opt_out_persistence_by_default':    false,\n    'opt_out_tracking_persistence_type': 'localStorage',\n    'opt_out_tracking_cookie_prefix':    null,\n    'property_blacklist':                [],\n    'xhr_headers':                       {}, // { header: value, header2: value }\n    'inapp_protocol':                    '//',\n    'inapp_link_new_window':             false,\n    'ignore_dnt':                        false,\n    'batch_requests':                    false, // for now\n    'batch_size':                        50,\n    'batch_flush_interval_ms':           5000,\n    'batch_request_timeout_ms':          90000\n};\n\nvar DOM_LOADED = false;\n\n/**\n * Mixpanel Library Object\n * @constructor\n */\nvar MixpanelLib = function() {};\n\n\n/**\n * create_mplib(token:string, config:object, name:string)\n *\n * This function is used by the init method of MixpanelLib objects\n * as well as the main initializer at the end of the JSLib (that\n * initializes document.mixpanel as well as any additional instances\n * declared before this file has loaded).\n */\nvar create_mplib = function(token, config, name) {\n    var instance,\n        target = (name === PRIMARY_INSTANCE_NAME) ? mixpanel_master : mixpanel_master[name];\n\n    if (target && init_type === INIT_MODULE) {\n        instance = target;\n    } else {\n        if (target && !_.isArray(target)) {\n            console$1.error('You have already initialized ' + name);\n            return;\n        }\n        instance = new MixpanelLib();\n    }\n\n    instance._cached_groups = {}; // cache groups in a pool\n    instance._user_decide_check_complete = false;\n    instance._events_tracked_before_user_decide_check_complete = [];\n\n    instance._init(token, config, name);\n\n    instance['people'] = new MixpanelPeople();\n    instance['people']._init(instance);\n\n    // if any instance on the page has debug = true, we set the\n    // global debug to be true\n    Config.DEBUG = Config.DEBUG || instance.get_config('debug');\n\n    instance['__autotrack_enabled'] = instance.get_config('autotrack');\n    if (instance.get_config('autotrack')) {\n        var num_buckets = 100;\n        var num_enabled_buckets = 100;\n        if (!autotrack.enabledForProject(instance.get_config('token'), num_buckets, num_enabled_buckets)) {\n            instance['__autotrack_enabled'] = false;\n            console$1.log('Not in active bucket: disabling Automatic Event Collection.');\n        } else if (!autotrack.isBrowserSupported()) {\n            instance['__autotrack_enabled'] = false;\n            console$1.log('Disabling Automatic Event Collection because this browser is not supported');\n        } else {\n            autotrack.init(instance);\n        }\n    }\n\n    // if target is not defined, we called init after the lib already\n    // loaded, so there won't be an array of things to execute\n    if (!_.isUndefined(target) && _.isArray(target)) {\n        // Crunch through the people queue first - we queue this data up &\n        // flush on identify, so it's better to do all these operations first\n        instance._execute_array.call(instance['people'], target['people']);\n        instance._execute_array(target);\n    }\n\n    return instance;\n};\n\nvar encode_data_for_request = function(data) {\n    var json_data = _.JSONEncode(data);\n    var encoded_data = _.base64Encode(json_data);\n    return {'data': encoded_data};\n};\n\n// Initialization methods\n\n/**\n * This function initializes a new instance of the Mixpanel tracking object.\n * All new instances are added to the main mixpanel object as sub properties (such as\n * mixpanel.library_name) and also returned by this function. To define a\n * second instance on the page, you would call:\n *\n *     mixpanel.init('new token', { your: 'config' }, 'library_name');\n *\n * and use it like so:\n *\n *     mixpanel.library_name.track(...);\n *\n * @param {String} token   Your Mixpanel API token\n * @param {Object} [config]  A dictionary of config options to override. <a href=\"https://github.com/mixpanel/mixpanel-js/blob/8b2e1f7b/src/mixpanel-core.js#L87-L110\">See a list of default config options</a>.\n * @param {String} [name]    The name for the new mixpanel instance that you want created\n */\nMixpanelLib.prototype.init = function (token, config, name) {\n    if (_.isUndefined(name)) {\n        console$1.error('You must name your new library: init(token, config, name)');\n        return;\n    }\n    if (name === PRIMARY_INSTANCE_NAME) {\n        console$1.error('You must initialize the main mixpanel object right after you include the Mixpanel js snippet');\n        return;\n    }\n\n    var instance = create_mplib(token, config, name);\n    mixpanel_master[name] = instance;\n    instance._loaded();\n\n    return instance;\n};\n\n// mixpanel._init(token:string, config:object, name:string)\n//\n// This function sets up the current instance of the mixpanel\n// library.  The difference between this method and the init(...)\n// method is this one initializes the actual instance, whereas the\n// init(...) method sets up a new library and calls _init on it.\n//\nMixpanelLib.prototype._init = function(token, config, name) {\n    this['__loaded'] = true;\n    this['config'] = {};\n    this['_triggered_notifs'] = [];\n\n    // rollout: enable batch_requests by default for 10% of projects\n    // (only if they have not specified a value in their init config)\n    var variable_features = {};\n    if (!('batch_requests' in (config || {})) && determine_eligibility(token, 'batch', 10)) {\n        variable_features['batch_requests'] = true;\n    }\n\n    this.set_config(_.extend({}, DEFAULT_CONFIG, variable_features, config, {\n        'name': name,\n        'token': token,\n        'callback_fn': ((name === PRIMARY_INSTANCE_NAME) ? name : PRIMARY_INSTANCE_NAME + '.' + name) + '._jsc'\n    }));\n\n    this['_jsc'] = function() {};\n\n    this.__dom_loaded_queue = [];\n    this.__request_queue = [];\n    this.__disabled_events = [];\n    this._flags = {\n        'disable_all_events': false,\n        'identify_called': false\n    };\n\n    // set up request queueing/batching\n    this.request_batchers = {};\n    this._batch_requests = this.get_config('batch_requests');\n    if (this._batch_requests) {\n        if (!_.localStorage.is_supported(true) || !USE_XHR) {\n            this._batch_requests = false;\n            console$1.log('Turning off Mixpanel request-queueing; needs XHR and localStorage support');\n        } else {\n            this.start_batch_requests();\n            if (sendBeacon && window$1.addEventListener) {\n                window$1.addEventListener('unload', _.bind(function() {\n                    // Before page closes, attempt to flush any events queued up via navigator.sendBeacon.\n                    // Since sendBeacon doesn't report success/failure, events will not be removed from\n                    // the persistent store; if the site is loaded again, the events will be flushed again\n                    // on startup and deduplicated on the Mixpanel server side.\n                    this.request_batchers.events.flush({sendBeacon: true});\n                }, this));\n            }\n        }\n    }\n\n    this['persistence'] = this['cookie'] = new MixpanelPersistence(this['config']);\n    this._gdpr_init();\n\n    var uuid = _.UUID();\n    if (!this.get_distinct_id()) {\n        // There is no need to set the distinct id\n        // or the device id if something was already stored\n        // in the persitence\n        this.register_once({\n            'distinct_id': uuid,\n            '$device_id': uuid\n        }, '');\n    }\n};\n\n// Private methods\n\nMixpanelLib.prototype._loaded = function() {\n    this.get_config('loaded')(this);\n    this._set_default_superprops();\n};\n\n// update persistence with info on referrer, UTM params, etc\nMixpanelLib.prototype._set_default_superprops = function() {\n    this['persistence'].update_search_keyword(document$1.referrer);\n    if (this.get_config('store_google')) {\n        this['persistence'].update_campaign_params();\n    }\n    if (this.get_config('save_referrer')) {\n        this['persistence'].update_referrer_info(document$1.referrer);\n    }\n};\n\nMixpanelLib.prototype._dom_loaded = function() {\n    _.each(this.__dom_loaded_queue, function(item) {\n        this._track_dom.apply(this, item);\n    }, this);\n\n    if (!this.has_opted_out_tracking()) {\n        _.each(this.__request_queue, function(item) {\n            this._send_request.apply(this, item);\n        }, this);\n    }\n\n    delete this.__dom_loaded_queue;\n    delete this.__request_queue;\n};\n\nMixpanelLib.prototype._track_dom = function(DomClass, args) {\n    if (this.get_config('img')) {\n        console$1.error('You can\\'t use DOM tracking functions with img = true.');\n        return false;\n    }\n\n    if (!DOM_LOADED) {\n        this.__dom_loaded_queue.push([DomClass, args]);\n        return false;\n    }\n\n    var dt = new DomClass().init(this);\n    return dt.track.apply(dt, args);\n};\n\n/**\n * _prepare_callback() should be called by callers of _send_request for use\n * as the callback argument.\n *\n * If there is no callback, this returns null.\n * If we are going to make XHR/XDR requests, this returns a function.\n * If we are going to use script tags, this returns a string to use as the\n * callback GET param.\n */\nMixpanelLib.prototype._prepare_callback = function(callback, data) {\n    if (_.isUndefined(callback)) {\n        return null;\n    }\n\n    if (USE_XHR) {\n        var callback_function = function(response) {\n            callback(response, data);\n        };\n        return callback_function;\n    } else {\n        // if the user gives us a callback, we store as a random\n        // property on this instances jsc function and update our\n        // callback string to reflect that.\n        var jsc = this['_jsc'];\n        var randomized_cb = '' + Math.floor(Math.random() * 100000000);\n        var callback_string = this.get_config('callback_fn') + '[' + randomized_cb + ']';\n        jsc[randomized_cb] = function(response) {\n            delete jsc[randomized_cb];\n            callback(response, data);\n        };\n        return callback_string;\n    }\n};\n\nMixpanelLib.prototype._send_request = function(url, data, options, callback) {\n    var succeeded = true;\n\n    if (ENQUEUE_REQUESTS) {\n        this.__request_queue.push(arguments);\n        return succeeded;\n    }\n\n    var DEFAULT_OPTIONS = {\n        method: this.get_config('api_method'),\n        transport: this.get_config('api_transport'),\n        verbose: this.get_config('verbose')\n    };\n    var body_data = null;\n\n    if (!callback && (_.isFunction(options) || typeof options === 'string')) {\n        callback = options;\n        options = null;\n    }\n    options = _.extend(DEFAULT_OPTIONS, options || {});\n    if (!USE_XHR) {\n        options.method = 'GET';\n    }\n    var use_post = options.method === 'POST';\n    var use_sendBeacon = sendBeacon && use_post && options.transport.toLowerCase() === 'sendbeacon';\n\n    // needed to correctly format responses\n    var verbose_mode = options.verbose;\n    if (data['verbose']) { verbose_mode = true; }\n\n    if (this.get_config('test')) { data['test'] = 1; }\n    if (verbose_mode) { data['verbose'] = 1; }\n    if (this.get_config('img')) { data['img'] = 1; }\n    if (!USE_XHR) {\n        if (callback) {\n            data['callback'] = callback;\n        } else if (verbose_mode || this.get_config('test')) {\n            // Verbose output (from verbose mode, or an error in test mode) is a json blob,\n            // which by itself is not valid javascript. Without a callback, this verbose output will\n            // cause an error when returned via jsonp, so we force a no-op callback param.\n            // See the ECMA script spec: http://www.ecma-international.org/ecma-262/5.1/#sec-12.4\n            data['callback'] = '(function(){})';\n        }\n    }\n\n    data['ip'] = this.get_config('ip')?1:0;\n    data['_'] = new Date().getTime().toString();\n\n    if (use_post) {\n        body_data = 'data=' + data['data'];\n        delete data['data'];\n    }\n\n    url += '?' + _.HTTPBuildQuery(data);\n\n    if ('img' in data) {\n        var img = document$1.createElement('img');\n        img.src = url;\n        document$1.body.appendChild(img);\n    } else if (use_sendBeacon) {\n        try {\n            succeeded = sendBeacon(url, body_data);\n        } catch (e) {\n            console$1.error(e);\n            succeeded = false;\n        }\n    } else if (USE_XHR) {\n        try {\n            var req = new XMLHttpRequest();\n            req.open(options.method, url, true);\n\n            var headers = this.get_config('xhr_headers');\n            if (use_post) {\n                headers['Content-Type'] = 'application/x-www-form-urlencoded';\n            }\n            _.each(headers, function(headerValue, headerName) {\n                req.setRequestHeader(headerName, headerValue);\n            });\n\n            if (options.timeout_ms && typeof req.timeout !== 'undefined') {\n                req.timeout = options.timeout_ms;\n                var start_time = new Date().getTime();\n            }\n\n            // send the mp_optout cookie\n            // withCredentials cannot be modified until after calling .open on Android and Mobile Safari\n            req.withCredentials = true;\n            req.onreadystatechange = function () {\n                if (req.readyState === 4) { // XMLHttpRequest.DONE == 4, except in safari 4\n                    if (req.status === 200) {\n                        if (callback) {\n                            if (verbose_mode) {\n                                var response;\n                                try {\n                                    response = _.JSONDecode(req.responseText);\n                                } catch (e) {\n                                    console$1.error(e);\n                                    if (options.ignore_json_errors) {\n                                        response = req.responseText;\n                                    } else {\n                                        return;\n                                    }\n                                }\n                                callback(response);\n                            } else {\n                                callback(Number(req.responseText));\n                            }\n                        }\n                    } else {\n                        var error;\n                        if (\n                            req.timeout &&\n                            !req.status &&\n                            new Date().getTime() - start_time >= req.timeout\n                        ) {\n                            error = 'timeout';\n                        } else {\n                            error = 'Bad HTTP status: ' + req.status + ' ' + req.statusText;\n                        }\n                        console$1.error(error);\n                        if (callback) {\n                            if (verbose_mode) {\n                                callback({status: 0, error: error, xhr_req: req});\n                            } else {\n                                callback(0);\n                            }\n                        }\n                    }\n                }\n            };\n            req.send(body_data);\n        } catch (e) {\n            console$1.error(e);\n            succeeded = false;\n        }\n    } else {\n        var script = document$1.createElement('script');\n        script.type = 'text/javascript';\n        script.async = true;\n        script.defer = true;\n        script.src = url;\n        var s = document$1.getElementsByTagName('script')[0];\n        s.parentNode.insertBefore(script, s);\n    }\n\n    return succeeded;\n};\n\n/**\n * _execute_array() deals with processing any mixpanel function\n * calls that were called before the Mixpanel library were loaded\n * (and are thus stored in an array so they can be called later)\n *\n * Note: we fire off all the mixpanel function calls && user defined\n * functions BEFORE we fire off mixpanel tracking calls. This is so\n * identify/register/set_config calls can properly modify early\n * tracking calls.\n *\n * @param {Array} array\n */\nMixpanelLib.prototype._execute_array = function(array) {\n    var fn_name, alias_calls = [], other_calls = [], tracking_calls = [];\n    _.each(array, function(item) {\n        if (item) {\n            fn_name = item[0];\n            if (_.isArray(fn_name)) {\n                tracking_calls.push(item); // chained call e.g. mixpanel.get_group().set()\n            } else if (typeof(item) === 'function') {\n                item.call(this);\n            } else if (_.isArray(item) && fn_name === 'alias') {\n                alias_calls.push(item);\n            } else if (_.isArray(item) && fn_name.indexOf('track') !== -1 && typeof(this[fn_name]) === 'function') {\n                tracking_calls.push(item);\n            } else {\n                other_calls.push(item);\n            }\n        }\n    }, this);\n\n    var execute = function(calls, context) {\n        _.each(calls, function(item) {\n            if (_.isArray(item[0])) {\n                // chained call\n                var caller = context;\n                _.each(item, function(call) {\n                    caller = caller[call[0]].apply(caller, call.slice(1));\n                });\n            } else {\n                this[item[0]].apply(this, item.slice(1));\n            }\n        }, context);\n    };\n\n    execute(alias_calls, this);\n    execute(other_calls, this);\n    execute(tracking_calls, this);\n};\n\n// request queueing utils\n\nMixpanelLib.prototype.start_batch_requests = function() {\n    var token = this.get_config('token');\n    if (!this.request_batchers.events) { // no batchers initialized yet\n        var batcher_config = {\n            libConfig: this['config'],\n            sendRequestFunc: _.bind(function(endpoint, data, options, cb) {\n                this._send_request(\n                    this.get_config('api_host') + endpoint,\n                    encode_data_for_request(data),\n                    options,\n                    this._prepare_callback(cb, data)\n                );\n            }, this)\n        };\n        this.request_batchers = {\n            events: new RequestBatcher('__mpq_' + token + '_ev', '/track/', batcher_config),\n            people: new RequestBatcher('__mpq_' + token + '_pp', '/engage/', batcher_config),\n            groups: new RequestBatcher('__mpq_' + token + '_gr', '/groups/', batcher_config)\n        };\n    }\n    _.each(this.request_batchers, function(batcher) {\n        batcher.start();\n    });\n};\n\nMixpanelLib.prototype.stop_batch_requests = function() {\n    this._batch_requests = false;\n    _.each(this.request_batchers, function(batcher) {\n        batcher.stop();\n        batcher.clear();\n    });\n};\n\n/**\n * push() keeps the standard async-array-push\n * behavior around after the lib is loaded.\n * This is only useful for external integrations that\n * do not wish to rely on our convenience methods\n * (created in the snippet).\n *\n * ### Usage:\n *     mixpanel.push(['register', { a: 'b' }]);\n *\n * @param {Array} item A [function_name, args...] array to be executed\n */\nMixpanelLib.prototype.push = function(item) {\n    this._execute_array([item]);\n};\n\n/**\n * Disable events on the Mixpanel object. If passed no arguments,\n * this function disables tracking of any event. If passed an\n * array of event names, those events will be disabled, but other\n * events will continue to be tracked.\n *\n * Note: this function does not stop other mixpanel functions from\n * firing, such as register() or people.set().\n *\n * @param {Array} [events] An array of event names to disable\n */\nMixpanelLib.prototype.disable = function(events) {\n    if (typeof(events) === 'undefined') {\n        this._flags.disable_all_events = true;\n    } else {\n        this.__disabled_events = this.__disabled_events.concat(events);\n    }\n};\n\n// internal method for handling track vs batch-enqueue logic\nMixpanelLib.prototype._track_or_batch = function(options, callback) {\n    var truncated_data = options.truncated_data;\n    var endpoint = options.endpoint;\n    var batcher = options.batcher;\n    var should_send_immediately = options.should_send_immediately;\n    var send_request_options = options.send_request_options || {};\n    callback = callback || function() {};\n\n    var request_enqueued_or_initiated = true;\n    var send_request_immediately = _.bind(function() {\n        console$1.log('MIXPANEL REQUEST:');\n        console$1.log(truncated_data);\n        return this._send_request(\n            endpoint,\n            encode_data_for_request(truncated_data),\n            send_request_options,\n            this._prepare_callback(callback, truncated_data)\n        );\n    }, this);\n\n    if (this._batch_requests && !should_send_immediately) {\n        batcher.enqueue(truncated_data, function(succeeded) {\n            if (succeeded) {\n                callback(1, truncated_data);\n            } else {\n                send_request_immediately();\n            }\n        });\n    } else {\n        request_enqueued_or_initiated = send_request_immediately();\n    }\n\n    return request_enqueued_or_initiated && truncated_data;\n};\n\n/**\n * Track an event. This is the most important and\n * frequently used Mixpanel function.\n *\n * ### Usage:\n *\n *     // track an event named 'Registered'\n *     mixpanel.track('Registered', {'Gender': 'Male', 'Age': 21});\n *\n *     // track an event using navigator.sendBeacon\n *     mixpanel.track('Left page', {'duration_seconds': 35}, {transport: 'sendBeacon'});\n *\n * To track link clicks or form submissions, see track_links() or track_forms().\n *\n * @param {String} event_name The name of the event. This can be anything the user does - 'Button Click', 'Sign Up', 'Item Purchased', etc.\n * @param {Object} [properties] A set of properties to include with the event you're sending. These describe the user who did the event or details about the event itself.\n * @param {Object} [options] Optional configuration for this track request.\n * @param {String} [options.transport] Transport method for network request ('xhr' or 'sendBeacon').\n * @param {Boolean} [options.send_immediately] Whether to bypass batching/queueing and send track request immediately.\n * @param {Function} [callback] If provided, the callback function will be called after tracking the event.\n * @returns {Boolean|Object} If the tracking request was successfully initiated/queued, an object\n * with the tracking payload sent to the API server is returned; otherwise false.\n */\nMixpanelLib.prototype.track = addOptOutCheckMixpanelLib(function(event_name, properties, options, callback) {\n    if (!callback && typeof options === 'function') {\n        callback = options;\n        options = null;\n    }\n    options = options || {};\n    var transport = options['transport']; // external API, don't minify 'transport' prop\n    if (transport) {\n        options.transport = transport; // 'transport' prop name can be minified internally\n    }\n    var should_send_immediately = options['send_immediately'];\n    if (typeof callback !== 'function') {\n        callback = function() {};\n    }\n\n    if (_.isUndefined(event_name)) {\n        console$1.error('No event name provided to mixpanel.track');\n        return;\n    }\n\n    if (this._event_is_disabled(event_name)) {\n        callback(0);\n        return;\n    }\n\n    // set defaults\n    properties = properties || {};\n    properties['token'] = this.get_config('token');\n\n    // set $duration if time_event was previously called for this event\n    var start_timestamp = this['persistence'].remove_event_timer(event_name);\n    if (!_.isUndefined(start_timestamp)) {\n        var duration_in_ms = new Date().getTime() - start_timestamp;\n        properties['$duration'] = parseFloat((duration_in_ms / 1000).toFixed(3));\n    }\n\n    this._set_default_superprops();\n\n    // note: extend writes to the first object, so lets make sure we\n    // don't write to the persistence properties object and info\n    // properties object by passing in a new object\n\n    // update properties with pageview info and super-properties\n    properties = _.extend(\n        {},\n        _.info.properties(),\n        this['persistence'].properties(),\n        properties\n    );\n\n    var property_blacklist = this.get_config('property_blacklist');\n    if (_.isArray(property_blacklist)) {\n        _.each(property_blacklist, function(blacklisted_prop) {\n            delete properties[blacklisted_prop];\n        });\n    } else {\n        console$1.error('Invalid value for property_blacklist config: ' + property_blacklist);\n    }\n\n    var data = {\n        'event': event_name,\n        'properties': properties\n    };\n    var ret = this._track_or_batch({\n        truncated_data: _.truncate(data, 255),\n        endpoint: this.get_config('api_host') + '/track/',\n        batcher: this.request_batchers.events,\n        should_send_immediately: should_send_immediately,\n        send_request_options: options\n    }, callback);\n\n    this._check_and_handle_triggered_notifications(data);\n\n    return ret;\n});\n\n/**\n * Register the current user into one/many groups.\n *\n * ### Usage:\n *\n *      mixpanel.set_group('company', ['mixpanel', 'google']) // an array of IDs\n *      mixpanel.set_group('company', 'mixpanel')\n *      mixpanel.set_group('company', 128746312)\n *\n * @param {String} group_key Group key\n * @param {Array|String|Number} group_ids An array of group IDs, or a singular group ID\n * @param {Function} [callback] If provided, the callback will be called after tracking the event.\n *\n */\nMixpanelLib.prototype.set_group = addOptOutCheckMixpanelLib(function(group_key, group_ids, callback) {\n    if (!_.isArray(group_ids)) {\n        group_ids = [group_ids];\n    }\n    var prop = {};\n    prop[group_key] = group_ids;\n    this.register(prop);\n    return this['people'].set(group_key, group_ids, callback);\n});\n\n/**\n * Add a new group for this user.\n *\n * ### Usage:\n *\n *      mixpanel.add_group('company', 'mixpanel')\n *\n * @param {String} group_key Group key\n * @param {*} group_id A valid Mixpanel property type\n * @param {Function} [callback] If provided, the callback will be called after tracking the event.\n */\nMixpanelLib.prototype.add_group = addOptOutCheckMixpanelLib(function(group_key, group_id, callback) {\n    var old_values = this.get_property(group_key);\n    if (old_values === undefined) {\n        var prop = {};\n        prop[group_key] = [group_id];\n        this.register(prop);\n    } else {\n        if (old_values.indexOf(group_id) === -1) {\n            old_values.push(group_id);\n            this.register(prop);\n        }\n    }\n    return this['people'].union(group_key, group_id, callback);\n});\n\n/**\n * Remove a group from this user.\n *\n * ### Usage:\n *\n *      mixpanel.remove_group('company', 'mixpanel')\n *\n * @param {String} group_key Group key\n * @param {*} group_id A valid Mixpanel property type\n * @param {Function} [callback] If provided, the callback will be called after tracking the event.\n */\nMixpanelLib.prototype.remove_group = addOptOutCheckMixpanelLib(function(group_key, group_id, callback) {\n    var old_value = this.get_property(group_key);\n    // if the value doesn't exist, the persistent store is unchanged\n    if (old_value !== undefined) {\n        var idx = old_value.indexOf(group_id);\n        if (idx > -1) {\n            old_value.splice(idx, 1);\n            this.register({group_key: old_value});\n        }\n        if (old_value.length === 0) {\n            this.unregister(group_key);\n        }\n    }\n    return this['people'].remove(group_key, group_id, callback);\n});\n\n/**\n * Track an event with specific groups.\n *\n * ### Usage:\n *\n *      mixpanel.track_with_groups('purchase', {'product': 'iphone'}, {'University': ['UCB', 'UCLA']})\n *\n * @param {String} event_name The name of the event (see `mixpanel.track()`)\n * @param {Object=} properties A set of properties to include with the event you're sending (see `mixpanel.track()`)\n * @param {Object=} groups An object mapping group name keys to one or more values\n * @param {Function} [callback] If provided, the callback will be called after tracking the event.\n */\nMixpanelLib.prototype.track_with_groups = addOptOutCheckMixpanelLib(function(event_name, properties, groups, callback) {\n    var tracking_props = _.extend({}, properties || {});\n    _.each(groups, function(v, k) {\n        if (v !== null && v !== undefined) {\n            tracking_props[k] = v;\n        }\n    });\n    return this.track(event_name, tracking_props, callback);\n});\n\nMixpanelLib.prototype._create_map_key = function (group_key, group_id) {\n    return group_key + '_' + JSON.stringify(group_id);\n};\n\nMixpanelLib.prototype._remove_group_from_cache = function (group_key, group_id) {\n    delete this._cached_groups[this._create_map_key(group_key, group_id)];\n};\n\n/**\n * Look up reference to a Mixpanel group\n *\n * ### Usage:\n *\n *       mixpanel.get_group(group_key, group_id)\n *\n * @param {String} group_key Group key\n * @param {Object} group_id A valid Mixpanel property type\n * @returns {Object} A MixpanelGroup identifier\n */\nMixpanelLib.prototype.get_group = function (group_key, group_id) {\n    var map_key = this._create_map_key(group_key, group_id);\n    var group = this._cached_groups[map_key];\n    if (group === undefined || group._group_key !== group_key || group._group_id !== group_id) {\n        group = new MixpanelGroup();\n        group._init(this, group_key, group_id);\n        this._cached_groups[map_key] = group;\n    }\n    return group;\n};\n\n/**\n * Track mp_page_view event. This is now ignored by the server.\n *\n * @param {String} [page] The url of the page to record. If you don't include this, it defaults to the current url.\n * @deprecated\n */\nMixpanelLib.prototype.track_pageview = function(page) {\n    if (_.isUndefined(page)) {\n        page = document$1.location.href;\n    }\n    this.track('mp_page_view', _.info.pageviewInfo(page));\n};\n\n/**\n * Track clicks on a set of document elements. Selector must be a\n * valid query. Elements must exist on the page at the time track_links is called.\n *\n * ### Usage:\n *\n *     // track click for link id #nav\n *     mixpanel.track_links('#nav', 'Clicked Nav Link');\n *\n * ### Notes:\n *\n * This function will wait up to 300 ms for the Mixpanel\n * servers to respond. If they have not responded by that time\n * it will head to the link without ensuring that your event\n * has been tracked.  To configure this timeout please see the\n * set_config() documentation below.\n *\n * If you pass a function in as the properties argument, the\n * function will receive the DOMElement that triggered the\n * event as an argument.  You are expected to return an object\n * from the function; any properties defined on this object\n * will be sent to mixpanel as event properties.\n *\n * @type {Function}\n * @param {Object|String} query A valid DOM query, element or jQuery-esque list\n * @param {String} event_name The name of the event to track\n * @param {Object|Function} [properties] A properties object or function that returns a dictionary of properties when passed a DOMElement\n */\nMixpanelLib.prototype.track_links = function() {\n    return this._track_dom.call(this, LinkTracker, arguments);\n};\n\n/**\n * Track form submissions. Selector must be a valid query.\n *\n * ### Usage:\n *\n *     // track submission for form id 'register'\n *     mixpanel.track_forms('#register', 'Created Account');\n *\n * ### Notes:\n *\n * This function will wait up to 300 ms for the mixpanel\n * servers to respond, if they have not responded by that time\n * it will head to the link without ensuring that your event\n * has been tracked.  To configure this timeout please see the\n * set_config() documentation below.\n *\n * If you pass a function in as the properties argument, the\n * function will receive the DOMElement that triggered the\n * event as an argument.  You are expected to return an object\n * from the function; any properties defined on this object\n * will be sent to mixpanel as event properties.\n *\n * @type {Function}\n * @param {Object|String} query A valid DOM query, element or jQuery-esque list\n * @param {String} event_name The name of the event to track\n * @param {Object|Function} [properties] This can be a set of properties, or a function that returns a set of properties after being passed a DOMElement\n */\nMixpanelLib.prototype.track_forms = function() {\n    return this._track_dom.call(this, FormTracker, arguments);\n};\n\n/**\n * Time an event by including the time between this call and a\n * later 'track' call for the same event in the properties sent\n * with the event.\n *\n * ### Usage:\n *\n *     // time an event named 'Registered'\n *     mixpanel.time_event('Registered');\n *     mixpanel.track('Registered', {'Gender': 'Male', 'Age': 21});\n *\n * When called for a particular event name, the next track call for that event\n * name will include the elapsed time between the 'time_event' and 'track'\n * calls. This value is stored as seconds in the '$duration' property.\n *\n * @param {String} event_name The name of the event.\n */\nMixpanelLib.prototype.time_event = function(event_name) {\n    if (_.isUndefined(event_name)) {\n        console$1.error('No event name provided to mixpanel.time_event');\n        return;\n    }\n\n    if (this._event_is_disabled(event_name)) {\n        return;\n    }\n\n    this['persistence'].set_event_timer(event_name,  new Date().getTime());\n};\n\n/**\n * Register a set of super properties, which are included with all\n * events. This will overwrite previous super property values.\n *\n * ### Usage:\n *\n *     // register 'Gender' as a super property\n *     mixpanel.register({'Gender': 'Female'});\n *\n *     // register several super properties when a user signs up\n *     mixpanel.register({\n *         'Email': 'jdoe@example.com',\n *         'Account Type': 'Free'\n *     });\n *\n * @param {Object} properties An associative array of properties to store about the user\n * @param {Number} [days] How many days since the user's last visit to store the super properties\n */\nMixpanelLib.prototype.register = function(props, days) {\n    this['persistence'].register(props, days);\n};\n\n/**\n * Register a set of super properties only once. This will not\n * overwrite previous super property values, unlike register().\n *\n * ### Usage:\n *\n *     // register a super property for the first time only\n *     mixpanel.register_once({\n *         'First Login Date': new Date().toISOString()\n *     });\n *\n * ### Notes:\n *\n * If default_value is specified, current super properties\n * with that value will be overwritten.\n *\n * @param {Object} properties An associative array of properties to store about the user\n * @param {*} [default_value] Value to override if already set in super properties (ex: 'False') Default: 'None'\n * @param {Number} [days] How many days since the users last visit to store the super properties\n */\nMixpanelLib.prototype.register_once = function(props, default_value, days) {\n    this['persistence'].register_once(props, default_value, days);\n};\n\n/**\n * Delete a super property stored with the current user.\n *\n * @param {String} property The name of the super property to remove\n */\nMixpanelLib.prototype.unregister = function(property) {\n    this['persistence'].unregister(property);\n};\n\nMixpanelLib.prototype._register_single = function(prop, value) {\n    var props = {};\n    props[prop] = value;\n    this.register(props);\n};\n\n/**\n * Identify a user with a unique ID to track user activity across\n * devices, tie a user to their events, and create a user profile.\n * If you never call this method, unique visitors are tracked using\n * a UUID generated the first time they visit the site.\n *\n * Call identify when you know the identity of the current user,\n * typically after login or signup. We recommend against using\n * identify for anonymous visitors to your site.\n *\n * ### Notes:\n * If your project has\n * <a href=\"https://help.mixpanel.com/hc/en-us/articles/360039133851\">ID Merge</a>\n * enabled, the identify method will connect pre- and\n * post-authentication events when appropriate.\n *\n * If your project does not have ID Merge enabled, identify will\n * change the user's local distinct_id to the unique ID you pass.\n * Events tracked prior to authentication will not be connected\n * to the same user identity. If ID Merge is disabled, alias can\n * be used to connect pre- and post-registration events.\n *\n * @param {String} [unique_id] A string that uniquely identifies a user. If not provided, the distinct_id currently in the persistent store (cookie or localStorage) will be used.\n */\nMixpanelLib.prototype.identify = function(\n    new_distinct_id, _set_callback, _add_callback, _append_callback, _set_once_callback, _union_callback, _unset_callback, _remove_callback\n) {\n    // Optional Parameters\n    //  _set_callback:function  A callback to be run if and when the People set queue is flushed\n    //  _add_callback:function  A callback to be run if and when the People add queue is flushed\n    //  _append_callback:function  A callback to be run if and when the People append queue is flushed\n    //  _set_once_callback:function  A callback to be run if and when the People set_once queue is flushed\n    //  _union_callback:function  A callback to be run if and when the People union queue is flushed\n    //  _unset_callback:function  A callback to be run if and when the People unset queue is flushed\n\n    var previous_distinct_id = this.get_distinct_id();\n    this.register({'$user_id': new_distinct_id});\n\n    if (!this.get_property('$device_id')) {\n        // The persisted distinct id might not actually be a device id at all\n        // it might be a distinct id of the user from before\n        var device_id = previous_distinct_id;\n        this.register_once({\n            '$had_persisted_distinct_id': true,\n            '$device_id': device_id\n        }, '');\n    }\n\n    // identify only changes the distinct id if it doesn't match either the existing or the alias;\n    // if it's new, blow away the alias as well.\n    if (new_distinct_id !== previous_distinct_id && new_distinct_id !== this.get_property(ALIAS_ID_KEY)) {\n        this.unregister(ALIAS_ID_KEY);\n        this.register({'distinct_id': new_distinct_id});\n    }\n    this._check_and_handle_notifications(this.get_distinct_id());\n    this._flags.identify_called = true;\n    // Flush any queued up people requests\n    this['people']._flush(_set_callback, _add_callback, _append_callback, _set_once_callback, _union_callback, _unset_callback, _remove_callback);\n\n    // send an $identify event any time the distinct_id is changing - logic on the server\n    // will determine whether or not to do anything with it.\n    if (new_distinct_id !== previous_distinct_id) {\n        this.track('$identify', { 'distinct_id': new_distinct_id, '$anon_distinct_id': previous_distinct_id });\n    }\n};\n\n/**\n * Clears super properties and generates a new random distinct_id for this instance.\n * Useful for clearing data when a user logs out.\n */\nMixpanelLib.prototype.reset = function() {\n    this['persistence'].clear();\n    this._flags.identify_called = false;\n    var uuid = _.UUID();\n    this.register_once({\n        'distinct_id': uuid,\n        '$device_id': uuid\n    }, '');\n};\n\n/**\n * Returns the current distinct id of the user. This is either the id automatically\n * generated by the library or the id that has been passed by a call to identify().\n *\n * ### Notes:\n *\n * get_distinct_id() can only be called after the Mixpanel library has finished loading.\n * init() has a loaded function available to handle this automatically. For example:\n *\n *     // set distinct_id after the mixpanel library has loaded\n *     mixpanel.init('YOUR PROJECT TOKEN', {\n *         loaded: function(mixpanel) {\n *             distinct_id = mixpanel.get_distinct_id();\n *         }\n *     });\n */\nMixpanelLib.prototype.get_distinct_id = function() {\n    return this.get_property('distinct_id');\n};\n\n/**\n * The alias method creates an alias which Mixpanel will use to\n * remap one id to another. Multiple aliases can point to the\n * same identifier.\n *\n * The following is a valid use of alias:\n *\n *     mixpanel.alias('new_id', 'existing_id');\n *     // You can add multiple id aliases to the existing ID\n *     mixpanel.alias('newer_id', 'existing_id');\n *\n * Aliases can also be chained - the following is a valid example:\n *\n *     mixpanel.alias('new_id', 'existing_id');\n *     // chain newer_id - new_id - existing_id\n *     mixpanel.alias('newer_id', 'new_id');\n *\n * Aliases cannot point to multiple identifiers - the following\n * example will not work:\n *\n *     mixpanel.alias('new_id', 'existing_id');\n *     // this is invalid as 'new_id' already points to 'existing_id'\n *     mixpanel.alias('new_id', 'newer_id');\n *\n * ### Notes:\n *\n * If your project does not have\n * <a href=\"https://help.mixpanel.com/hc/en-us/articles/360039133851\">ID Merge</a>\n * enabled, the best practice is to call alias once when a unique\n * ID is first created for a user (e.g., when a user first registers\n * for an account). Do not use alias multiple times for a single\n * user without ID Merge enabled.\n *\n * @param {String} alias A unique identifier that you want to use for this user in the future.\n * @param {String} [original] The current identifier being used for this user.\n */\nMixpanelLib.prototype.alias = function(alias, original) {\n    // If the $people_distinct_id key exists in persistence, there has been a previous\n    // mixpanel.people.identify() call made for this user. It is VERY BAD to make an alias with\n    // this ID, as it will duplicate users.\n    if (alias === this.get_property(PEOPLE_DISTINCT_ID_KEY)) {\n        console$1.critical('Attempting to create alias for existing People user - aborting.');\n        return -2;\n    }\n\n    var _this = this;\n    if (_.isUndefined(original)) {\n        original = this.get_distinct_id();\n    }\n    if (alias !== original) {\n        this._register_single(ALIAS_ID_KEY, alias);\n        return this.track('$create_alias', { 'alias': alias, 'distinct_id': original }, function() {\n            // Flush the people queue\n            _this.identify(alias);\n        });\n    } else {\n        console$1.error('alias matches current distinct_id - skipping api call.');\n        this.identify(alias);\n        return -1;\n    }\n};\n\n/**\n * Provide a string to recognize the user by. The string passed to\n * this method will appear in the Mixpanel Streams product rather\n * than an automatically generated name. Name tags do not have to\n * be unique.\n *\n * This value will only be included in Streams data.\n *\n * @param {String} name_tag A human readable name for the user\n * @deprecated\n */\nMixpanelLib.prototype.name_tag = function(name_tag) {\n    this._register_single('mp_name_tag', name_tag);\n};\n\n/**\n * Update the configuration of a mixpanel library instance.\n *\n * The default config is:\n *\n *     {\n *       // HTTP method for tracking requests\n *       api_method: 'POST'\n *\n *       // transport for sending requests ('XHR' or 'sendBeacon')\n *       // NB: sendBeacon should only be used for scenarios such as\n *       // page unload where a \"best-effort\" attempt to send is\n *       // acceptable; the sendBeacon API does not support callbacks\n *       // or any way to know the result of the request. Mixpanel\n *       // tracking via sendBeacon will not support any event-\n *       // batching or retry mechanisms.\n *       api_transport: 'XHR'\n *\n *       // turn on request-batching/queueing/retry\n *       batch_requests: false,\n *\n *       // maximum number of events/updates to send in a single\n *       // network request\n *       batch_size: 50,\n *\n *       // milliseconds to wait between sending batch requests\n *       batch_flush_interval_ms: 5000,\n *\n *       // milliseconds to wait for network responses to batch requests\n *       // before they are considered timed-out and retried\n *       batch_request_timeout_ms: 90000,\n *\n *       // override value for cookie domain, only useful for ensuring\n *       // correct cross-subdomain cookies on unusual domains like\n *       // subdomain.mainsite.avocat.fr; NB this cannot be used to\n *       // set cookies on a different domain than the current origin\n *       cookie_domain: ''\n *\n *       // super properties cookie expiration (in days)\n *       cookie_expiration: 365\n *\n *       // if true, cookie will be set with SameSite=None; Secure\n *       // this is only useful in special situations, like embedded\n *       // 3rd-party iframes that set up a Mixpanel instance\n *       cross_site_cookie: false\n *\n *       // super properties span subdomains\n *       cross_subdomain_cookie: true\n *\n *       // debug mode\n *       debug: false\n *\n *       // if this is true, the mixpanel cookie or localStorage entry\n *       // will be deleted, and no user persistence will take place\n *       disable_persistence: false\n *\n *       // if this is true, Mixpanel will automatically determine\n *       // City, Region and Country data using the IP address of\n *       //the client\n *       ip: true\n *\n *       // opt users out of tracking by this Mixpanel instance by default\n *       opt_out_tracking_by_default: false\n *\n *       // opt users out of browser data storage by this Mixpanel instance by default\n *       opt_out_persistence_by_default: false\n *\n *       // persistence mechanism used by opt-in/opt-out methods - cookie\n *       // or localStorage - falls back to cookie if localStorage is unavailable\n *       opt_out_tracking_persistence_type: 'localStorage'\n *\n *       // customize the name of cookie/localStorage set by opt-in/opt-out methods\n *       opt_out_tracking_cookie_prefix: null\n *\n *       // type of persistent store for super properties (cookie/\n *       // localStorage) if set to 'localStorage', any existing\n *       // mixpanel cookie value with the same persistence_name\n *       // will be transferred to localStorage and deleted\n *       persistence: 'cookie'\n *\n *       // name for super properties persistent store\n *       persistence_name: ''\n *\n *       // names of properties/superproperties which should never\n *       // be sent with track() calls\n *       property_blacklist: []\n *\n *       // if this is true, mixpanel cookies will be marked as\n *       // secure, meaning they will only be transmitted over https\n *       secure_cookie: false\n *\n *       // the amount of time track_links will\n *       // wait for Mixpanel's servers to respond\n *       track_links_timeout: 300\n *\n *       // if you set upgrade to be true, the library will check for\n *       // a cookie from our old js library and import super\n *       // properties from it, then the old cookie is deleted\n *       // The upgrade config option only works in the initialization,\n *       // so make sure you set it when you create the library.\n *       upgrade: false\n *\n *       // extra HTTP request headers to set for each API request, in\n *       // the format {'Header-Name': value}\n *       xhr_headers: {}\n *\n *       // protocol for fetching in-app message resources, e.g.\n *       // 'https://' or 'http://'; defaults to '//' (which defers to the\n *       // current page's protocol)\n *       inapp_protocol: '//'\n *\n *       // whether to open in-app message link in new tab/window\n *       inapp_link_new_window: false\n *\n *       // whether to ignore or respect the web browser's Do Not Track setting\n *       ignore_dnt: false\n *     }\n *\n *\n * @param {Object} config A dictionary of new configuration values to update\n */\nMixpanelLib.prototype.set_config = function(config) {\n    if (_.isObject(config)) {\n        _.extend(this['config'], config);\n\n        var new_batch_size = config['batch_size'];\n        if (new_batch_size) {\n            _.each(this.request_batchers, function(batcher) {\n                batcher.resetBatchSize();\n            });\n        }\n\n        if (!this.get_config('persistence_name')) {\n            this['config']['persistence_name'] = this['config']['cookie_name'];\n        }\n        if (!this.get_config('disable_persistence')) {\n            this['config']['disable_persistence'] = this['config']['disable_cookie'];\n        }\n\n        if (this['persistence']) {\n            this['persistence'].update_config(this['config']);\n        }\n        Config.DEBUG = Config.DEBUG || this.get_config('debug');\n    }\n};\n\n/**\n * returns the current config object for the library.\n */\nMixpanelLib.prototype.get_config = function(prop_name) {\n    return this['config'][prop_name];\n};\n\n/**\n * Returns the value of the super property named property_name. If no such\n * property is set, get_property() will return the undefined value.\n *\n * ### Notes:\n *\n * get_property() can only be called after the Mixpanel library has finished loading.\n * init() has a loaded function available to handle this automatically. For example:\n *\n *     // grab value for 'user_id' after the mixpanel library has loaded\n *     mixpanel.init('YOUR PROJECT TOKEN', {\n *         loaded: function(mixpanel) {\n *             user_id = mixpanel.get_property('user_id');\n *         }\n *     });\n *\n * @param {String} property_name The name of the super property you want to retrieve\n */\nMixpanelLib.prototype.get_property = function(property_name) {\n    return this['persistence']['props'][property_name];\n};\n\nMixpanelLib.prototype.toString = function() {\n    var name = this.get_config('name');\n    if (name !== PRIMARY_INSTANCE_NAME) {\n        name = PRIMARY_INSTANCE_NAME + '.' + name;\n    }\n    return name;\n};\n\nMixpanelLib.prototype._event_is_disabled = function(event_name) {\n    return _.isBlockedUA(userAgent) ||\n        this._flags.disable_all_events ||\n        _.include(this.__disabled_events, event_name);\n};\n\nMixpanelLib.prototype._check_and_handle_triggered_notifications = addOptOutCheckMixpanelLib(function(event_data) {\n    if (!this._user_decide_check_complete) {\n        this._events_tracked_before_user_decide_check_complete.push(event_data);\n    } else {\n        var arr = this['_triggered_notifs'];\n        for (var i = 0; i < arr.length; i++) {\n            var notif = new MixpanelNotification(arr[i], this);\n            if (notif._matches_event_data(event_data)) {\n                this._show_notification(arr[i]);\n                return;\n            }\n        }\n    }\n});\n\nMixpanelLib.prototype._check_and_handle_notifications = addOptOutCheckMixpanelLib(function(distinct_id) {\n    if (\n        !distinct_id ||\n        this._flags.identify_called ||\n        this.get_config('disable_notifications')\n    ) {\n        return;\n    }\n\n    console$1.log('MIXPANEL NOTIFICATION CHECK');\n\n    var data = {\n        'verbose':     true,\n        'version':     '3',\n        'lib':         'web',\n        'token':       this.get_config('token'),\n        'distinct_id': distinct_id\n    };\n    this._send_request(\n        this.get_config('api_host') + '/decide/',\n        data,\n        {method: 'GET', transport: 'XHR'},\n        this._prepare_callback(_.bind(function(result) {\n            if (result['notifications'] && result['notifications'].length > 0) {\n                this['_triggered_notifs'] = [];\n                var notifications = [];\n                _.each(result['notifications'], function(notif) {\n                    (notif['display_triggers'] && notif['display_triggers'].length > 0 ? this['_triggered_notifs'] : notifications).push(notif);\n                }, this);\n                if (notifications.length > 0) {\n                    this._show_notification.call(this, notifications[0]);\n                }\n            }\n            this._handle_user_decide_check_complete();\n        }, this))\n    );\n});\n\nMixpanelLib.prototype._handle_user_decide_check_complete = function() {\n    this._user_decide_check_complete = true;\n\n    // check notifications against events that were tracked before decide call completed\n    var events = this._events_tracked_before_user_decide_check_complete;\n    while (events.length > 0) {\n        var data = events.shift(); // replay in the same order they came in\n        this._check_and_handle_triggered_notifications(data);\n    }\n};\n\nMixpanelLib.prototype._show_notification = function(notif_data) {\n    var notification = new MixpanelNotification(notif_data, this);\n    notification.show();\n};\n\n// perform some housekeeping around GDPR opt-in/out state\nMixpanelLib.prototype._gdpr_init = function() {\n    var is_localStorage_requested = this.get_config('opt_out_tracking_persistence_type') === 'localStorage';\n\n    // try to convert opt-in/out cookies to localStorage if possible\n    if (is_localStorage_requested && _.localStorage.is_supported()) {\n        if (!this.has_opted_in_tracking() && this.has_opted_in_tracking({'persistence_type': 'cookie'})) {\n            this.opt_in_tracking({'enable_persistence': false});\n        }\n        if (!this.has_opted_out_tracking() && this.has_opted_out_tracking({'persistence_type': 'cookie'})) {\n            this.opt_out_tracking({'clear_persistence': false});\n        }\n        this.clear_opt_in_out_tracking({\n            'persistence_type': 'cookie',\n            'enable_persistence': false\n        });\n    }\n\n    // check whether the user has already opted out - if so, clear & disable persistence\n    if (this.has_opted_out_tracking()) {\n        this._gdpr_update_persistence({'clear_persistence': true});\n\n    // check whether we should opt out by default\n    // note: we don't clear persistence here by default since opt-out default state is often\n    //       used as an initial state while GDPR information is being collected\n    } else if (!this.has_opted_in_tracking() && (\n        this.get_config('opt_out_tracking_by_default') || _.cookie.get('mp_optout')\n    )) {\n        _.cookie.remove('mp_optout');\n        this.opt_out_tracking({\n            'clear_persistence': this.get_config('opt_out_persistence_by_default')\n        });\n    }\n};\n\n/**\n * Enable or disable persistence based on options\n * only enable/disable if persistence is not already in this state\n * @param {boolean} [options.clear_persistence] If true, will delete all data stored by the sdk in persistence and disable it\n * @param {boolean} [options.enable_persistence] If true, will re-enable sdk persistence\n */\nMixpanelLib.prototype._gdpr_update_persistence = function(options) {\n    var disabled;\n    if (options && options['clear_persistence']) {\n        disabled = true;\n    } else if (options && options['enable_persistence']) {\n        disabled = false;\n    } else {\n        return;\n    }\n\n    if (!this.get_config('disable_persistence') && this['persistence'].disabled !== disabled) {\n        this['persistence'].set_disabled(disabled);\n    }\n\n    if (disabled) {\n        _.each(this.request_batchers, function(batcher) {\n            batcher.clear();\n        });\n    }\n};\n\n// call a base gdpr function after constructing the appropriate token and options args\nMixpanelLib.prototype._gdpr_call_func = function(func, options) {\n    options = _.extend({\n        'track': _.bind(this.track, this),\n        'persistence_type': this.get_config('opt_out_tracking_persistence_type'),\n        'cookie_prefix': this.get_config('opt_out_tracking_cookie_prefix'),\n        'cookie_expiration': this.get_config('cookie_expiration'),\n        'cross_site_cookie': this.get_config('cross_site_cookie'),\n        'cross_subdomain_cookie': this.get_config('cross_subdomain_cookie'),\n        'cookie_domain': this.get_config('cookie_domain'),\n        'secure_cookie': this.get_config('secure_cookie'),\n        'ignore_dnt': this.get_config('ignore_dnt')\n    }, options);\n\n    // check if localStorage can be used for recording opt out status, fall back to cookie if not\n    if (!_.localStorage.is_supported()) {\n        options['persistence_type'] = 'cookie';\n    }\n\n    return func(this.get_config('token'), {\n        track: options['track'],\n        trackEventName: options['track_event_name'],\n        trackProperties: options['track_properties'],\n        persistenceType: options['persistence_type'],\n        persistencePrefix: options['cookie_prefix'],\n        cookieDomain: options['cookie_domain'],\n        cookieExpiration: options['cookie_expiration'],\n        crossSiteCookie: options['cross_site_cookie'],\n        crossSubdomainCookie: options['cross_subdomain_cookie'],\n        secureCookie: options['secure_cookie'],\n        ignoreDnt: options['ignore_dnt']\n    });\n};\n\n/**\n * Opt the user in to data tracking and cookies/localstorage for this Mixpanel instance\n *\n * ### Usage\n *\n *     // opt user in\n *     mixpanel.opt_in_tracking();\n *\n *     // opt user in with specific event name, properties, cookie configuration\n *     mixpanel.opt_in_tracking({\n *         track_event_name: 'User opted in',\n *         track_event_properties: {\n *             'Email': 'jdoe@example.com'\n *         },\n *         cookie_expiration: 30,\n *         secure_cookie: true\n *     });\n *\n * @param {Object} [options] A dictionary of config options to override\n * @param {function} [options.track] Function used for tracking a Mixpanel event to record the opt-in action (default is this Mixpanel instance's track method)\n * @param {string} [options.track_event_name=$opt_in] Event name to be used for tracking the opt-in action\n * @param {Object} [options.track_properties] Set of properties to be tracked along with the opt-in action\n * @param {boolean} [options.enable_persistence=true] If true, will re-enable sdk persistence\n * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n * @param {string} [options.cookie_prefix=__mp_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookie_expiration] Number of days until the opt-in cookie expires (overrides value specified in this Mixpanel instance's config)\n * @param {string} [options.cookie_domain] Custom cookie domain (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.cross_site_cookie] Whether the opt-in cookie is set as cross-site-enabled (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.cross_subdomain_cookie] Whether the opt-in cookie is set as cross-subdomain or not (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.secure_cookie] Whether the opt-in cookie is set as secure or not (overrides value specified in this Mixpanel instance's config)\n */\nMixpanelLib.prototype.opt_in_tracking = function(options) {\n    options = _.extend({\n        'enable_persistence': true\n    }, options);\n\n    this._gdpr_call_func(optIn, options);\n    this._gdpr_update_persistence(options);\n};\n\n/**\n * Opt the user out of data tracking and cookies/localstorage for this Mixpanel instance\n *\n * ### Usage\n *\n *     // opt user out\n *     mixpanel.opt_out_tracking();\n *\n *     // opt user out with different cookie configuration from Mixpanel instance\n *     mixpanel.opt_out_tracking({\n *         cookie_expiration: 30,\n *         secure_cookie: true\n *     });\n *\n * @param {Object} [options] A dictionary of config options to override\n * @param {boolean} [options.delete_user=true] If true, will delete the currently identified user's profile and clear all charges after opting the user out\n * @param {boolean} [options.clear_persistence=true] If true, will delete all data stored by the sdk in persistence\n * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n * @param {string} [options.cookie_prefix=__mp_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookie_expiration] Number of days until the opt-in cookie expires (overrides value specified in this Mixpanel instance's config)\n * @param {string} [options.cookie_domain] Custom cookie domain (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.cross_site_cookie] Whether the opt-in cookie is set as cross-site-enabled (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.cross_subdomain_cookie] Whether the opt-in cookie is set as cross-subdomain or not (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.secure_cookie] Whether the opt-in cookie is set as secure or not (overrides value specified in this Mixpanel instance's config)\n */\nMixpanelLib.prototype.opt_out_tracking = function(options) {\n    options = _.extend({\n        'clear_persistence': true,\n        'delete_user': true\n    }, options);\n\n    // delete user and clear charges since these methods may be disabled by opt-out\n    if (options['delete_user'] && this['people'] && this['people']._identify_called()) {\n        this['people'].delete_user();\n        this['people'].clear_charges();\n    }\n\n    this._gdpr_call_func(optOut, options);\n    this._gdpr_update_persistence(options);\n};\n\n/**\n * Check whether the user has opted in to data tracking and cookies/localstorage for this Mixpanel instance\n *\n * ### Usage\n *\n *     var has_opted_in = mixpanel.has_opted_in_tracking();\n *     // use has_opted_in value\n *\n * @param {Object} [options] A dictionary of config options to override\n * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n * @param {string} [options.cookie_prefix=__mp_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n * @returns {boolean} current opt-in status\n */\nMixpanelLib.prototype.has_opted_in_tracking = function(options) {\n    return this._gdpr_call_func(hasOptedIn, options);\n};\n\n/**\n * Check whether the user has opted out of data tracking and cookies/localstorage for this Mixpanel instance\n *\n * ### Usage\n *\n *     var has_opted_out = mixpanel.has_opted_out_tracking();\n *     // use has_opted_out value\n *\n * @param {Object} [options] A dictionary of config options to override\n * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n * @param {string} [options.cookie_prefix=__mp_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n * @returns {boolean} current opt-out status\n */\nMixpanelLib.prototype.has_opted_out_tracking = function(options) {\n    return this._gdpr_call_func(hasOptedOut, options);\n};\n\n/**\n * Clear the user's opt in/out status of data tracking and cookies/localstorage for this Mixpanel instance\n *\n * ### Usage\n *\n *     // clear user's opt-in/out status\n *     mixpanel.clear_opt_in_out_tracking();\n *\n *     // clear user's opt-in/out status with specific cookie configuration - should match\n *     // configuration used when opt_in_tracking/opt_out_tracking methods were called.\n *     mixpanel.clear_opt_in_out_tracking({\n *         cookie_expiration: 30,\n *         secure_cookie: true\n *     });\n *\n * @param {Object} [options] A dictionary of config options to override\n * @param {boolean} [options.enable_persistence=true] If true, will re-enable sdk persistence\n * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n * @param {string} [options.cookie_prefix=__mp_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookie_expiration] Number of days until the opt-in cookie expires (overrides value specified in this Mixpanel instance's config)\n * @param {string} [options.cookie_domain] Custom cookie domain (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.cross_site_cookie] Whether the opt-in cookie is set as cross-site-enabled (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.cross_subdomain_cookie] Whether the opt-in cookie is set as cross-subdomain or not (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.secure_cookie] Whether the opt-in cookie is set as secure or not (overrides value specified in this Mixpanel instance's config)\n */\nMixpanelLib.prototype.clear_opt_in_out_tracking = function(options) {\n    options = _.extend({\n        'enable_persistence': true\n    }, options);\n\n    this._gdpr_call_func(clearOptInOut, options);\n    this._gdpr_update_persistence(options);\n};\n\n// EXPORTS (for closure compiler)\n\n// MixpanelLib Exports\nMixpanelLib.prototype['init']                               = MixpanelLib.prototype.init;\nMixpanelLib.prototype['reset']                              = MixpanelLib.prototype.reset;\nMixpanelLib.prototype['disable']                            = MixpanelLib.prototype.disable;\nMixpanelLib.prototype['time_event']                         = MixpanelLib.prototype.time_event;\nMixpanelLib.prototype['track']                              = MixpanelLib.prototype.track;\nMixpanelLib.prototype['track_links']                        = MixpanelLib.prototype.track_links;\nMixpanelLib.prototype['track_forms']                        = MixpanelLib.prototype.track_forms;\nMixpanelLib.prototype['track_pageview']                     = MixpanelLib.prototype.track_pageview;\nMixpanelLib.prototype['register']                           = MixpanelLib.prototype.register;\nMixpanelLib.prototype['register_once']                      = MixpanelLib.prototype.register_once;\nMixpanelLib.prototype['unregister']                         = MixpanelLib.prototype.unregister;\nMixpanelLib.prototype['identify']                           = MixpanelLib.prototype.identify;\nMixpanelLib.prototype['alias']                              = MixpanelLib.prototype.alias;\nMixpanelLib.prototype['name_tag']                           = MixpanelLib.prototype.name_tag;\nMixpanelLib.prototype['set_config']                         = MixpanelLib.prototype.set_config;\nMixpanelLib.prototype['get_config']                         = MixpanelLib.prototype.get_config;\nMixpanelLib.prototype['get_property']                       = MixpanelLib.prototype.get_property;\nMixpanelLib.prototype['get_distinct_id']                    = MixpanelLib.prototype.get_distinct_id;\nMixpanelLib.prototype['toString']                           = MixpanelLib.prototype.toString;\nMixpanelLib.prototype['_check_and_handle_notifications']    = MixpanelLib.prototype._check_and_handle_notifications;\nMixpanelLib.prototype['_handle_user_decide_check_complete'] = MixpanelLib.prototype._handle_user_decide_check_complete;\nMixpanelLib.prototype['_show_notification']                 = MixpanelLib.prototype._show_notification;\nMixpanelLib.prototype['opt_out_tracking']                   = MixpanelLib.prototype.opt_out_tracking;\nMixpanelLib.prototype['opt_in_tracking']                    = MixpanelLib.prototype.opt_in_tracking;\nMixpanelLib.prototype['has_opted_out_tracking']             = MixpanelLib.prototype.has_opted_out_tracking;\nMixpanelLib.prototype['has_opted_in_tracking']              = MixpanelLib.prototype.has_opted_in_tracking;\nMixpanelLib.prototype['clear_opt_in_out_tracking']          = MixpanelLib.prototype.clear_opt_in_out_tracking;\nMixpanelLib.prototype['get_group']                          = MixpanelLib.prototype.get_group;\nMixpanelLib.prototype['set_group']                          = MixpanelLib.prototype.set_group;\nMixpanelLib.prototype['add_group']                          = MixpanelLib.prototype.add_group;\nMixpanelLib.prototype['remove_group']                       = MixpanelLib.prototype.remove_group;\nMixpanelLib.prototype['track_with_groups']                  = MixpanelLib.prototype.track_with_groups;\nMixpanelLib.prototype['stop_batch_requests']                = MixpanelLib.prototype.stop_batch_requests;\n\n// MixpanelPersistence Exports\nMixpanelPersistence.prototype['properties']            = MixpanelPersistence.prototype.properties;\nMixpanelPersistence.prototype['update_search_keyword'] = MixpanelPersistence.prototype.update_search_keyword;\nMixpanelPersistence.prototype['update_referrer_info']  = MixpanelPersistence.prototype.update_referrer_info;\nMixpanelPersistence.prototype['get_cross_subdomain']   = MixpanelPersistence.prototype.get_cross_subdomain;\nMixpanelPersistence.prototype['clear']                 = MixpanelPersistence.prototype.clear;\n\n_.safewrap_class(MixpanelLib, ['identify', '_check_and_handle_notifications', '_show_notification']);\n\n\nvar instances = {};\nvar extend_mp = function() {\n    // add all the sub mixpanel instances\n    _.each(instances, function(instance, name) {\n        if (name !== PRIMARY_INSTANCE_NAME) { mixpanel_master[name] = instance; }\n    });\n\n    // add private functions as _\n    mixpanel_master['_'] = _;\n};\n\nvar override_mp_init_func = function() {\n    // we override the snippets init function to handle the case where a\n    // user initializes the mixpanel library after the script loads & runs\n    mixpanel_master['init'] = function(token, config, name) {\n        if (name) {\n            // initialize a sub library\n            if (!mixpanel_master[name]) {\n                mixpanel_master[name] = instances[name] = create_mplib(token, config, name);\n                mixpanel_master[name]._loaded();\n            }\n            return mixpanel_master[name];\n        } else {\n            var instance = mixpanel_master;\n\n            if (instances[PRIMARY_INSTANCE_NAME]) {\n                // main mixpanel lib already initialized\n                instance = instances[PRIMARY_INSTANCE_NAME];\n            } else if (token) {\n                // intialize the main mixpanel lib\n                instance = create_mplib(token, config, PRIMARY_INSTANCE_NAME);\n                instance._loaded();\n                instances[PRIMARY_INSTANCE_NAME] = instance;\n            }\n\n            mixpanel_master = instance;\n            if (init_type === INIT_SNIPPET) {\n                window$1[PRIMARY_INSTANCE_NAME] = mixpanel_master;\n            }\n            extend_mp();\n        }\n    };\n};\n\nvar add_dom_loaded_handler = function() {\n    // Cross browser DOM Loaded support\n    function dom_loaded_handler() {\n        // function flag since we only want to execute this once\n        if (dom_loaded_handler.done) { return; }\n        dom_loaded_handler.done = true;\n\n        DOM_LOADED = true;\n        ENQUEUE_REQUESTS = false;\n\n        _.each(instances, function(inst) {\n            inst._dom_loaded();\n        });\n    }\n\n    function do_scroll_check() {\n        try {\n            document$1.documentElement.doScroll('left');\n        } catch(e) {\n            setTimeout(do_scroll_check, 1);\n            return;\n        }\n\n        dom_loaded_handler();\n    }\n\n    if (document$1.addEventListener) {\n        if (document$1.readyState === 'complete') {\n            // safari 4 can fire the DOMContentLoaded event before loading all\n            // external JS (including this file). you will see some copypasta\n            // on the internet that checks for 'complete' and 'loaded', but\n            // 'loaded' is an IE thing\n            dom_loaded_handler();\n        } else {\n            document$1.addEventListener('DOMContentLoaded', dom_loaded_handler, false);\n        }\n    } else if (document$1.attachEvent) {\n        // IE\n        document$1.attachEvent('onreadystatechange', dom_loaded_handler);\n\n        // check to make sure we arn't in a frame\n        var toplevel = false;\n        try {\n            toplevel = window$1.frameElement === null;\n        } catch(e) {\n            // noop\n        }\n\n        if (document$1.documentElement.doScroll && toplevel) {\n            do_scroll_check();\n        }\n    }\n\n    // fallback handler, always will work\n    _.register_event(window$1, 'load', dom_loaded_handler, true);\n};\n\nfunction init_as_module() {\n    init_type = INIT_MODULE;\n    mixpanel_master = new MixpanelLib();\n\n    override_mp_init_func();\n    mixpanel_master['init']();\n    add_dom_loaded_handler();\n\n    return mixpanel_master;\n}\n\nvar mixpanel = init_as_module();\n\nmodule.exports = mixpanel;"],"sourceRoot":""}