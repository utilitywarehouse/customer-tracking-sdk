{"version":3,"sources":["webpack://uw_tracking/webpack/bootstrap","webpack://uw_tracking/./node_modules/events/events.js","webpack://uw_tracking/./node_modules/mixpanel-browser/dist/mixpanel.cjs.js","webpack://uw_tracking/./src/backend/mixpanel-browser.ts","webpack://uw_tracking/./src/generated/tracking.ts","webpack://uw_tracking/./src/tracker.ts","webpack://uw_tracking/./src/browser/index.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","ReflectOwnKeys","R","Reflect","ReflectApply","apply","target","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","EventEmitter","init","this","_events","undefined","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","_getMaxListeners","that","_addListener","type","prepend","events","existing","warning","newListener","emit","unshift","push","length","warned","w","Error","String","emitter","count","console","warn","onceWrapper","fired","removeListener","wrapFn","arguments","_onceWrap","state","wrapped","_listeners","unwrap","evlistener","arr","ret","Array","unwrapListeners","arrayClone","listenerCount","copy","set","arg","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","error","er","err","message","context","handler","len","listeners","addListener","on","prependListener","once","prependOnceListener","list","position","originalListener","shift","index","pop","spliceOne","off","removeAllListeners","keys","rawListeners","eventNames","window$1","Config","DEBUG","LIB_VERSION","loc","hostname","navigator","userAgent","document","location","referrer","screen","width","height","window","at","ch","text","escapee","next","number","string","white","T","ArrayProto","FuncProto","ObjProto","slice","toString","windowConsole","navigator$1","document$1","windowOpera","opera","nativeBind","nativeForEach","forEach","nativeIndexOf","indexOf","nativeMap","map","nativeIsArray","isArray","breaker","_","trim","str","replace","console$1","log","isUndefined","each","toArray","critical","log_func_with_prefix","func","prefix","console_with_prefix","bound","isFunction","ctor","self","result","bind_instance_methods","obj","iterator","escapeHTML","escaped","isString","extend","source","prop","f","test","x","isArguments","iterable","values","callback","results","item","identity","include","found","includes","needle","inherit","subclass","superclass","constructor","isObject","isEmptyObject","isDate","isNumber","isElement","nodeType","encodeDates","v","k","formatDate","timestamp","Date","now","pad","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","safewrap","e","safewrap_class","klass","functions","safewrap_instance_methods","strip_empty_properties","truncate","val","JSONEncode","mixed_val","quote","escapable","meta","lastIndex","a","charCodeAt","holder","gap","mind","partial","toJSON","isFinite","join","JSONDecode","SyntaxError","charAt","hex","uffff","parseInt","fromCharCode","array","word","base64Encode","data","h1","h2","h3","h4","bits","b64","ac","enc","tmp_arr","utf8Encode","start","end","stringl","utftext","c1","substring","UUID","se","Math","random","ua","buffer","xor","byte_array","j","tmp","UA","isBlockedUA","HTTPBuildQuery","formdata","arg_separator","use_val","use_key","encodeURIComponent","getQueryParam","url","param","RegExp","exec","decodeURIComponent","getHashParam","hash","matches","match","cookie","nameEQ","ca","split","parse","set_seconds","seconds","is_cross_subdomain","is_secure","is_cross_site","domain_override","cdomain","expires","secure","domain","extract_domain","date","setTime","getTime","toGMTString","days","new_cookie_val","remove","_localStorageSupported","localStorageSupported","storage","forceCheck","supported","localStorage","cheap_guid","setItem","getItem","removeItem","is_supported","force_check","msg","register_event","fixEvent","event","preventDefault","stopPropagation","returnValue","cancelBubble","element","oldSchool","useCapture","addEventListener","ontype","old_handler","new_handler","old_handlers","old_result","new_result","makeHandler","TOKEN_MATCH_REGEX","dom_query","getAllChildren","all","getElementsByTagName","bad_whitespace","hasClass","elem","selector","className","getElementsBySelector","token","tagName","foundCount","elements","currentContextIndex","tokens","currentContext","id","getElementById","nodeName","toLowerCase","token_match","checkFunction","attrName","attrOperator","attrValue","getAttribute","lastIndexOf","query","info","campaignParams","campaign_keywords","kw","params","kwkey","URL","searchEngine","search","searchInfo","keyword","browser","user_agent","vendor","browserVersion","regex","parseFloat","os","device","referringDomain","properties","href","people_properties","pageviewInfo","page","maxlen","guid","determine_eligibility","feature","percent_allowed","SIMPLE_DOMAIN_MATCH_REGEX","DOMAIN_MATCH_REGEX","domain_regex","parts","tld","JSONStringify","JSONParse","getClassName","el","baseVal","isElementNode","isTag","tag","isTextNode","shouldTrackElement","curEl","parentNode","classes","shouldTrackValue","JSON","stringify","autotrack","_initializedTokens","_previousElementSibling","previousElementSibling","previousSibling","_loadScript","scriptUrlToLoad","scriptTag","createElement","src","onload","scripts","insertBefore","body","appendChild","_getPropertiesFromElement","props","attributes","attr","nthChild","nthOfType","currentElem","_getDefaultProperties","eventType","host","pathname","_extractCustomPropertyValue","customProperty","propValues","querySelectorAll","matchedElem","_getCustomProperties","targetElementList","_customProperties","eventSelector","eventElements","eventElement","_getEventTarget","srcElement","_trackEvent","instance","elText","shouldTrackDomEvent","elementText","elementsJson","explicitNoTrack","shouldTrackEl","safeElementText","childNodes","child","textContent","filter","track","_navigate","_addDomEventHandlers","get_config","_maybeLoadEditor","parseDecideResponse","response","title","_send_request","method","transport","_prepare_callback","setTimeout","_editorParamsFromHash","editorParams","expiresInSeconds","sessionStorage","history","replaceState","parseFromUrl","parseFromStorage","_loadEditor","editorUrl","enabledForProject","numBuckets","numEnabledBuckets","charCodeSum","isBrowserSupported","DomTracker","create_properties","event_handler","after_track_handler","mixpanel_instance","mp","event_name","user_callback","override_event","options","timeout","track_callback","timeout_occured","callback_fired","LinkTracker","evt","new_tab","which","metaKey","ctrlKey","FormTracker","submit","logger$2","SharedLock","storageKey","pollIntervalMS","timeoutMS","withLock","lockedCB","errorCB","pid","startTime","keyX","keyY","keyZ","reportError","delay","cb","loop","waitFor","predicate","getSetY","valY","criticalSection","logger$1","RequestQueue","lock","memQueue","enqueue","flushInterval","queueEntry","succeeded","storedQueue","readFromStorage","saveToStorage","fillBatch","batchSize","batch","idsInBatch","filterOutIDsAndInvalid","items","idSet","filteredItems","removeItemsByID","ids","storageEntry","queue","clear","logger","RequestBatcher","endpoint","libConfig","sendRequest","sendRequestFunc","stopped","flush","stop","timeoutID","clearTimeout","resetBatchSize","resetFlush","scheduleFlush","flushMS","requestInProgress","currentBatchSize","dataForRequest","batchSendCallback","res","removeItemsFromQueue","xhr_req","retryMS","headers","retryAfter","min","halvedBatchSize","max","floor","requestOptions","verbose","ignore_json_errors","timeout_ms","sendBeacon","optIn","_optInOut","optOut","hasOptedIn","_getStorageValue","hasOptedOut","ignoreDnt","win","nav","hasDntOn","dntValue","_hasDoNotTrackFlagOn","addOptOutCheckMixpanelLib","_addOptOutCheck","addOptOutCheckMixpanelPeople","_get_config","addOptOutCheckMixpanelGroup","clearOptInOut","_getStorage","_getStorageKey","crossSubdomainCookie","cookieDomain","persistenceType","persistencePrefix","optValue","cookieExpiration","secureCookie","crossSiteCookie","trackEventName","trackProperties","getConfigValue","optedOut","apiActions","set_action","to","$set","_is_reserved_property","unset_action","$unset","set_once_action","$set_once","union_action","list_name","$union","append_action","$append","remove_action","$remove","delete_action","MixpanelGroup","_init","group_key","group_id","_mixpanel","_group_key","_group_id","set_once","unset","union","date_encoded_data","_track_or_batch","truncated_data","batcher","request_batchers","groups","conf","RESERVED_PROPERTIES","MixpanelPersistence","config","campaign_params_saved","storage_type","load","update_config","upgrade","save","disabled","entry","old_cookie_name","old_cookie","upgrade_from_old_lib","register_once","_expire_notification_campaigns","expire_days","cross_subdomain","cross_site","cookie_domain","default_value","default_expiry","register","unregister","campaigns_shown","EXPIRY_TIME","campaign_id","update_campaign_params","update_search_keyword","update_referrer_info","get_referrer_info","safe_merge","set_disabled","set_cookie_domain","set_cross_site","set_cross_subdomain","set_secure","get_cross_subdomain","_add_to_people_queue","q_key","_get_queue_key","q_data","set_q","_get_or_create_queue","set_once_q","unset_q","add_q","union_q","remove_q","append_q","_pop_from_people_queue","enqueued_obj","append_obj","q","_get_queue","queued_action","default_val","set_event_timer","timers","remove_event_timer","IN_OPERATOR","NOT_IN_OPERATOR","MINUS_OPERATOR","MUL_OPERATOR","DIV_OPERATOR","MOD_OPERATOR","EQUALS_OPERATOR","NOT_EQUALS_OPERATOR","GREATER_OPERATOR","LESS_OPERATOR","GREATER_EQUAL_OPERATOR","LESS_EQUAL_OPERATOR","DEFINED_OPERATOR","NOT_DEFINED_OPERATOR","toNumber","toBoolean","evaluateEquality","op","_isArrayEqual","_isEqual","evaluateSelector","evaluateOperator","evaluateAnd","evaluateOr","leftValue","rightValue","evaluateIn","evaluatePlus","evaluateArithmetic","compare","localeCompare","evaluateComparison","evaluateBoolean","evaluateDateTime","evaluateList","evaluateNumber","evaluateString","b","evaluateDefined","evaluateNot","evaluateOperand","out","evaluateWindow","filters","MixpanelNotification","notif_data","mixpanel","persistence","resource_protocol","cdn_host","message_id","cta","notif_type","style","video_width","VIDEO_WIDTH","video_height","VIDEO_HEIGHT","display_triggers","dest_url","image_url","thumb_image_url","video_url","clickthrough","mini","notif_width","NOTIF_WIDTH_MINI","NOTIF_WIDTH","_set_client_config","imgs_to_preload","_init_image_html","_init_video","ANIM_TIME","MARKUP_PREFIX","BG_OPACITY","NOTIF_TOP","NOTIF_START_TOP","NOTIF_HEIGHT_MINI","THUMB_BORDER_SIZE","THUMB_IMG_SIZE","THUMB_OFFSET","round","show","body_el","_init_styles","_init_notification_el","_preload_images","_attach_and_animate","dismiss","marked_as_shown","_mark_delivery","notif_attr","notif_start","notif_goal","exiting_el","showing_video","_get_el","_get_notification_display_el","use_transitions","_remove_class","_add_class","_remove_notification_el","_animate_els","goal","class_name","anims","mss","done_cb","start_time","ai","anim","time_diff","in_progress","cur_time","anim_diff","anim_dir","suffix","shown","_get_shown_campaigns","notification_el","notif_el","_mark_as_shown","click_el","show_video","_track_event","_switch_to_video","tracking_cb","open","_matches_event_data","event_data","display_trigger","_browser_lte","version","browser_versions","img_html","thumb_img_html","notification_html","video_src","video_html","cancel_html","close_html","play_html","youtube_video","yt_custom","vimeo_video","video_iframe","flip_animate","main_html","innerHTML","style_vals","bg","bg_actions","bg_hover","bg_light","border_gray","cancel_opacity","mini_hover","text_title","text_main","text_tagline","text_hover","shadow","video_shadow","mini_shadow","thumb_total_size","anim_seconds","notif_media_queries","notif_styles","doc_width","doc_height","VENDOR_STYLES","VENDOR_PREFIXES","si","pi","media_queries","create_style_text","style_text","head_el","style_el","style_defs","st","mq_defs","mqt","mq","create_media_query_text","head","documentElement","setAttribute","styleSheet","cssText","youtube_match","vimeo_match","_yt_video_ready","firstScriptTag","get_style","style_name","styles","defaultView","getComputedStyle","currentStyle","extra_props","all_loaded_cb","preloaded_imgs","img_objs","img","Image","complete","imgs_loaded","clearInterval","_video_progress_checker","visibility","removeChild","get_browser_version","browser_ex","scrollWidth","offsetWidth","clientWidth","scrollHeight","offsetHeight","clientHeight","ie_ver","sample_styles","is_css_compatible","rule","toUpperCase","overlay","video_ready","video_inited","progress_bar","progress_time","progress_el","ytplayer","video_duration","update_video_time","current_time","secs","mins","hours","setInterval","clickx","pageX","getBoundingClientRect","left","init_type","mixpanel_master","MixpanelPeople","increment","by","$add","append","track_charge","amount","clear_charges","delete_user","_identify_called","get_distinct_id","device_id","get_property","user_id","had_persisted_distinct_id","people","_enqueue","status","conf_var","_flags","identify_called","_flush_one_queue","action","action_method","queue_to_params_fn","_this","queued_data","action_params","_flush","_set_callback","_add_callback","_append_callback","_set_once_callback","_union_callback","_unset_callback","_remove_callback","$append_queue","$remove_queue","$append_item","append_callback","$remove_item","remove_callback","USE_XHR","XMLHttpRequest","ENQUEUE_REQUESTS","DEFAULT_CONFIG","DOM_LOADED","MixpanelLib","create_mplib","_cached_groups","_user_decide_check_complete","_events_tracked_before_user_decide_check_complete","_execute_array","encode_data_for_request","json_data","_loaded","variable_features","set_config","PRIMARY_INSTANCE_NAME","__dom_loaded_queue","__request_queue","__disabled_events","_batch_requests","start_batch_requests","_gdpr_init","uuid","_set_default_superprops","_dom_loaded","_track_dom","has_opted_out_tracking","DomClass","dt","jsc","randomized_cb","callback_string","DEFAULT_OPTIONS","body_data","use_post","use_sendBeacon","verbose_mode","req","headerValue","headerName","setRequestHeader","withCredentials","onreadystatechange","readyState","responseText","statusText","send","script","async","defer","fn_name","alias_calls","other_calls","tracking_calls","execute","calls","caller","batcher_config","stop_batch_requests","disable","disable_all_events","should_send_immediately","send_request_options","request_enqueued_or_initiated","send_request_immediately","_event_is_disabled","start_timestamp","duration_in_ms","toFixed","property_blacklist","blacklisted_prop","_check_and_handle_triggered_notifications","set_group","group_ids","add_group","old_values","remove_group","old_value","idx","splice","track_with_groups","tracking_props","_create_map_key","_remove_group_from_cache","get_group","map_key","group","track_pageview","track_links","track_forms","time_event","_register_single","identify","new_distinct_id","previous_distinct_id","_check_and_handle_notifications","reset","alias","original","name_tag","prop_name","property_name","_show_notification","distinct_id","notifications","notif","_handle_user_decide_check_complete","has_opted_in_tracking","opt_in_tracking","opt_out_tracking","clear_opt_in_out_tracking","_gdpr_update_persistence","_gdpr_call_func","instances","override_mp_init_func","dom_loaded_handler","done","inst","attachEvent","toplevel","frameElement","doScroll","do_scroll_check","add_dom_loaded_handler","__assign","assign","MixpanelBrowserBackend","api_host","eventName","eventAttributes","Promise","resolve","reject","enable","account","baseAccount","baseApplication","basePerson","baseStageEvent","subject","intent","stage","baseInteractionEvent","interaction","channel","baseVisitEvent","baseClickEvent","Subject","SUBJECT_NONE","SUBJECT_METER_READING","UNRECOGNIZED","fromJSON","Intent","INTENT_NONE","INTENT_METER_READING_SUBMIT","Stage","STAGE_NONE","STAGE_SUBMITTED","STAGE_RECEIVED_REQUEST_FOR_AMEND","STAGE_COMPLETED","STAGE_REJECTED","STAGE_ENTERED","STAGE_STARTED","STAGE_FAILED","Interaction","INTERACTION_NONE","INTERACTION_CLICKED","INTERACTION_VIEWED","InteractionChannel","INTERACTION_CHANNEL_NONE","INTERACTION_CHANNEL_EMAIL","INTERACTION_CHANNEL_WILLIAM","Account","fromPartial","Application","Person","StageEvent","application","entries","_a","InteractionEvent","VisitEvent","ClickEvent","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","rejected","then","__generator","y","g","label","sent","trys","ops","verb","Tracker","backend","stageValue","subjectValue","intentValue","interactionValue","interactionChannelValue","stageEventName","interactionEventName","mapped","onError","fn","trackStage","event_1","e_1","_b","account_number","client_id","trackInteraction","event_2","e_2","interaction_channel","trackClick","event_3","e_3","trackVisit","event_4","e_4","baseTracker"],"mappings":"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","file":"uw_tracking.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","'use strict';\n\nvar Config = {\n    DEBUG: false,\n    LIB_VERSION: '2.38.0'\n};\n\n// since es6 imports are static and we run unit tests from the console, window won't be defined when importing this file\nvar window$1;\nif (typeof(window) === 'undefined') {\n    var loc = {\n        hostname: ''\n    };\n    window$1 = {\n        navigator: { userAgent: '' },\n        document: {\n            location: loc,\n            referrer: ''\n        },\n        screen: { width: 0, height: 0 },\n        location: loc\n    };\n} else {\n    window$1 = window;\n}\n\n/*\n * Saved references to long variable names, so that closure compiler can\n * minimize file size.\n */\n\nvar ArrayProto = Array.prototype;\nvar FuncProto = Function.prototype;\nvar ObjProto = Object.prototype;\nvar slice = ArrayProto.slice;\nvar toString = ObjProto.toString;\nvar hasOwnProperty = ObjProto.hasOwnProperty;\nvar windowConsole = window$1.console;\nvar navigator$1 = window$1.navigator;\nvar document$1 = window$1.document;\nvar windowOpera = window$1.opera;\nvar screen = window$1.screen;\nvar userAgent = navigator$1.userAgent;\nvar nativeBind = FuncProto.bind;\nvar nativeForEach = ArrayProto.forEach;\nvar nativeIndexOf = ArrayProto.indexOf;\nvar nativeMap = ArrayProto.map;\nvar nativeIsArray = Array.isArray;\nvar breaker = {};\nvar _ = {\n    trim: function(str) {\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/Trim#Polyfill\n        return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n    }\n};\n\n// Console override\nvar console$1 = {\n    /** @type {function(...*)} */\n    log: function() {\n        if (Config.DEBUG && !_.isUndefined(windowConsole) && windowConsole) {\n            try {\n                windowConsole.log.apply(windowConsole, arguments);\n            } catch (err) {\n                _.each(arguments, function(arg) {\n                    windowConsole.log(arg);\n                });\n            }\n        }\n    },\n    /** @type {function(...*)} */\n    error: function() {\n        if (Config.DEBUG && !_.isUndefined(windowConsole) && windowConsole) {\n            var args = ['Mixpanel error:'].concat(_.toArray(arguments));\n            try {\n                windowConsole.error.apply(windowConsole, args);\n            } catch (err) {\n                _.each(args, function(arg) {\n                    windowConsole.error(arg);\n                });\n            }\n        }\n    },\n    /** @type {function(...*)} */\n    critical: function() {\n        if (!_.isUndefined(windowConsole) && windowConsole) {\n            var args = ['Mixpanel error:'].concat(_.toArray(arguments));\n            try {\n                windowConsole.error.apply(windowConsole, args);\n            } catch (err) {\n                _.each(args, function(arg) {\n                    windowConsole.error(arg);\n                });\n            }\n        }\n    }\n};\n\nvar log_func_with_prefix = function(func, prefix) {\n    return function() {\n        arguments[0] = '[' + prefix + '] ' + arguments[0];\n        return func.apply(console$1, arguments);\n    };\n};\nvar console_with_prefix = function(prefix) {\n    return {\n        log: log_func_with_prefix(console$1.log, prefix),\n        error: log_func_with_prefix(console$1.error, prefix),\n        critical: log_func_with_prefix(console$1.critical, prefix)\n    };\n};\n\n\n// UNDERSCORE\n// Embed part of the Underscore Library\n_.bind = function(func, context) {\n    var args, bound;\n    if (nativeBind && func.bind === nativeBind) {\n        return nativeBind.apply(func, slice.call(arguments, 1));\n    }\n    if (!_.isFunction(func)) {\n        throw new TypeError();\n    }\n    args = slice.call(arguments, 2);\n    bound = function() {\n        if (!(this instanceof bound)) {\n            return func.apply(context, args.concat(slice.call(arguments)));\n        }\n        var ctor = {};\n        ctor.prototype = func.prototype;\n        var self = new ctor();\n        ctor.prototype = null;\n        var result = func.apply(self, args.concat(slice.call(arguments)));\n        if (Object(result) === result) {\n            return result;\n        }\n        return self;\n    };\n    return bound;\n};\n\n_.bind_instance_methods = function(obj) {\n    for (var func in obj) {\n        if (typeof(obj[func]) === 'function') {\n            obj[func] = _.bind(obj[func], obj);\n        }\n    }\n};\n\n/**\n * @param {*=} obj\n * @param {function(...*)=} iterator\n * @param {Object=} context\n */\n_.each = function(obj, iterator, context) {\n    if (obj === null || obj === undefined) {\n        return;\n    }\n    if (nativeForEach && obj.forEach === nativeForEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length === +obj.length) {\n        for (var i = 0, l = obj.length; i < l; i++) {\n            if (i in obj && iterator.call(context, obj[i], i, obj) === breaker) {\n                return;\n            }\n        }\n    } else {\n        for (var key in obj) {\n            if (hasOwnProperty.call(obj, key)) {\n                if (iterator.call(context, obj[key], key, obj) === breaker) {\n                    return;\n                }\n            }\n        }\n    }\n};\n\n_.escapeHTML = function(s) {\n    var escaped = s;\n    if (escaped && _.isString(escaped)) {\n        escaped = escaped\n            .replace(/&/g, '&amp;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;')\n            .replace(/\"/g, '&quot;')\n            .replace(/'/g, '&#039;');\n    }\n    return escaped;\n};\n\n_.extend = function(obj) {\n    _.each(slice.call(arguments, 1), function(source) {\n        for (var prop in source) {\n            if (source[prop] !== void 0) {\n                obj[prop] = source[prop];\n            }\n        }\n    });\n    return obj;\n};\n\n_.isArray = nativeIsArray || function(obj) {\n    return toString.call(obj) === '[object Array]';\n};\n\n// from a comment on http://dbj.org/dbj/?p=286\n// fails on only one very rare and deliberate custom object:\n// var bomb = { toString : undefined, valueOf: function(o) { return \"function BOMBA!\"; }};\n_.isFunction = function(f) {\n    try {\n        return /^\\s*\\bfunction\\b/.test(f);\n    } catch (x) {\n        return false;\n    }\n};\n\n_.isArguments = function(obj) {\n    return !!(obj && hasOwnProperty.call(obj, 'callee'));\n};\n\n_.toArray = function(iterable) {\n    if (!iterable) {\n        return [];\n    }\n    if (iterable.toArray) {\n        return iterable.toArray();\n    }\n    if (_.isArray(iterable)) {\n        return slice.call(iterable);\n    }\n    if (_.isArguments(iterable)) {\n        return slice.call(iterable);\n    }\n    return _.values(iterable);\n};\n\n_.map = function(arr, callback) {\n    if (nativeMap && arr.map === nativeMap) {\n        return arr.map(callback);\n    } else {\n        var results = [];\n        _.each(arr, function(item) {\n            results.push(callback(item));\n        });\n        return results;\n    }\n};\n\n_.keys = function(obj) {\n    var results = [];\n    if (obj === null) {\n        return results;\n    }\n    _.each(obj, function(value, key) {\n        results[results.length] = key;\n    });\n    return results;\n};\n\n_.values = function(obj) {\n    var results = [];\n    if (obj === null) {\n        return results;\n    }\n    _.each(obj, function(value) {\n        results[results.length] = value;\n    });\n    return results;\n};\n\n_.identity = function(value) {\n    return value;\n};\n\n_.include = function(obj, target) {\n    var found = false;\n    if (obj === null) {\n        return found;\n    }\n    if (nativeIndexOf && obj.indexOf === nativeIndexOf) {\n        return obj.indexOf(target) != -1;\n    }\n    _.each(obj, function(value) {\n        if (found || (found = (value === target))) {\n            return breaker;\n        }\n    });\n    return found;\n};\n\n_.includes = function(str, needle) {\n    return str.indexOf(needle) !== -1;\n};\n\n// Underscore Addons\n_.inherit = function(subclass, superclass) {\n    subclass.prototype = new superclass();\n    subclass.prototype.constructor = subclass;\n    subclass.superclass = superclass.prototype;\n    return subclass;\n};\n\n_.isObject = function(obj) {\n    return (obj === Object(obj) && !_.isArray(obj));\n};\n\n_.isEmptyObject = function(obj) {\n    if (_.isObject(obj)) {\n        for (var key in obj) {\n            if (hasOwnProperty.call(obj, key)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    return false;\n};\n\n_.isUndefined = function(obj) {\n    return obj === void 0;\n};\n\n_.isString = function(obj) {\n    return toString.call(obj) == '[object String]';\n};\n\n_.isDate = function(obj) {\n    return toString.call(obj) == '[object Date]';\n};\n\n_.isNumber = function(obj) {\n    return toString.call(obj) == '[object Number]';\n};\n\n_.isElement = function(obj) {\n    return !!(obj && obj.nodeType === 1);\n};\n\n_.encodeDates = function(obj) {\n    _.each(obj, function(v, k) {\n        if (_.isDate(v)) {\n            obj[k] = _.formatDate(v);\n        } else if (_.isObject(v)) {\n            obj[k] = _.encodeDates(v); // recurse\n        }\n    });\n    return obj;\n};\n\n_.timestamp = function() {\n    Date.now = Date.now || function() {\n        return +new Date;\n    };\n    return Date.now();\n};\n\n_.formatDate = function(d) {\n    // YYYY-MM-DDTHH:MM:SS in UTC\n    function pad(n) {\n        return n < 10 ? '0' + n : n;\n    }\n    return d.getUTCFullYear() + '-' +\n        pad(d.getUTCMonth() + 1) + '-' +\n        pad(d.getUTCDate()) + 'T' +\n        pad(d.getUTCHours()) + ':' +\n        pad(d.getUTCMinutes()) + ':' +\n        pad(d.getUTCSeconds());\n};\n\n_.safewrap = function(f) {\n    return function() {\n        try {\n            return f.apply(this, arguments);\n        } catch (e) {\n            console$1.critical('Implementation error. Please turn on debug and contact support@mixpanel.com.');\n            if (Config.DEBUG){\n                console$1.critical(e);\n            }\n        }\n    };\n};\n\n_.safewrap_class = function(klass, functions) {\n    for (var i = 0; i < functions.length; i++) {\n        klass.prototype[functions[i]] = _.safewrap(klass.prototype[functions[i]]);\n    }\n};\n\n_.safewrap_instance_methods = function(obj) {\n    for (var func in obj) {\n        if (typeof(obj[func]) === 'function') {\n            obj[func] = _.safewrap(obj[func]);\n        }\n    }\n};\n\n_.strip_empty_properties = function(p) {\n    var ret = {};\n    _.each(p, function(v, k) {\n        if (_.isString(v) && v.length > 0) {\n            ret[k] = v;\n        }\n    });\n    return ret;\n};\n\n/*\n * this function returns a copy of object after truncating it.  If\n * passed an Array or Object it will iterate through obj and\n * truncate all the values recursively.\n */\n_.truncate = function(obj, length) {\n    var ret;\n\n    if (typeof(obj) === 'string') {\n        ret = obj.slice(0, length);\n    } else if (_.isArray(obj)) {\n        ret = [];\n        _.each(obj, function(val) {\n            ret.push(_.truncate(val, length));\n        });\n    } else if (_.isObject(obj)) {\n        ret = {};\n        _.each(obj, function(val, key) {\n            ret[key] = _.truncate(val, length);\n        });\n    } else {\n        ret = obj;\n    }\n\n    return ret;\n};\n\n_.JSONEncode = (function() {\n    return function(mixed_val) {\n        var value = mixed_val;\n        var quote = function(string) {\n            var escapable = /[\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g; // eslint-disable-line no-control-regex\n            var meta = { // table of character substitutions\n                '\\b': '\\\\b',\n                '\\t': '\\\\t',\n                '\\n': '\\\\n',\n                '\\f': '\\\\f',\n                '\\r': '\\\\r',\n                '\"': '\\\\\"',\n                '\\\\': '\\\\\\\\'\n            };\n\n            escapable.lastIndex = 0;\n            return escapable.test(string) ?\n                '\"' + string.replace(escapable, function(a) {\n                    var c = meta[a];\n                    return typeof c === 'string' ? c :\n                        '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n                }) + '\"' :\n                '\"' + string + '\"';\n        };\n\n        var str = function(key, holder) {\n            var gap = '';\n            var indent = '    ';\n            var i = 0; // The loop counter.\n            var k = ''; // The member key.\n            var v = ''; // The member value.\n            var length = 0;\n            var mind = gap;\n            var partial = [];\n            var value = holder[key];\n\n            // If the value has a toJSON method, call it to obtain a replacement value.\n            if (value && typeof value === 'object' &&\n                typeof value.toJSON === 'function') {\n                value = value.toJSON(key);\n            }\n\n            // What happens next depends on the value's type.\n            switch (typeof value) {\n                case 'string':\n                    return quote(value);\n\n                case 'number':\n                    // JSON numbers must be finite. Encode non-finite numbers as null.\n                    return isFinite(value) ? String(value) : 'null';\n\n                case 'boolean':\n                case 'null':\n                    // If the value is a boolean or null, convert it to a string. Note:\n                    // typeof null does not produce 'null'. The case is included here in\n                    // the remote chance that this gets fixed someday.\n\n                    return String(value);\n\n                case 'object':\n                    // If the type is 'object', we might be dealing with an object or an array or\n                    // null.\n                    // Due to a specification blunder in ECMAScript, typeof null is 'object',\n                    // so watch out for that case.\n                    if (!value) {\n                        return 'null';\n                    }\n\n                    // Make an array to hold the partial results of stringifying this object value.\n                    gap += indent;\n                    partial = [];\n\n                    // Is the value an array?\n                    if (toString.apply(value) === '[object Array]') {\n                        // The value is an array. Stringify every element. Use null as a placeholder\n                        // for non-JSON values.\n\n                        length = value.length;\n                        for (i = 0; i < length; i += 1) {\n                            partial[i] = str(i, value) || 'null';\n                        }\n\n                        // Join all of the elements together, separated with commas, and wrap them in\n                        // brackets.\n                        v = partial.length === 0 ? '[]' :\n                            gap ? '[\\n' + gap +\n                            partial.join(',\\n' + gap) + '\\n' +\n                            mind + ']' :\n                                '[' + partial.join(',') + ']';\n                        gap = mind;\n                        return v;\n                    }\n\n                    // Iterate through all of the keys in the object.\n                    for (k in value) {\n                        if (hasOwnProperty.call(value, k)) {\n                            v = str(k, value);\n                            if (v) {\n                                partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                            }\n                        }\n                    }\n\n                    // Join all of the member texts together, separated with commas,\n                    // and wrap them in braces.\n                    v = partial.length === 0 ? '{}' :\n                        gap ? '{' + partial.join(',') + '' +\n                        mind + '}' : '{' + partial.join(',') + '}';\n                    gap = mind;\n                    return v;\n            }\n        };\n\n        // Make a fake root object containing our value under the key of ''.\n        // Return the result of stringifying the value.\n        return str('', {\n            '': value\n        });\n    };\n})();\n\n/**\n * From https://github.com/douglascrockford/JSON-js/blob/master/json_parse.js\n * Slightly modified to throw a real Error rather than a POJO\n */\n_.JSONDecode = (function() {\n    var at, // The index of the current character\n        ch, // The current character\n        escapee = {\n            '\"': '\"',\n            '\\\\': '\\\\',\n            '/': '/',\n            'b': '\\b',\n            'f': '\\f',\n            'n': '\\n',\n            'r': '\\r',\n            't': '\\t'\n        },\n        text,\n        error = function(m) {\n            var e = new SyntaxError(m);\n            e.at = at;\n            e.text = text;\n            throw e;\n        },\n        next = function(c) {\n            // If a c parameter is provided, verify that it matches the current character.\n            if (c && c !== ch) {\n                error('Expected \\'' + c + '\\' instead of \\'' + ch + '\\'');\n            }\n            // Get the next character. When there are no more characters,\n            // return the empty string.\n            ch = text.charAt(at);\n            at += 1;\n            return ch;\n        },\n        number = function() {\n            // Parse a number value.\n            var number,\n                string = '';\n\n            if (ch === '-') {\n                string = '-';\n                next('-');\n            }\n            while (ch >= '0' && ch <= '9') {\n                string += ch;\n                next();\n            }\n            if (ch === '.') {\n                string += '.';\n                while (next() && ch >= '0' && ch <= '9') {\n                    string += ch;\n                }\n            }\n            if (ch === 'e' || ch === 'E') {\n                string += ch;\n                next();\n                if (ch === '-' || ch === '+') {\n                    string += ch;\n                    next();\n                }\n                while (ch >= '0' && ch <= '9') {\n                    string += ch;\n                    next();\n                }\n            }\n            number = +string;\n            if (!isFinite(number)) {\n                error('Bad number');\n            } else {\n                return number;\n            }\n        },\n\n        string = function() {\n            // Parse a string value.\n            var hex,\n                i,\n                string = '',\n                uffff;\n            // When parsing for string values, we must look for \" and \\ characters.\n            if (ch === '\"') {\n                while (next()) {\n                    if (ch === '\"') {\n                        next();\n                        return string;\n                    }\n                    if (ch === '\\\\') {\n                        next();\n                        if (ch === 'u') {\n                            uffff = 0;\n                            for (i = 0; i < 4; i += 1) {\n                                hex = parseInt(next(), 16);\n                                if (!isFinite(hex)) {\n                                    break;\n                                }\n                                uffff = uffff * 16 + hex;\n                            }\n                            string += String.fromCharCode(uffff);\n                        } else if (typeof escapee[ch] === 'string') {\n                            string += escapee[ch];\n                        } else {\n                            break;\n                        }\n                    } else {\n                        string += ch;\n                    }\n                }\n            }\n            error('Bad string');\n        },\n        white = function() {\n            // Skip whitespace.\n            while (ch && ch <= ' ') {\n                next();\n            }\n        },\n        word = function() {\n            // true, false, or null.\n            switch (ch) {\n                case 't':\n                    next('t');\n                    next('r');\n                    next('u');\n                    next('e');\n                    return true;\n                case 'f':\n                    next('f');\n                    next('a');\n                    next('l');\n                    next('s');\n                    next('e');\n                    return false;\n                case 'n':\n                    next('n');\n                    next('u');\n                    next('l');\n                    next('l');\n                    return null;\n            }\n            error('Unexpected \"' + ch + '\"');\n        },\n        value, // Placeholder for the value function.\n        array = function() {\n            // Parse an array value.\n            var array = [];\n\n            if (ch === '[') {\n                next('[');\n                white();\n                if (ch === ']') {\n                    next(']');\n                    return array; // empty array\n                }\n                while (ch) {\n                    array.push(value());\n                    white();\n                    if (ch === ']') {\n                        next(']');\n                        return array;\n                    }\n                    next(',');\n                    white();\n                }\n            }\n            error('Bad array');\n        },\n        object = function() {\n            // Parse an object value.\n            var key,\n                object = {};\n\n            if (ch === '{') {\n                next('{');\n                white();\n                if (ch === '}') {\n                    next('}');\n                    return object; // empty object\n                }\n                while (ch) {\n                    key = string();\n                    white();\n                    next(':');\n                    if (Object.hasOwnProperty.call(object, key)) {\n                        error('Duplicate key \"' + key + '\"');\n                    }\n                    object[key] = value();\n                    white();\n                    if (ch === '}') {\n                        next('}');\n                        return object;\n                    }\n                    next(',');\n                    white();\n                }\n            }\n            error('Bad object');\n        };\n\n    value = function() {\n        // Parse a JSON value. It could be an object, an array, a string,\n        // a number, or a word.\n        white();\n        switch (ch) {\n            case '{':\n                return object();\n            case '[':\n                return array();\n            case '\"':\n                return string();\n            case '-':\n                return number();\n            default:\n                return ch >= '0' && ch <= '9' ? number() : word();\n        }\n    };\n\n    // Return the json_parse function. It will have access to all of the\n    // above functions and variables.\n    return function(source) {\n        var result;\n\n        text = source;\n        at = 0;\n        ch = ' ';\n        result = value();\n        white();\n        if (ch) {\n            error('Syntax error');\n        }\n\n        return result;\n    };\n})();\n\n_.base64Encode = function(data) {\n    var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n    var o1, o2, o3, h1, h2, h3, h4, bits, i = 0,\n        ac = 0,\n        enc = '',\n        tmp_arr = [];\n\n    if (!data) {\n        return data;\n    }\n\n    data = _.utf8Encode(data);\n\n    do { // pack three octets into four hexets\n        o1 = data.charCodeAt(i++);\n        o2 = data.charCodeAt(i++);\n        o3 = data.charCodeAt(i++);\n\n        bits = o1 << 16 | o2 << 8 | o3;\n\n        h1 = bits >> 18 & 0x3f;\n        h2 = bits >> 12 & 0x3f;\n        h3 = bits >> 6 & 0x3f;\n        h4 = bits & 0x3f;\n\n        // use hexets to index into b64, and append result to encoded string\n        tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);\n    } while (i < data.length);\n\n    enc = tmp_arr.join('');\n\n    switch (data.length % 3) {\n        case 1:\n            enc = enc.slice(0, -2) + '==';\n            break;\n        case 2:\n            enc = enc.slice(0, -1) + '=';\n            break;\n    }\n\n    return enc;\n};\n\n_.utf8Encode = function(string) {\n    string = (string + '').replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n\n    var utftext = '',\n        start,\n        end;\n    var stringl = 0,\n        n;\n\n    start = end = 0;\n    stringl = string.length;\n\n    for (n = 0; n < stringl; n++) {\n        var c1 = string.charCodeAt(n);\n        var enc = null;\n\n        if (c1 < 128) {\n            end++;\n        } else if ((c1 > 127) && (c1 < 2048)) {\n            enc = String.fromCharCode((c1 >> 6) | 192, (c1 & 63) | 128);\n        } else {\n            enc = String.fromCharCode((c1 >> 12) | 224, ((c1 >> 6) & 63) | 128, (c1 & 63) | 128);\n        }\n        if (enc !== null) {\n            if (end > start) {\n                utftext += string.substring(start, end);\n            }\n            utftext += enc;\n            start = end = n + 1;\n        }\n    }\n\n    if (end > start) {\n        utftext += string.substring(start, string.length);\n    }\n\n    return utftext;\n};\n\n_.UUID = (function() {\n\n    // Time/ticks information\n    // 1*new Date() is a cross browser version of Date.now()\n    var T = function() {\n        var d = 1 * new Date(),\n            i = 0;\n\n        // this while loop figures how many browser ticks go by\n        // before 1*new Date() returns a new number, ie the amount\n        // of ticks that go by per millisecond\n        while (d == 1 * new Date()) {\n            i++;\n        }\n\n        return d.toString(16) + i.toString(16);\n    };\n\n    // Math.Random entropy\n    var R = function() {\n        return Math.random().toString(16).replace('.', '');\n    };\n\n    // User agent entropy\n    // This function takes the user agent string, and then xors\n    // together each sequence of 8 bytes.  This produces a final\n    // sequence of 8 bytes which it returns as hex.\n    var UA = function() {\n        var ua = userAgent,\n            i, ch, buffer = [],\n            ret = 0;\n\n        function xor(result, byte_array) {\n            var j, tmp = 0;\n            for (j = 0; j < byte_array.length; j++) {\n                tmp |= (buffer[j] << j * 8);\n            }\n            return result ^ tmp;\n        }\n\n        for (i = 0; i < ua.length; i++) {\n            ch = ua.charCodeAt(i);\n            buffer.unshift(ch & 0xFF);\n            if (buffer.length >= 4) {\n                ret = xor(ret, buffer);\n                buffer = [];\n            }\n        }\n\n        if (buffer.length > 0) {\n            ret = xor(ret, buffer);\n        }\n\n        return ret.toString(16);\n    };\n\n    return function() {\n        var se = (screen.height * screen.width).toString(16);\n        return (T() + '-' + R() + '-' + UA() + '-' + se + '-' + T());\n    };\n})();\n\n// _.isBlockedUA()\n// This is to block various web spiders from executing our JS and\n// sending false tracking data\n_.isBlockedUA = function(ua) {\n    if (/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp)/i.test(ua)) {\n        return true;\n    }\n    return false;\n};\n\n/**\n * @param {Object=} formdata\n * @param {string=} arg_separator\n */\n_.HTTPBuildQuery = function(formdata, arg_separator) {\n    var use_val, use_key, tmp_arr = [];\n\n    if (_.isUndefined(arg_separator)) {\n        arg_separator = '&';\n    }\n\n    _.each(formdata, function(val, key) {\n        use_val = encodeURIComponent(val.toString());\n        use_key = encodeURIComponent(key);\n        tmp_arr[tmp_arr.length] = use_key + '=' + use_val;\n    });\n\n    return tmp_arr.join(arg_separator);\n};\n\n_.getQueryParam = function(url, param) {\n    // Expects a raw URL\n\n    param = param.replace(/[[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n    var regexS = '[\\\\?&]' + param + '=([^&#]*)',\n        regex = new RegExp(regexS),\n        results = regex.exec(url);\n    if (results === null || (results && typeof(results[1]) !== 'string' && results[1].length)) {\n        return '';\n    } else {\n        var result = results[1];\n        try {\n            result = decodeURIComponent(result);\n        } catch(err) {\n            console$1.error('Skipping decoding for malformed query param: ' + result);\n        }\n        return result.replace(/\\+/g, ' ');\n    }\n};\n\n_.getHashParam = function(hash, param) {\n    var matches = hash.match(new RegExp(param + '=([^&]*)'));\n    return matches ? matches[1] : null;\n};\n\n// _.cookie\n// Methods partially borrowed from quirksmode.org/js/cookies.html\n_.cookie = {\n    get: function(name) {\n        var nameEQ = name + '=';\n        var ca = document$1.cookie.split(';');\n        for (var i = 0; i < ca.length; i++) {\n            var c = ca[i];\n            while (c.charAt(0) == ' ') {\n                c = c.substring(1, c.length);\n            }\n            if (c.indexOf(nameEQ) === 0) {\n                return decodeURIComponent(c.substring(nameEQ.length, c.length));\n            }\n        }\n        return null;\n    },\n\n    parse: function(name) {\n        var cookie;\n        try {\n            cookie = _.JSONDecode(_.cookie.get(name)) || {};\n        } catch (err) {\n            // noop\n        }\n        return cookie;\n    },\n\n    set_seconds: function(name, value, seconds, is_cross_subdomain, is_secure, is_cross_site, domain_override) {\n        var cdomain = '',\n            expires = '',\n            secure = '';\n\n        if (domain_override) {\n            cdomain = '; domain=' + domain_override;\n        } else if (is_cross_subdomain) {\n            var domain = extract_domain(document$1.location.hostname);\n            cdomain = domain ? '; domain=.' + domain : '';\n        }\n\n        if (seconds) {\n            var date = new Date();\n            date.setTime(date.getTime() + (seconds * 1000));\n            expires = '; expires=' + date.toGMTString();\n        }\n\n        if (is_cross_site) {\n            is_secure = true;\n            secure = '; SameSite=None';\n        }\n        if (is_secure) {\n            secure += '; secure';\n        }\n\n        document$1.cookie = name + '=' + encodeURIComponent(value) + expires + '; path=/' + cdomain + secure;\n    },\n\n    set: function(name, value, days, is_cross_subdomain, is_secure, is_cross_site, domain_override) {\n        var cdomain = '', expires = '', secure = '';\n\n        if (domain_override) {\n            cdomain = '; domain=' + domain_override;\n        } else if (is_cross_subdomain) {\n            var domain = extract_domain(document$1.location.hostname);\n            cdomain = domain ? '; domain=.' + domain : '';\n        }\n\n        if (days) {\n            var date = new Date();\n            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n            expires = '; expires=' + date.toGMTString();\n        }\n\n        if (is_cross_site) {\n            is_secure = true;\n            secure = '; SameSite=None';\n        }\n        if (is_secure) {\n            secure += '; secure';\n        }\n\n        var new_cookie_val = name + '=' + encodeURIComponent(value) + expires + '; path=/' + cdomain + secure;\n        document$1.cookie = new_cookie_val;\n        return new_cookie_val;\n    },\n\n    remove: function(name, is_cross_subdomain, domain_override) {\n        _.cookie.set(name, '', -1, is_cross_subdomain, false, false, domain_override);\n    }\n};\n\nvar _localStorageSupported = null;\nvar localStorageSupported = function(storage, forceCheck) {\n    if (_localStorageSupported !== null && !forceCheck) {\n        return _localStorageSupported;\n    }\n\n    var supported = true;\n    try {\n        storage = storage || window.localStorage;\n        var key = '__mplss_' + cheap_guid(8),\n            val = 'xyz';\n        storage.setItem(key, val);\n        if (storage.getItem(key) !== val) {\n            supported = false;\n        }\n        storage.removeItem(key);\n    } catch (err) {\n        supported = false;\n    }\n\n    _localStorageSupported = supported;\n    return supported;\n};\n\n// _.localStorage\n_.localStorage = {\n    is_supported: function(force_check) {\n        var supported = localStorageSupported(null, force_check);\n        if (!supported) {\n            console$1.error('localStorage unsupported; falling back to cookie store');\n        }\n        return supported;\n    },\n\n    error: function(msg) {\n        console$1.error('localStorage error: ' + msg);\n    },\n\n    get: function(name) {\n        try {\n            return window.localStorage.getItem(name);\n        } catch (err) {\n            _.localStorage.error(err);\n        }\n        return null;\n    },\n\n    parse: function(name) {\n        try {\n            return _.JSONDecode(_.localStorage.get(name)) || {};\n        } catch (err) {\n            // noop\n        }\n        return null;\n    },\n\n    set: function(name, value) {\n        try {\n            window.localStorage.setItem(name, value);\n        } catch (err) {\n            _.localStorage.error(err);\n        }\n    },\n\n    remove: function(name) {\n        try {\n            window.localStorage.removeItem(name);\n        } catch (err) {\n            _.localStorage.error(err);\n        }\n    }\n};\n\n_.register_event = (function() {\n    // written by Dean Edwards, 2005\n    // with input from Tino Zijdel - crisp@xs4all.nl\n    // with input from Carl Sverre - mail@carlsverre.com\n    // with input from Mixpanel\n    // http://dean.edwards.name/weblog/2005/10/add-event/\n    // https://gist.github.com/1930440\n\n    /**\n     * @param {Object} element\n     * @param {string} type\n     * @param {function(...*)} handler\n     * @param {boolean=} oldSchool\n     * @param {boolean=} useCapture\n     */\n    var register_event = function(element, type, handler, oldSchool, useCapture) {\n        if (!element) {\n            console$1.error('No valid element provided to register_event');\n            return;\n        }\n\n        if (element.addEventListener && !oldSchool) {\n            element.addEventListener(type, handler, !!useCapture);\n        } else {\n            var ontype = 'on' + type;\n            var old_handler = element[ontype]; // can be undefined\n            element[ontype] = makeHandler(element, handler, old_handler);\n        }\n    };\n\n    function makeHandler(element, new_handler, old_handlers) {\n        var handler = function(event) {\n            event = event || fixEvent(window.event);\n\n            // this basically happens in firefox whenever another script\n            // overwrites the onload callback and doesn't pass the event\n            // object to previously defined callbacks.  All the browsers\n            // that don't define window.event implement addEventListener\n            // so the dom_loaded handler will still be fired as usual.\n            if (!event) {\n                return undefined;\n            }\n\n            var ret = true;\n            var old_result, new_result;\n\n            if (_.isFunction(old_handlers)) {\n                old_result = old_handlers(event);\n            }\n            new_result = new_handler.call(element, event);\n\n            if ((false === old_result) || (false === new_result)) {\n                ret = false;\n            }\n\n            return ret;\n        };\n\n        return handler;\n    }\n\n    function fixEvent(event) {\n        if (event) {\n            event.preventDefault = fixEvent.preventDefault;\n            event.stopPropagation = fixEvent.stopPropagation;\n        }\n        return event;\n    }\n    fixEvent.preventDefault = function() {\n        this.returnValue = false;\n    };\n    fixEvent.stopPropagation = function() {\n        this.cancelBubble = true;\n    };\n\n    return register_event;\n})();\n\n\nvar TOKEN_MATCH_REGEX = new RegExp('^(\\\\w*)\\\\[(\\\\w+)([=~\\\\|\\\\^\\\\$\\\\*]?)=?\"?([^\\\\]\"]*)\"?\\\\]$');\n\n_.dom_query = (function() {\n    /* document.getElementsBySelector(selector)\n    - returns an array of element objects from the current document\n    matching the CSS selector. Selectors can contain element names,\n    class names and ids and can be nested. For example:\n\n    elements = document.getElementsBySelector('div#main p a.external')\n\n    Will return an array of all 'a' elements with 'external' in their\n    class attribute that are contained inside 'p' elements that are\n    contained inside the 'div' element which has id=\"main\"\n\n    New in version 0.4: Support for CSS2 and CSS3 attribute selectors:\n    See http://www.w3.org/TR/css3-selectors/#attribute-selectors\n\n    Version 0.4 - Simon Willison, March 25th 2003\n    -- Works in Phoenix 0.5, Mozilla 1.3, Opera 7, Internet Explorer 6, Internet Explorer 5 on Windows\n    -- Opera 7 fails\n\n    Version 0.5 - Carl Sverre, Jan 7th 2013\n    -- Now uses jQuery-esque `hasClass` for testing class name\n    equality.  This fixes a bug related to '-' characters being\n    considered not part of a 'word' in regex.\n    */\n\n    function getAllChildren(e) {\n        // Returns all children of element. Workaround required for IE5/Windows. Ugh.\n        return e.all ? e.all : e.getElementsByTagName('*');\n    }\n\n    var bad_whitespace = /[\\t\\r\\n]/g;\n\n    function hasClass(elem, selector) {\n        var className = ' ' + selector + ' ';\n        return ((' ' + elem.className + ' ').replace(bad_whitespace, ' ').indexOf(className) >= 0);\n    }\n\n    function getElementsBySelector(selector) {\n        // Attempt to fail gracefully in lesser browsers\n        if (!document$1.getElementsByTagName) {\n            return [];\n        }\n        // Split selector in to tokens\n        var tokens = selector.split(' ');\n        var token, bits, tagName, found, foundCount, i, j, k, elements, currentContextIndex;\n        var currentContext = [document$1];\n        for (i = 0; i < tokens.length; i++) {\n            token = tokens[i].replace(/^\\s+/, '').replace(/\\s+$/, '');\n            if (token.indexOf('#') > -1) {\n                // Token is an ID selector\n                bits = token.split('#');\n                tagName = bits[0];\n                var id = bits[1];\n                var element = document$1.getElementById(id);\n                if (!element || (tagName && element.nodeName.toLowerCase() != tagName)) {\n                    // element not found or tag with that ID not found, return false\n                    return [];\n                }\n                // Set currentContext to contain just this element\n                currentContext = [element];\n                continue; // Skip to next token\n            }\n            if (token.indexOf('.') > -1) {\n                // Token contains a class selector\n                bits = token.split('.');\n                tagName = bits[0];\n                var className = bits[1];\n                if (!tagName) {\n                    tagName = '*';\n                }\n                // Get elements matching tag, filter them for class selector\n                found = [];\n                foundCount = 0;\n                for (j = 0; j < currentContext.length; j++) {\n                    if (tagName == '*') {\n                        elements = getAllChildren(currentContext[j]);\n                    } else {\n                        elements = currentContext[j].getElementsByTagName(tagName);\n                    }\n                    for (k = 0; k < elements.length; k++) {\n                        found[foundCount++] = elements[k];\n                    }\n                }\n                currentContext = [];\n                currentContextIndex = 0;\n                for (j = 0; j < found.length; j++) {\n                    if (found[j].className &&\n                        _.isString(found[j].className) && // some SVG elements have classNames which are not strings\n                        hasClass(found[j], className)\n                    ) {\n                        currentContext[currentContextIndex++] = found[j];\n                    }\n                }\n                continue; // Skip to next token\n            }\n            // Code to deal with attribute selectors\n            var token_match = token.match(TOKEN_MATCH_REGEX);\n            if (token_match) {\n                tagName = token_match[1];\n                var attrName = token_match[2];\n                var attrOperator = token_match[3];\n                var attrValue = token_match[4];\n                if (!tagName) {\n                    tagName = '*';\n                }\n                // Grab all of the tagName elements within current context\n                found = [];\n                foundCount = 0;\n                for (j = 0; j < currentContext.length; j++) {\n                    if (tagName == '*') {\n                        elements = getAllChildren(currentContext[j]);\n                    } else {\n                        elements = currentContext[j].getElementsByTagName(tagName);\n                    }\n                    for (k = 0; k < elements.length; k++) {\n                        found[foundCount++] = elements[k];\n                    }\n                }\n                currentContext = [];\n                currentContextIndex = 0;\n                var checkFunction; // This function will be used to filter the elements\n                switch (attrOperator) {\n                    case '=': // Equality\n                        checkFunction = function(e) {\n                            return (e.getAttribute(attrName) == attrValue);\n                        };\n                        break;\n                    case '~': // Match one of space seperated words\n                        checkFunction = function(e) {\n                            return (e.getAttribute(attrName).match(new RegExp('\\\\b' + attrValue + '\\\\b')));\n                        };\n                        break;\n                    case '|': // Match start with value followed by optional hyphen\n                        checkFunction = function(e) {\n                            return (e.getAttribute(attrName).match(new RegExp('^' + attrValue + '-?')));\n                        };\n                        break;\n                    case '^': // Match starts with value\n                        checkFunction = function(e) {\n                            return (e.getAttribute(attrName).indexOf(attrValue) === 0);\n                        };\n                        break;\n                    case '$': // Match ends with value - fails with \"Warning\" in Opera 7\n                        checkFunction = function(e) {\n                            return (e.getAttribute(attrName).lastIndexOf(attrValue) == e.getAttribute(attrName).length - attrValue.length);\n                        };\n                        break;\n                    case '*': // Match ends with value\n                        checkFunction = function(e) {\n                            return (e.getAttribute(attrName).indexOf(attrValue) > -1);\n                        };\n                        break;\n                    default:\n                        // Just test for existence of attribute\n                        checkFunction = function(e) {\n                            return e.getAttribute(attrName);\n                        };\n                }\n                currentContext = [];\n                currentContextIndex = 0;\n                for (j = 0; j < found.length; j++) {\n                    if (checkFunction(found[j])) {\n                        currentContext[currentContextIndex++] = found[j];\n                    }\n                }\n                // alert('Attribute Selector: '+tagName+' '+attrName+' '+attrOperator+' '+attrValue);\n                continue; // Skip to next token\n            }\n            // If we get here, token is JUST an element (not a class or ID selector)\n            tagName = token;\n            found = [];\n            foundCount = 0;\n            for (j = 0; j < currentContext.length; j++) {\n                elements = currentContext[j].getElementsByTagName(tagName);\n                for (k = 0; k < elements.length; k++) {\n                    found[foundCount++] = elements[k];\n                }\n            }\n            currentContext = found;\n        }\n        return currentContext;\n    }\n\n    return function(query) {\n        if (_.isElement(query)) {\n            return [query];\n        } else if (_.isObject(query) && !_.isUndefined(query.length)) {\n            return query;\n        } else {\n            return getElementsBySelector.call(this, query);\n        }\n    };\n})();\n\n_.info = {\n    campaignParams: function() {\n        var campaign_keywords = 'utm_source utm_medium utm_campaign utm_content utm_term'.split(' '),\n            kw = '',\n            params = {};\n        _.each(campaign_keywords, function(kwkey) {\n            kw = _.getQueryParam(document$1.URL, kwkey);\n            if (kw.length) {\n                params[kwkey] = kw;\n            }\n        });\n\n        return params;\n    },\n\n    searchEngine: function(referrer) {\n        if (referrer.search('https?://(.*)google.([^/?]*)') === 0) {\n            return 'google';\n        } else if (referrer.search('https?://(.*)bing.com') === 0) {\n            return 'bing';\n        } else if (referrer.search('https?://(.*)yahoo.com') === 0) {\n            return 'yahoo';\n        } else if (referrer.search('https?://(.*)duckduckgo.com') === 0) {\n            return 'duckduckgo';\n        } else {\n            return null;\n        }\n    },\n\n    searchInfo: function(referrer) {\n        var search = _.info.searchEngine(referrer),\n            param = (search != 'yahoo') ? 'q' : 'p',\n            ret = {};\n\n        if (search !== null) {\n            ret['$search_engine'] = search;\n\n            var keyword = _.getQueryParam(referrer, param);\n            if (keyword.length) {\n                ret['mp_keyword'] = keyword;\n            }\n        }\n\n        return ret;\n    },\n\n    /**\n     * This function detects which browser is running this script.\n     * The order of the checks are important since many user agents\n     * include key words used in later checks.\n     */\n    browser: function(user_agent, vendor, opera) {\n        vendor = vendor || ''; // vendor is undefined for at least IE9\n        if (opera || _.includes(user_agent, ' OPR/')) {\n            if (_.includes(user_agent, 'Mini')) {\n                return 'Opera Mini';\n            }\n            return 'Opera';\n        } else if (/(BlackBerry|PlayBook|BB10)/i.test(user_agent)) {\n            return 'BlackBerry';\n        } else if (_.includes(user_agent, 'IEMobile') || _.includes(user_agent, 'WPDesktop')) {\n            return 'Internet Explorer Mobile';\n        } else if (_.includes(user_agent, 'SamsungBrowser/')) {\n            // https://developer.samsung.com/internet/user-agent-string-format\n            return 'Samsung Internet';\n        } else if (_.includes(user_agent, 'Edge') || _.includes(user_agent, 'Edg/')) {\n            return 'Microsoft Edge';\n        } else if (_.includes(user_agent, 'FBIOS')) {\n            return 'Facebook Mobile';\n        } else if (_.includes(user_agent, 'Chrome')) {\n            return 'Chrome';\n        } else if (_.includes(user_agent, 'CriOS')) {\n            return 'Chrome iOS';\n        } else if (_.includes(user_agent, 'UCWEB') || _.includes(user_agent, 'UCBrowser')) {\n            return 'UC Browser';\n        } else if (_.includes(user_agent, 'FxiOS')) {\n            return 'Firefox iOS';\n        } else if (_.includes(vendor, 'Apple')) {\n            if (_.includes(user_agent, 'Mobile')) {\n                return 'Mobile Safari';\n            }\n            return 'Safari';\n        } else if (_.includes(user_agent, 'Android')) {\n            return 'Android Mobile';\n        } else if (_.includes(user_agent, 'Konqueror')) {\n            return 'Konqueror';\n        } else if (_.includes(user_agent, 'Firefox')) {\n            return 'Firefox';\n        } else if (_.includes(user_agent, 'MSIE') || _.includes(user_agent, 'Trident/')) {\n            return 'Internet Explorer';\n        } else if (_.includes(user_agent, 'Gecko')) {\n            return 'Mozilla';\n        } else {\n            return '';\n        }\n    },\n\n    /**\n     * This function detects which browser version is running this script,\n     * parsing major and minor version (e.g., 42.1). User agent strings from:\n     * http://www.useragentstring.com/pages/useragentstring.php\n     */\n    browserVersion: function(userAgent, vendor, opera) {\n        var browser = _.info.browser(userAgent, vendor, opera);\n        var versionRegexs = {\n            'Internet Explorer Mobile': /rv:(\\d+(\\.\\d+)?)/,\n            'Microsoft Edge': /Edge?\\/(\\d+(\\.\\d+)?)/,\n            'Chrome': /Chrome\\/(\\d+(\\.\\d+)?)/,\n            'Chrome iOS': /CriOS\\/(\\d+(\\.\\d+)?)/,\n            'UC Browser' : /(UCBrowser|UCWEB)\\/(\\d+(\\.\\d+)?)/,\n            'Safari': /Version\\/(\\d+(\\.\\d+)?)/,\n            'Mobile Safari': /Version\\/(\\d+(\\.\\d+)?)/,\n            'Opera': /(Opera|OPR)\\/(\\d+(\\.\\d+)?)/,\n            'Firefox': /Firefox\\/(\\d+(\\.\\d+)?)/,\n            'Firefox iOS': /FxiOS\\/(\\d+(\\.\\d+)?)/,\n            'Konqueror': /Konqueror:(\\d+(\\.\\d+)?)/,\n            'BlackBerry': /BlackBerry (\\d+(\\.\\d+)?)/,\n            'Android Mobile': /android\\s(\\d+(\\.\\d+)?)/,\n            'Samsung Internet': /SamsungBrowser\\/(\\d+(\\.\\d+)?)/,\n            'Internet Explorer': /(rv:|MSIE )(\\d+(\\.\\d+)?)/,\n            'Mozilla': /rv:(\\d+(\\.\\d+)?)/\n        };\n        var regex = versionRegexs[browser];\n        if (regex === undefined) {\n            return null;\n        }\n        var matches = userAgent.match(regex);\n        if (!matches) {\n            return null;\n        }\n        return parseFloat(matches[matches.length - 2]);\n    },\n\n    os: function() {\n        var a = userAgent;\n        if (/Windows/i.test(a)) {\n            if (/Phone/.test(a) || /WPDesktop/.test(a)) {\n                return 'Windows Phone';\n            }\n            return 'Windows';\n        } else if (/(iPhone|iPad|iPod)/.test(a)) {\n            return 'iOS';\n        } else if (/Android/.test(a)) {\n            return 'Android';\n        } else if (/(BlackBerry|PlayBook|BB10)/i.test(a)) {\n            return 'BlackBerry';\n        } else if (/Mac/i.test(a)) {\n            return 'Mac OS X';\n        } else if (/Linux/.test(a)) {\n            return 'Linux';\n        } else if (/CrOS/.test(a)) {\n            return 'Chrome OS';\n        } else {\n            return '';\n        }\n    },\n\n    device: function(user_agent) {\n        if (/Windows Phone/i.test(user_agent) || /WPDesktop/.test(user_agent)) {\n            return 'Windows Phone';\n        } else if (/iPad/.test(user_agent)) {\n            return 'iPad';\n        } else if (/iPod/.test(user_agent)) {\n            return 'iPod Touch';\n        } else if (/iPhone/.test(user_agent)) {\n            return 'iPhone';\n        } else if (/(BlackBerry|PlayBook|BB10)/i.test(user_agent)) {\n            return 'BlackBerry';\n        } else if (/Android/.test(user_agent)) {\n            return 'Android';\n        } else {\n            return '';\n        }\n    },\n\n    referringDomain: function(referrer) {\n        var split = referrer.split('/');\n        if (split.length >= 3) {\n            return split[2];\n        }\n        return '';\n    },\n\n    properties: function() {\n        return _.extend(_.strip_empty_properties({\n            '$os': _.info.os(),\n            '$browser': _.info.browser(userAgent, navigator$1.vendor, windowOpera),\n            '$referrer': document$1.referrer,\n            '$referring_domain': _.info.referringDomain(document$1.referrer),\n            '$device': _.info.device(userAgent)\n        }), {\n            '$current_url': window$1.location.href,\n            '$browser_version': _.info.browserVersion(userAgent, navigator$1.vendor, windowOpera),\n            '$screen_height': screen.height,\n            '$screen_width': screen.width,\n            'mp_lib': 'web',\n            '$lib_version': Config.LIB_VERSION,\n            '$insert_id': cheap_guid(),\n            'time': _.timestamp() / 1000 // epoch time in seconds\n        });\n    },\n\n    people_properties: function() {\n        return _.extend(_.strip_empty_properties({\n            '$os': _.info.os(),\n            '$browser': _.info.browser(userAgent, navigator$1.vendor, windowOpera)\n        }), {\n            '$browser_version': _.info.browserVersion(userAgent, navigator$1.vendor, windowOpera)\n        });\n    },\n\n    pageviewInfo: function(page) {\n        return _.strip_empty_properties({\n            'mp_page': page,\n            'mp_referrer': document$1.referrer,\n            'mp_browser': _.info.browser(userAgent, navigator$1.vendor, windowOpera),\n            'mp_platform': _.info.os()\n        });\n    }\n};\n\nvar cheap_guid = function(maxlen) {\n    var guid = Math.random().toString(36).substring(2, 10) + Math.random().toString(36).substring(2, 10);\n    return maxlen ? guid.substring(0, maxlen) : guid;\n};\n\n/**\n * Check deterministically whether to include or exclude from a feature rollout/test based on the\n * given string and the desired percentage to include.\n * @param {String} str - string to run the check against (for instance a project's token)\n * @param {String} feature - name of feature (for inclusion in hash, to ensure different results\n * for different features)\n * @param {Number} percent_allowed - percentage chance that a given string will be included\n * @returns {Boolean} whether the given string should be included\n */\nvar determine_eligibility = _.safewrap(function(str, feature, percent_allowed) {\n    str = str + feature;\n\n    // Bernstein's hash: http://www.cse.yorku.ca/~oz/hash.html#djb2\n    var hash = 5381;\n    for (var i = 0; i < str.length; i++) {\n        hash = ((hash << 5) + hash) + str.charCodeAt(i);\n        hash = hash & hash;\n    }\n    var dart = (hash >>> 0) % 100;\n    return dart < percent_allowed;\n});\n\n// naive way to extract domain name (example.com) from full hostname (my.sub.example.com)\nvar SIMPLE_DOMAIN_MATCH_REGEX = /[a-z0-9][a-z0-9-]*\\.[a-z]+$/i;\n// this next one attempts to account for some ccSLDs, e.g. extracting oxford.ac.uk from www.oxford.ac.uk\nvar DOMAIN_MATCH_REGEX = /[a-z0-9][a-z0-9-]+\\.[a-z.]{2,6}$/i;\n/**\n * Attempts to extract main domain name from full hostname, using a few blunt heuristics. For\n * common TLDs like .com/.org that always have a simple SLD.TLD structure (example.com), we\n * simply extract the last two .-separated parts of the hostname (SIMPLE_DOMAIN_MATCH_REGEX).\n * For others, we attempt to account for short ccSLD+TLD combos (.ac.uk) with the legacy\n * DOMAIN_MATCH_REGEX (kept to maintain backwards compatibility with existing Mixpanel\n * integrations). The only _reliable_ way to extract domain from hostname is with an up-to-date\n * list like at https://publicsuffix.org/ so for cases that this helper fails at, the SDK\n * offers the 'cookie_domain' config option to set it explicitly.\n * @example\n * extract_domain('my.sub.example.com')\n * // 'example.com'\n */\nvar extract_domain = function(hostname) {\n    var domain_regex = DOMAIN_MATCH_REGEX;\n    var parts = hostname.split('.');\n    var tld = parts[parts.length - 1];\n    if (tld.length > 4 || tld === 'com' || tld === 'org') {\n        domain_regex = SIMPLE_DOMAIN_MATCH_REGEX;\n    }\n    var matches = hostname.match(domain_regex);\n    return matches ? matches[0] : '';\n};\n\nvar JSONStringify = null;\nvar JSONParse = null;\nif (typeof JSON !== 'undefined') {\n    JSONStringify = JSON.stringify;\n    JSONParse = JSON.parse;\n}\nJSONStringify = JSONStringify || _.JSONEncode;\nJSONParse = JSONParse || _.JSONDecode;\n\n// EXPORTS (for closure compiler)\n_['toArray']                = _.toArray;\n_['isObject']               = _.isObject;\n_['JSONEncode']             = _.JSONEncode;\n_['JSONDecode']             = _.JSONDecode;\n_['isBlockedUA']            = _.isBlockedUA;\n_['isEmptyObject']          = _.isEmptyObject;\n_['info']                   = _.info;\n_['info']['device']         = _.info.device;\n_['info']['browser']        = _.info.browser;\n_['info']['browserVersion'] = _.info.browserVersion;\n_['info']['properties']     = _.info.properties;\n\n/*\n * Get the className of an element, accounting for edge cases where element.className is an object\n * @param {Element} el - element to get the className of\n * @returns {string} the element's class\n */\nfunction getClassName(el) {\n    switch(typeof el.className) {\n        case 'string':\n            return el.className;\n        case 'object': // handle cases where className might be SVGAnimatedString or some other type\n            return el.className.baseVal || el.getAttribute('class') || '';\n        default: // future proof\n            return '';\n    }\n}\n\n/*\n * Get the direct text content of an element, protecting against sensitive data collection.\n * Concats textContent of each of the element's text node children; this avoids potential\n * collection of sensitive data that could happen if we used element.textContent and the\n * element had sensitive child elements, since element.textContent includes child content.\n * Scrubs values that look like they could be sensitive (i.e. cc or ssn number).\n * @param {Element} el - element to get the text of\n * @returns {string} the element's direct text content\n */\nfunction getSafeText(el) {\n    var elText = '';\n\n    if (shouldTrackElement(el) && el.childNodes && el.childNodes.length) {\n        _.each(el.childNodes, function(child) {\n            if (isTextNode(child) && child.textContent) {\n                elText += _.trim(child.textContent)\n                    // scrub potentially sensitive values\n                    .split(/(\\s+)/).filter(shouldTrackValue).join('')\n                    // normalize whitespace\n                    .replace(/[\\r\\n]/g, ' ').replace(/[ ]+/g, ' ')\n                    // truncate\n                    .substring(0, 255);\n            }\n        });\n    }\n\n    return _.trim(elText);\n}\n\n/*\n * Check whether an element has nodeType Node.ELEMENT_NODE\n * @param {Element} el - element to check\n * @returns {boolean} whether el is of the correct nodeType\n */\nfunction isElementNode(el) {\n    return el && el.nodeType === 1; // Node.ELEMENT_NODE - use integer constant for browser portability\n}\n\n/*\n * Check whether an element is of a given tag type.\n * Due to potential reference discrepancies (such as the webcomponents.js polyfill),\n * we want to match tagNames instead of specific references because something like\n * element === document.body won't always work because element might not be a native\n * element.\n * @param {Element} el - element to check\n * @param {string} tag - tag name (e.g., \"div\")\n * @returns {boolean} whether el is of the given tag type\n */\nfunction isTag(el, tag) {\n    return el && el.tagName && el.tagName.toLowerCase() === tag.toLowerCase();\n}\n\n/*\n * Check whether an element has nodeType Node.TEXT_NODE\n * @param {Element} el - element to check\n * @returns {boolean} whether el is of the correct nodeType\n */\nfunction isTextNode(el) {\n    return el && el.nodeType === 3; // Node.TEXT_NODE - use integer constant for browser portability\n}\n\n/*\n * Check whether a DOM event should be \"tracked\" or if it may contain sentitive data\n * using a variety of heuristics.\n * @param {Element} el - element to check\n * @param {Event} event - event to check\n * @returns {boolean} whether the event should be tracked\n */\nfunction shouldTrackDomEvent(el, event) {\n    if (!el || isTag(el, 'html') || !isElementNode(el)) {\n        return false;\n    }\n    var tag = el.tagName.toLowerCase();\n    switch (tag) {\n        case 'html':\n            return false;\n        case 'form':\n            return event.type === 'submit';\n        case 'input':\n            if (['button', 'submit'].indexOf(el.getAttribute('type')) === -1) {\n                return event.type === 'change';\n            } else {\n                return event.type === 'click';\n            }\n        case 'select':\n        case 'textarea':\n            return event.type === 'change';\n        default:\n            return event.type === 'click';\n    }\n}\n\n/*\n * Check whether a DOM element should be \"tracked\" or if it may contain sentitive data\n * using a variety of heuristics.\n * @param {Element} el - element to check\n * @returns {boolean} whether the element should be tracked\n */\nfunction shouldTrackElement(el) {\n    for (var curEl = el; curEl.parentNode && !isTag(curEl, 'body'); curEl = curEl.parentNode) {\n        var classes = getClassName(curEl).split(' ');\n        if (_.includes(classes, 'mp-sensitive') || _.includes(classes, 'mp-no-track')) {\n            return false;\n        }\n    }\n\n    if (_.includes(getClassName(el).split(' '), 'mp-include')) {\n        return true;\n    }\n\n    // don't send data from inputs or similar elements since there will always be\n    // a risk of clientside javascript placing sensitive data in attributes\n    if (\n        isTag(el, 'input') ||\n        isTag(el, 'select') ||\n        isTag(el, 'textarea') ||\n        el.getAttribute('contenteditable') === 'true'\n    ) {\n        return false;\n    }\n\n    // don't include hidden or password fields\n    var type = el.type || '';\n    if (typeof type === 'string') { // it's possible for el.type to be a DOM element if el is a form with a child input[name=\"type\"]\n        switch(type.toLowerCase()) {\n            case 'hidden':\n                return false;\n            case 'password':\n                return false;\n        }\n    }\n\n    // filter out data from fields that look like sensitive fields\n    var name = el.name || el.id || '';\n    if (typeof name === 'string') { // it's possible for el.name or el.id to be a DOM element if el is a form with a child input[name=\"name\"]\n        var sensitiveNameRegex = /^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i;\n        if (sensitiveNameRegex.test(name.replace(/[^a-zA-Z0-9]/g, ''))) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\n/*\n * Check whether a string value should be \"tracked\" or if it may contain sentitive data\n * using a variety of heuristics.\n * @param {string} value - string value to check\n * @returns {boolean} whether the element should be tracked\n */\nfunction shouldTrackValue(value) {\n    if (value === null || _.isUndefined(value)) {\n        return false;\n    }\n\n    if (typeof value === 'string') {\n        value = _.trim(value);\n\n        // check to see if input value looks like a credit card number\n        // see: https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9781449327453/ch04s20.html\n        var ccRegex = /^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/;\n        if (ccRegex.test((value || '').replace(/[- ]/g, ''))) {\n            return false;\n        }\n\n        // check to see if input value looks like a social security number\n        var ssnRegex = /(^\\d{3}-?\\d{2}-?\\d{4}$)/;\n        if (ssnRegex.test(value)) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\nvar autotrack = {\n    _initializedTokens: [],\n\n    _previousElementSibling: function(el) {\n        if (el.previousElementSibling) {\n            return el.previousElementSibling;\n        } else {\n            do {\n                el = el.previousSibling;\n            } while (el && !isElementNode(el));\n            return el;\n        }\n    },\n\n    _loadScript: function(scriptUrlToLoad, callback) {\n        var scriptTag = document.createElement('script');\n        scriptTag.type = 'text/javascript';\n        scriptTag.src = scriptUrlToLoad;\n        scriptTag.onload = callback;\n\n        var scripts = document.getElementsByTagName('script');\n        if (scripts.length > 0) {\n            scripts[0].parentNode.insertBefore(scriptTag, scripts[0]);\n        } else {\n            document.body.appendChild(scriptTag);\n        }\n    },\n\n    _getPropertiesFromElement: function(elem) {\n        var props = {\n            'classes': getClassName(elem).split(' '),\n            'tag_name': elem.tagName.toLowerCase()\n        };\n\n        if (shouldTrackElement(elem)) {\n            _.each(elem.attributes, function(attr) {\n                if (shouldTrackValue(attr.value)) {\n                    props['attr__' + attr.name] = attr.value;\n                }\n            });\n        }\n\n        var nthChild = 1;\n        var nthOfType = 1;\n        var currentElem = elem;\n        while (currentElem = this._previousElementSibling(currentElem)) { // eslint-disable-line no-cond-assign\n            nthChild++;\n            if (currentElem.tagName === elem.tagName) {\n                nthOfType++;\n            }\n        }\n        props['nth_child'] = nthChild;\n        props['nth_of_type'] = nthOfType;\n\n        return props;\n    },\n\n    _getDefaultProperties: function(eventType) {\n        return {\n            '$event_type': eventType,\n            '$ce_version': 1,\n            '$host': window.location.host,\n            '$pathname': window.location.pathname\n        };\n    },\n\n    _extractCustomPropertyValue: function(customProperty) {\n        var propValues = [];\n        _.each(document.querySelectorAll(customProperty['css_selector']), function(matchedElem) {\n            var value;\n\n            if (['input', 'select'].indexOf(matchedElem.tagName.toLowerCase()) > -1) {\n                value = matchedElem['value'];\n            } else if (matchedElem['textContent']) {\n                value = matchedElem['textContent'];\n            }\n\n            if (shouldTrackValue(value)) {\n                propValues.push(value);\n            }\n        });\n        return propValues.join(', ');\n    },\n\n    _getCustomProperties: function(targetElementList) {\n        var props = {};\n        _.each(this._customProperties, function(customProperty) {\n            _.each(customProperty['event_selectors'], function(eventSelector) {\n                var eventElements = document.querySelectorAll(eventSelector);\n                _.each(eventElements, function(eventElement) {\n                    if (_.includes(targetElementList, eventElement) && shouldTrackElement(eventElement)) {\n                        props[customProperty['name']] = this._extractCustomPropertyValue(customProperty);\n                    }\n                }, this);\n            }, this);\n        }, this);\n        return props;\n    },\n\n    _getEventTarget: function(e) {\n        // https://developer.mozilla.org/en-US/docs/Web/API/Event/target#Compatibility_notes\n        if (typeof e.target === 'undefined') {\n            return e.srcElement;\n        } else {\n            return e.target;\n        }\n    },\n\n    _trackEvent: function(e, instance) {\n        /*** Don't mess with this code without running IE8 tests on it ***/\n        var target = this._getEventTarget(e);\n        if (isTextNode(target)) { // defeat Safari bug (see: http://www.quirksmode.org/js/events_properties.html)\n            target = target.parentNode;\n        }\n\n        if (shouldTrackDomEvent(target, e)) {\n            var targetElementList = [target];\n            var curEl = target;\n            while (curEl.parentNode && !isTag(curEl, 'body')) {\n                targetElementList.push(curEl.parentNode);\n                curEl = curEl.parentNode;\n            }\n\n            var elementsJson = [];\n            var href, explicitNoTrack = false;\n            _.each(targetElementList, function(el) {\n                var shouldTrackEl = shouldTrackElement(el);\n\n                // if the element or a parent element is an anchor tag\n                // include the href as a property\n                if (el.tagName.toLowerCase() === 'a') {\n                    href = el.getAttribute('href');\n                    href = shouldTrackEl && shouldTrackValue(href) && href;\n                }\n\n                // allow users to programatically prevent tracking of elements by adding class 'mp-no-track'\n                var classes = getClassName(el).split(' ');\n                if (_.includes(classes, 'mp-no-track')) {\n                    explicitNoTrack = true;\n                }\n\n                elementsJson.push(this._getPropertiesFromElement(el));\n            }, this);\n\n            if (explicitNoTrack) {\n                return false;\n            }\n\n            // only populate text content from target element (not parents)\n            // to prevent text within a sensitive element from being collected\n            // as part of a parent's el.textContent\n            var elementText;\n            var safeElementText = getSafeText(target);\n            if (safeElementText && safeElementText.length) {\n                elementText = safeElementText;\n            }\n\n            var props = _.extend(\n                this._getDefaultProperties(e.type),\n                {\n                    '$elements':  elementsJson,\n                    '$el_attr__href': href,\n                    '$el_text': elementText\n                },\n                this._getCustomProperties(targetElementList)\n            );\n\n            instance.track('$web_event', props);\n            return true;\n        }\n    },\n\n    // only reason is to stub for unit tests\n    // since you can't override window.location props\n    _navigate: function(href) {\n        window.location.href = href;\n    },\n\n    _addDomEventHandlers: function(instance) {\n        var handler = _.bind(function(e) {\n            e = e || window.event;\n            this._trackEvent(e, instance);\n        }, this);\n        _.register_event(document, 'submit', handler, false, true);\n        _.register_event(document, 'change', handler, false, true);\n        _.register_event(document, 'click', handler, false, true);\n    },\n\n    _customProperties: {},\n    init: function(instance) {\n        if (!(document && document.body)) {\n            console.log('document not ready yet, trying again in 500 milliseconds...');\n            var that = this;\n            setTimeout(function() { that.init(instance); }, 500);\n            return;\n        }\n\n        var token = instance.get_config('token');\n        if (this._initializedTokens.indexOf(token) > -1) {\n            console.log('autotrack already initialized for token \"' + token + '\"');\n            return;\n        }\n        this._initializedTokens.push(token);\n\n        if (!this._maybeLoadEditor(instance)) { // don't autotrack actions when the editor is enabled\n            var parseDecideResponse = _.bind(function(response) {\n                if (response && response['config'] && response['config']['enable_collect_everything'] === true) {\n\n                    if (response['custom_properties']) {\n                        this._customProperties = response['custom_properties'];\n                    }\n\n                    instance.track('$web_event', _.extend({\n                        '$title': document.title\n                    }, this._getDefaultProperties('pageview')));\n\n                    this._addDomEventHandlers(instance);\n\n                } else {\n                    instance['__autotrack_enabled'] = false;\n                }\n            }, this);\n\n            instance._send_request(\n                instance.get_config('api_host') + '/decide/', {\n                    'verbose': true,\n                    'version': '1',\n                    'lib': 'web',\n                    'token': token\n                },\n                {method: 'GET', transport: 'XHR'},\n                instance._prepare_callback(parseDecideResponse)\n            );\n        }\n    },\n\n    _editorParamsFromHash: function(instance, hash) {\n        var editorParams;\n        try {\n            var state = _.getHashParam(hash, 'state');\n            state = JSON.parse(decodeURIComponent(state));\n            var expiresInSeconds = _.getHashParam(hash, 'expires_in');\n            editorParams = {\n                'accessToken': _.getHashParam(hash, 'access_token'),\n                'accessTokenExpiresAt': (new Date()).getTime() + (Number(expiresInSeconds) * 1000),\n                'bookmarkletMode': !!state['bookmarkletMode'],\n                'projectId': state['projectId'],\n                'projectOwnerId': state['projectOwnerId'],\n                'projectToken': state['token'],\n                'readOnly': state['readOnly'],\n                'userFlags': state['userFlags'],\n                'userId': state['userId']\n            };\n            window.sessionStorage.setItem('editorParams', JSON.stringify(editorParams));\n\n            if (state['desiredHash']) {\n                window.location.hash = state['desiredHash'];\n            } else if (window.history) {\n                history.replaceState('', document.title, window.location.pathname + window.location.search); // completely remove hash\n            } else {\n                window.location.hash = ''; // clear hash (but leaves # unfortunately)\n            }\n        } catch (e) {\n            console.error('Unable to parse data from hash', e);\n        }\n        return editorParams;\n    },\n\n    /**\n     * To load the visual editor, we need an access token and other state. That state comes from one of three places:\n     * 1. In the URL hash params if the customer is using an old snippet\n     * 2. From session storage under the key `_mpcehash` if the snippet already parsed the hash\n     * 3. From session storage under the key `editorParams` if the editor was initialized on a previous page\n     */\n    _maybeLoadEditor: function(instance) {\n        try {\n            var parseFromUrl = false;\n            if (_.getHashParam(window.location.hash, 'state')) {\n                var state = _.getHashParam(window.location.hash, 'state');\n                state = JSON.parse(decodeURIComponent(state));\n                parseFromUrl = state['action'] === 'mpeditor';\n            }\n            var parseFromStorage = !!window.sessionStorage.getItem('_mpcehash');\n            var editorParams;\n\n            if (parseFromUrl) { // happens if they are initializing the editor using an old snippet\n                editorParams = this._editorParamsFromHash(instance, window.location.hash);\n            } else if (parseFromStorage) { // happens if they are initialized the editor and using the new snippet\n                editorParams = this._editorParamsFromHash(instance, window.sessionStorage.getItem('_mpcehash'));\n                window.sessionStorage.removeItem('_mpcehash');\n            } else { // get credentials from sessionStorage from a previous initialzation\n                editorParams = JSON.parse(window.sessionStorage.getItem('editorParams') || '{}');\n            }\n\n            if (editorParams['projectToken'] && instance.get_config('token') === editorParams['projectToken']) {\n                this._loadEditor(instance, editorParams);\n                return true;\n            } else {\n                return false;\n            }\n        } catch (e) {\n            return false;\n        }\n    },\n\n    _loadEditor: function(instance, editorParams) {\n        if (!window['_mpEditorLoaded']) { // only load the codeless event editor once, even if there are multiple instances of MixpanelLib\n            window['_mpEditorLoaded'] = true;\n            var editorUrl = instance.get_config('app_host')\n              + '/js-bundle/reports/collect-everything/editor.js?_ts='\n              + (new Date()).getTime();\n            this._loadScript(editorUrl, function() {\n                window['mp_load_editor'](editorParams);\n            });\n            return true;\n        }\n        return false;\n    },\n\n    // this is a mechanism to ramp up CE with no server-side interaction.\n    // when CE is active, every page load results in a decide request. we\n    // need to gently ramp this up so we don't overload decide. this decides\n    // deterministically if CE is enabled for this project by modding the char\n    // value of the project token.\n    enabledForProject: function(token, numBuckets, numEnabledBuckets) {\n        numBuckets = !_.isUndefined(numBuckets) ? numBuckets : 10;\n        numEnabledBuckets = !_.isUndefined(numEnabledBuckets) ? numEnabledBuckets : 10;\n        var charCodeSum = 0;\n        for (var i = 0; i < token.length; i++) {\n            charCodeSum += token.charCodeAt(i);\n        }\n        return (charCodeSum % numBuckets) < numEnabledBuckets;\n    },\n\n    isBrowserSupported: function() {\n        return _.isFunction(document.querySelectorAll);\n    }\n};\n\n_.bind_instance_methods(autotrack);\n_.safewrap_instance_methods(autotrack);\n\n/**\n * DomTracker Object\n * @constructor\n */\nvar DomTracker = function() {};\n\n\n// interface\nDomTracker.prototype.create_properties = function() {};\nDomTracker.prototype.event_handler = function() {};\nDomTracker.prototype.after_track_handler = function() {};\n\nDomTracker.prototype.init = function(mixpanel_instance) {\n    this.mp = mixpanel_instance;\n    return this;\n};\n\n/**\n * @param {Object|string} query\n * @param {string} event_name\n * @param {Object=} properties\n * @param {function=} user_callback\n */\nDomTracker.prototype.track = function(query, event_name, properties, user_callback) {\n    var that = this;\n    var elements = _.dom_query(query);\n\n    if (elements.length === 0) {\n        console$1.error('The DOM query (' + query + ') returned 0 elements');\n        return;\n    }\n\n    _.each(elements, function(element) {\n        _.register_event(element, this.override_event, function(e) {\n            var options = {};\n            var props = that.create_properties(properties, this);\n            var timeout = that.mp.get_config('track_links_timeout');\n\n            that.event_handler(e, this, options);\n\n            // in case the mixpanel servers don't get back to us in time\n            window.setTimeout(that.track_callback(user_callback, props, options, true), timeout);\n\n            // fire the tracking event\n            that.mp.track(event_name, props, that.track_callback(user_callback, props, options));\n        });\n    }, this);\n\n    return true;\n};\n\n/**\n * @param {function} user_callback\n * @param {Object} props\n * @param {boolean=} timeout_occured\n */\nDomTracker.prototype.track_callback = function(user_callback, props, options, timeout_occured) {\n    timeout_occured = timeout_occured || false;\n    var that = this;\n\n    return function() {\n        // options is referenced from both callbacks, so we can have\n        // a 'lock' of sorts to ensure only one fires\n        if (options.callback_fired) { return; }\n        options.callback_fired = true;\n\n        if (user_callback && user_callback(timeout_occured, props) === false) {\n            // user can prevent the default functionality by\n            // returning false from their callback\n            return;\n        }\n\n        that.after_track_handler(props, options, timeout_occured);\n    };\n};\n\nDomTracker.prototype.create_properties = function(properties, element) {\n    var props;\n\n    if (typeof(properties) === 'function') {\n        props = properties(element);\n    } else {\n        props = _.extend({}, properties);\n    }\n\n    return props;\n};\n\n/**\n * LinkTracker Object\n * @constructor\n * @extends DomTracker\n */\nvar LinkTracker = function() {\n    this.override_event = 'click';\n};\n_.inherit(LinkTracker, DomTracker);\n\nLinkTracker.prototype.create_properties = function(properties, element) {\n    var props = LinkTracker.superclass.create_properties.apply(this, arguments);\n\n    if (element.href) { props['url'] = element.href; }\n\n    return props;\n};\n\nLinkTracker.prototype.event_handler = function(evt, element, options) {\n    options.new_tab = (\n        evt.which === 2 ||\n        evt.metaKey ||\n        evt.ctrlKey ||\n        element.target === '_blank'\n    );\n    options.href = element.href;\n\n    if (!options.new_tab) {\n        evt.preventDefault();\n    }\n};\n\nLinkTracker.prototype.after_track_handler = function(props, options) {\n    if (options.new_tab) { return; }\n\n    setTimeout(function() {\n        window.location = options.href;\n    }, 0);\n};\n\n/**\n * FormTracker Object\n * @constructor\n * @extends DomTracker\n */\nvar FormTracker = function() {\n    this.override_event = 'submit';\n};\n_.inherit(FormTracker, DomTracker);\n\nFormTracker.prototype.event_handler = function(evt, element, options) {\n    options.element = element;\n    evt.preventDefault();\n};\n\nFormTracker.prototype.after_track_handler = function(props, options) {\n    setTimeout(function() {\n        options.element.submit();\n    }, 0);\n};\n\n// eslint-disable-line camelcase\n\nvar logger$2 = console_with_prefix('lock');\n\n/**\n * SharedLock: a mutex built on HTML5 localStorage, to ensure that only one browser\n * window/tab at a time will be able to access shared resources.\n *\n * Based on the Alur and Taubenfeld fast lock\n * (http://www.cs.rochester.edu/research/synchronization/pseudocode/fastlock.html)\n * with an added timeout to ensure there will be eventual progress in the event\n * that a window is closed in the middle of the callback.\n *\n * Implementation based on the original version by David Wolever (https://github.com/wolever)\n * at https://gist.github.com/wolever/5fd7573d1ef6166e8f8c4af286a69432.\n *\n * @example\n * const myLock = new SharedLock('some-key');\n * myLock.withLock(function() {\n *   console.log('I hold the mutex!');\n * });\n *\n * @constructor\n */\nvar SharedLock = function(key, options) {\n    options = options || {};\n\n    this.storageKey = key;\n    this.storage = options.storage || window.localStorage;\n    this.pollIntervalMS = options.pollIntervalMS || 100;\n    this.timeoutMS = options.timeoutMS || 2000;\n};\n\n// pass in a specific pid to test contention scenarios; otherwise\n// it is chosen randomly for each acquisition attempt\nSharedLock.prototype.withLock = function(lockedCB, errorCB, pid) {\n    if (!pid && typeof errorCB !== 'function') {\n        pid = errorCB;\n        errorCB = null;\n    }\n\n    var i = pid || (new Date().getTime() + '|' + Math.random());\n    var startTime = new Date().getTime();\n\n    var key = this.storageKey;\n    var pollIntervalMS = this.pollIntervalMS;\n    var timeoutMS = this.timeoutMS;\n    var storage = this.storage;\n\n    var keyX = key + ':X';\n    var keyY = key + ':Y';\n    var keyZ = key + ':Z';\n\n    var reportError = function(err) {\n        errorCB && errorCB(err);\n    };\n\n    var delay = function(cb) {\n        if (new Date().getTime() - startTime > timeoutMS) {\n            logger$2.error('Timeout waiting for mutex on ' + key + '; clearing lock. [' + i + ']');\n            storage.removeItem(keyZ);\n            storage.removeItem(keyY);\n            loop();\n            return;\n        }\n        setTimeout(function() {\n            try {\n                cb();\n            } catch(err) {\n                reportError(err);\n            }\n        }, pollIntervalMS * (Math.random() + 0.1));\n    };\n\n    var waitFor = function(predicate, cb) {\n        if (predicate()) {\n            cb();\n        } else {\n            delay(function() {\n                waitFor(predicate, cb);\n            });\n        }\n    };\n\n    var getSetY = function() {\n        var valY = storage.getItem(keyY);\n        if (valY && valY !== i) { // if Y == i then this process already has the lock (useful for test cases)\n            return false;\n        } else {\n            storage.setItem(keyY, i);\n            if (storage.getItem(keyY) === i) {\n                return true;\n            } else {\n                if (!localStorageSupported(storage, true)) {\n                    throw new Error('localStorage support dropped while acquiring lock');\n                }\n                return false;\n            }\n        }\n    };\n\n    var loop = function() {\n        storage.setItem(keyX, i);\n\n        waitFor(getSetY, function() {\n            if (storage.getItem(keyX) === i) {\n                criticalSection();\n                return;\n            }\n\n            delay(function() {\n                if (storage.getItem(keyY) !== i) {\n                    loop();\n                    return;\n                }\n                waitFor(function() {\n                    return !storage.getItem(keyZ);\n                }, criticalSection);\n            });\n        });\n    };\n\n    var criticalSection = function() {\n        storage.setItem(keyZ, '1');\n        try {\n            lockedCB();\n        } finally {\n            storage.removeItem(keyZ);\n            if (storage.getItem(keyY) === i) {\n                storage.removeItem(keyY);\n            }\n            if (storage.getItem(keyX) === i) {\n                storage.removeItem(keyX);\n            }\n        }\n    };\n\n    try {\n        if (localStorageSupported(storage, true)) {\n            loop();\n        } else {\n            throw new Error('localStorage support check failed');\n        }\n    } catch(err) {\n        reportError(err);\n    }\n};\n\n// eslint-disable-line camelcase\n\nvar logger$1 = console_with_prefix('batch');\n\n/**\n * RequestQueue: queue for batching API requests with localStorage backup for retries.\n * Maintains an in-memory queue which represents the source of truth for the current\n * page, but also writes all items out to a copy in the browser's localStorage, which\n * can be read on subsequent pageloads and retried. For batchability, all the request\n * items in the queue should be of the same type (events, people updates, group updates)\n * so they can be sent in a single request to the same API endpoint.\n *\n * LocalStorage keying and locking: In order for reloads and subsequent pageloads of\n * the same site to access the same persisted data, they must share the same localStorage\n * key (for instance based on project token and queue type). Therefore access to the\n * localStorage entry is guarded by an asynchronous mutex (SharedLock) to prevent\n * simultaneously open windows/tabs from overwriting each other's data (which would lead\n * to data loss in some situations).\n * @constructor\n */\nvar RequestQueue = function(storageKey, options) {\n    options = options || {};\n    this.storageKey = storageKey;\n    this.storage = options.storage || window.localStorage;\n    this.lock = new SharedLock(storageKey, {storage: this.storage});\n\n    this.pid = options.pid || null; // pass pid to test out storage lock contention scenarios\n\n    this.memQueue = [];\n};\n\n/**\n * Add one item to queues (memory and localStorage). The queued entry includes\n * the given item along with an auto-generated ID and a \"flush-after\" timestamp.\n * It is expected that the item will be sent over the network and dequeued\n * before the flush-after time; if this doesn't happen it is considered orphaned\n * (e.g., the original tab where it was enqueued got closed before it could be\n * sent) and the item can be sent by any tab that finds it in localStorage.\n *\n * The final callback param is called with a param indicating success or\n * failure of the enqueue operation; it is asynchronous because the localStorage\n * lock is asynchronous.\n */\nRequestQueue.prototype.enqueue = function(item, flushInterval, cb) {\n    var queueEntry = {\n        'id': cheap_guid(),\n        'flushAfter': new Date().getTime() + flushInterval * 2,\n        'payload': item\n    };\n\n    this.lock.withLock(_.bind(function lockAcquired() {\n        var succeeded;\n        try {\n            var storedQueue = this.readFromStorage();\n            storedQueue.push(queueEntry);\n            succeeded = this.saveToStorage(storedQueue);\n            if (succeeded) {\n                // only add to in-memory queue when storage succeeds\n                this.memQueue.push(queueEntry);\n            }\n        } catch(err) {\n            logger$1.error('Error enqueueing item', item);\n            succeeded = false;\n        }\n        if (cb) {\n            cb(succeeded);\n        }\n    }, this), function lockFailure(err) {\n        logger$1.error('Error acquiring storage lock', err);\n        if (cb) {\n            cb(false);\n        }\n    }, this.pid);\n};\n\n/**\n * Read out the given number of queue entries. If this.memQueue\n * has fewer than batchSize items, then look for \"orphaned\" items\n * in the persisted queue (items where the 'flushAfter' time has\n * already passed).\n */\nRequestQueue.prototype.fillBatch = function(batchSize) {\n    var batch = this.memQueue.slice(0, batchSize);\n    if (batch.length < batchSize) {\n        // don't need lock just to read events; localStorage is thread-safe\n        // and the worst that could happen is a duplicate send of some\n        // orphaned events, which will be deduplicated on the server side\n        var storedQueue = this.readFromStorage();\n        if (storedQueue.length) {\n            // item IDs already in batch; don't duplicate out of storage\n            var idsInBatch = {}; // poor man's Set\n            _.each(batch, function(item) { idsInBatch[item['id']] = true; });\n\n            for (var i = 0; i < storedQueue.length; i++) {\n                var item = storedQueue[i];\n                if (new Date().getTime() > item['flushAfter'] && !idsInBatch[item['id']]) {\n                    batch.push(item);\n                    if (batch.length >= batchSize) {\n                        break;\n                    }\n                }\n            }\n        }\n    }\n    return batch;\n};\n\n/**\n * Remove items with matching 'id' from array (immutably)\n * also remove any item without a valid id (e.g., malformed\n * storage entries).\n */\nvar filterOutIDsAndInvalid = function(items, idSet) {\n    var filteredItems = [];\n    _.each(items, function(item) {\n        if (item['id'] && !idSet[item['id']]) {\n            filteredItems.push(item);\n        }\n    });\n    return filteredItems;\n};\n\n/**\n * Remove items with matching IDs from both in-memory queue\n * and persisted queue\n */\nRequestQueue.prototype.removeItemsByID = function(ids, cb) {\n    var idSet = {}; // poor man's Set\n    _.each(ids, function(id) { idSet[id] = true; });\n\n    this.memQueue = filterOutIDsAndInvalid(this.memQueue, idSet);\n    this.lock.withLock(_.bind(function lockAcquired() {\n        var succeeded;\n        try {\n            var storedQueue = this.readFromStorage();\n            storedQueue = filterOutIDsAndInvalid(storedQueue, idSet);\n            succeeded = this.saveToStorage(storedQueue);\n        } catch(err) {\n            logger$1.error('Error removing items', ids);\n            succeeded = false;\n        }\n        if (cb) {\n            cb(succeeded);\n        }\n    }, this), function lockFailure(err) {\n        logger$1.error('Error acquiring storage lock', err);\n        if (cb) {\n            cb(false);\n        }\n    }, this.pid);\n};\n\n/**\n * Read and parse items array from localStorage entry, handling\n * malformed/missing data if necessary.\n */\nRequestQueue.prototype.readFromStorage = function() {\n    var storageEntry;\n    try {\n        storageEntry = this.storage.getItem(this.storageKey);\n        if (storageEntry) {\n            storageEntry = JSONParse(storageEntry);\n            if (!_.isArray(storageEntry)) {\n                logger$1.error('Invalid storage entry:', storageEntry);\n                storageEntry = null;\n            }\n        }\n    } catch (err) {\n        logger$1.error('Error retrieving queue', err);\n        storageEntry = null;\n    }\n    return storageEntry || [];\n};\n\n/**\n * Serialize the given items array to localStorage.\n */\nRequestQueue.prototype.saveToStorage = function(queue) {\n    try {\n        this.storage.setItem(this.storageKey, JSONStringify(queue));\n        return true;\n    } catch (err) {\n        logger$1.error('Error saving queue', err);\n        return false;\n    }\n};\n\n/**\n * Clear out queues (memory and localStorage).\n */\nRequestQueue.prototype.clear = function() {\n    this.memQueue = [];\n    this.storage.removeItem(this.storageKey);\n};\n\n// eslint-disable-line camelcase\n\n// maximum interval between request retries after exponential backoff\nvar MAX_RETRY_INTERVAL_MS = 10 * 60 * 1000; // 10 minutes\n\nvar logger = console_with_prefix('batch');\n\n/**\n * RequestBatcher: manages the queueing, flushing, retry etc of requests of one\n * type (events, people, groups).\n * Uses RequestQueue to manage the backing store.\n * @constructor\n */\nvar RequestBatcher = function(storageKey, endpoint, options) {\n    this.queue = new RequestQueue(storageKey, {storage: options.storage});\n    this.endpoint = endpoint;\n\n    this.libConfig = options.libConfig;\n    this.sendRequest = options.sendRequestFunc;\n\n    // seed variable batch size + flush interval with configured values\n    this.batchSize = this.libConfig['batch_size'];\n    this.flushInterval = this.libConfig['batch_flush_interval_ms'];\n\n    this.stopped = false;\n};\n\n/**\n * Add one item to queue.\n */\nRequestBatcher.prototype.enqueue = function(item, cb) {\n    this.queue.enqueue(item, this.flushInterval, cb);\n};\n\n/**\n * Start flushing batches at the configured time interval. Must call\n * this method upon SDK init in order to send anything over the network.\n */\nRequestBatcher.prototype.start = function() {\n    this.stopped = false;\n    this.flush();\n};\n\n/**\n * Stop flushing batches. Can be restarted by calling start().\n */\nRequestBatcher.prototype.stop = function() {\n    this.stopped = true;\n    if (this.timeoutID) {\n        clearTimeout(this.timeoutID);\n        this.timeoutID = null;\n    }\n};\n\n/**\n * Clear out queue.\n */\nRequestBatcher.prototype.clear = function() {\n    this.queue.clear();\n};\n\n/**\n * Restore batch size configuration to whatever is set in the main SDK.\n */\nRequestBatcher.prototype.resetBatchSize = function() {\n    this.batchSize = this.libConfig['batch_size'];\n};\n\n/**\n * Restore flush interval time configuration to whatever is set in the main SDK.\n */\nRequestBatcher.prototype.resetFlush = function() {\n    this.scheduleFlush(this.libConfig['batch_flush_interval_ms']);\n};\n\n/**\n * Schedule the next flush in the given number of milliseconds.\n */\nRequestBatcher.prototype.scheduleFlush = function(flushMS) {\n    this.flushInterval = flushMS;\n    if (!this.stopped) { // don't schedule anymore if batching has been stopped\n        this.timeoutID = setTimeout(_.bind(this.flush, this), this.flushInterval);\n    }\n};\n\n/**\n * Flush one batch to network. Depending on success/failure modes, it will either\n * remove the batch from the queue or leave it in for retry, and schedule the next\n * flush. In cases of most network or API failures, it will back off exponentially\n * when retrying.\n * @param {Object} [options]\n * @param {boolean} [options.sendBeacon] - whether to send batch with\n * navigator.sendBeacon (only useful for sending batches before page unloads, as\n * sendBeacon offers no callbacks or status indications)\n */\nRequestBatcher.prototype.flush = function(options) {\n    try {\n\n        if (this.requestInProgress) {\n            logger.log('Flush: Request already in progress');\n            return;\n        }\n\n        options = options || {};\n        var currentBatchSize = this.batchSize;\n        var batch = this.queue.fillBatch(currentBatchSize);\n        if (batch.length < 1) {\n            this.resetFlush();\n            return; // nothing to do\n        }\n\n        this.requestInProgress = true;\n\n        var timeoutMS = this.libConfig['batch_request_timeout_ms'];\n        var startTime = new Date().getTime();\n        var dataForRequest = _.map(batch, function(item) { return item['payload']; });\n        var batchSendCallback = _.bind(function(res) {\n            this.requestInProgress = false;\n\n            try {\n\n                // handle API response in a try-catch to make sure we can reset the\n                // flush operation if something goes wrong\n\n                var removeItemsFromQueue = false;\n                if (\n                    _.isObject(res) &&\n                    res.error === 'timeout' &&\n                    new Date().getTime() - startTime >= timeoutMS\n                ) {\n                    logger.error('Network timeout; retrying');\n                    this.flush();\n                } else if (\n                    _.isObject(res) &&\n                    res.xhr_req &&\n                    (res.xhr_req['status'] >= 500 || res.xhr_req['status'] <= 0)\n                ) {\n                    // network or API error, retry\n                    var retryMS = this.flushInterval * 2;\n                    var headers = res.xhr_req['responseHeaders'];\n                    if (headers) {\n                        var retryAfter = headers['Retry-After'];\n                        if (retryAfter) {\n                            retryMS = (parseInt(retryAfter, 10) * 1000) || retryMS;\n                        }\n                    }\n                    retryMS = Math.min(MAX_RETRY_INTERVAL_MS, retryMS);\n                    logger.error('Error; retry in ' + retryMS + ' ms');\n                    this.scheduleFlush(retryMS);\n                } else if (_.isObject(res) && res.xhr_req && res.xhr_req['status'] === 413) {\n                    // 413 Payload Too Large\n                    if (batch.length > 1) {\n                        var halvedBatchSize = Math.max(1, Math.floor(currentBatchSize / 2));\n                        this.batchSize = Math.min(this.batchSize, halvedBatchSize, batch.length - 1);\n                        logger.error('413 response; reducing batch size to ' + this.batchSize);\n                        this.resetFlush();\n                    } else {\n                        logger.error('Single-event request too large; dropping', batch);\n                        this.resetBatchSize();\n                        removeItemsFromQueue = true;\n                    }\n                } else {\n                    // successful network request+response; remove each item in batch from queue\n                    // (even if it was e.g. a 400, in which case retrying won't help)\n                    removeItemsFromQueue = true;\n                }\n\n                if (removeItemsFromQueue) {\n                    this.queue.removeItemsByID(\n                        _.map(batch, function(item) { return item['id']; }),\n                        _.bind(this.flush, this) // handle next batch if the queue isn't empty\n                    );\n                }\n\n            } catch(err) {\n                logger.error('Error handling API response', err);\n                this.resetFlush();\n            }\n        }, this);\n        var requestOptions = {\n            method: 'POST',\n            verbose: true,\n            ignore_json_errors: true, // eslint-disable-line camelcase\n            timeout_ms: timeoutMS // eslint-disable-line camelcase\n        };\n        if (options.sendBeacon) {\n            requestOptions.transport = 'sendBeacon';\n        }\n        logger.log('MIXPANEL REQUEST:', this.endpoint, dataForRequest);\n        this.sendRequest(this.endpoint, dataForRequest, requestOptions, batchSendCallback);\n\n    } catch(err) {\n        logger.error('Error flushing request queue', err);\n        this.resetFlush();\n    }\n};\n\n/**\n * A function used to track a Mixpanel event (e.g. MixpanelLib.track)\n * @callback trackFunction\n * @param {String} event_name The name of the event. This can be anything the user does - 'Button Click', 'Sign Up', 'Item Purchased', etc.\n * @param {Object} [properties] A set of properties to include with the event you're sending. These describe the user who did the event or details about the event itself.\n * @param {Function} [callback] If provided, the callback function will be called after tracking the event.\n */\n\n/** Public **/\n\nvar GDPR_DEFAULT_PERSISTENCE_PREFIX = '__mp_opt_in_out_';\n\n/**\n * Opt the user in to data tracking and cookies/localstorage for the given token\n * @param {string} token - Mixpanel project tracking token\n * @param {Object} [options]\n * @param {trackFunction} [options.track] - function used for tracking a Mixpanel event to record the opt-in action\n * @param {string} [options.trackEventName] - event name to be used for tracking the opt-in action\n * @param {Object} [options.trackProperties] - set of properties to be tracked along with the opt-in action\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__mp_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-in cookie expires\n * @param {string} [options.cookieDomain] - custom cookie domain\n * @param {boolean} [options.crossSiteCookie] - whether the opt-in cookie is set as cross-site-enabled\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-in cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-in cookie is set as secure or not\n */\nfunction optIn(token, options) {\n    _optInOut(true, token, options);\n}\n\n/**\n * Opt the user out of data tracking and cookies/localstorage for the given token\n * @param {string} token - Mixpanel project tracking token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__mp_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-out cookie expires\n * @param {string} [options.cookieDomain] - custom cookie domain\n * @param {boolean} [options.crossSiteCookie] - whether the opt-in cookie is set as cross-site-enabled\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-out cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-out cookie is set as secure or not\n */\nfunction optOut(token, options) {\n    _optInOut(false, token, options);\n}\n\n/**\n * Check whether the user has opted in to data tracking and cookies/localstorage for the given token\n * @param {string} token - Mixpanel project tracking token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__mp_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @returns {boolean} whether the user has opted in to the given opt type\n */\nfunction hasOptedIn(token, options) {\n    return _getStorageValue(token, options) === '1';\n}\n\n/**\n * Check whether the user has opted out of data tracking and cookies/localstorage for the given token\n * @param {string} token - Mixpanel project tracking token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__mp_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {boolean} [options.ignoreDnt] - flag to ignore browser DNT settings and always return false\n * @returns {boolean} whether the user has opted out of the given opt type\n */\nfunction hasOptedOut(token, options) {\n    if (_hasDoNotTrackFlagOn(options)) {\n        return true;\n    }\n    return _getStorageValue(token, options) === '0';\n}\n\n/**\n * Wrap a MixpanelLib method with a check for whether the user is opted out of data tracking and cookies/localstorage for the given token\n * If the user has opted out, return early instead of executing the method.\n * If a callback argument was provided, execute it passing the 0 error code.\n * @param {function} method - wrapped method to be executed if the user has not opted out\n * @returns {*} the result of executing method OR undefined if the user has opted out\n */\nfunction addOptOutCheckMixpanelLib(method) {\n    return _addOptOutCheck(method, function(name) {\n        return this.get_config(name);\n    });\n}\n\n/**\n * Wrap a MixpanelPeople method with a check for whether the user is opted out of data tracking and cookies/localstorage for the given token\n * If the user has opted out, return early instead of executing the method.\n * If a callback argument was provided, execute it passing the 0 error code.\n * @param {function} method - wrapped method to be executed if the user has not opted out\n * @returns {*} the result of executing method OR undefined if the user has opted out\n */\nfunction addOptOutCheckMixpanelPeople(method) {\n    return _addOptOutCheck(method, function(name) {\n        return this._get_config(name);\n    });\n}\n\n/**\n * Wrap a MixpanelGroup method with a check for whether the user is opted out of data tracking and cookies/localstorage for the given token\n * If the user has opted out, return early instead of executing the method.\n * If a callback argument was provided, execute it passing the 0 error code.\n * @param {function} method - wrapped method to be executed if the user has not opted out\n * @returns {*} the result of executing method OR undefined if the user has opted out\n */\nfunction addOptOutCheckMixpanelGroup(method) {\n    return _addOptOutCheck(method, function(name) {\n        return this._get_config(name);\n    });\n}\n\n/**\n * Clear the user's opt in/out status of data tracking and cookies/localstorage for the given token\n * @param {string} token - Mixpanel project tracking token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__mp_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-in cookie expires\n * @param {string} [options.cookieDomain] - custom cookie domain\n * @param {boolean} [options.crossSiteCookie] - whether the opt-in cookie is set as cross-site-enabled\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-in cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-in cookie is set as secure or not\n */\nfunction clearOptInOut(token, options) {\n    options = options || {};\n    _getStorage(options).remove(\n        _getStorageKey(token, options), !!options.crossSubdomainCookie, options.cookieDomain\n    );\n}\n\n/** Private **/\n\n/**\n * Get storage util\n * @param {Object} [options]\n * @param {string} [options.persistenceType]\n * @returns {object} either _.cookie or _.localstorage\n */\nfunction _getStorage(options) {\n    options = options || {};\n    return options.persistenceType === 'localStorage' ? _.localStorage : _.cookie;\n}\n\n/**\n * Get the name of the cookie that is used for the given opt type (tracking, cookie, etc.)\n * @param {string} token - Mixpanel project tracking token\n * @param {Object} [options]\n * @param {string} [options.persistencePrefix=__mp_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @returns {string} the name of the cookie for the given opt type\n */\nfunction _getStorageKey(token, options) {\n    options = options || {};\n    return (options.persistencePrefix || GDPR_DEFAULT_PERSISTENCE_PREFIX) + token;\n}\n\n/**\n * Get the value of the cookie that is used for the given opt type (tracking, cookie, etc.)\n * @param {string} token - Mixpanel project tracking token\n * @param {Object} [options]\n * @param {string} [options.persistencePrefix=__mp_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @returns {string} the value of the cookie for the given opt type\n */\nfunction _getStorageValue(token, options) {\n    return _getStorage(options).get(_getStorageKey(token, options));\n}\n\n/**\n * Check whether the user has set the DNT/doNotTrack setting to true in their browser\n * @param {Object} [options]\n * @param {string} [options.window] - alternate window object to check; used to force various DNT settings in browser tests\n * @param {boolean} [options.ignoreDnt] - flag to ignore browser DNT settings and always return false\n * @returns {boolean} whether the DNT setting is true\n */\nfunction _hasDoNotTrackFlagOn(options) {\n    if (options && options.ignoreDnt) {\n        return false;\n    }\n    var win = (options && options.window) || window$1;\n    var nav = win['navigator'] || {};\n    var hasDntOn = false;\n\n    _.each([\n        nav['doNotTrack'], // standard\n        nav['msDoNotTrack'],\n        win['doNotTrack']\n    ], function(dntValue) {\n        if (_.includes([true, 1, '1', 'yes'], dntValue)) {\n            hasDntOn = true;\n        }\n    });\n\n    return hasDntOn;\n}\n\n/**\n * Set cookie/localstorage for the user indicating that they are opted in or out for the given opt type\n * @param {boolean} optValue - whether to opt the user in or out for the given opt type\n * @param {string} token - Mixpanel project tracking token\n * @param {Object} [options]\n * @param {trackFunction} [options.track] - function used for tracking a Mixpanel event to record the opt-in action\n * @param {string} [options.trackEventName] - event name to be used for tracking the opt-in action\n * @param {Object} [options.trackProperties] - set of properties to be tracked along with the opt-in action\n * @param {string} [options.persistencePrefix=__mp_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-in cookie expires\n * @param {string} [options.cookieDomain] - custom cookie domain\n * @param {boolean} [options.crossSiteCookie] - whether the opt-in cookie is set as cross-site-enabled\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-in cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-in cookie is set as secure or not\n */\nfunction _optInOut(optValue, token, options) {\n    if (!_.isString(token) || !token.length) {\n        console.error('gdpr.' + (optValue ? 'optIn' : 'optOut') + ' called with an invalid token');\n        return;\n    }\n\n    options = options || {};\n\n    _getStorage(options).set(\n        _getStorageKey(token, options),\n        optValue ? 1 : 0,\n        _.isNumber(options.cookieExpiration) ? options.cookieExpiration : null,\n        !!options.crossSubdomainCookie,\n        !!options.secureCookie,\n        !!options.crossSiteCookie,\n        options.cookieDomain\n    );\n\n    if (options.track && optValue) { // only track event if opting in (optValue=true)\n        options.track(options.trackEventName || '$opt_in', options.trackProperties, {\n            'send_immediately': true\n        });\n    }\n}\n\n/**\n * Wrap a method with a check for whether the user is opted out of data tracking and cookies/localstorage for the given token\n * If the user has opted out, return early instead of executing the method.\n * If a callback argument was provided, execute it passing the 0 error code.\n * @param {function} method - wrapped method to be executed if the user has not opted out\n * @param {function} getConfigValue - getter function for the Mixpanel API token and other options to be used with opt-out check\n * @returns {*} the result of executing method OR undefined if the user has opted out\n */\nfunction _addOptOutCheck(method, getConfigValue) {\n    return function() {\n        var optedOut = false;\n\n        try {\n            var token = getConfigValue.call(this, 'token');\n            var ignoreDnt = getConfigValue.call(this, 'ignore_dnt');\n            var persistenceType = getConfigValue.call(this, 'opt_out_tracking_persistence_type');\n            var persistencePrefix = getConfigValue.call(this, 'opt_out_tracking_cookie_prefix');\n            var win = getConfigValue.call(this, 'window'); // used to override window during browser tests\n\n            if (token) { // if there was an issue getting the token, continue method execution as normal\n                optedOut = hasOptedOut(token, {\n                    ignoreDnt: ignoreDnt,\n                    persistenceType: persistenceType,\n                    persistencePrefix: persistencePrefix,\n                    window: win\n                });\n            }\n        } catch(err) {\n            console.error('Unexpected error when checking tracking opt-out status: ' + err);\n        }\n\n        if (!optedOut) {\n            return method.apply(this, arguments);\n        }\n\n        var callback = arguments[arguments.length - 1];\n        if (typeof(callback) === 'function') {\n            callback(0);\n        }\n\n        return;\n    };\n}\n\n/** @const */ var SET_ACTION      = '$set';\n/** @const */ var SET_ONCE_ACTION = '$set_once';\n/** @const */ var UNSET_ACTION    = '$unset';\n/** @const */ var ADD_ACTION      = '$add';\n/** @const */ var APPEND_ACTION   = '$append';\n/** @const */ var UNION_ACTION    = '$union';\n/** @const */ var REMOVE_ACTION   = '$remove';\n/** @const */ var DELETE_ACTION   = '$delete';\n\n// Common internal methods for mixpanel.people and mixpanel.group APIs.\n// These methods shouldn't involve network I/O.\nvar apiActions = {\n    set_action: function(prop, to) {\n        var data = {};\n        var $set = {};\n        if (_.isObject(prop)) {\n            _.each(prop, function(v, k) {\n                if (!this._is_reserved_property(k)) {\n                    $set[k] = v;\n                }\n            }, this);\n        } else {\n            $set[prop] = to;\n        }\n\n        data[SET_ACTION] = $set;\n        return data;\n    },\n\n    unset_action: function(prop) {\n        var data = {};\n        var $unset = [];\n        if (!_.isArray(prop)) {\n            prop = [prop];\n        }\n\n        _.each(prop, function(k) {\n            if (!this._is_reserved_property(k)) {\n                $unset.push(k);\n            }\n        }, this);\n\n        data[UNSET_ACTION] = $unset;\n        return data;\n    },\n\n    set_once_action: function(prop, to) {\n        var data = {};\n        var $set_once = {};\n        if (_.isObject(prop)) {\n            _.each(prop, function(v, k) {\n                if (!this._is_reserved_property(k)) {\n                    $set_once[k] = v;\n                }\n            }, this);\n        } else {\n            $set_once[prop] = to;\n        }\n        data[SET_ONCE_ACTION] = $set_once;\n        return data;\n    },\n\n    union_action: function(list_name, values) {\n        var data = {};\n        var $union = {};\n        if (_.isObject(list_name)) {\n            _.each(list_name, function(v, k) {\n                if (!this._is_reserved_property(k)) {\n                    $union[k] = _.isArray(v) ? v : [v];\n                }\n            }, this);\n        } else {\n            $union[list_name] = _.isArray(values) ? values : [values];\n        }\n        data[UNION_ACTION] = $union;\n        return data;\n    },\n\n    append_action: function(list_name, value) {\n        var data = {};\n        var $append = {};\n        if (_.isObject(list_name)) {\n            _.each(list_name, function(v, k) {\n                if (!this._is_reserved_property(k)) {\n                    $append[k] = v;\n                }\n            }, this);\n        } else {\n            $append[list_name] = value;\n        }\n        data[APPEND_ACTION] = $append;\n        return data;\n    },\n\n    remove_action: function(list_name, value) {\n        var data = {};\n        var $remove = {};\n        if (_.isObject(list_name)) {\n            _.each(list_name, function(v, k) {\n                if (!this._is_reserved_property(k)) {\n                    $remove[k] = v;\n                }\n            }, this);\n        } else {\n            $remove[list_name] = value;\n        }\n        data[REMOVE_ACTION] = $remove;\n        return data;\n    },\n\n    delete_action: function() {\n        var data = {};\n        data[DELETE_ACTION] = '';\n        return data;\n    }\n};\n\n/**\n * Mixpanel Group Object\n * @constructor\n */\nvar MixpanelGroup = function() {};\n\n_.extend(MixpanelGroup.prototype, apiActions);\n\nMixpanelGroup.prototype._init = function(mixpanel_instance, group_key, group_id) {\n    this._mixpanel = mixpanel_instance;\n    this._group_key = group_key;\n    this._group_id = group_id;\n};\n\n/**\n * Set properties on a group.\n *\n * ### Usage:\n *\n *     mixpanel.get_group('company', 'mixpanel').set('Location', '405 Howard');\n *\n *     // or set multiple properties at once\n *     mixpanel.get_group('company', 'mixpanel').set({\n *          'Location': '405 Howard',\n *          'Founded' : 2009,\n *     });\n *     // properties can be strings, integers, dates, or lists\n *\n * @param {Object|String} prop If a string, this is the name of the property. If an object, this is an associative array of names and values.\n * @param {*} [to] A value to set on the given property name\n * @param {Function} [callback] If provided, the callback will be called after the tracking event\n */\nMixpanelGroup.prototype.set = addOptOutCheckMixpanelGroup(function(prop, to, callback) {\n    var data = this.set_action(prop, to);\n    if (_.isObject(prop)) {\n        callback = to;\n    }\n    return this._send_request(data, callback);\n});\n\n/**\n * Set properties on a group, only if they do not yet exist.\n * This will not overwrite previous group property values, unlike\n * group.set().\n *\n * ### Usage:\n *\n *     mixpanel.get_group('company', 'mixpanel').set_once('Location', '405 Howard');\n *\n *     // or set multiple properties at once\n *     mixpanel.get_group('company', 'mixpanel').set_once({\n *          'Location': '405 Howard',\n *          'Founded' : 2009,\n *     });\n *     // properties can be strings, integers, lists or dates\n *\n * @param {Object|String} prop If a string, this is the name of the property. If an object, this is an associative array of names and values.\n * @param {*} [to] A value to set on the given property name\n * @param {Function} [callback] If provided, the callback will be called after the tracking event\n */\nMixpanelGroup.prototype.set_once = addOptOutCheckMixpanelGroup(function(prop, to, callback) {\n    var data = this.set_once_action(prop, to);\n    if (_.isObject(prop)) {\n        callback = to;\n    }\n    return this._send_request(data, callback);\n});\n\n/**\n * Unset properties on a group permanently.\n *\n * ### Usage:\n *\n *     mixpanel.get_group('company', 'mixpanel').unset('Founded');\n *\n * @param {String} prop The name of the property.\n * @param {Function} [callback] If provided, the callback will be called after the tracking event\n */\nMixpanelGroup.prototype.unset = addOptOutCheckMixpanelGroup(function(prop, callback) {\n    var data = this.unset_action(prop);\n    return this._send_request(data, callback);\n});\n\n/**\n * Merge a given list with a list-valued group property, excluding duplicate values.\n *\n * ### Usage:\n *\n *     // merge a value to a list, creating it if needed\n *     mixpanel.get_group('company', 'mixpanel').union('Location', ['San Francisco', 'London']);\n *\n * @param {String} list_name Name of the property.\n * @param {Array} values Values to merge with the given property\n * @param {Function} [callback] If provided, the callback will be called after the tracking event\n */\nMixpanelGroup.prototype.union = addOptOutCheckMixpanelGroup(function(list_name, values, callback) {\n    if (_.isObject(list_name)) {\n        callback = values;\n    }\n    var data = this.union_action(list_name, values);\n    return this._send_request(data, callback);\n});\n\n/**\n * Permanently delete a group.\n *\n * ### Usage:\n *     mixpanel.get_group('company', 'mixpanel').delete();\n */\nMixpanelGroup.prototype['delete'] = addOptOutCheckMixpanelGroup(function(callback) {\n    var data = this.delete_action();\n    return this._send_request(data, callback);\n});\n\n/**\n * Remove a property from a group. The value will be ignored if doesn't exist.\n *\n * ### Usage:\n *\n *     mixpanel.get_group('company', 'mixpanel').remove('Location', 'London');\n *\n * @param {String} list_name Name of the property.\n * @param {Object} value Value to remove from the given group property\n * @param {Function} [callback] If provided, the callback will be called after the tracking event\n */\nMixpanelGroup.prototype.remove = addOptOutCheckMixpanelGroup(function(list_name, value, callback) {\n    var data = this.remove_action(list_name, value);\n    return this._send_request(data, callback);\n});\n\nMixpanelGroup.prototype._send_request = function(data, callback) {\n    data['$group_key'] = this._group_key;\n    data['$group_id'] = this._group_id;\n    data['$token'] = this._get_config('token');\n\n    var date_encoded_data = _.encodeDates(data);\n    return this._mixpanel._track_or_batch({\n        truncated_data: _.truncate(date_encoded_data, 255),\n        endpoint: this._get_config('api_host') + '/groups/',\n        batcher: this._mixpanel.request_batchers.groups\n    }, callback);\n};\n\nMixpanelGroup.prototype._is_reserved_property = function(prop) {\n    return prop === '$group_key' || prop === '$group_id';\n};\n\nMixpanelGroup.prototype._get_config = function(conf) {\n    return this._mixpanel.get_config(conf);\n};\n\nMixpanelGroup.prototype.toString = function() {\n    return this._mixpanel.toString() + '.group.' + this._group_key + '.' + this._group_id;\n};\n\n// MixpanelGroup Exports\nMixpanelGroup.prototype['remove']   = MixpanelGroup.prototype.remove;\nMixpanelGroup.prototype['set']      = MixpanelGroup.prototype.set;\nMixpanelGroup.prototype['set_once'] = MixpanelGroup.prototype.set_once;\nMixpanelGroup.prototype['union']    = MixpanelGroup.prototype.union;\nMixpanelGroup.prototype['unset']    = MixpanelGroup.prototype.unset;\nMixpanelGroup.prototype['toString'] = MixpanelGroup.prototype.toString;\n\n/*\n * Constants\n */\n/** @const */ var SET_QUEUE_KEY          = '__mps';\n/** @const */ var SET_ONCE_QUEUE_KEY     = '__mpso';\n/** @const */ var UNSET_QUEUE_KEY        = '__mpus';\n/** @const */ var ADD_QUEUE_KEY          = '__mpa';\n/** @const */ var APPEND_QUEUE_KEY       = '__mpap';\n/** @const */ var REMOVE_QUEUE_KEY       = '__mpr';\n/** @const */ var UNION_QUEUE_KEY        = '__mpu';\n// This key is deprecated, but we want to check for it to see whether aliasing is allowed.\n/** @const */ var PEOPLE_DISTINCT_ID_KEY = '$people_distinct_id';\n/** @const */ var ALIAS_ID_KEY           = '__alias';\n/** @const */ var CAMPAIGN_IDS_KEY       = '__cmpns';\n/** @const */ var EVENT_TIMERS_KEY       = '__timers';\n/** @const */ var RESERVED_PROPERTIES = [\n    SET_QUEUE_KEY,\n    SET_ONCE_QUEUE_KEY,\n    UNSET_QUEUE_KEY,\n    ADD_QUEUE_KEY,\n    APPEND_QUEUE_KEY,\n    REMOVE_QUEUE_KEY,\n    UNION_QUEUE_KEY,\n    PEOPLE_DISTINCT_ID_KEY,\n    ALIAS_ID_KEY,\n    CAMPAIGN_IDS_KEY,\n    EVENT_TIMERS_KEY\n];\n\n/**\n * Mixpanel Persistence Object\n * @constructor\n */\nvar MixpanelPersistence = function(config) {\n    this['props'] = {};\n    this.campaign_params_saved = false;\n\n    if (config['persistence_name']) {\n        this.name = 'mp_' + config['persistence_name'];\n    } else {\n        this.name = 'mp_' + config['token'] + '_mixpanel';\n    }\n\n    var storage_type = config['persistence'];\n    if (storage_type !== 'cookie' && storage_type !== 'localStorage') {\n        console$1.critical('Unknown persistence type ' + storage_type + '; falling back to cookie');\n        storage_type = config['persistence'] = 'cookie';\n    }\n\n    if (storage_type === 'localStorage' && _.localStorage.is_supported()) {\n        this.storage = _.localStorage;\n    } else {\n        this.storage = _.cookie;\n    }\n\n    this.load();\n    this.update_config(config);\n    this.upgrade(config);\n    this.save();\n};\n\nMixpanelPersistence.prototype.properties = function() {\n    var p = {};\n    // Filter out reserved properties\n    _.each(this['props'], function(v, k) {\n        if (!_.include(RESERVED_PROPERTIES, k)) {\n            p[k] = v;\n        }\n    });\n    return p;\n};\n\nMixpanelPersistence.prototype.load = function() {\n    if (this.disabled) { return; }\n\n    var entry = this.storage.parse(this.name);\n\n    if (entry) {\n        this['props'] = _.extend({}, entry);\n    }\n};\n\nMixpanelPersistence.prototype.upgrade = function(config) {\n    var upgrade_from_old_lib = config['upgrade'],\n        old_cookie_name,\n        old_cookie;\n\n    if (upgrade_from_old_lib) {\n        old_cookie_name = 'mp_super_properties';\n        // Case where they had a custom cookie name before.\n        if (typeof(upgrade_from_old_lib) === 'string') {\n            old_cookie_name = upgrade_from_old_lib;\n        }\n\n        old_cookie = this.storage.parse(old_cookie_name);\n\n        // remove the cookie\n        this.storage.remove(old_cookie_name);\n        this.storage.remove(old_cookie_name, true);\n\n        if (old_cookie) {\n            this['props'] = _.extend(\n                this['props'],\n                old_cookie['all'],\n                old_cookie['events']\n            );\n        }\n    }\n\n    if (!config['cookie_name'] && config['name'] !== 'mixpanel') {\n        // special case to handle people with cookies of the form\n        // mp_TOKEN_INSTANCENAME from the first release of this library\n        old_cookie_name = 'mp_' + config['token'] + '_' + config['name'];\n        old_cookie = this.storage.parse(old_cookie_name);\n\n        if (old_cookie) {\n            this.storage.remove(old_cookie_name);\n            this.storage.remove(old_cookie_name, true);\n\n            // Save the prop values that were in the cookie from before -\n            // this should only happen once as we delete the old one.\n            this.register_once(old_cookie);\n        }\n    }\n\n    if (this.storage === _.localStorage) {\n        old_cookie = _.cookie.parse(this.name);\n\n        _.cookie.remove(this.name);\n        _.cookie.remove(this.name, true);\n\n        if (old_cookie) {\n            this.register_once(old_cookie);\n        }\n    }\n};\n\nMixpanelPersistence.prototype.save = function() {\n    if (this.disabled) { return; }\n    this._expire_notification_campaigns();\n    this.storage.set(\n        this.name,\n        _.JSONEncode(this['props']),\n        this.expire_days,\n        this.cross_subdomain,\n        this.secure,\n        this.cross_site,\n        this.cookie_domain\n    );\n};\n\nMixpanelPersistence.prototype.remove = function() {\n    // remove both domain and subdomain cookies\n    this.storage.remove(this.name, false, this.cookie_domain);\n    this.storage.remove(this.name, true, this.cookie_domain);\n};\n\n// removes the storage entry and deletes all loaded data\n// forced name for tests\nMixpanelPersistence.prototype.clear = function() {\n    this.remove();\n    this['props'] = {};\n};\n\n/**\n* @param {Object} props\n* @param {*=} default_value\n* @param {number=} days\n*/\nMixpanelPersistence.prototype.register_once = function(props, default_value, days) {\n    if (_.isObject(props)) {\n        if (typeof(default_value) === 'undefined') { default_value = 'None'; }\n        this.expire_days = (typeof(days) === 'undefined') ? this.default_expiry : days;\n\n        _.each(props, function(val, prop) {\n            if (!this['props'].hasOwnProperty(prop) || this['props'][prop] === default_value) {\n                this['props'][prop] = val;\n            }\n        }, this);\n\n        this.save();\n\n        return true;\n    }\n    return false;\n};\n\n/**\n* @param {Object} props\n* @param {number=} days\n*/\nMixpanelPersistence.prototype.register = function(props, days) {\n    if (_.isObject(props)) {\n        this.expire_days = (typeof(days) === 'undefined') ? this.default_expiry : days;\n\n        _.extend(this['props'], props);\n\n        this.save();\n\n        return true;\n    }\n    return false;\n};\n\nMixpanelPersistence.prototype.unregister = function(prop) {\n    if (prop in this['props']) {\n        delete this['props'][prop];\n        this.save();\n    }\n};\n\nMixpanelPersistence.prototype._expire_notification_campaigns = _.safewrap(function() {\n    var campaigns_shown = this['props'][CAMPAIGN_IDS_KEY],\n        EXPIRY_TIME = Config.DEBUG ? 60 * 1000 : 60 * 60 * 1000; // 1 minute (Config.DEBUG) / 1 hour (PDXN)\n    if (!campaigns_shown) {\n        return;\n    }\n    for (var campaign_id in campaigns_shown) {\n        if (1 * new Date() - campaigns_shown[campaign_id] > EXPIRY_TIME) {\n            delete campaigns_shown[campaign_id];\n        }\n    }\n    if (_.isEmptyObject(campaigns_shown)) {\n        delete this['props'][CAMPAIGN_IDS_KEY];\n    }\n});\n\nMixpanelPersistence.prototype.update_campaign_params = function() {\n    if (!this.campaign_params_saved) {\n        this.register_once(_.info.campaignParams());\n        this.campaign_params_saved = true;\n    }\n};\n\nMixpanelPersistence.prototype.update_search_keyword = function(referrer) {\n    this.register(_.info.searchInfo(referrer));\n};\n\n// EXPORTED METHOD, we test this directly.\nMixpanelPersistence.prototype.update_referrer_info = function(referrer) {\n    // If referrer doesn't exist, we want to note the fact that it was type-in traffic.\n    this.register_once({\n        '$initial_referrer': referrer || '$direct',\n        '$initial_referring_domain': _.info.referringDomain(referrer) || '$direct'\n    }, '');\n};\n\nMixpanelPersistence.prototype.get_referrer_info = function() {\n    return _.strip_empty_properties({\n        '$initial_referrer': this['props']['$initial_referrer'],\n        '$initial_referring_domain': this['props']['$initial_referring_domain']\n    });\n};\n\n// safely fills the passed in object with stored properties,\n// does not override any properties defined in both\n// returns the passed in object\nMixpanelPersistence.prototype.safe_merge = function(props) {\n    _.each(this['props'], function(val, prop) {\n        if (!(prop in props)) {\n            props[prop] = val;\n        }\n    });\n\n    return props;\n};\n\nMixpanelPersistence.prototype.update_config = function(config) {\n    this.default_expiry = this.expire_days = config['cookie_expiration'];\n    this.set_disabled(config['disable_persistence']);\n    this.set_cookie_domain(config['cookie_domain']);\n    this.set_cross_site(config['cross_site_cookie']);\n    this.set_cross_subdomain(config['cross_subdomain_cookie']);\n    this.set_secure(config['secure_cookie']);\n};\n\nMixpanelPersistence.prototype.set_disabled = function(disabled) {\n    this.disabled = disabled;\n    if (this.disabled) {\n        this.remove();\n    } else {\n        this.save();\n    }\n};\n\nMixpanelPersistence.prototype.set_cookie_domain = function(cookie_domain) {\n    if (cookie_domain !== this.cookie_domain) {\n        this.remove();\n        this.cookie_domain = cookie_domain;\n        this.save();\n    }\n};\n\nMixpanelPersistence.prototype.set_cross_site = function(cross_site) {\n    if (cross_site !== this.cross_site) {\n        this.cross_site = cross_site;\n        this.remove();\n        this.save();\n    }\n};\n\nMixpanelPersistence.prototype.set_cross_subdomain = function(cross_subdomain) {\n    if (cross_subdomain !== this.cross_subdomain) {\n        this.cross_subdomain = cross_subdomain;\n        this.remove();\n        this.save();\n    }\n};\n\nMixpanelPersistence.prototype.get_cross_subdomain = function() {\n    return this.cross_subdomain;\n};\n\nMixpanelPersistence.prototype.set_secure = function(secure) {\n    if (secure !== this.secure) {\n        this.secure = secure ? true : false;\n        this.remove();\n        this.save();\n    }\n};\n\nMixpanelPersistence.prototype._add_to_people_queue = function(queue, data) {\n    var q_key = this._get_queue_key(queue),\n        q_data = data[queue],\n        set_q = this._get_or_create_queue(SET_ACTION),\n        set_once_q = this._get_or_create_queue(SET_ONCE_ACTION),\n        unset_q = this._get_or_create_queue(UNSET_ACTION),\n        add_q = this._get_or_create_queue(ADD_ACTION),\n        union_q = this._get_or_create_queue(UNION_ACTION),\n        remove_q = this._get_or_create_queue(REMOVE_ACTION, []),\n        append_q = this._get_or_create_queue(APPEND_ACTION, []);\n\n    if (q_key === SET_QUEUE_KEY) {\n        // Update the set queue - we can override any existing values\n        _.extend(set_q, q_data);\n        // if there was a pending increment, override it\n        // with the set.\n        this._pop_from_people_queue(ADD_ACTION, q_data);\n        // if there was a pending union, override it\n        // with the set.\n        this._pop_from_people_queue(UNION_ACTION, q_data);\n        this._pop_from_people_queue(UNSET_ACTION, q_data);\n    } else if (q_key === SET_ONCE_QUEUE_KEY) {\n        // only queue the data if there is not already a set_once call for it.\n        _.each(q_data, function(v, k) {\n            if (!(k in set_once_q)) {\n                set_once_q[k] = v;\n            }\n        });\n        this._pop_from_people_queue(UNSET_ACTION, q_data);\n    } else if (q_key === UNSET_QUEUE_KEY) {\n        _.each(q_data, function(prop) {\n\n            // undo previously-queued actions on this key\n            _.each([set_q, set_once_q, add_q, union_q], function(enqueued_obj) {\n                if (prop in enqueued_obj) {\n                    delete enqueued_obj[prop];\n                }\n            });\n            _.each(append_q, function(append_obj) {\n                if (prop in append_obj) {\n                    delete append_obj[prop];\n                }\n            });\n\n            unset_q[prop] = true;\n\n        });\n    } else if (q_key === ADD_QUEUE_KEY) {\n        _.each(q_data, function(v, k) {\n            // If it exists in the set queue, increment\n            // the value\n            if (k in set_q) {\n                set_q[k] += v;\n            } else {\n                // If it doesn't exist, update the add\n                // queue\n                if (!(k in add_q)) {\n                    add_q[k] = 0;\n                }\n                add_q[k] += v;\n            }\n        }, this);\n        this._pop_from_people_queue(UNSET_ACTION, q_data);\n    } else if (q_key === UNION_QUEUE_KEY) {\n        _.each(q_data, function(v, k) {\n            if (_.isArray(v)) {\n                if (!(k in union_q)) {\n                    union_q[k] = [];\n                }\n                // We may send duplicates, the server will dedup them.\n                union_q[k] = union_q[k].concat(v);\n            }\n        });\n        this._pop_from_people_queue(UNSET_ACTION, q_data);\n    } else if (q_key === REMOVE_QUEUE_KEY) {\n        remove_q.push(q_data);\n        this._pop_from_people_queue(APPEND_ACTION, q_data);\n    } else if (q_key === APPEND_QUEUE_KEY) {\n        append_q.push(q_data);\n        this._pop_from_people_queue(UNSET_ACTION, q_data);\n    }\n\n    console$1.log('MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):');\n    console$1.log(data);\n\n    this.save();\n};\n\nMixpanelPersistence.prototype._pop_from_people_queue = function(queue, data) {\n    var q = this._get_queue(queue);\n    if (!_.isUndefined(q)) {\n        _.each(data, function(v, k) {\n            if (queue === APPEND_ACTION || queue === REMOVE_ACTION) {\n                // list actions: only remove if both k+v match\n                // e.g. remove should not override append in a case like\n                // append({foo: 'bar'}); remove({foo: 'qux'})\n                _.each(q, function(queued_action) {\n                    if (queued_action[k] === v) {\n                        delete queued_action[k];\n                    }\n                });\n            } else {\n                delete q[k];\n            }\n        }, this);\n\n        this.save();\n    }\n};\n\nMixpanelPersistence.prototype._get_queue_key = function(queue) {\n    if (queue === SET_ACTION) {\n        return SET_QUEUE_KEY;\n    } else if (queue === SET_ONCE_ACTION) {\n        return SET_ONCE_QUEUE_KEY;\n    } else if (queue === UNSET_ACTION) {\n        return UNSET_QUEUE_KEY;\n    } else if (queue === ADD_ACTION) {\n        return ADD_QUEUE_KEY;\n    } else if (queue === APPEND_ACTION) {\n        return APPEND_QUEUE_KEY;\n    } else if (queue === REMOVE_ACTION) {\n        return REMOVE_QUEUE_KEY;\n    } else if (queue === UNION_ACTION) {\n        return UNION_QUEUE_KEY;\n    } else {\n        console$1.error('Invalid queue:', queue);\n    }\n};\n\nMixpanelPersistence.prototype._get_queue = function(queue) {\n    return this['props'][this._get_queue_key(queue)];\n};\nMixpanelPersistence.prototype._get_or_create_queue = function(queue, default_val) {\n    var key = this._get_queue_key(queue);\n    default_val = _.isUndefined(default_val) ? {} : default_val;\n\n    return this['props'][key] || (this['props'][key] = default_val);\n};\n\nMixpanelPersistence.prototype.set_event_timer = function(event_name, timestamp) {\n    var timers = this['props'][EVENT_TIMERS_KEY] || {};\n    timers[event_name] = timestamp;\n    this['props'][EVENT_TIMERS_KEY] = timers;\n    this.save();\n};\n\nMixpanelPersistence.prototype.remove_event_timer = function(event_name) {\n    var timers = this['props'][EVENT_TIMERS_KEY] || {};\n    var timestamp = timers[event_name];\n    if (!_.isUndefined(timestamp)) {\n        delete this['props'][EVENT_TIMERS_KEY][event_name];\n        this.save();\n    }\n    return timestamp;\n};\n\n/*\n * This file is a js implementation for a subset in eval_node.c\n */\n\n/*\n * Constants\n */\n// Metadata keys\n/** @const */   var OPERATOR_KEY                  = 'operator';\n/** @const */   var PROPERTY_KEY                  = 'property';\n/** @const */   var WINDOW_KEY                    = 'window';\n/** @const */   var UNIT_KEY                      = 'unit';\n/** @const */   var VALUE_KEY                     = 'value';\n/** @const */   var HOUR_KEY                      = 'hour';\n/** @const */   var DAY_KEY                       = 'day';\n/** @const */   var WEEK_KEY                      = 'week';\n/** @const */   var MONTH_KEY                     = 'month';\n\n// Operands\n/** @const */   var EVENT_PROPERTY         = 'event';\n/** @const */   var LITERAL_PROPERTY       = 'literal';\n\n// Binary Operators\n/** @const */   var AND_OPERATOR           = 'and';\n/** @const */   var OR_OPERATOR            = 'or';\n/** @const */   var IN_OPERATOR            = 'in';\n/** @const */   var NOT_IN_OPERATOR        = 'not in';\n/** @const */   var PLUS_OPERATOR          = '+';\n/** @const */   var MINUS_OPERATOR         = '-';\n/** @const */   var MUL_OPERATOR           = '*';\n/** @const */   var DIV_OPERATOR           = '/';\n/** @const */   var MOD_OPERATOR           = '%';\n/** @const */   var EQUALS_OPERATOR        = '==';\n/** @const */   var NOT_EQUALS_OPERATOR    = '!=';\n/** @const */   var GREATER_OPERATOR       = '>';\n/** @const */   var LESS_OPERATOR          = '<';\n/** @const */   var GREATER_EQUAL_OPERATOR = '>=';\n/** @const */   var LESS_EQUAL_OPERATOR    = '<=';\n\n// Typecast Operators\n/** @const */   var BOOLEAN_OPERATOR       = 'boolean';\n/** @const */   var DATETIME_OPERATOR      = 'datetime';\n/** @const */   var LIST_OPERATOR          = 'list';\n/** @const */   var NUMBER_OPERATOR        = 'number';\n/** @const */   var STRING_OPERATOR        = 'string';\n\n// Unary Operators\n/** @const */   var NOT_OPERATOR           = 'not';\n/** @const */   var DEFINED_OPERATOR       = 'defined';\n/** @const */   var NOT_DEFINED_OPERATOR   = 'not defined';\n\n// Special literals\n/** @const */   var NOW_LITERAL            = 'now';\n\n// Type cast functions\nfunction toNumber(value) {\n    if (value === null) {\n        return null;\n    }\n\n    switch (typeof(value)) {\n        case 'object':\n            if (_.isDate(value) && value.getTime() >= 0) {\n                return value.getTime();\n            }\n            return null;\n        case 'boolean':\n            return Number(value);\n        case 'number':\n            return value;\n        case 'string':\n            value = Number(value);\n            if (!isNaN(value)) {\n                return value;\n            }\n            return 0;\n    }\n    return null;\n}\n\nfunction evaluateNumber(op, properties) {\n    if (!op['operator'] || op['operator'] !== NUMBER_OPERATOR || !op['children'] || op['children'].length !== 1) {\n        throw ('Invalid cast operator: number ' + op);\n    }\n\n    return toNumber(evaluateSelector(op['children'][0], properties));\n}\n\nfunction toBoolean(value) {\n    if (value === null) {\n        return false;\n    }\n\n    switch (typeof value) {\n        case 'boolean':\n            return value;\n        case 'number':\n            return value !== 0.0;\n        case 'string':\n            return value.length > 0;\n        case 'object':\n            if (_.isArray(value) && value.length > 0) {\n                return true;\n            }\n            if (_.isDate(value) && value.getTime() > 0) {\n                return true;\n            }\n            if (_.isObject(value) && !_.isEmptyObject(value)) {\n                return true;\n            }\n            return false;\n    }\n    return false;\n}\n\nfunction evaluateBoolean(op, properties) {\n    if (!op['operator'] || op['operator'] !== BOOLEAN_OPERATOR || !op['children'] || op['children'].length !== 1) {\n        throw ('Invalid cast operator: boolean ' + op);\n    }\n\n    return toBoolean(evaluateSelector(op['children'][0], properties));\n}\n\nfunction evaluateDateTime(op, properties) {\n    if (!op['operator'] || op['operator'] !== DATETIME_OPERATOR || !op['children'] || op['children'].length !== 1) {\n        throw ('Invalid cast operator: datetime ' + op);\n    }\n\n    var v = evaluateSelector(op['children'][0], properties);\n    if (v === null) {\n        return null;\n    }\n\n    switch (typeof(v)) {\n        case 'number':\n        case 'string':\n            var d = new Date(v);\n            if (isNaN(d.getTime())) {\n                return null;\n            }\n            return d;\n        case 'object':\n            if (_.isDate(v)) {\n                return v;\n            }\n    }\n\n    return null;\n}\n\nfunction evaluateList(op, properties) {\n    if (!op['operator'] || op['operator'] !== LIST_OPERATOR || !op['children'] || op['children'].length !== 1) {\n        throw ('Invalid cast operator: list ' + op);\n    }\n\n    var v = evaluateSelector(op['children'][0], properties);\n    if (v === null) {\n        return null;\n    }\n\n    if (_.isArray(v)) {\n        return v;\n    }\n\n    return null;\n}\n\nfunction evaluateString(op, properties) {\n    if (!op['operator'] || op['operator'] !== STRING_OPERATOR || !op['children'] || op['children'].length !== 1) {\n        throw ('Invalid cast operator: string ' + op);\n    }\n\n    var v = evaluateSelector(op['children'][0], properties);\n    switch (typeof(v)) {\n        case 'object':\n            if (_.isDate(v)) {\n                return v.toJSON();\n            }\n            return JSON.stringify(v);\n    }\n    return String(v);\n}\n\n// Operators\nfunction evaluateAnd(op, properties) {\n    if (!op['operator'] || op['operator'] !== AND_OPERATOR || !op['children'] || op['children'].length !== 2) {\n        throw ('Invalid operator: AND ' + op);\n    }\n\n    return toBoolean(evaluateSelector(op['children'][0], properties)) && toBoolean(evaluateSelector(op['children'][1], properties));\n}\n\nfunction evaluateOr(op, properties) {\n    if (!op['operator'] || op['operator'] !== OR_OPERATOR || !op['children'] || op['children'].length !== 2) {\n        throw ('Invalid operator: OR ' + op);\n    }\n\n    return toBoolean(evaluateSelector(op['children'][0], properties)) || toBoolean(evaluateSelector(op['children'][1], properties));\n}\n\nfunction evaluateIn(op, properties) {\n    if (!op['operator'] || [IN_OPERATOR, NOT_IN_OPERATOR].indexOf(op['operator']) === -1 || !op['children'] || op['children'].length !== 2) {\n        throw ('Invalid operator: IN/NOT IN ' + op);\n    }\n    var leftValue = evaluateSelector(op['children'][0], properties);\n    var rightValue = evaluateSelector(op['children'][1], properties);\n\n    if (!_.isArray(rightValue) && !_.isString(rightValue)) {\n        throw ('Invalid operand for operator IN: invalid type' + rightValue);\n    }\n\n    var v = rightValue.indexOf(leftValue) > -1;\n    if (op['operator'] === NOT_IN_OPERATOR) {\n        return !v;\n    }\n    return v;\n}\n\nfunction evaluatePlus(op, properties) {\n    if (!op['operator'] || op['operator'] !== PLUS_OPERATOR || !op['children'] || op['children'].length < 2) {\n        throw ('Invalid operator: PLUS ' + op);\n    }\n    var l = evaluateSelector(op['children'][0], properties);\n    var r = evaluateSelector(op['children'][1], properties);\n\n    if (typeof l === 'number' && typeof r === 'number') {\n        return l + r;\n    }\n    if (typeof l === 'string' && typeof r === 'string') {\n        return l + r;\n    }\n    return null;\n}\n\nfunction evaluateArithmetic(op, properties) {\n    if (!op['operator'] || [MINUS_OPERATOR, MUL_OPERATOR, DIV_OPERATOR, MOD_OPERATOR].indexOf(op['operator']) === -1 ||\n        !op['children'] || op['children'].length < 2) {\n        throw ('Invalid arithmetic operator ' + op);\n    }\n\n    var l = evaluateSelector(op['children'][0], properties);\n    var r = evaluateSelector(op['children'][1], properties);\n\n    if (typeof l === 'number' && typeof r === 'number') {\n        switch (op['operator']) {\n            case MINUS_OPERATOR:\n                return l - r;\n            case MUL_OPERATOR:\n                return l * r;\n            case DIV_OPERATOR:\n                if (r !== 0) {\n                    return l / r;\n                }\n                return null;\n            case MOD_OPERATOR:\n                if (r === 0) {\n                    return null;\n                }\n                if (l === 0) {\n                    return 0;\n                }\n                if ((l < 0 && r > 0) || (l > 0 && r < 0)) {\n                    /* Mimic python modulo - result takes sign of the divisor\n                     * if one operand is negative. */\n                    return -(Math.floor(l / r) * r - l);\n                }\n                return l % r;\n            default:\n                throw('Unknown operator: ' + op['operator']);\n        }\n    }\n\n    return null;\n}\n\nfunction _isArrayEqual(l, r) {\n    if (l === r) return true;\n    if (l === null || r === null) return false;\n    if (l.length !== r.length) return false;\n\n    for (var i = 0; i < l.length; i++) {\n        if (l[i] !== r[i]) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\nfunction _isEqual(l, r) {\n    if ( l === null && l === r ) {\n        return true;\n    }\n    if (typeof l === typeof r) {\n        switch (typeof l) {\n            case 'number':\n            case 'string':\n            case 'boolean':\n                return l === r;\n            case 'object':\n                if (_.isArray(l) && _.isArray(r)) {\n                    return _isArrayEqual(l, r);\n                }\n                if (_.isDate(l) && _.isDate(r)) {\n                    return l.getTime() === r.getTime();\n                }\n                if (_.isObject(l) && _.isObject(r)) {\n                    return JSON.stringify(l) === JSON.stringify(r);\n                }\n        }\n    }\n    return false;\n}\n\nfunction evaluateEquality(op, properties) {\n    if (!op['operator'] || [EQUALS_OPERATOR, NOT_EQUALS_OPERATOR].indexOf(op['operator']) === -1 || !op['children'] || op['children'].length !== 2) {\n        throw ('Invalid equality operator ' + op);\n    }\n\n    var v = _isEqual(evaluateSelector(op['children'][0], properties), evaluateSelector(op['children'][1], properties));\n\n    switch (op['operator']) {\n        case EQUALS_OPERATOR:\n            return v;\n        case NOT_EQUALS_OPERATOR:\n            return !v;\n    }\n}\n\nfunction evaluateComparison(op, properties) {\n    if (!op['operator'] ||\n        [GREATER_OPERATOR, GREATER_EQUAL_OPERATOR, LESS_OPERATOR, LESS_EQUAL_OPERATOR].indexOf(op['operator']) === -1 ||\n        !op['children'] || op['children'].length !== 2) {\n        throw ('Invalid comparison operator ' + op);\n    }\n    var l = evaluateSelector(op['children'][0], properties);\n    var r = evaluateSelector(op['children'][1], properties);\n\n    if (typeof(l) === typeof(r)) {\n        if (typeof(r) === 'number' || _.isDate(r)) {\n            l = toNumber(l);\n            r = toNumber(r);\n            switch (op['operator']) {\n                case GREATER_OPERATOR:\n                    return l > r;\n                case GREATER_EQUAL_OPERATOR:\n                    return l >= r;\n                case LESS_OPERATOR:\n                    return l < r;\n                case LESS_EQUAL_OPERATOR:\n                    return l <= r;\n            }\n        } else if (typeof(r) === 'string') {\n            var compare = l.localeCompare(r);\n            switch (op['operator']) {\n                case GREATER_OPERATOR:\n                    return compare > 0;\n                case GREATER_EQUAL_OPERATOR:\n                    return compare >= 0;\n                case LESS_OPERATOR:\n                    return compare < 0;\n                case LESS_EQUAL_OPERATOR:\n                    return compare <= 0;\n            }\n        }\n    }\n\n    return null;\n}\n\nfunction evaluateDefined(op, properties) {\n    if (!op['operator'] || [DEFINED_OPERATOR, NOT_DEFINED_OPERATOR].indexOf(op['operator']) === -1 ||\n        !op['children'] || op['children'].length !== 1) {\n        throw ('Invalid defined/not defined operator: ' + op);\n    }\n\n    var b = evaluateSelector(op['children'][0], properties) !== null;\n    if (op['operator'] === NOT_DEFINED_OPERATOR) {\n        return !b;\n    }\n\n    return b;\n}\n\nfunction evaluateNot(op, properties) {\n    if (!op['operator'] || op['operator'] !== NOT_OPERATOR || !op['children'] || op['children'].length !== 1) {\n        throw ('Invalid not operator: ' + op);\n    }\n\n    var v = evaluateSelector(op['children'][0], properties);\n    if (v === null) {\n        return true;\n    }\n\n    if (typeof(v) === 'boolean') {\n        return !v;\n    }\n\n    return null;\n}\n\nfunction evaluateOperator(op, properties) {\n    if (!op['operator']) {\n        throw ('Invalid operator: operator key missing ' + op);\n    }\n\n    switch (op['operator']) {\n        case AND_OPERATOR:\n            return evaluateAnd(op, properties);\n        case OR_OPERATOR:\n            return evaluateOr(op, properties);\n        case IN_OPERATOR:\n        case NOT_IN_OPERATOR:\n            return evaluateIn(op, properties);\n        case PLUS_OPERATOR:\n            return evaluatePlus(op, properties);\n        case MINUS_OPERATOR:\n        case MUL_OPERATOR:\n        case DIV_OPERATOR:\n        case MOD_OPERATOR:\n            return evaluateArithmetic(op, properties);\n        case EQUALS_OPERATOR:\n        case NOT_EQUALS_OPERATOR:\n            return evaluateEquality(op, properties);\n        case GREATER_OPERATOR:\n        case LESS_OPERATOR:\n        case GREATER_EQUAL_OPERATOR:\n        case LESS_EQUAL_OPERATOR:\n            return evaluateComparison(op, properties);\n        case BOOLEAN_OPERATOR:\n            return evaluateBoolean(op, properties);\n        case DATETIME_OPERATOR:\n            return evaluateDateTime(op, properties);\n        case LIST_OPERATOR:\n            return evaluateList(op, properties);\n        case NUMBER_OPERATOR:\n            return evaluateNumber(op, properties);\n        case STRING_OPERATOR:\n            return evaluateString(op, properties);\n        case DEFINED_OPERATOR:\n        case NOT_DEFINED_OPERATOR:\n            return evaluateDefined(op, properties);\n        case NOT_OPERATOR:\n            return evaluateNot(op, properties);\n    }\n}\n\nfunction evaluateWindow(value) {\n    var win = value[WINDOW_KEY];\n    if (!win || !win[UNIT_KEY] || !win[VALUE_KEY]) {\n        throw('Invalid window: missing required keys ' + JSON.stringify(value));\n    }\n    var out = new Date();\n    switch (win[UNIT_KEY]) {\n        case HOUR_KEY:\n            out.setTime(out.getTime() + (win[VALUE_KEY]*-1*60*60*1000));\n            break;\n        case DAY_KEY:\n            out.setTime(out.getTime() + (win[VALUE_KEY]*-1*24*60*60*1000));\n            break;\n        case WEEK_KEY:\n            out.setTime(out.getTime() + (win[VALUE_KEY]*-1*7*24*60*60*1000));\n            break;\n        case MONTH_KEY:\n            out.setTime(out.getTime() + (win[VALUE_KEY]*-1*30*24*60*60*1000));\n            break;\n        default:\n            throw('Invalid unit: ' + win[UNIT_KEY]);\n    }\n\n    return out;\n}\n\nfunction evaluateOperand(op, properties) {\n    if (!op['property'] || !op['value']) {\n        throw('Invalid operand: missing required keys ' + op);\n    }\n    switch (op['property']) {\n        case EVENT_PROPERTY:\n            if (properties[op['value']] !== undefined) {\n                return properties[op['value']];\n            }\n            return null;\n        case LITERAL_PROPERTY:\n            if (op['value'] === NOW_LITERAL) {\n                return new Date();\n            }\n            if (typeof(op['value']) === 'object') {\n                return evaluateWindow(op['value']);\n            }\n            return op['value'];\n        default:\n            throw('Invalid operand: Invalid property type ' + op['property']);\n    }\n}\n\nfunction evaluateSelector(filters, properties) {\n    if (filters[PROPERTY_KEY]) {\n        return evaluateOperand(filters, properties);\n    }\n    if (filters[OPERATOR_KEY]) {\n        return evaluateOperator(filters, properties);\n    }\n}\n\n// Internal class for notification display\n\nvar MixpanelNotification = function(notif_data, mixpanel_instance) {\n    _.bind_instance_methods(this);\n\n    this.mixpanel          = mixpanel_instance;\n    this.persistence       = this.mixpanel['persistence'];\n    this.resource_protocol = this.mixpanel.get_config('inapp_protocol');\n    this.cdn_host          = this.mixpanel.get_config('cdn');\n\n    this.campaign_id = _.escapeHTML(notif_data['id']);\n    this.message_id  = _.escapeHTML(notif_data['message_id']);\n\n    this.body            = (_.escapeHTML(notif_data['body']) || '').replace(/\\n/g, '<br/>');\n    this.cta             = _.escapeHTML(notif_data['cta']) || 'Close';\n    this.notif_type      = _.escapeHTML(notif_data['type']) || 'takeover';\n    this.style           = _.escapeHTML(notif_data['style']) || 'light';\n    this.title           = _.escapeHTML(notif_data['title']) || '';\n    this.video_width     = MixpanelNotification.VIDEO_WIDTH;\n    this.video_height    = MixpanelNotification.VIDEO_HEIGHT;\n\n    this.display_triggers = notif_data['display_triggers'] || [];\n\n    // These fields are url-sanitized in the backend already.\n    this.dest_url        = notif_data['cta_url'] || null;\n    this.image_url       = notif_data['image_url'] || null;\n    this.thumb_image_url = notif_data['thumb_image_url'] || null;\n    this.video_url       = notif_data['video_url'] || null;\n\n    if (this.thumb_image_url && this.thumb_image_url.indexOf('//') === 0) {\n        this.thumb_image_url = this.thumb_image_url.replace('//', this.resource_protocol);\n    }\n\n    this.clickthrough = true;\n    if (!this.dest_url) {\n        this.dest_url = '#dismiss';\n        this.clickthrough = false;\n    }\n\n    this.mini = this.notif_type === 'mini';\n    if (!this.mini) {\n        this.notif_type = 'takeover';\n    }\n    this.notif_width = !this.mini ? MixpanelNotification.NOTIF_WIDTH : MixpanelNotification.NOTIF_WIDTH_MINI;\n\n    this._set_client_config();\n    this.imgs_to_preload = this._init_image_html();\n    this._init_video();\n};\n\nMixpanelNotification.ANIM_TIME         = 200;\nMixpanelNotification.MARKUP_PREFIX     = 'mixpanel-notification';\nMixpanelNotification.BG_OPACITY        = 0.6;\nMixpanelNotification.NOTIF_TOP         = 25;\nMixpanelNotification.NOTIF_START_TOP   = 200;\nMixpanelNotification.NOTIF_WIDTH       = 388;\nMixpanelNotification.NOTIF_WIDTH_MINI  = 420;\nMixpanelNotification.NOTIF_HEIGHT_MINI = 85;\nMixpanelNotification.THUMB_BORDER_SIZE = 5;\nMixpanelNotification.THUMB_IMG_SIZE    = 60;\nMixpanelNotification.THUMB_OFFSET      = Math.round(MixpanelNotification.THUMB_IMG_SIZE / 2);\nMixpanelNotification.VIDEO_WIDTH       = 595;\nMixpanelNotification.VIDEO_HEIGHT      = 334;\n\nMixpanelNotification.prototype.show = function() {\n    var self = this;\n    this._set_client_config();\n\n    // don't display until HTML body exists\n    if (!this.body_el) {\n        setTimeout(function() { self.show(); }, 300);\n        return;\n    }\n\n    this._init_styles();\n    this._init_notification_el();\n\n    // wait for any images to load before showing notification\n    this._preload_images(this._attach_and_animate);\n};\n\nMixpanelNotification.prototype.dismiss = _.safewrap(function() {\n    if (!this.marked_as_shown) {\n        // unexpected condition: user interacted with notif even though we didn't consider it\n        // visible (see _mark_as_shown()); send tracking signals to mark delivery\n        this._mark_delivery({'invisible': true});\n    }\n\n    var exiting_el = this.showing_video ? this._get_el('video') : this._get_notification_display_el();\n    if (this.use_transitions) {\n        this._remove_class('bg', 'visible');\n        this._add_class(exiting_el, 'exiting');\n        setTimeout(this._remove_notification_el, MixpanelNotification.ANIM_TIME);\n    } else {\n        var notif_attr, notif_start, notif_goal;\n        if (this.mini) {\n            notif_attr  = 'right';\n            notif_start = 20;\n            notif_goal  = -100;\n        } else {\n            notif_attr  = 'top';\n            notif_start = MixpanelNotification.NOTIF_TOP;\n            notif_goal  = MixpanelNotification.NOTIF_START_TOP + MixpanelNotification.NOTIF_TOP;\n        }\n        this._animate_els([\n            {\n                el:    this._get_el('bg'),\n                attr:  'opacity',\n                start: MixpanelNotification.BG_OPACITY,\n                goal:  0.0\n            },\n            {\n                el:    exiting_el,\n                attr:  'opacity',\n                start: 1.0,\n                goal:  0.0\n            },\n            {\n                el:    exiting_el,\n                attr:  notif_attr,\n                start: notif_start,\n                goal:  notif_goal\n            }\n        ], MixpanelNotification.ANIM_TIME, this._remove_notification_el);\n    }\n});\n\nMixpanelNotification.prototype._add_class = _.safewrap(function(el, class_name) {\n    class_name = MixpanelNotification.MARKUP_PREFIX + '-' + class_name;\n    if (typeof el === 'string') {\n        el = this._get_el(el);\n    }\n    if (!el.className) {\n        el.className = class_name;\n    } else if (!~(' ' + el.className + ' ').indexOf(' ' + class_name + ' ')) {\n        el.className += ' ' + class_name;\n    }\n});\nMixpanelNotification.prototype._remove_class = _.safewrap(function(el, class_name) {\n    class_name = MixpanelNotification.MARKUP_PREFIX + '-' + class_name;\n    if (typeof el === 'string') {\n        el = this._get_el(el);\n    }\n    if (el.className) {\n        el.className = (' ' + el.className + ' ')\n            .replace(' ' + class_name + ' ', '')\n            .replace(/^[\\s\\xA0]+/, '')\n            .replace(/[\\s\\xA0]+$/, '');\n    }\n});\n\nMixpanelNotification.prototype._animate_els = _.safewrap(function(anims, mss, done_cb, start_time) {\n    var self = this,\n        in_progress = false,\n        ai, anim,\n        cur_time = 1 * new Date(), time_diff;\n\n    start_time = start_time || cur_time;\n    time_diff = cur_time - start_time;\n\n    for (ai = 0; ai < anims.length; ai++) {\n        anim = anims[ai];\n        if (typeof anim.val === 'undefined') {\n            anim.val = anim.start;\n        }\n        if (anim.val !== anim.goal) {\n            in_progress = true;\n            var anim_diff = anim.goal - anim.start,\n                anim_dir = anim.goal >= anim.start ? 1 : -1;\n            anim.val = anim.start + anim_diff * time_diff / mss;\n            if (anim.attr !== 'opacity') {\n                anim.val = Math.round(anim.val);\n            }\n            if ((anim_dir > 0 && anim.val >= anim.goal) || (anim_dir < 0 && anim.val <= anim.goal)) {\n                anim.val = anim.goal;\n            }\n        }\n    }\n    if (!in_progress) {\n        if (done_cb) {\n            done_cb();\n        }\n        return;\n    }\n\n    for (ai = 0; ai < anims.length; ai++) {\n        anim = anims[ai];\n        if (anim.el) {\n            var suffix = anim.attr === 'opacity' ? '' : 'px';\n            anim.el.style[anim.attr] = String(anim.val) + suffix;\n        }\n    }\n    setTimeout(function() { self._animate_els(anims, mss, done_cb, start_time); }, 10);\n});\n\nMixpanelNotification.prototype._attach_and_animate = _.safewrap(function() {\n    var self = this;\n\n    // no possibility to double-display\n    if (this.shown || this._get_shown_campaigns()[this.campaign_id]) {\n        return;\n    }\n    this.shown = true;\n\n    this.body_el.appendChild(this.notification_el);\n    setTimeout(function() {\n        var notif_el = self._get_notification_display_el();\n        if (self.use_transitions) {\n            if (!self.mini) {\n                self._add_class('bg', 'visible');\n            }\n            self._add_class(notif_el, 'visible');\n            self._mark_as_shown();\n        } else {\n            var notif_attr, notif_start, notif_goal;\n            if (self.mini) {\n                notif_attr  = 'right';\n                notif_start = -100;\n                notif_goal  = 20;\n            } else {\n                notif_attr  = 'top';\n                notif_start = MixpanelNotification.NOTIF_START_TOP + MixpanelNotification.NOTIF_TOP;\n                notif_goal  = MixpanelNotification.NOTIF_TOP;\n            }\n            self._animate_els([\n                {\n                    el:    self._get_el('bg'),\n                    attr:  'opacity',\n                    start: 0.0,\n                    goal:  MixpanelNotification.BG_OPACITY\n                },\n                {\n                    el:    notif_el,\n                    attr:  'opacity',\n                    start: 0.0,\n                    goal:  1.0\n                },\n                {\n                    el:    notif_el,\n                    attr:  notif_attr,\n                    start: notif_start,\n                    goal:  notif_goal\n                }\n            ], MixpanelNotification.ANIM_TIME, self._mark_as_shown);\n        }\n    }, 100);\n    _.register_event(self._get_el('cancel'), 'click', function(e) {\n        e.preventDefault();\n        self.dismiss();\n    });\n    var click_el = self._get_el('button') ||\n                        self._get_el('mini-content');\n    _.register_event(click_el, 'click', function(e) {\n        e.preventDefault();\n        if (self.show_video) {\n            self._track_event('$campaign_open', {'$resource_type': 'video'});\n            self._switch_to_video();\n        } else {\n            self.dismiss();\n            if (self.clickthrough) {\n                var tracking_cb = null;\n                if (self.mixpanel.get_config('inapp_link_new_window')) {\n                    window.open(self.dest_url);\n                } else {\n                    tracking_cb = function() {\n                        window.location.href = self.dest_url;\n                    };\n                }\n                self._track_event('$campaign_open', {'$resource_type': 'link'}, tracking_cb);\n            }\n        }\n    });\n});\n\nMixpanelNotification.prototype._get_el = function(id) {\n    return document.getElementById(MixpanelNotification.MARKUP_PREFIX + '-' + id);\n};\n\nMixpanelNotification.prototype._get_notification_display_el = function() {\n    return this._get_el(this.notif_type);\n};\n\nMixpanelNotification.prototype._get_shown_campaigns = function() {\n    return this.persistence['props'][CAMPAIGN_IDS_KEY] || (this.persistence['props'][CAMPAIGN_IDS_KEY] = {});\n};\n\nMixpanelNotification.prototype._matches_event_data = _.safewrap(function(event_data) {\n    var event_name = event_data['event'] || '';\n    for (var i = 0; i < this.display_triggers.length; i++) {\n        var display_trigger = this.display_triggers[i];\n        var match_event = display_trigger['event'] || '';\n        if (match_event === '$any_event' || event_name === display_trigger['event']) {\n            if (display_trigger['selector'] && !_.isEmptyObject(display_trigger['selector'])) {\n                if (evaluateSelector(display_trigger['selector'], event_data['properties'])) {\n                    return true;\n                }\n            } else {\n                return true;\n            }\n        }\n    }\n    return false;\n});\n\n\nMixpanelNotification.prototype._browser_lte = function(browser, version) {\n    return this.browser_versions[browser] && this.browser_versions[browser] <= version;\n};\n\nMixpanelNotification.prototype._init_image_html = function() {\n    var imgs_to_preload = [];\n\n    if (!this.mini) {\n        if (this.image_url) {\n            imgs_to_preload.push(this.image_url);\n            this.img_html = '<img id=\"img\" src=\"' + this.image_url + '\"/>';\n        } else {\n            this.img_html = '';\n        }\n        if (this.thumb_image_url) {\n            imgs_to_preload.push(this.thumb_image_url);\n            this.thumb_img_html =\n                    '<div id=\"thumbborder-wrapper\"><div id=\"thumbborder\"></div></div>' +\n                    '<img id=\"thumbnail\"' +\n                        ' src=\"' + this.thumb_image_url + '\"' +\n                        ' width=\"' + MixpanelNotification.THUMB_IMG_SIZE + '\"' +\n                        ' height=\"' + MixpanelNotification.THUMB_IMG_SIZE + '\"' +\n                    '/>' +\n                    '<div id=\"thumbspacer\"></div>';\n        } else {\n            this.thumb_img_html = '';\n        }\n    } else {\n        this.thumb_image_url = this.thumb_image_url || (this.cdn_host + '/site_media/images/icons/notifications/mini-news-dark.png');\n        imgs_to_preload.push(this.thumb_image_url);\n    }\n\n    return imgs_to_preload;\n};\n\nMixpanelNotification.prototype._init_notification_el = function() {\n    var notification_html = '';\n    var video_src         = '';\n    var video_html        = '';\n    var cancel_html       = '<div id=\"cancel\">' +\n                                    '<div id=\"cancel-icon\"></div>' +\n                                '</div>';\n\n    this.notification_el = document.createElement('div');\n    this.notification_el.id = MixpanelNotification.MARKUP_PREFIX + '-wrapper';\n    if (!this.mini) {\n        // TAKEOVER notification\n        var close_html  = (this.clickthrough || this.show_video) ? '' : '<div id=\"button-close\"></div>',\n            play_html   = this.show_video ? '<div id=\"button-play\"></div>' : '';\n        if (this._browser_lte('ie', 7)) {\n            close_html = '';\n            play_html = '';\n        }\n        notification_html =\n                '<div id=\"takeover\">' +\n                    this.thumb_img_html +\n                    '<div id=\"mainbox\">' +\n                        cancel_html +\n                        '<div id=\"content\">' +\n                            this.img_html +\n                            '<div id=\"title\">' + this.title + '</div>' +\n                            '<div id=\"body\">' + this.body + '</div>' +\n                            '<div id=\"tagline\">' +\n                                '<a href=\"http://mixpanel.com?from=inapp\" target=\"_blank\">POWERED BY MIXPANEL</a>' +\n                            '</div>' +\n                        '</div>' +\n                        '<div id=\"button\">' +\n                            close_html +\n                            '<a id=\"button-link\" href=\"' + this.dest_url + '\">' + this.cta + '</a>' +\n                            play_html +\n                        '</div>' +\n                    '</div>' +\n                '</div>';\n    } else {\n        // MINI notification\n        notification_html =\n                '<div id=\"mini\">' +\n                    '<div id=\"mainbox\">' +\n                        cancel_html +\n                        '<div id=\"mini-content\">' +\n                            '<div id=\"mini-icon\">' +\n                                '<div id=\"mini-icon-img\"></div>' +\n                            '</div>' +\n                            '<div id=\"body\">' +\n                                '<div id=\"body-text\"><div>' + this.body + '</div></div>' +\n                            '</div>' +\n                        '</div>' +\n                    '</div>' +\n                    '<div id=\"mini-border\"></div>' +\n                '</div>';\n    }\n    if (this.youtube_video) {\n        video_src = this.resource_protocol + 'www.youtube.com/embed/' + this.youtube_video +\n                '?wmode=transparent&showinfo=0&modestbranding=0&rel=0&autoplay=1&loop=0&vq=hd1080';\n        if (this.yt_custom) {\n            video_src += '&enablejsapi=1&html5=1&controls=0';\n            video_html =\n                    '<div id=\"video-controls\">' +\n                        '<div id=\"video-progress\" class=\"video-progress-el\">' +\n                            '<div id=\"video-progress-total\" class=\"video-progress-el\"></div>' +\n                            '<div id=\"video-elapsed\" class=\"video-progress-el\"></div>' +\n                        '</div>' +\n                        '<div id=\"video-time\" class=\"video-progress-el\"></div>' +\n                    '</div>';\n        }\n    } else if (this.vimeo_video) {\n        video_src = this.resource_protocol + 'player.vimeo.com/video/' + this.vimeo_video + '?autoplay=1&title=0&byline=0&portrait=0';\n    }\n    if (this.show_video) {\n        this.video_iframe =\n                '<iframe id=\"' + MixpanelNotification.MARKUP_PREFIX + '-video-frame\" ' +\n                    'width=\"' + this.video_width + '\" height=\"' + this.video_height + '\" ' +\n                    ' src=\"' + video_src + '\"' +\n                    ' frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen=\"1\" scrolling=\"no\"' +\n                '></iframe>';\n        video_html =\n                '<div id=\"video-' + (this.flip_animate ? '' : 'no') + 'flip\">' +\n                    '<div id=\"video\">' +\n                        '<div id=\"video-holder\"></div>' +\n                        video_html +\n                    '</div>' +\n                '</div>';\n    }\n    var main_html = video_html + notification_html;\n    if (this.flip_animate) {\n        main_html =\n                (this.mini ? notification_html : '') +\n                '<div id=\"flipcontainer\"><div id=\"flipper\">' +\n                    (this.mini ? video_html : main_html) +\n                '</div></div>';\n    }\n\n    this.notification_el.innerHTML =\n        ('<div id=\"overlay\" class=\"' + this.notif_type + '\">' +\n            '<div id=\"campaignid-' + this.campaign_id + '\">' +\n                '<div id=\"bgwrapper\">' +\n                    '<div id=\"bg\"></div>' +\n                    main_html +\n                '</div>' +\n            '</div>' +\n        '</div>')\n            .replace(/class=\"/g, 'class=\"' + MixpanelNotification.MARKUP_PREFIX + '-')\n            .replace(/id=\"/g, 'id=\"' + MixpanelNotification.MARKUP_PREFIX + '-');\n};\n\nMixpanelNotification.prototype._init_styles = function() {\n    if (this.style === 'dark') {\n        this.style_vals = {\n            bg:             '#1d1f25',\n            bg_actions:     '#282b32',\n            bg_hover:       '#3a4147',\n            bg_light:       '#4a5157',\n            border_gray:    '#32353c',\n            cancel_opacity: '0.4',\n            mini_hover:     '#2a3137',\n            text_title:     '#fff',\n            text_main:      '#9498a3',\n            text_tagline:   '#464851',\n            text_hover:     '#ddd'\n        };\n    } else {\n        this.style_vals = {\n            bg:             '#fff',\n            bg_actions:     '#e7eaee',\n            bg_hover:       '#eceff3',\n            bg_light:       '#f5f5f5',\n            border_gray:    '#e4ecf2',\n            cancel_opacity: '1.0',\n            mini_hover:     '#fafafa',\n            text_title:     '#5c6578',\n            text_main:      '#8b949b',\n            text_tagline:   '#ced9e6',\n            text_hover:     '#7c8598'\n        };\n    }\n    var shadow = '0px 0px 35px 0px rgba(45, 49, 56, 0.7)',\n        video_shadow = shadow,\n        mini_shadow = shadow,\n        thumb_total_size = MixpanelNotification.THUMB_IMG_SIZE + MixpanelNotification.THUMB_BORDER_SIZE * 2,\n        anim_seconds = (MixpanelNotification.ANIM_TIME / 1000) + 's';\n    if (this.mini) {\n        shadow = 'none';\n    }\n\n    // don't display on small viewports\n    var notif_media_queries = {},\n        min_width = MixpanelNotification.NOTIF_WIDTH_MINI + 20;\n    notif_media_queries['@media only screen and (max-width: ' + (min_width - 1) + 'px)'] = {\n        '#overlay': {\n            'display': 'none'\n        }\n    };\n    var notif_styles = {\n        '.flipped': {\n            'transform': 'rotateY(180deg)'\n        },\n        '#overlay': {\n            'position': 'fixed',\n            'top': '0',\n            'left': '0',\n            'width': '100%',\n            'height': '100%',\n            'overflow': 'auto',\n            'text-align': 'center',\n            'z-index': '10000',\n            'font-family': '\"Helvetica\", \"Arial\", sans-serif',\n            '-webkit-font-smoothing': 'antialiased',\n            '-moz-osx-font-smoothing': 'grayscale'\n        },\n        '#overlay.mini': {\n            'height': '0',\n            'overflow': 'visible'\n        },\n        '#overlay a': {\n            'width': 'initial',\n            'padding': '0',\n            'text-decoration': 'none',\n            'text-transform': 'none',\n            'color': 'inherit'\n        },\n        '#bgwrapper': {\n            'position': 'relative',\n            'width': '100%',\n            'height': '100%'\n        },\n        '#bg': {\n            'position': 'fixed',\n            'top': '0',\n            'left': '0',\n            'width': '100%',\n            'height': '100%',\n            'min-width': this.doc_width * 4 + 'px',\n            'min-height': this.doc_height * 4 + 'px',\n            'background-color': 'black',\n            'opacity': '0.0',\n            '-ms-filter': 'progid:DXImageTransform.Microsoft.Alpha(Opacity=60)', // IE8\n            'filter': 'alpha(opacity=60)', // IE5-7\n            'transition': 'opacity ' + anim_seconds\n        },\n        '#bg.visible': {\n            'opacity': MixpanelNotification.BG_OPACITY\n        },\n        '.mini #bg': {\n            'width': '0',\n            'height': '0',\n            'min-width': '0'\n        },\n        '#flipcontainer': {\n            'perspective': '1000px',\n            'position': 'absolute',\n            'width': '100%'\n        },\n        '#flipper': {\n            'position': 'relative',\n            'transform-style': 'preserve-3d',\n            'transition': '0.3s'\n        },\n        '#takeover': {\n            'position': 'absolute',\n            'left': '50%',\n            'width': MixpanelNotification.NOTIF_WIDTH + 'px',\n            'margin-left': Math.round(-MixpanelNotification.NOTIF_WIDTH / 2) + 'px',\n            'backface-visibility': 'hidden',\n            'transform': 'rotateY(0deg)',\n            'opacity': '0.0',\n            'top': MixpanelNotification.NOTIF_START_TOP + 'px',\n            'transition': 'opacity ' + anim_seconds + ', top ' + anim_seconds\n        },\n        '#takeover.visible': {\n            'opacity': '1.0',\n            'top': MixpanelNotification.NOTIF_TOP + 'px'\n        },\n        '#takeover.exiting': {\n            'opacity': '0.0',\n            'top': MixpanelNotification.NOTIF_START_TOP + 'px'\n        },\n        '#thumbspacer': {\n            'height': MixpanelNotification.THUMB_OFFSET + 'px'\n        },\n        '#thumbborder-wrapper': {\n            'position': 'absolute',\n            'top': (-MixpanelNotification.THUMB_BORDER_SIZE) + 'px',\n            'left': (MixpanelNotification.NOTIF_WIDTH / 2 - MixpanelNotification.THUMB_OFFSET - MixpanelNotification.THUMB_BORDER_SIZE) + 'px',\n            'width': thumb_total_size + 'px',\n            'height': (thumb_total_size / 2) + 'px',\n            'overflow': 'hidden'\n        },\n        '#thumbborder': {\n            'position': 'absolute',\n            'width': thumb_total_size + 'px',\n            'height': thumb_total_size + 'px',\n            'border-radius': thumb_total_size + 'px',\n            'background-color': this.style_vals.bg_actions,\n            'opacity': '0.5'\n        },\n        '#thumbnail': {\n            'position': 'absolute',\n            'top': '0px',\n            'left': (MixpanelNotification.NOTIF_WIDTH / 2 - MixpanelNotification.THUMB_OFFSET) + 'px',\n            'width': MixpanelNotification.THUMB_IMG_SIZE + 'px',\n            'height': MixpanelNotification.THUMB_IMG_SIZE + 'px',\n            'overflow': 'hidden',\n            'z-index': '100',\n            'border-radius': MixpanelNotification.THUMB_IMG_SIZE + 'px'\n        },\n        '#mini': {\n            'position': 'absolute',\n            'right': '20px',\n            'top': MixpanelNotification.NOTIF_TOP + 'px',\n            'width': this.notif_width + 'px',\n            'height': MixpanelNotification.NOTIF_HEIGHT_MINI * 2 + 'px',\n            'margin-top': 20 - MixpanelNotification.NOTIF_HEIGHT_MINI + 'px',\n            'backface-visibility': 'hidden',\n            'opacity': '0.0',\n            'transform': 'rotateX(90deg)',\n            'transition': 'opacity 0.3s, transform 0.3s, right 0.3s'\n        },\n        '#mini.visible': {\n            'opacity': '1.0',\n            'transform': 'rotateX(0deg)'\n        },\n        '#mini.exiting': {\n            'opacity': '0.0',\n            'right': '-150px'\n        },\n        '#mainbox': {\n            'border-radius': '4px',\n            'box-shadow': shadow,\n            'text-align': 'center',\n            'background-color': this.style_vals.bg,\n            'font-size': '14px',\n            'color': this.style_vals.text_main\n        },\n        '#mini #mainbox': {\n            'height': MixpanelNotification.NOTIF_HEIGHT_MINI + 'px',\n            'margin-top': MixpanelNotification.NOTIF_HEIGHT_MINI + 'px',\n            'border-radius': '3px',\n            'transition': 'background-color ' + anim_seconds\n        },\n        '#mini-border': {\n            'height': (MixpanelNotification.NOTIF_HEIGHT_MINI + 6) + 'px',\n            'width': (MixpanelNotification.NOTIF_WIDTH_MINI + 6) + 'px',\n            'position': 'absolute',\n            'top': '-3px',\n            'left': '-3px',\n            'margin-top': MixpanelNotification.NOTIF_HEIGHT_MINI + 'px',\n            'border-radius': '6px',\n            'opacity': '0.25',\n            'background-color': '#fff',\n            'z-index': '-1',\n            'box-shadow': mini_shadow\n        },\n        '#mini-icon': {\n            'position': 'relative',\n            'display': 'inline-block',\n            'width': '75px',\n            'height': MixpanelNotification.NOTIF_HEIGHT_MINI + 'px',\n            'border-radius': '3px 0 0 3px',\n            'background-color': this.style_vals.bg_actions,\n            'background': 'linear-gradient(135deg, ' + this.style_vals.bg_light + ' 0%, ' + this.style_vals.bg_actions + ' 100%)',\n            'transition': 'background-color ' + anim_seconds\n        },\n        '#mini:hover #mini-icon': {\n            'background-color': this.style_vals.mini_hover\n        },\n        '#mini:hover #mainbox': {\n            'background-color': this.style_vals.mini_hover\n        },\n        '#mini-icon-img': {\n            'position': 'absolute',\n            'background-image': 'url(' + this.thumb_image_url + ')',\n            'width': '48px',\n            'height': '48px',\n            'top': '20px',\n            'left': '12px'\n        },\n        '#content': {\n            'padding': '30px 20px 0px 20px'\n        },\n        '#mini-content': {\n            'text-align': 'left',\n            'height': MixpanelNotification.NOTIF_HEIGHT_MINI + 'px',\n            'cursor': 'pointer'\n        },\n        '#img': {\n            'width': '328px',\n            'margin-top': '30px',\n            'border-radius': '5px'\n        },\n        '#title': {\n            'max-height': '600px',\n            'overflow': 'hidden',\n            'word-wrap': 'break-word',\n            'padding': '25px 0px 20px 0px',\n            'font-size': '19px',\n            'font-weight': 'bold',\n            'color': this.style_vals.text_title\n        },\n        '#body': {\n            'max-height': '600px',\n            'margin-bottom': '25px',\n            'overflow': 'hidden',\n            'word-wrap': 'break-word',\n            'line-height': '21px',\n            'font-size': '15px',\n            'font-weight': 'normal',\n            'text-align': 'left'\n        },\n        '#mini #body': {\n            'display': 'inline-block',\n            'max-width': '250px',\n            'margin': '0 0 0 30px',\n            'height': MixpanelNotification.NOTIF_HEIGHT_MINI + 'px',\n            'font-size': '16px',\n            'letter-spacing': '0.8px',\n            'color': this.style_vals.text_title\n        },\n        '#mini #body-text': {\n            'display': 'table',\n            'height': MixpanelNotification.NOTIF_HEIGHT_MINI + 'px'\n        },\n        '#mini #body-text div': {\n            'display': 'table-cell',\n            'vertical-align': 'middle'\n        },\n        '#tagline': {\n            'margin-bottom': '15px',\n            'font-size': '10px',\n            'font-weight': '600',\n            'letter-spacing': '0.8px',\n            'color': '#ccd7e0',\n            'text-align': 'left'\n        },\n        '#tagline a': {\n            'color': this.style_vals.text_tagline,\n            'transition': 'color ' + anim_seconds\n        },\n        '#tagline a:hover': {\n            'color': this.style_vals.text_hover\n        },\n        '#cancel': {\n            'position': 'absolute',\n            'right': '0',\n            'width': '8px',\n            'height': '8px',\n            'padding': '10px',\n            'border-radius': '20px',\n            'margin': '12px 12px 0 0',\n            'box-sizing': 'content-box',\n            'cursor': 'pointer',\n            'transition': 'background-color ' + anim_seconds\n        },\n        '#mini #cancel': {\n            'margin': '7px 7px 0 0'\n        },\n        '#cancel-icon': {\n            'width': '8px',\n            'height': '8px',\n            'overflow': 'hidden',\n            'background-image': 'url(' + this.cdn_host + '/site_media/images/icons/notifications/cancel-x.png)',\n            'opacity': this.style_vals.cancel_opacity\n        },\n        '#cancel:hover': {\n            'background-color': this.style_vals.bg_hover\n        },\n        '#button': {\n            'display': 'block',\n            'height': '60px',\n            'line-height': '60px',\n            'text-align': 'center',\n            'background-color': this.style_vals.bg_actions,\n            'border-radius': '0 0 4px 4px',\n            'overflow': 'hidden',\n            'cursor': 'pointer',\n            'transition': 'background-color ' + anim_seconds\n        },\n        '#button-close': {\n            'display': 'inline-block',\n            'width': '9px',\n            'height': '60px',\n            'margin-right': '8px',\n            'vertical-align': 'top',\n            'background-image': 'url(' + this.cdn_host + '/site_media/images/icons/notifications/close-x-' + this.style + '.png)',\n            'background-repeat': 'no-repeat',\n            'background-position': '0px 25px'\n        },\n        '#button-play': {\n            'display': 'inline-block',\n            'width': '30px',\n            'height': '60px',\n            'margin-left': '15px',\n            'background-image': 'url(' + this.cdn_host + '/site_media/images/icons/notifications/play-' + this.style + '-small.png)',\n            'background-repeat': 'no-repeat',\n            'background-position': '0px 15px'\n        },\n        'a#button-link': {\n            'display': 'inline-block',\n            'vertical-align': 'top',\n            'text-align': 'center',\n            'font-size': '17px',\n            'font-weight': 'bold',\n            'overflow': 'hidden',\n            'word-wrap': 'break-word',\n            'color': this.style_vals.text_title,\n            'transition': 'color ' + anim_seconds\n        },\n        '#button:hover': {\n            'background-color': this.style_vals.bg_hover,\n            'color': this.style_vals.text_hover\n        },\n        '#button:hover a': {\n            'color': this.style_vals.text_hover\n        },\n\n        '#video-noflip': {\n            'position': 'relative',\n            'top': (-this.video_height * 2) + 'px'\n        },\n        '#video-flip': {\n            'backface-visibility': 'hidden',\n            'transform': 'rotateY(180deg)'\n        },\n        '#video': {\n            'position': 'absolute',\n            'width': (this.video_width - 1) + 'px',\n            'height': this.video_height + 'px',\n            'top': MixpanelNotification.NOTIF_TOP + 'px',\n            'margin-top': '100px',\n            'left': '50%',\n            'margin-left': Math.round(-this.video_width / 2) + 'px',\n            'overflow': 'hidden',\n            'border-radius': '5px',\n            'box-shadow': video_shadow,\n            'transform': 'translateZ(1px)', // webkit rendering bug http://stackoverflow.com/questions/18167981/clickable-link-area-unexpectedly-smaller-after-css-transform\n            'transition': 'opacity ' + anim_seconds + ', top ' + anim_seconds\n        },\n        '#video.exiting': {\n            'opacity': '0.0',\n            'top': this.video_height + 'px'\n        },\n        '#video-holder': {\n            'position': 'absolute',\n            'width': (this.video_width - 1) + 'px',\n            'height': this.video_height + 'px',\n            'overflow': 'hidden',\n            'border-radius': '5px'\n        },\n        '#video-frame': {\n            'margin-left': '-1px',\n            'width': this.video_width + 'px'\n        },\n        '#video-controls': {\n            'opacity': '0',\n            'transition': 'opacity 0.5s'\n        },\n        '#video:hover #video-controls': {\n            'opacity': '1.0'\n        },\n        '#video .video-progress-el': {\n            'position': 'absolute',\n            'bottom': '0',\n            'height': '25px',\n            'border-radius': '0 0 0 5px'\n        },\n        '#video-progress': {\n            'width': '90%'\n        },\n        '#video-progress-total': {\n            'width': '100%',\n            'background-color': this.style_vals.bg,\n            'opacity': '0.7'\n        },\n        '#video-elapsed': {\n            'width': '0',\n            'background-color': '#6cb6f5',\n            'opacity': '0.9'\n        },\n        '#video #video-time': {\n            'width': '10%',\n            'right': '0',\n            'font-size': '11px',\n            'line-height': '25px',\n            'color': this.style_vals.text_main,\n            'background-color': '#666',\n            'border-radius': '0 0 5px 0'\n        }\n    };\n\n    // IE hacks\n    if (this._browser_lte('ie', 8)) {\n        _.extend(notif_styles, {\n            '* html #overlay': {\n                'position': 'absolute'\n            },\n            '* html #bg': {\n                'position': 'absolute'\n            },\n            'html, body': {\n                'height': '100%'\n            }\n        });\n    }\n    if (this._browser_lte('ie', 7)) {\n        _.extend(notif_styles, {\n            '#mini #body': {\n                'display': 'inline',\n                'zoom': '1',\n                'border': '1px solid ' + this.style_vals.bg_hover\n            },\n            '#mini #body-text': {\n                'padding': '20px'\n            },\n            '#mini #mini-icon': {\n                'display': 'none'\n            }\n        });\n    }\n\n    // add vendor-prefixed style rules\n    var VENDOR_STYLES = [\n            'backface-visibility', 'border-radius', 'box-shadow', 'opacity',\n            'perspective', 'transform', 'transform-style', 'transition'\n        ],\n        VENDOR_PREFIXES = ['khtml', 'moz', 'ms', 'o', 'webkit'];\n    for (var selector in notif_styles) {\n        for (var si = 0; si < VENDOR_STYLES.length; si++) {\n            var prop = VENDOR_STYLES[si];\n            if (prop in notif_styles[selector]) {\n                var val = notif_styles[selector][prop];\n                for (var pi = 0; pi < VENDOR_PREFIXES.length; pi++) {\n                    notif_styles[selector]['-' + VENDOR_PREFIXES[pi] + '-' + prop] = val;\n                }\n            }\n        }\n    }\n\n    var inject_styles = function(styles, media_queries) {\n        var create_style_text = function(style_defs) {\n            var st = '';\n            for (var selector in style_defs) {\n                var mp_selector = selector\n                    .replace(/#/g, '#' + MixpanelNotification.MARKUP_PREFIX + '-')\n                    .replace(/\\./g, '.' + MixpanelNotification.MARKUP_PREFIX + '-');\n                st += '\\n' + mp_selector + ' {';\n                var props = style_defs[selector];\n                for (var k in props) {\n                    st += k + ':' + props[k] + ';';\n                }\n                st += '}';\n            }\n            return st;\n        };\n        var create_media_query_text = function(mq_defs) {\n            var mqt = '';\n            for (var mq in mq_defs) {\n                mqt += '\\n' + mq + ' {' + create_style_text(mq_defs[mq]) + '\\n}';\n            }\n            return mqt;\n        };\n\n        var style_text = create_style_text(styles) + create_media_query_text(media_queries),\n            head_el = document.head || document.getElementsByTagName('head')[0] || document.documentElement,\n            style_el = document.createElement('style');\n        head_el.appendChild(style_el);\n        style_el.setAttribute('type', 'text/css');\n        if (style_el.styleSheet) { // IE\n            style_el.styleSheet.cssText = style_text;\n        } else {\n            style_el.textContent = style_text;\n        }\n    };\n    inject_styles(notif_styles, notif_media_queries);\n};\n\nMixpanelNotification.prototype._init_video = _.safewrap(function() {\n    if (!this.video_url) {\n        return;\n    }\n    var self = this;\n\n    // Youtube iframe API compatibility\n    self.yt_custom = 'postMessage' in window;\n\n    self.dest_url = self.video_url;\n    var youtube_match = self.video_url.match(\n            // http://stackoverflow.com/questions/2936467/parse-youtube-video-id-using-preg-match\n            /(?:youtube(?:-nocookie)?\\.com\\/(?:[^/]+\\/.+\\/|(?:v|e(?:mbed)?)\\/|.*[?&]v=)|youtu\\.be\\/)([^\"&?/ ]{11})/i\n        ),\n        vimeo_match = self.video_url.match(\n            /vimeo\\.com\\/.*?(\\d+)/i\n        );\n    if (youtube_match) {\n        self.show_video = true;\n        self.youtube_video = youtube_match[1];\n\n        if (self.yt_custom) {\n            window['onYouTubeIframeAPIReady'] = function() {\n                if (self._get_el('video-frame')) {\n                    self._yt_video_ready();\n                }\n            };\n\n            // load Youtube iframe API; see https://developers.google.com/youtube/iframe_api_reference\n            var tag = document.createElement('script');\n            tag.src = self.resource_protocol + 'www.youtube.com/iframe_api';\n            var firstScriptTag = document.getElementsByTagName('script')[0];\n            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n        }\n    } else if (vimeo_match) {\n        self.show_video = true;\n        self.vimeo_video = vimeo_match[1];\n    }\n\n    // IE <= 7, FF <= 3: fall through to video link rather than embedded player\n    if (self._browser_lte('ie', 7) || self._browser_lte('firefox', 3)) {\n        self.show_video = false;\n        self.clickthrough = true;\n    }\n});\n\nMixpanelNotification.prototype._mark_as_shown = _.safewrap(function() {\n    // click on background to dismiss\n    var self = this;\n    _.register_event(self._get_el('bg'), 'click', function() {\n        self.dismiss();\n    });\n\n    var get_style = function(el, style_name) {\n        var styles = {};\n        if (document.defaultView && document.defaultView.getComputedStyle) {\n            styles = document.defaultView.getComputedStyle(el, null); // FF3 requires both args\n        } else if (el.currentStyle) { // IE\n            styles = el.currentStyle;\n        }\n        return styles[style_name];\n    };\n\n    if (this.campaign_id) {\n        var notif_el = this._get_el('overlay');\n        if (notif_el && get_style(notif_el, 'visibility') !== 'hidden' && get_style(notif_el, 'display') !== 'none') {\n            this._mark_delivery();\n        }\n    }\n});\n\nMixpanelNotification.prototype._mark_delivery = _.safewrap(function(extra_props) {\n    if (!this.marked_as_shown) {\n        this.marked_as_shown = true;\n\n        if (this.campaign_id) {\n            // mark notification shown (local cache)\n            this._get_shown_campaigns()[this.campaign_id] = 1 * new Date();\n            this.persistence.save();\n        }\n\n        // track delivery\n        this._track_event('$campaign_delivery', extra_props);\n\n        // mark notification shown (mixpanel property)\n        this.mixpanel['people']['append']({\n            '$campaigns': this.campaign_id,\n            '$notifications': {\n                'campaign_id': this.campaign_id,\n                'message_id':  this.message_id,\n                'type':        'web',\n                'time':        new Date()\n            }\n        });\n    }\n});\n\nMixpanelNotification.prototype._preload_images = function(all_loaded_cb) {\n    var self = this;\n    if (this.imgs_to_preload.length === 0) {\n        all_loaded_cb();\n        return;\n    }\n\n    var preloaded_imgs = 0;\n    var img_objs = [];\n    var onload = function() {\n        preloaded_imgs++;\n        if (preloaded_imgs === self.imgs_to_preload.length && all_loaded_cb) {\n            all_loaded_cb();\n            all_loaded_cb = null;\n        }\n    };\n    for (var i = 0; i < this.imgs_to_preload.length; i++) {\n        var img = new Image();\n        img.onload = onload;\n        img.src = this.imgs_to_preload[i];\n        if (img.complete) {\n            onload();\n        }\n        img_objs.push(img);\n    }\n\n    // IE6/7 doesn't fire onload reliably\n    if (this._browser_lte('ie', 7)) {\n        setTimeout(function() {\n            var imgs_loaded = true;\n            for (i = 0; i < img_objs.length; i++) {\n                if (!img_objs[i].complete) {\n                    imgs_loaded = false;\n                }\n            }\n            if (imgs_loaded && all_loaded_cb) {\n                all_loaded_cb();\n                all_loaded_cb = null;\n            }\n        }, 500);\n    }\n};\n\nMixpanelNotification.prototype._remove_notification_el = _.safewrap(function() {\n    window.clearInterval(this._video_progress_checker);\n    this.notification_el.style.visibility = 'hidden';\n    this.body_el.removeChild(this.notification_el);\n});\n\nMixpanelNotification.prototype._set_client_config = function() {\n    var get_browser_version = function(browser_ex) {\n        var match = navigator.userAgent.match(browser_ex);\n        return match && match[1];\n    };\n    this.browser_versions = {};\n    this.browser_versions['chrome']  = get_browser_version(/Chrome\\/(\\d+)/);\n    this.browser_versions['firefox'] = get_browser_version(/Firefox\\/(\\d+)/);\n    this.browser_versions['ie']      = get_browser_version(/MSIE (\\d+).+/);\n    if (!this.browser_versions['ie'] && !(window.ActiveXObject) && 'ActiveXObject' in window) {\n        this.browser_versions['ie'] = 11;\n    }\n\n    this.body_el = document.body || document.getElementsByTagName('body')[0];\n    if (this.body_el) {\n        this.doc_width = Math.max(\n            this.body_el.scrollWidth, document.documentElement.scrollWidth,\n            this.body_el.offsetWidth, document.documentElement.offsetWidth,\n            this.body_el.clientWidth, document.documentElement.clientWidth\n        );\n        this.doc_height = Math.max(\n            this.body_el.scrollHeight, document.documentElement.scrollHeight,\n            this.body_el.offsetHeight, document.documentElement.offsetHeight,\n            this.body_el.clientHeight, document.documentElement.clientHeight\n        );\n    }\n\n    // detect CSS compatibility\n    var ie_ver = this.browser_versions['ie'];\n    var sample_styles = document.createElement('div').style,\n        is_css_compatible = function(rule) {\n            if (rule in sample_styles) {\n                return true;\n            }\n            if (!ie_ver) {\n                rule = rule[0].toUpperCase() + rule.slice(1);\n                var props = ['O' + rule, 'Webkit' + rule, 'Moz' + rule];\n                for (var i = 0; i < props.length; i++) {\n                    if (props[i] in sample_styles) {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        };\n    this.use_transitions = this.body_el &&\n        is_css_compatible('transition') &&\n        is_css_compatible('transform');\n    this.flip_animate = (this.browser_versions['chrome'] >= 33 || this.browser_versions['firefox'] >= 15) &&\n        this.body_el &&\n        is_css_compatible('backfaceVisibility') &&\n        is_css_compatible('perspective') &&\n        is_css_compatible('transform');\n};\n\nMixpanelNotification.prototype._switch_to_video = _.safewrap(function() {\n    var self = this,\n        anims = [\n            {\n                el:    self._get_notification_display_el(),\n                attr:  'opacity',\n                start: 1.0,\n                goal:  0.0\n            },\n            {\n                el:    self._get_notification_display_el(),\n                attr:  'top',\n                start: MixpanelNotification.NOTIF_TOP,\n                goal:  -500\n            },\n            {\n                el:    self._get_el('video-noflip'),\n                attr:  'opacity',\n                start: 0.0,\n                goal:  1.0\n            },\n            {\n                el:    self._get_el('video-noflip'),\n                attr:  'top',\n                start: -self.video_height * 2,\n                goal:  0\n            }\n        ];\n\n    if (self.mini) {\n        var bg = self._get_el('bg'),\n            overlay = self._get_el('overlay');\n        bg.style.width = '100%';\n        bg.style.height = '100%';\n        overlay.style.width = '100%';\n\n        self._add_class(self._get_notification_display_el(), 'exiting');\n        self._add_class(bg, 'visible');\n\n        anims.push({\n            el:    self._get_el('bg'),\n            attr:  'opacity',\n            start: 0.0,\n            goal:  MixpanelNotification.BG_OPACITY\n        });\n    }\n\n    var video_el = self._get_el('video-holder');\n    video_el.innerHTML = self.video_iframe;\n\n    var video_ready = function() {\n        if (window['YT'] && window['YT']['loaded']) {\n            self._yt_video_ready();\n        }\n        self.showing_video = true;\n        self._get_notification_display_el().style.visibility = 'hidden';\n    };\n    if (self.flip_animate) {\n        self._add_class('flipper', 'flipped');\n        setTimeout(video_ready, MixpanelNotification.ANIM_TIME);\n    } else {\n        self._animate_els(anims, MixpanelNotification.ANIM_TIME, video_ready);\n    }\n});\n\nMixpanelNotification.prototype._track_event = function(event_name, properties, cb) {\n    if (this.campaign_id) {\n        properties = properties || {};\n        properties = _.extend(properties, {\n            'campaign_id':     this.campaign_id,\n            'message_id':      this.message_id,\n            'message_type':    'web_inapp',\n            'message_subtype': this.notif_type\n        });\n        this.mixpanel['track'](event_name, properties, cb);\n    } else if (cb) {\n        cb.call();\n    }\n};\n\nMixpanelNotification.prototype._yt_video_ready = _.safewrap(function() {\n    var self = this;\n    if (self.video_inited) {\n        return;\n    }\n    self.video_inited = true;\n\n    var progress_bar  = self._get_el('video-elapsed'),\n        progress_time = self._get_el('video-time'),\n        progress_el   = self._get_el('video-progress');\n\n    new window['YT']['Player'](MixpanelNotification.MARKUP_PREFIX + '-video-frame', {\n        'events': {\n            'onReady': function(event) {\n                var ytplayer = event['target'],\n                    video_duration = ytplayer['getDuration'](),\n                    pad = function(i) {\n                        return ('00' + i).slice(-2);\n                    },\n                    update_video_time = function(current_time) {\n                        var secs = Math.round(video_duration - current_time),\n                            mins = Math.floor(secs / 60),\n                            hours = Math.floor(mins / 60);\n                        secs -= mins * 60;\n                        mins -= hours * 60;\n                        progress_time.innerHTML = '-' + (hours ? hours + ':' : '') + pad(mins) + ':' + pad(secs);\n                    };\n                update_video_time(0);\n                self._video_progress_checker = window.setInterval(function() {\n                    var current_time = ytplayer['getCurrentTime']();\n                    progress_bar.style.width = (current_time / video_duration * 100) + '%';\n                    update_video_time(current_time);\n                }, 250);\n                _.register_event(progress_el, 'click', function(e) {\n                    var clickx = Math.max(0, e.pageX - progress_el.getBoundingClientRect().left);\n                    ytplayer['seekTo'](video_duration * clickx / progress_el.clientWidth, true);\n                });\n            }\n        }\n    });\n});\n\n/**\n * Mixpanel People Object\n * @constructor\n */\nvar MixpanelPeople = function() {};\n\n_.extend(MixpanelPeople.prototype, apiActions);\n\nMixpanelPeople.prototype._init = function(mixpanel_instance) {\n    this._mixpanel = mixpanel_instance;\n};\n\n/*\n* Set properties on a user record.\n*\n* ### Usage:\n*\n*     mixpanel.people.set('gender', 'm');\n*\n*     // or set multiple properties at once\n*     mixpanel.people.set({\n*         'Company': 'Acme',\n*         'Plan': 'Premium',\n*         'Upgrade date': new Date()\n*     });\n*     // properties can be strings, integers, dates, or lists\n*\n* @param {Object|String} prop If a string, this is the name of the property. If an object, this is an associative array of names and values.\n* @param {*} [to] A value to set on the given property name\n* @param {Function} [callback] If provided, the callback will be called after tracking the event.\n*/\nMixpanelPeople.prototype.set = addOptOutCheckMixpanelPeople(function(prop, to, callback) {\n    var data = this.set_action(prop, to);\n    if (_.isObject(prop)) {\n        callback = to;\n    }\n    // make sure that the referrer info has been updated and saved\n    if (this._get_config('save_referrer')) {\n        this._mixpanel['persistence'].update_referrer_info(document.referrer);\n    }\n\n    // update $set object with default people properties\n    data[SET_ACTION] = _.extend(\n        {},\n        _.info.people_properties(),\n        this._mixpanel['persistence'].get_referrer_info(),\n        data[SET_ACTION]\n    );\n    return this._send_request(data, callback);\n});\n\n/*\n* Set properties on a user record, only if they do not yet exist.\n* This will not overwrite previous people property values, unlike\n* people.set().\n*\n* ### Usage:\n*\n*     mixpanel.people.set_once('First Login Date', new Date());\n*\n*     // or set multiple properties at once\n*     mixpanel.people.set_once({\n*         'First Login Date': new Date(),\n*         'Starting Plan': 'Premium'\n*     });\n*\n*     // properties can be strings, integers or dates\n*\n* @param {Object|String} prop If a string, this is the name of the property. If an object, this is an associative array of names and values.\n* @param {*} [to] A value to set on the given property name\n* @param {Function} [callback] If provided, the callback will be called after tracking the event.\n*/\nMixpanelPeople.prototype.set_once = addOptOutCheckMixpanelPeople(function(prop, to, callback) {\n    var data = this.set_once_action(prop, to);\n    if (_.isObject(prop)) {\n        callback = to;\n    }\n    return this._send_request(data, callback);\n});\n\n/*\n* Unset properties on a user record (permanently removes the properties and their values from a profile).\n*\n* ### Usage:\n*\n*     mixpanel.people.unset('gender');\n*\n*     // or unset multiple properties at once\n*     mixpanel.people.unset(['gender', 'Company']);\n*\n* @param {Array|String} prop If a string, this is the name of the property. If an array, this is a list of property names.\n* @param {Function} [callback] If provided, the callback will be called after tracking the event.\n*/\nMixpanelPeople.prototype.unset = addOptOutCheckMixpanelPeople(function(prop, callback) {\n    var data = this.unset_action(prop);\n    return this._send_request(data, callback);\n});\n\n/*\n* Increment/decrement numeric people analytics properties.\n*\n* ### Usage:\n*\n*     mixpanel.people.increment('page_views', 1);\n*\n*     // or, for convenience, if you're just incrementing a counter by\n*     // 1, you can simply do\n*     mixpanel.people.increment('page_views');\n*\n*     // to decrement a counter, pass a negative number\n*     mixpanel.people.increment('credits_left', -1);\n*\n*     // like mixpanel.people.set(), you can increment multiple\n*     // properties at once:\n*     mixpanel.people.increment({\n*         counter1: 1,\n*         counter2: 6\n*     });\n*\n* @param {Object|String} prop If a string, this is the name of the property. If an object, this is an associative array of names and numeric values.\n* @param {Number} [by] An amount to increment the given property\n* @param {Function} [callback] If provided, the callback will be called after tracking the event.\n*/\nMixpanelPeople.prototype.increment = addOptOutCheckMixpanelPeople(function(prop, by, callback) {\n    var data = {};\n    var $add = {};\n    if (_.isObject(prop)) {\n        _.each(prop, function(v, k) {\n            if (!this._is_reserved_property(k)) {\n                if (isNaN(parseFloat(v))) {\n                    console$1.error('Invalid increment value passed to mixpanel.people.increment - must be a number');\n                    return;\n                } else {\n                    $add[k] = v;\n                }\n            }\n        }, this);\n        callback = by;\n    } else {\n        // convenience: mixpanel.people.increment('property'); will\n        // increment 'property' by 1\n        if (_.isUndefined(by)) {\n            by = 1;\n        }\n        $add[prop] = by;\n    }\n    data[ADD_ACTION] = $add;\n\n    return this._send_request(data, callback);\n});\n\n/*\n* Append a value to a list-valued people analytics property.\n*\n* ### Usage:\n*\n*     // append a value to a list, creating it if needed\n*     mixpanel.people.append('pages_visited', 'homepage');\n*\n*     // like mixpanel.people.set(), you can append multiple\n*     // properties at once:\n*     mixpanel.people.append({\n*         list1: 'bob',\n*         list2: 123\n*     });\n*\n* @param {Object|String} list_name If a string, this is the name of the property. If an object, this is an associative array of names and values.\n* @param {*} [value] value An item to append to the list\n* @param {Function} [callback] If provided, the callback will be called after tracking the event.\n*/\nMixpanelPeople.prototype.append = addOptOutCheckMixpanelPeople(function(list_name, value, callback) {\n    if (_.isObject(list_name)) {\n        callback = value;\n    }\n    var data = this.append_action(list_name, value);\n    return this._send_request(data, callback);\n});\n\n/*\n* Remove a value from a list-valued people analytics property.\n*\n* ### Usage:\n*\n*     mixpanel.people.remove('School', 'UCB');\n*\n* @param {Object|String} list_name If a string, this is the name of the property. If an object, this is an associative array of names and values.\n* @param {*} [value] value Item to remove from the list\n* @param {Function} [callback] If provided, the callback will be called after tracking the event.\n*/\nMixpanelPeople.prototype.remove = addOptOutCheckMixpanelPeople(function(list_name, value, callback) {\n    if (_.isObject(list_name)) {\n        callback = value;\n    }\n    var data = this.remove_action(list_name, value);\n    return this._send_request(data, callback);\n});\n\n/*\n* Merge a given list with a list-valued people analytics property,\n* excluding duplicate values.\n*\n* ### Usage:\n*\n*     // merge a value to a list, creating it if needed\n*     mixpanel.people.union('pages_visited', 'homepage');\n*\n*     // like mixpanel.people.set(), you can append multiple\n*     // properties at once:\n*     mixpanel.people.union({\n*         list1: 'bob',\n*         list2: 123\n*     });\n*\n*     // like mixpanel.people.append(), you can append multiple\n*     // values to the same list:\n*     mixpanel.people.union({\n*         list1: ['bob', 'billy']\n*     });\n*\n* @param {Object|String} list_name If a string, this is the name of the property. If an object, this is an associative array of names and values.\n* @param {*} [value] Value / values to merge with the given property\n* @param {Function} [callback] If provided, the callback will be called after tracking the event.\n*/\nMixpanelPeople.prototype.union = addOptOutCheckMixpanelPeople(function(list_name, values, callback) {\n    if (_.isObject(list_name)) {\n        callback = values;\n    }\n    var data = this.union_action(list_name, values);\n    return this._send_request(data, callback);\n});\n\n/*\n* Record that you have charged the current user a certain amount\n* of money. Charges recorded with track_charge() will appear in the\n* Mixpanel revenue report.\n*\n* ### Usage:\n*\n*     // charge a user $50\n*     mixpanel.people.track_charge(50);\n*\n*     // charge a user $30.50 on the 2nd of january\n*     mixpanel.people.track_charge(30.50, {\n*         '$time': new Date('jan 1 2012')\n*     });\n*\n* @param {Number} amount The amount of money charged to the current user\n* @param {Object} [properties] An associative array of properties associated with the charge\n* @param {Function} [callback] If provided, the callback will be called when the server responds\n*/\nMixpanelPeople.prototype.track_charge = addOptOutCheckMixpanelPeople(function(amount, properties, callback) {\n    if (!_.isNumber(amount)) {\n        amount = parseFloat(amount);\n        if (isNaN(amount)) {\n            console$1.error('Invalid value passed to mixpanel.people.track_charge - must be a number');\n            return;\n        }\n    }\n\n    return this.append('$transactions', _.extend({\n        '$amount': amount\n    }, properties), callback);\n});\n\n/*\n* Permanently clear all revenue report transactions from the\n* current user's people analytics profile.\n*\n* ### Usage:\n*\n*     mixpanel.people.clear_charges();\n*\n* @param {Function} [callback] If provided, the callback will be called after tracking the event.\n*/\nMixpanelPeople.prototype.clear_charges = function(callback) {\n    return this.set('$transactions', [], callback);\n};\n\n/*\n* Permanently deletes the current people analytics profile from\n* Mixpanel (using the current distinct_id).\n*\n* ### Usage:\n*\n*     // remove the all data you have stored about the current user\n*     mixpanel.people.delete_user();\n*\n*/\nMixpanelPeople.prototype.delete_user = function() {\n    if (!this._identify_called()) {\n        console$1.error('mixpanel.people.delete_user() requires you to call identify() first');\n        return;\n    }\n    var data = {'$delete': this._mixpanel.get_distinct_id()};\n    return this._send_request(data);\n};\n\nMixpanelPeople.prototype.toString = function() {\n    return this._mixpanel.toString() + '.people';\n};\n\nMixpanelPeople.prototype._send_request = function(data, callback) {\n    data['$token'] = this._get_config('token');\n    data['$distinct_id'] = this._mixpanel.get_distinct_id();\n    var device_id = this._mixpanel.get_property('$device_id');\n    var user_id = this._mixpanel.get_property('$user_id');\n    var had_persisted_distinct_id = this._mixpanel.get_property('$had_persisted_distinct_id');\n    if (device_id) {\n        data['$device_id'] = device_id;\n    }\n    if (user_id) {\n        data['$user_id'] = user_id;\n    }\n    if (had_persisted_distinct_id) {\n        data['$had_persisted_distinct_id'] = had_persisted_distinct_id;\n    }\n\n    var date_encoded_data = _.encodeDates(data);\n    var truncated_data = _.truncate(date_encoded_data, 255);\n\n    if (!this._identify_called()) {\n        this._enqueue(data);\n        if (!_.isUndefined(callback)) {\n            if (this._get_config('verbose')) {\n                callback({status: -1, error: null});\n            } else {\n                callback(-1);\n            }\n        }\n        return truncated_data;\n    }\n\n    return this._mixpanel._track_or_batch({\n        truncated_data: truncated_data,\n        endpoint: this._get_config('api_host') + '/engage/',\n        batcher: this._mixpanel.request_batchers.people\n    }, callback);\n};\n\nMixpanelPeople.prototype._get_config = function(conf_var) {\n    return this._mixpanel.get_config(conf_var);\n};\n\nMixpanelPeople.prototype._identify_called = function() {\n    return this._mixpanel._flags.identify_called === true;\n};\n\n// Queue up engage operations if identify hasn't been called yet.\nMixpanelPeople.prototype._enqueue = function(data) {\n    if (SET_ACTION in data) {\n        this._mixpanel['persistence']._add_to_people_queue(SET_ACTION, data);\n    } else if (SET_ONCE_ACTION in data) {\n        this._mixpanel['persistence']._add_to_people_queue(SET_ONCE_ACTION, data);\n    } else if (UNSET_ACTION in data) {\n        this._mixpanel['persistence']._add_to_people_queue(UNSET_ACTION, data);\n    } else if (ADD_ACTION in data) {\n        this._mixpanel['persistence']._add_to_people_queue(ADD_ACTION, data);\n    } else if (APPEND_ACTION in data) {\n        this._mixpanel['persistence']._add_to_people_queue(APPEND_ACTION, data);\n    } else if (REMOVE_ACTION in data) {\n        this._mixpanel['persistence']._add_to_people_queue(REMOVE_ACTION, data);\n    } else if (UNION_ACTION in data) {\n        this._mixpanel['persistence']._add_to_people_queue(UNION_ACTION, data);\n    } else {\n        console$1.error('Invalid call to _enqueue():', data);\n    }\n};\n\nMixpanelPeople.prototype._flush_one_queue = function(action, action_method, callback, queue_to_params_fn) {\n    var _this = this;\n    var queued_data = _.extend({}, this._mixpanel['persistence']._get_queue(action));\n    var action_params = queued_data;\n\n    if (!_.isUndefined(queued_data) && _.isObject(queued_data) && !_.isEmptyObject(queued_data)) {\n        _this._mixpanel['persistence']._pop_from_people_queue(action, queued_data);\n        if (queue_to_params_fn) {\n            action_params = queue_to_params_fn(queued_data);\n        }\n        action_method.call(_this, action_params, function(response, data) {\n            // on bad response, we want to add it back to the queue\n            if (response === 0) {\n                _this._mixpanel['persistence']._add_to_people_queue(action, queued_data);\n            }\n            if (!_.isUndefined(callback)) {\n                callback(response, data);\n            }\n        });\n    }\n};\n\n// Flush queued engage operations - order does not matter,\n// and there are network level race conditions anyway\nMixpanelPeople.prototype._flush = function(\n    _set_callback, _add_callback, _append_callback, _set_once_callback, _union_callback, _unset_callback, _remove_callback\n) {\n    var _this = this;\n    var $append_queue = this._mixpanel['persistence']._get_queue(APPEND_ACTION);\n    var $remove_queue = this._mixpanel['persistence']._get_queue(REMOVE_ACTION);\n\n    this._flush_one_queue(SET_ACTION, this.set, _set_callback);\n    this._flush_one_queue(SET_ONCE_ACTION, this.set_once, _set_once_callback);\n    this._flush_one_queue(UNSET_ACTION, this.unset, _unset_callback, function(queue) { return _.keys(queue); });\n    this._flush_one_queue(ADD_ACTION, this.increment, _add_callback);\n    this._flush_one_queue(UNION_ACTION, this.union, _union_callback);\n\n    // we have to fire off each $append individually since there is\n    // no concat method server side\n    if (!_.isUndefined($append_queue) && _.isArray($append_queue) && $append_queue.length) {\n        var $append_item;\n        var append_callback = function(response, data) {\n            if (response === 0) {\n                _this._mixpanel['persistence']._add_to_people_queue(APPEND_ACTION, $append_item);\n            }\n            if (!_.isUndefined(_append_callback)) {\n                _append_callback(response, data);\n            }\n        };\n        for (var i = $append_queue.length - 1; i >= 0; i--) {\n            $append_item = $append_queue.pop();\n            if (!_.isEmptyObject($append_item)) {\n                _this.append($append_item, append_callback);\n            }\n        }\n        // Save the shortened append queue\n        _this._mixpanel['persistence'].save();\n    }\n\n    // same for $remove\n    if (!_.isUndefined($remove_queue) && _.isArray($remove_queue) && $remove_queue.length) {\n        var $remove_item;\n        var remove_callback = function(response, data) {\n            if (response === 0) {\n                _this._mixpanel['persistence']._add_to_people_queue(REMOVE_ACTION, $remove_item);\n            }\n            if (!_.isUndefined(_remove_callback)) {\n                _remove_callback(response, data);\n            }\n        };\n        for (var j = $remove_queue.length - 1; j >= 0; j--) {\n            $remove_item = $remove_queue.pop();\n            if (!_.isEmptyObject($remove_item)) {\n                _this.remove($remove_item, remove_callback);\n            }\n        }\n        _this._mixpanel['persistence'].save();\n    }\n};\n\nMixpanelPeople.prototype._is_reserved_property = function(prop) {\n    return prop === '$distinct_id' || prop === '$token' || prop === '$device_id' || prop === '$user_id' || prop === '$had_persisted_distinct_id';\n};\n\n// MixpanelPeople Exports\nMixpanelPeople.prototype['set']           = MixpanelPeople.prototype.set;\nMixpanelPeople.prototype['set_once']      = MixpanelPeople.prototype.set_once;\nMixpanelPeople.prototype['unset']         = MixpanelPeople.prototype.unset;\nMixpanelPeople.prototype['increment']     = MixpanelPeople.prototype.increment;\nMixpanelPeople.prototype['append']        = MixpanelPeople.prototype.append;\nMixpanelPeople.prototype['remove']        = MixpanelPeople.prototype.remove;\nMixpanelPeople.prototype['union']         = MixpanelPeople.prototype.union;\nMixpanelPeople.prototype['track_charge']  = MixpanelPeople.prototype.track_charge;\nMixpanelPeople.prototype['clear_charges'] = MixpanelPeople.prototype.clear_charges;\nMixpanelPeople.prototype['delete_user']   = MixpanelPeople.prototype.delete_user;\nMixpanelPeople.prototype['toString']      = MixpanelPeople.prototype.toString;\n\n/*\n * Mixpanel JS Library\n *\n * Copyright 2012, Mixpanel, Inc. All Rights Reserved\n * http://mixpanel.com/\n *\n * Includes portions of Underscore.js\n * http://documentcloud.github.com/underscore/\n * (c) 2011 Jeremy Ashkenas, DocumentCloud Inc.\n * Released under the MIT License.\n */\n\n// ==ClosureCompiler==\n// @compilation_level ADVANCED_OPTIMIZATIONS\n// @output_file_name mixpanel-2.8.min.js\n// ==/ClosureCompiler==\n\n/*\nSIMPLE STYLE GUIDE:\n\nthis.x === public function\nthis._x === internal - only use within this file\nthis.__x === private - only use within the class\n\nGlobals should be all caps\n*/\n\nvar init_type;       // MODULE or SNIPPET loader\nvar mixpanel_master; // main mixpanel instance / object\nvar INIT_MODULE  = 0;\nvar INIT_SNIPPET = 1;\n\n/** @const */ var PRIMARY_INSTANCE_NAME = 'mixpanel';\n\n\n/*\n * Dynamic... constants? Is that an oxymoron?\n */\n// http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/\n// https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#withCredentials\nvar USE_XHR = (window$1.XMLHttpRequest && 'withCredentials' in new XMLHttpRequest());\n\n// IE<10 does not support cross-origin XHR's but script tags\n// with defer won't block window.onload; ENQUEUE_REQUESTS\n// should only be true for Opera<12\nvar ENQUEUE_REQUESTS = !USE_XHR && (userAgent.indexOf('MSIE') === -1) && (userAgent.indexOf('Mozilla') === -1);\n\n// save reference to navigator.sendBeacon so it can be minified\nvar sendBeacon = null;\nif (navigator$1['sendBeacon']) {\n    sendBeacon = function() {\n        // late reference to navigator.sendBeacon to allow patching/spying\n        return navigator$1['sendBeacon'].apply(navigator$1, arguments);\n    };\n}\n\n/*\n * Module-level globals\n */\nvar DEFAULT_CONFIG = {\n    'api_host':                          'https://api-js.mixpanel.com',\n    'api_method':                        'POST',\n    'api_transport':                     'XHR',\n    'app_host':                          'https://mixpanel.com',\n    'autotrack':                         true,\n    'cdn':                               'https://cdn.mxpnl.com',\n    'cross_site_cookie':                 false,\n    'cross_subdomain_cookie':            true,\n    'persistence':                       'cookie',\n    'persistence_name':                  '',\n    'cookie_domain':                     '',\n    'cookie_name':                       '',\n    'loaded':                            function() {},\n    'store_google':                      true,\n    'save_referrer':                     true,\n    'test':                              false,\n    'verbose':                           false,\n    'img':                               false,\n    'debug':                             false,\n    'track_links_timeout':               300,\n    'cookie_expiration':                 365,\n    'upgrade':                           false,\n    'disable_persistence':               false,\n    'disable_cookie':                    false,\n    'secure_cookie':                     false,\n    'ip':                                true,\n    'opt_out_tracking_by_default':       false,\n    'opt_out_persistence_by_default':    false,\n    'opt_out_tracking_persistence_type': 'localStorage',\n    'opt_out_tracking_cookie_prefix':    null,\n    'property_blacklist':                [],\n    'xhr_headers':                       {}, // { header: value, header2: value }\n    'inapp_protocol':                    '//',\n    'inapp_link_new_window':             false,\n    'ignore_dnt':                        false,\n    'batch_requests':                    false, // for now\n    'batch_size':                        50,\n    'batch_flush_interval_ms':           5000,\n    'batch_request_timeout_ms':          90000\n};\n\nvar DOM_LOADED = false;\n\n/**\n * Mixpanel Library Object\n * @constructor\n */\nvar MixpanelLib = function() {};\n\n\n/**\n * create_mplib(token:string, config:object, name:string)\n *\n * This function is used by the init method of MixpanelLib objects\n * as well as the main initializer at the end of the JSLib (that\n * initializes document.mixpanel as well as any additional instances\n * declared before this file has loaded).\n */\nvar create_mplib = function(token, config, name) {\n    var instance,\n        target = (name === PRIMARY_INSTANCE_NAME) ? mixpanel_master : mixpanel_master[name];\n\n    if (target && init_type === INIT_MODULE) {\n        instance = target;\n    } else {\n        if (target && !_.isArray(target)) {\n            console$1.error('You have already initialized ' + name);\n            return;\n        }\n        instance = new MixpanelLib();\n    }\n\n    instance._cached_groups = {}; // cache groups in a pool\n    instance._user_decide_check_complete = false;\n    instance._events_tracked_before_user_decide_check_complete = [];\n\n    instance._init(token, config, name);\n\n    instance['people'] = new MixpanelPeople();\n    instance['people']._init(instance);\n\n    // if any instance on the page has debug = true, we set the\n    // global debug to be true\n    Config.DEBUG = Config.DEBUG || instance.get_config('debug');\n\n    instance['__autotrack_enabled'] = instance.get_config('autotrack');\n    if (instance.get_config('autotrack')) {\n        var num_buckets = 100;\n        var num_enabled_buckets = 100;\n        if (!autotrack.enabledForProject(instance.get_config('token'), num_buckets, num_enabled_buckets)) {\n            instance['__autotrack_enabled'] = false;\n            console$1.log('Not in active bucket: disabling Automatic Event Collection.');\n        } else if (!autotrack.isBrowserSupported()) {\n            instance['__autotrack_enabled'] = false;\n            console$1.log('Disabling Automatic Event Collection because this browser is not supported');\n        } else {\n            autotrack.init(instance);\n        }\n    }\n\n    // if target is not defined, we called init after the lib already\n    // loaded, so there won't be an array of things to execute\n    if (!_.isUndefined(target) && _.isArray(target)) {\n        // Crunch through the people queue first - we queue this data up &\n        // flush on identify, so it's better to do all these operations first\n        instance._execute_array.call(instance['people'], target['people']);\n        instance._execute_array(target);\n    }\n\n    return instance;\n};\n\nvar encode_data_for_request = function(data) {\n    var json_data = _.JSONEncode(data);\n    var encoded_data = _.base64Encode(json_data);\n    return {'data': encoded_data};\n};\n\n// Initialization methods\n\n/**\n * This function initializes a new instance of the Mixpanel tracking object.\n * All new instances are added to the main mixpanel object as sub properties (such as\n * mixpanel.library_name) and also returned by this function. To define a\n * second instance on the page, you would call:\n *\n *     mixpanel.init('new token', { your: 'config' }, 'library_name');\n *\n * and use it like so:\n *\n *     mixpanel.library_name.track(...);\n *\n * @param {String} token   Your Mixpanel API token\n * @param {Object} [config]  A dictionary of config options to override. <a href=\"https://github.com/mixpanel/mixpanel-js/blob/8b2e1f7b/src/mixpanel-core.js#L87-L110\">See a list of default config options</a>.\n * @param {String} [name]    The name for the new mixpanel instance that you want created\n */\nMixpanelLib.prototype.init = function (token, config, name) {\n    if (_.isUndefined(name)) {\n        console$1.error('You must name your new library: init(token, config, name)');\n        return;\n    }\n    if (name === PRIMARY_INSTANCE_NAME) {\n        console$1.error('You must initialize the main mixpanel object right after you include the Mixpanel js snippet');\n        return;\n    }\n\n    var instance = create_mplib(token, config, name);\n    mixpanel_master[name] = instance;\n    instance._loaded();\n\n    return instance;\n};\n\n// mixpanel._init(token:string, config:object, name:string)\n//\n// This function sets up the current instance of the mixpanel\n// library.  The difference between this method and the init(...)\n// method is this one initializes the actual instance, whereas the\n// init(...) method sets up a new library and calls _init on it.\n//\nMixpanelLib.prototype._init = function(token, config, name) {\n    this['__loaded'] = true;\n    this['config'] = {};\n    this['_triggered_notifs'] = [];\n\n    // rollout: enable batch_requests by default for 10% of projects\n    // (only if they have not specified a value in their init config)\n    var variable_features = {};\n    if (!('batch_requests' in (config || {})) && determine_eligibility(token, 'batch', 10)) {\n        variable_features['batch_requests'] = true;\n    }\n\n    this.set_config(_.extend({}, DEFAULT_CONFIG, variable_features, config, {\n        'name': name,\n        'token': token,\n        'callback_fn': ((name === PRIMARY_INSTANCE_NAME) ? name : PRIMARY_INSTANCE_NAME + '.' + name) + '._jsc'\n    }));\n\n    this['_jsc'] = function() {};\n\n    this.__dom_loaded_queue = [];\n    this.__request_queue = [];\n    this.__disabled_events = [];\n    this._flags = {\n        'disable_all_events': false,\n        'identify_called': false\n    };\n\n    // set up request queueing/batching\n    this.request_batchers = {};\n    this._batch_requests = this.get_config('batch_requests');\n    if (this._batch_requests) {\n        if (!_.localStorage.is_supported(true) || !USE_XHR) {\n            this._batch_requests = false;\n            console$1.log('Turning off Mixpanel request-queueing; needs XHR and localStorage support');\n        } else {\n            this.start_batch_requests();\n            if (sendBeacon && window$1.addEventListener) {\n                window$1.addEventListener('unload', _.bind(function() {\n                    // Before page closes, attempt to flush any events queued up via navigator.sendBeacon.\n                    // Since sendBeacon doesn't report success/failure, events will not be removed from\n                    // the persistent store; if the site is loaded again, the events will be flushed again\n                    // on startup and deduplicated on the Mixpanel server side.\n                    this.request_batchers.events.flush({sendBeacon: true});\n                }, this));\n            }\n        }\n    }\n\n    this['persistence'] = this['cookie'] = new MixpanelPersistence(this['config']);\n    this._gdpr_init();\n\n    var uuid = _.UUID();\n    if (!this.get_distinct_id()) {\n        // There is no need to set the distinct id\n        // or the device id if something was already stored\n        // in the persitence\n        this.register_once({\n            'distinct_id': uuid,\n            '$device_id': uuid\n        }, '');\n    }\n};\n\n// Private methods\n\nMixpanelLib.prototype._loaded = function() {\n    this.get_config('loaded')(this);\n    this._set_default_superprops();\n};\n\n// update persistence with info on referrer, UTM params, etc\nMixpanelLib.prototype._set_default_superprops = function() {\n    this['persistence'].update_search_keyword(document$1.referrer);\n    if (this.get_config('store_google')) {\n        this['persistence'].update_campaign_params();\n    }\n    if (this.get_config('save_referrer')) {\n        this['persistence'].update_referrer_info(document$1.referrer);\n    }\n};\n\nMixpanelLib.prototype._dom_loaded = function() {\n    _.each(this.__dom_loaded_queue, function(item) {\n        this._track_dom.apply(this, item);\n    }, this);\n\n    if (!this.has_opted_out_tracking()) {\n        _.each(this.__request_queue, function(item) {\n            this._send_request.apply(this, item);\n        }, this);\n    }\n\n    delete this.__dom_loaded_queue;\n    delete this.__request_queue;\n};\n\nMixpanelLib.prototype._track_dom = function(DomClass, args) {\n    if (this.get_config('img')) {\n        console$1.error('You can\\'t use DOM tracking functions with img = true.');\n        return false;\n    }\n\n    if (!DOM_LOADED) {\n        this.__dom_loaded_queue.push([DomClass, args]);\n        return false;\n    }\n\n    var dt = new DomClass().init(this);\n    return dt.track.apply(dt, args);\n};\n\n/**\n * _prepare_callback() should be called by callers of _send_request for use\n * as the callback argument.\n *\n * If there is no callback, this returns null.\n * If we are going to make XHR/XDR requests, this returns a function.\n * If we are going to use script tags, this returns a string to use as the\n * callback GET param.\n */\nMixpanelLib.prototype._prepare_callback = function(callback, data) {\n    if (_.isUndefined(callback)) {\n        return null;\n    }\n\n    if (USE_XHR) {\n        var callback_function = function(response) {\n            callback(response, data);\n        };\n        return callback_function;\n    } else {\n        // if the user gives us a callback, we store as a random\n        // property on this instances jsc function and update our\n        // callback string to reflect that.\n        var jsc = this['_jsc'];\n        var randomized_cb = '' + Math.floor(Math.random() * 100000000);\n        var callback_string = this.get_config('callback_fn') + '[' + randomized_cb + ']';\n        jsc[randomized_cb] = function(response) {\n            delete jsc[randomized_cb];\n            callback(response, data);\n        };\n        return callback_string;\n    }\n};\n\nMixpanelLib.prototype._send_request = function(url, data, options, callback) {\n    var succeeded = true;\n\n    if (ENQUEUE_REQUESTS) {\n        this.__request_queue.push(arguments);\n        return succeeded;\n    }\n\n    var DEFAULT_OPTIONS = {\n        method: this.get_config('api_method'),\n        transport: this.get_config('api_transport'),\n        verbose: this.get_config('verbose')\n    };\n    var body_data = null;\n\n    if (!callback && (_.isFunction(options) || typeof options === 'string')) {\n        callback = options;\n        options = null;\n    }\n    options = _.extend(DEFAULT_OPTIONS, options || {});\n    if (!USE_XHR) {\n        options.method = 'GET';\n    }\n    var use_post = options.method === 'POST';\n    var use_sendBeacon = sendBeacon && use_post && options.transport.toLowerCase() === 'sendbeacon';\n\n    // needed to correctly format responses\n    var verbose_mode = options.verbose;\n    if (data['verbose']) { verbose_mode = true; }\n\n    if (this.get_config('test')) { data['test'] = 1; }\n    if (verbose_mode) { data['verbose'] = 1; }\n    if (this.get_config('img')) { data['img'] = 1; }\n    if (!USE_XHR) {\n        if (callback) {\n            data['callback'] = callback;\n        } else if (verbose_mode || this.get_config('test')) {\n            // Verbose output (from verbose mode, or an error in test mode) is a json blob,\n            // which by itself is not valid javascript. Without a callback, this verbose output will\n            // cause an error when returned via jsonp, so we force a no-op callback param.\n            // See the ECMA script spec: http://www.ecma-international.org/ecma-262/5.1/#sec-12.4\n            data['callback'] = '(function(){})';\n        }\n    }\n\n    data['ip'] = this.get_config('ip')?1:0;\n    data['_'] = new Date().getTime().toString();\n\n    if (use_post) {\n        body_data = 'data=' + data['data'];\n        delete data['data'];\n    }\n\n    url += '?' + _.HTTPBuildQuery(data);\n\n    if ('img' in data) {\n        var img = document$1.createElement('img');\n        img.src = url;\n        document$1.body.appendChild(img);\n    } else if (use_sendBeacon) {\n        try {\n            succeeded = sendBeacon(url, body_data);\n        } catch (e) {\n            console$1.error(e);\n            succeeded = false;\n        }\n    } else if (USE_XHR) {\n        try {\n            var req = new XMLHttpRequest();\n            req.open(options.method, url, true);\n\n            var headers = this.get_config('xhr_headers');\n            if (use_post) {\n                headers['Content-Type'] = 'application/x-www-form-urlencoded';\n            }\n            _.each(headers, function(headerValue, headerName) {\n                req.setRequestHeader(headerName, headerValue);\n            });\n\n            if (options.timeout_ms && typeof req.timeout !== 'undefined') {\n                req.timeout = options.timeout_ms;\n                var start_time = new Date().getTime();\n            }\n\n            // send the mp_optout cookie\n            // withCredentials cannot be modified until after calling .open on Android and Mobile Safari\n            req.withCredentials = true;\n            req.onreadystatechange = function () {\n                if (req.readyState === 4) { // XMLHttpRequest.DONE == 4, except in safari 4\n                    if (req.status === 200) {\n                        if (callback) {\n                            if (verbose_mode) {\n                                var response;\n                                try {\n                                    response = _.JSONDecode(req.responseText);\n                                } catch (e) {\n                                    console$1.error(e);\n                                    if (options.ignore_json_errors) {\n                                        response = req.responseText;\n                                    } else {\n                                        return;\n                                    }\n                                }\n                                callback(response);\n                            } else {\n                                callback(Number(req.responseText));\n                            }\n                        }\n                    } else {\n                        var error;\n                        if (\n                            req.timeout &&\n                            !req.status &&\n                            new Date().getTime() - start_time >= req.timeout\n                        ) {\n                            error = 'timeout';\n                        } else {\n                            error = 'Bad HTTP status: ' + req.status + ' ' + req.statusText;\n                        }\n                        console$1.error(error);\n                        if (callback) {\n                            if (verbose_mode) {\n                                callback({status: 0, error: error, xhr_req: req});\n                            } else {\n                                callback(0);\n                            }\n                        }\n                    }\n                }\n            };\n            req.send(body_data);\n        } catch (e) {\n            console$1.error(e);\n            succeeded = false;\n        }\n    } else {\n        var script = document$1.createElement('script');\n        script.type = 'text/javascript';\n        script.async = true;\n        script.defer = true;\n        script.src = url;\n        var s = document$1.getElementsByTagName('script')[0];\n        s.parentNode.insertBefore(script, s);\n    }\n\n    return succeeded;\n};\n\n/**\n * _execute_array() deals with processing any mixpanel function\n * calls that were called before the Mixpanel library were loaded\n * (and are thus stored in an array so they can be called later)\n *\n * Note: we fire off all the mixpanel function calls && user defined\n * functions BEFORE we fire off mixpanel tracking calls. This is so\n * identify/register/set_config calls can properly modify early\n * tracking calls.\n *\n * @param {Array} array\n */\nMixpanelLib.prototype._execute_array = function(array) {\n    var fn_name, alias_calls = [], other_calls = [], tracking_calls = [];\n    _.each(array, function(item) {\n        if (item) {\n            fn_name = item[0];\n            if (_.isArray(fn_name)) {\n                tracking_calls.push(item); // chained call e.g. mixpanel.get_group().set()\n            } else if (typeof(item) === 'function') {\n                item.call(this);\n            } else if (_.isArray(item) && fn_name === 'alias') {\n                alias_calls.push(item);\n            } else if (_.isArray(item) && fn_name.indexOf('track') !== -1 && typeof(this[fn_name]) === 'function') {\n                tracking_calls.push(item);\n            } else {\n                other_calls.push(item);\n            }\n        }\n    }, this);\n\n    var execute = function(calls, context) {\n        _.each(calls, function(item) {\n            if (_.isArray(item[0])) {\n                // chained call\n                var caller = context;\n                _.each(item, function(call) {\n                    caller = caller[call[0]].apply(caller, call.slice(1));\n                });\n            } else {\n                this[item[0]].apply(this, item.slice(1));\n            }\n        }, context);\n    };\n\n    execute(alias_calls, this);\n    execute(other_calls, this);\n    execute(tracking_calls, this);\n};\n\n// request queueing utils\n\nMixpanelLib.prototype.start_batch_requests = function() {\n    var token = this.get_config('token');\n    if (!this.request_batchers.events) { // no batchers initialized yet\n        var batcher_config = {\n            libConfig: this['config'],\n            sendRequestFunc: _.bind(function(endpoint, data, options, cb) {\n                this._send_request(\n                    this.get_config('api_host') + endpoint,\n                    encode_data_for_request(data),\n                    options,\n                    this._prepare_callback(cb, data)\n                );\n            }, this)\n        };\n        this.request_batchers = {\n            events: new RequestBatcher('__mpq_' + token + '_ev', '/track/', batcher_config),\n            people: new RequestBatcher('__mpq_' + token + '_pp', '/engage/', batcher_config),\n            groups: new RequestBatcher('__mpq_' + token + '_gr', '/groups/', batcher_config)\n        };\n    }\n    _.each(this.request_batchers, function(batcher) {\n        batcher.start();\n    });\n};\n\nMixpanelLib.prototype.stop_batch_requests = function() {\n    this._batch_requests = false;\n    _.each(this.request_batchers, function(batcher) {\n        batcher.stop();\n        batcher.clear();\n    });\n};\n\n/**\n * push() keeps the standard async-array-push\n * behavior around after the lib is loaded.\n * This is only useful for external integrations that\n * do not wish to rely on our convenience methods\n * (created in the snippet).\n *\n * ### Usage:\n *     mixpanel.push(['register', { a: 'b' }]);\n *\n * @param {Array} item A [function_name, args...] array to be executed\n */\nMixpanelLib.prototype.push = function(item) {\n    this._execute_array([item]);\n};\n\n/**\n * Disable events on the Mixpanel object. If passed no arguments,\n * this function disables tracking of any event. If passed an\n * array of event names, those events will be disabled, but other\n * events will continue to be tracked.\n *\n * Note: this function does not stop other mixpanel functions from\n * firing, such as register() or people.set().\n *\n * @param {Array} [events] An array of event names to disable\n */\nMixpanelLib.prototype.disable = function(events) {\n    if (typeof(events) === 'undefined') {\n        this._flags.disable_all_events = true;\n    } else {\n        this.__disabled_events = this.__disabled_events.concat(events);\n    }\n};\n\n// internal method for handling track vs batch-enqueue logic\nMixpanelLib.prototype._track_or_batch = function(options, callback) {\n    var truncated_data = options.truncated_data;\n    var endpoint = options.endpoint;\n    var batcher = options.batcher;\n    var should_send_immediately = options.should_send_immediately;\n    var send_request_options = options.send_request_options || {};\n    callback = callback || function() {};\n\n    var request_enqueued_or_initiated = true;\n    var send_request_immediately = _.bind(function() {\n        console$1.log('MIXPANEL REQUEST:');\n        console$1.log(truncated_data);\n        return this._send_request(\n            endpoint,\n            encode_data_for_request(truncated_data),\n            send_request_options,\n            this._prepare_callback(callback, truncated_data)\n        );\n    }, this);\n\n    if (this._batch_requests && !should_send_immediately) {\n        batcher.enqueue(truncated_data, function(succeeded) {\n            if (succeeded) {\n                callback(1, truncated_data);\n            } else {\n                send_request_immediately();\n            }\n        });\n    } else {\n        request_enqueued_or_initiated = send_request_immediately();\n    }\n\n    return request_enqueued_or_initiated && truncated_data;\n};\n\n/**\n * Track an event. This is the most important and\n * frequently used Mixpanel function.\n *\n * ### Usage:\n *\n *     // track an event named 'Registered'\n *     mixpanel.track('Registered', {'Gender': 'Male', 'Age': 21});\n *\n *     // track an event using navigator.sendBeacon\n *     mixpanel.track('Left page', {'duration_seconds': 35}, {transport: 'sendBeacon'});\n *\n * To track link clicks or form submissions, see track_links() or track_forms().\n *\n * @param {String} event_name The name of the event. This can be anything the user does - 'Button Click', 'Sign Up', 'Item Purchased', etc.\n * @param {Object} [properties] A set of properties to include with the event you're sending. These describe the user who did the event or details about the event itself.\n * @param {Object} [options] Optional configuration for this track request.\n * @param {String} [options.transport] Transport method for network request ('xhr' or 'sendBeacon').\n * @param {Boolean} [options.send_immediately] Whether to bypass batching/queueing and send track request immediately.\n * @param {Function} [callback] If provided, the callback function will be called after tracking the event.\n * @returns {Boolean|Object} If the tracking request was successfully initiated/queued, an object\n * with the tracking payload sent to the API server is returned; otherwise false.\n */\nMixpanelLib.prototype.track = addOptOutCheckMixpanelLib(function(event_name, properties, options, callback) {\n    if (!callback && typeof options === 'function') {\n        callback = options;\n        options = null;\n    }\n    options = options || {};\n    var transport = options['transport']; // external API, don't minify 'transport' prop\n    if (transport) {\n        options.transport = transport; // 'transport' prop name can be minified internally\n    }\n    var should_send_immediately = options['send_immediately'];\n    if (typeof callback !== 'function') {\n        callback = function() {};\n    }\n\n    if (_.isUndefined(event_name)) {\n        console$1.error('No event name provided to mixpanel.track');\n        return;\n    }\n\n    if (this._event_is_disabled(event_name)) {\n        callback(0);\n        return;\n    }\n\n    // set defaults\n    properties = properties || {};\n    properties['token'] = this.get_config('token');\n\n    // set $duration if time_event was previously called for this event\n    var start_timestamp = this['persistence'].remove_event_timer(event_name);\n    if (!_.isUndefined(start_timestamp)) {\n        var duration_in_ms = new Date().getTime() - start_timestamp;\n        properties['$duration'] = parseFloat((duration_in_ms / 1000).toFixed(3));\n    }\n\n    this._set_default_superprops();\n\n    // note: extend writes to the first object, so lets make sure we\n    // don't write to the persistence properties object and info\n    // properties object by passing in a new object\n\n    // update properties with pageview info and super-properties\n    properties = _.extend(\n        {},\n        _.info.properties(),\n        this['persistence'].properties(),\n        properties\n    );\n\n    var property_blacklist = this.get_config('property_blacklist');\n    if (_.isArray(property_blacklist)) {\n        _.each(property_blacklist, function(blacklisted_prop) {\n            delete properties[blacklisted_prop];\n        });\n    } else {\n        console$1.error('Invalid value for property_blacklist config: ' + property_blacklist);\n    }\n\n    var data = {\n        'event': event_name,\n        'properties': properties\n    };\n    var ret = this._track_or_batch({\n        truncated_data: _.truncate(data, 255),\n        endpoint: this.get_config('api_host') + '/track/',\n        batcher: this.request_batchers.events,\n        should_send_immediately: should_send_immediately,\n        send_request_options: options\n    }, callback);\n\n    this._check_and_handle_triggered_notifications(data);\n\n    return ret;\n});\n\n/**\n * Register the current user into one/many groups.\n *\n * ### Usage:\n *\n *      mixpanel.set_group('company', ['mixpanel', 'google']) // an array of IDs\n *      mixpanel.set_group('company', 'mixpanel')\n *      mixpanel.set_group('company', 128746312)\n *\n * @param {String} group_key Group key\n * @param {Array|String|Number} group_ids An array of group IDs, or a singular group ID\n * @param {Function} [callback] If provided, the callback will be called after tracking the event.\n *\n */\nMixpanelLib.prototype.set_group = addOptOutCheckMixpanelLib(function(group_key, group_ids, callback) {\n    if (!_.isArray(group_ids)) {\n        group_ids = [group_ids];\n    }\n    var prop = {};\n    prop[group_key] = group_ids;\n    this.register(prop);\n    return this['people'].set(group_key, group_ids, callback);\n});\n\n/**\n * Add a new group for this user.\n *\n * ### Usage:\n *\n *      mixpanel.add_group('company', 'mixpanel')\n *\n * @param {String} group_key Group key\n * @param {*} group_id A valid Mixpanel property type\n * @param {Function} [callback] If provided, the callback will be called after tracking the event.\n */\nMixpanelLib.prototype.add_group = addOptOutCheckMixpanelLib(function(group_key, group_id, callback) {\n    var old_values = this.get_property(group_key);\n    if (old_values === undefined) {\n        var prop = {};\n        prop[group_key] = [group_id];\n        this.register(prop);\n    } else {\n        if (old_values.indexOf(group_id) === -1) {\n            old_values.push(group_id);\n            this.register(prop);\n        }\n    }\n    return this['people'].union(group_key, group_id, callback);\n});\n\n/**\n * Remove a group from this user.\n *\n * ### Usage:\n *\n *      mixpanel.remove_group('company', 'mixpanel')\n *\n * @param {String} group_key Group key\n * @param {*} group_id A valid Mixpanel property type\n * @param {Function} [callback] If provided, the callback will be called after tracking the event.\n */\nMixpanelLib.prototype.remove_group = addOptOutCheckMixpanelLib(function(group_key, group_id, callback) {\n    var old_value = this.get_property(group_key);\n    // if the value doesn't exist, the persistent store is unchanged\n    if (old_value !== undefined) {\n        var idx = old_value.indexOf(group_id);\n        if (idx > -1) {\n            old_value.splice(idx, 1);\n            this.register({group_key: old_value});\n        }\n        if (old_value.length === 0) {\n            this.unregister(group_key);\n        }\n    }\n    return this['people'].remove(group_key, group_id, callback);\n});\n\n/**\n * Track an event with specific groups.\n *\n * ### Usage:\n *\n *      mixpanel.track_with_groups('purchase', {'product': 'iphone'}, {'University': ['UCB', 'UCLA']})\n *\n * @param {String} event_name The name of the event (see `mixpanel.track()`)\n * @param {Object=} properties A set of properties to include with the event you're sending (see `mixpanel.track()`)\n * @param {Object=} groups An object mapping group name keys to one or more values\n * @param {Function} [callback] If provided, the callback will be called after tracking the event.\n */\nMixpanelLib.prototype.track_with_groups = addOptOutCheckMixpanelLib(function(event_name, properties, groups, callback) {\n    var tracking_props = _.extend({}, properties || {});\n    _.each(groups, function(v, k) {\n        if (v !== null && v !== undefined) {\n            tracking_props[k] = v;\n        }\n    });\n    return this.track(event_name, tracking_props, callback);\n});\n\nMixpanelLib.prototype._create_map_key = function (group_key, group_id) {\n    return group_key + '_' + JSON.stringify(group_id);\n};\n\nMixpanelLib.prototype._remove_group_from_cache = function (group_key, group_id) {\n    delete this._cached_groups[this._create_map_key(group_key, group_id)];\n};\n\n/**\n * Look up reference to a Mixpanel group\n *\n * ### Usage:\n *\n *       mixpanel.get_group(group_key, group_id)\n *\n * @param {String} group_key Group key\n * @param {Object} group_id A valid Mixpanel property type\n * @returns {Object} A MixpanelGroup identifier\n */\nMixpanelLib.prototype.get_group = function (group_key, group_id) {\n    var map_key = this._create_map_key(group_key, group_id);\n    var group = this._cached_groups[map_key];\n    if (group === undefined || group._group_key !== group_key || group._group_id !== group_id) {\n        group = new MixpanelGroup();\n        group._init(this, group_key, group_id);\n        this._cached_groups[map_key] = group;\n    }\n    return group;\n};\n\n/**\n * Track mp_page_view event. This is now ignored by the server.\n *\n * @param {String} [page] The url of the page to record. If you don't include this, it defaults to the current url.\n * @deprecated\n */\nMixpanelLib.prototype.track_pageview = function(page) {\n    if (_.isUndefined(page)) {\n        page = document$1.location.href;\n    }\n    this.track('mp_page_view', _.info.pageviewInfo(page));\n};\n\n/**\n * Track clicks on a set of document elements. Selector must be a\n * valid query. Elements must exist on the page at the time track_links is called.\n *\n * ### Usage:\n *\n *     // track click for link id #nav\n *     mixpanel.track_links('#nav', 'Clicked Nav Link');\n *\n * ### Notes:\n *\n * This function will wait up to 300 ms for the Mixpanel\n * servers to respond. If they have not responded by that time\n * it will head to the link without ensuring that your event\n * has been tracked.  To configure this timeout please see the\n * set_config() documentation below.\n *\n * If you pass a function in as the properties argument, the\n * function will receive the DOMElement that triggered the\n * event as an argument.  You are expected to return an object\n * from the function; any properties defined on this object\n * will be sent to mixpanel as event properties.\n *\n * @type {Function}\n * @param {Object|String} query A valid DOM query, element or jQuery-esque list\n * @param {String} event_name The name of the event to track\n * @param {Object|Function} [properties] A properties object or function that returns a dictionary of properties when passed a DOMElement\n */\nMixpanelLib.prototype.track_links = function() {\n    return this._track_dom.call(this, LinkTracker, arguments);\n};\n\n/**\n * Track form submissions. Selector must be a valid query.\n *\n * ### Usage:\n *\n *     // track submission for form id 'register'\n *     mixpanel.track_forms('#register', 'Created Account');\n *\n * ### Notes:\n *\n * This function will wait up to 300 ms for the mixpanel\n * servers to respond, if they have not responded by that time\n * it will head to the link without ensuring that your event\n * has been tracked.  To configure this timeout please see the\n * set_config() documentation below.\n *\n * If you pass a function in as the properties argument, the\n * function will receive the DOMElement that triggered the\n * event as an argument.  You are expected to return an object\n * from the function; any properties defined on this object\n * will be sent to mixpanel as event properties.\n *\n * @type {Function}\n * @param {Object|String} query A valid DOM query, element or jQuery-esque list\n * @param {String} event_name The name of the event to track\n * @param {Object|Function} [properties] This can be a set of properties, or a function that returns a set of properties after being passed a DOMElement\n */\nMixpanelLib.prototype.track_forms = function() {\n    return this._track_dom.call(this, FormTracker, arguments);\n};\n\n/**\n * Time an event by including the time between this call and a\n * later 'track' call for the same event in the properties sent\n * with the event.\n *\n * ### Usage:\n *\n *     // time an event named 'Registered'\n *     mixpanel.time_event('Registered');\n *     mixpanel.track('Registered', {'Gender': 'Male', 'Age': 21});\n *\n * When called for a particular event name, the next track call for that event\n * name will include the elapsed time between the 'time_event' and 'track'\n * calls. This value is stored as seconds in the '$duration' property.\n *\n * @param {String} event_name The name of the event.\n */\nMixpanelLib.prototype.time_event = function(event_name) {\n    if (_.isUndefined(event_name)) {\n        console$1.error('No event name provided to mixpanel.time_event');\n        return;\n    }\n\n    if (this._event_is_disabled(event_name)) {\n        return;\n    }\n\n    this['persistence'].set_event_timer(event_name,  new Date().getTime());\n};\n\n/**\n * Register a set of super properties, which are included with all\n * events. This will overwrite previous super property values.\n *\n * ### Usage:\n *\n *     // register 'Gender' as a super property\n *     mixpanel.register({'Gender': 'Female'});\n *\n *     // register several super properties when a user signs up\n *     mixpanel.register({\n *         'Email': 'jdoe@example.com',\n *         'Account Type': 'Free'\n *     });\n *\n * @param {Object} properties An associative array of properties to store about the user\n * @param {Number} [days] How many days since the user's last visit to store the super properties\n */\nMixpanelLib.prototype.register = function(props, days) {\n    this['persistence'].register(props, days);\n};\n\n/**\n * Register a set of super properties only once. This will not\n * overwrite previous super property values, unlike register().\n *\n * ### Usage:\n *\n *     // register a super property for the first time only\n *     mixpanel.register_once({\n *         'First Login Date': new Date().toISOString()\n *     });\n *\n * ### Notes:\n *\n * If default_value is specified, current super properties\n * with that value will be overwritten.\n *\n * @param {Object} properties An associative array of properties to store about the user\n * @param {*} [default_value] Value to override if already set in super properties (ex: 'False') Default: 'None'\n * @param {Number} [days] How many days since the users last visit to store the super properties\n */\nMixpanelLib.prototype.register_once = function(props, default_value, days) {\n    this['persistence'].register_once(props, default_value, days);\n};\n\n/**\n * Delete a super property stored with the current user.\n *\n * @param {String} property The name of the super property to remove\n */\nMixpanelLib.prototype.unregister = function(property) {\n    this['persistence'].unregister(property);\n};\n\nMixpanelLib.prototype._register_single = function(prop, value) {\n    var props = {};\n    props[prop] = value;\n    this.register(props);\n};\n\n/**\n * Identify a user with a unique ID to track user activity across\n * devices, tie a user to their events, and create a user profile.\n * If you never call this method, unique visitors are tracked using\n * a UUID generated the first time they visit the site.\n *\n * Call identify when you know the identity of the current user,\n * typically after login or signup. We recommend against using\n * identify for anonymous visitors to your site.\n *\n * ### Notes:\n * If your project has\n * <a href=\"https://help.mixpanel.com/hc/en-us/articles/360039133851\">ID Merge</a>\n * enabled, the identify method will connect pre- and\n * post-authentication events when appropriate.\n *\n * If your project does not have ID Merge enabled, identify will\n * change the user's local distinct_id to the unique ID you pass.\n * Events tracked prior to authentication will not be connected\n * to the same user identity. If ID Merge is disabled, alias can\n * be used to connect pre- and post-registration events.\n *\n * @param {String} [unique_id] A string that uniquely identifies a user. If not provided, the distinct_id currently in the persistent store (cookie or localStorage) will be used.\n */\nMixpanelLib.prototype.identify = function(\n    new_distinct_id, _set_callback, _add_callback, _append_callback, _set_once_callback, _union_callback, _unset_callback, _remove_callback\n) {\n    // Optional Parameters\n    //  _set_callback:function  A callback to be run if and when the People set queue is flushed\n    //  _add_callback:function  A callback to be run if and when the People add queue is flushed\n    //  _append_callback:function  A callback to be run if and when the People append queue is flushed\n    //  _set_once_callback:function  A callback to be run if and when the People set_once queue is flushed\n    //  _union_callback:function  A callback to be run if and when the People union queue is flushed\n    //  _unset_callback:function  A callback to be run if and when the People unset queue is flushed\n\n    var previous_distinct_id = this.get_distinct_id();\n    this.register({'$user_id': new_distinct_id});\n\n    if (!this.get_property('$device_id')) {\n        // The persisted distinct id might not actually be a device id at all\n        // it might be a distinct id of the user from before\n        var device_id = previous_distinct_id;\n        this.register_once({\n            '$had_persisted_distinct_id': true,\n            '$device_id': device_id\n        }, '');\n    }\n\n    // identify only changes the distinct id if it doesn't match either the existing or the alias;\n    // if it's new, blow away the alias as well.\n    if (new_distinct_id !== previous_distinct_id && new_distinct_id !== this.get_property(ALIAS_ID_KEY)) {\n        this.unregister(ALIAS_ID_KEY);\n        this.register({'distinct_id': new_distinct_id});\n    }\n    this._check_and_handle_notifications(this.get_distinct_id());\n    this._flags.identify_called = true;\n    // Flush any queued up people requests\n    this['people']._flush(_set_callback, _add_callback, _append_callback, _set_once_callback, _union_callback, _unset_callback, _remove_callback);\n\n    // send an $identify event any time the distinct_id is changing - logic on the server\n    // will determine whether or not to do anything with it.\n    if (new_distinct_id !== previous_distinct_id) {\n        this.track('$identify', { 'distinct_id': new_distinct_id, '$anon_distinct_id': previous_distinct_id });\n    }\n};\n\n/**\n * Clears super properties and generates a new random distinct_id for this instance.\n * Useful for clearing data when a user logs out.\n */\nMixpanelLib.prototype.reset = function() {\n    this['persistence'].clear();\n    this._flags.identify_called = false;\n    var uuid = _.UUID();\n    this.register_once({\n        'distinct_id': uuid,\n        '$device_id': uuid\n    }, '');\n};\n\n/**\n * Returns the current distinct id of the user. This is either the id automatically\n * generated by the library or the id that has been passed by a call to identify().\n *\n * ### Notes:\n *\n * get_distinct_id() can only be called after the Mixpanel library has finished loading.\n * init() has a loaded function available to handle this automatically. For example:\n *\n *     // set distinct_id after the mixpanel library has loaded\n *     mixpanel.init('YOUR PROJECT TOKEN', {\n *         loaded: function(mixpanel) {\n *             distinct_id = mixpanel.get_distinct_id();\n *         }\n *     });\n */\nMixpanelLib.prototype.get_distinct_id = function() {\n    return this.get_property('distinct_id');\n};\n\n/**\n * The alias method creates an alias which Mixpanel will use to\n * remap one id to another. Multiple aliases can point to the\n * same identifier.\n *\n * The following is a valid use of alias:\n *\n *     mixpanel.alias('new_id', 'existing_id');\n *     // You can add multiple id aliases to the existing ID\n *     mixpanel.alias('newer_id', 'existing_id');\n *\n * Aliases can also be chained - the following is a valid example:\n *\n *     mixpanel.alias('new_id', 'existing_id');\n *     // chain newer_id - new_id - existing_id\n *     mixpanel.alias('newer_id', 'new_id');\n *\n * Aliases cannot point to multiple identifiers - the following\n * example will not work:\n *\n *     mixpanel.alias('new_id', 'existing_id');\n *     // this is invalid as 'new_id' already points to 'existing_id'\n *     mixpanel.alias('new_id', 'newer_id');\n *\n * ### Notes:\n *\n * If your project does not have\n * <a href=\"https://help.mixpanel.com/hc/en-us/articles/360039133851\">ID Merge</a>\n * enabled, the best practice is to call alias once when a unique\n * ID is first created for a user (e.g., when a user first registers\n * for an account). Do not use alias multiple times for a single\n * user without ID Merge enabled.\n *\n * @param {String} alias A unique identifier that you want to use for this user in the future.\n * @param {String} [original] The current identifier being used for this user.\n */\nMixpanelLib.prototype.alias = function(alias, original) {\n    // If the $people_distinct_id key exists in persistence, there has been a previous\n    // mixpanel.people.identify() call made for this user. It is VERY BAD to make an alias with\n    // this ID, as it will duplicate users.\n    if (alias === this.get_property(PEOPLE_DISTINCT_ID_KEY)) {\n        console$1.critical('Attempting to create alias for existing People user - aborting.');\n        return -2;\n    }\n\n    var _this = this;\n    if (_.isUndefined(original)) {\n        original = this.get_distinct_id();\n    }\n    if (alias !== original) {\n        this._register_single(ALIAS_ID_KEY, alias);\n        return this.track('$create_alias', { 'alias': alias, 'distinct_id': original }, function() {\n            // Flush the people queue\n            _this.identify(alias);\n        });\n    } else {\n        console$1.error('alias matches current distinct_id - skipping api call.');\n        this.identify(alias);\n        return -1;\n    }\n};\n\n/**\n * Provide a string to recognize the user by. The string passed to\n * this method will appear in the Mixpanel Streams product rather\n * than an automatically generated name. Name tags do not have to\n * be unique.\n *\n * This value will only be included in Streams data.\n *\n * @param {String} name_tag A human readable name for the user\n * @deprecated\n */\nMixpanelLib.prototype.name_tag = function(name_tag) {\n    this._register_single('mp_name_tag', name_tag);\n};\n\n/**\n * Update the configuration of a mixpanel library instance.\n *\n * The default config is:\n *\n *     {\n *       // HTTP method for tracking requests\n *       api_method: 'POST'\n *\n *       // transport for sending requests ('XHR' or 'sendBeacon')\n *       // NB: sendBeacon should only be used for scenarios such as\n *       // page unload where a \"best-effort\" attempt to send is\n *       // acceptable; the sendBeacon API does not support callbacks\n *       // or any way to know the result of the request. Mixpanel\n *       // tracking via sendBeacon will not support any event-\n *       // batching or retry mechanisms.\n *       api_transport: 'XHR'\n *\n *       // turn on request-batching/queueing/retry\n *       batch_requests: false,\n *\n *       // maximum number of events/updates to send in a single\n *       // network request\n *       batch_size: 50,\n *\n *       // milliseconds to wait between sending batch requests\n *       batch_flush_interval_ms: 5000,\n *\n *       // milliseconds to wait for network responses to batch requests\n *       // before they are considered timed-out and retried\n *       batch_request_timeout_ms: 90000,\n *\n *       // override value for cookie domain, only useful for ensuring\n *       // correct cross-subdomain cookies on unusual domains like\n *       // subdomain.mainsite.avocat.fr; NB this cannot be used to\n *       // set cookies on a different domain than the current origin\n *       cookie_domain: ''\n *\n *       // super properties cookie expiration (in days)\n *       cookie_expiration: 365\n *\n *       // if true, cookie will be set with SameSite=None; Secure\n *       // this is only useful in special situations, like embedded\n *       // 3rd-party iframes that set up a Mixpanel instance\n *       cross_site_cookie: false\n *\n *       // super properties span subdomains\n *       cross_subdomain_cookie: true\n *\n *       // debug mode\n *       debug: false\n *\n *       // if this is true, the mixpanel cookie or localStorage entry\n *       // will be deleted, and no user persistence will take place\n *       disable_persistence: false\n *\n *       // if this is true, Mixpanel will automatically determine\n *       // City, Region and Country data using the IP address of\n *       //the client\n *       ip: true\n *\n *       // opt users out of tracking by this Mixpanel instance by default\n *       opt_out_tracking_by_default: false\n *\n *       // opt users out of browser data storage by this Mixpanel instance by default\n *       opt_out_persistence_by_default: false\n *\n *       // persistence mechanism used by opt-in/opt-out methods - cookie\n *       // or localStorage - falls back to cookie if localStorage is unavailable\n *       opt_out_tracking_persistence_type: 'localStorage'\n *\n *       // customize the name of cookie/localStorage set by opt-in/opt-out methods\n *       opt_out_tracking_cookie_prefix: null\n *\n *       // type of persistent store for super properties (cookie/\n *       // localStorage) if set to 'localStorage', any existing\n *       // mixpanel cookie value with the same persistence_name\n *       // will be transferred to localStorage and deleted\n *       persistence: 'cookie'\n *\n *       // name for super properties persistent store\n *       persistence_name: ''\n *\n *       // names of properties/superproperties which should never\n *       // be sent with track() calls\n *       property_blacklist: []\n *\n *       // if this is true, mixpanel cookies will be marked as\n *       // secure, meaning they will only be transmitted over https\n *       secure_cookie: false\n *\n *       // the amount of time track_links will\n *       // wait for Mixpanel's servers to respond\n *       track_links_timeout: 300\n *\n *       // if you set upgrade to be true, the library will check for\n *       // a cookie from our old js library and import super\n *       // properties from it, then the old cookie is deleted\n *       // The upgrade config option only works in the initialization,\n *       // so make sure you set it when you create the library.\n *       upgrade: false\n *\n *       // extra HTTP request headers to set for each API request, in\n *       // the format {'Header-Name': value}\n *       xhr_headers: {}\n *\n *       // protocol for fetching in-app message resources, e.g.\n *       // 'https://' or 'http://'; defaults to '//' (which defers to the\n *       // current page's protocol)\n *       inapp_protocol: '//'\n *\n *       // whether to open in-app message link in new tab/window\n *       inapp_link_new_window: false\n *\n *       // whether to ignore or respect the web browser's Do Not Track setting\n *       ignore_dnt: false\n *     }\n *\n *\n * @param {Object} config A dictionary of new configuration values to update\n */\nMixpanelLib.prototype.set_config = function(config) {\n    if (_.isObject(config)) {\n        _.extend(this['config'], config);\n\n        var new_batch_size = config['batch_size'];\n        if (new_batch_size) {\n            _.each(this.request_batchers, function(batcher) {\n                batcher.resetBatchSize();\n            });\n        }\n\n        if (!this.get_config('persistence_name')) {\n            this['config']['persistence_name'] = this['config']['cookie_name'];\n        }\n        if (!this.get_config('disable_persistence')) {\n            this['config']['disable_persistence'] = this['config']['disable_cookie'];\n        }\n\n        if (this['persistence']) {\n            this['persistence'].update_config(this['config']);\n        }\n        Config.DEBUG = Config.DEBUG || this.get_config('debug');\n    }\n};\n\n/**\n * returns the current config object for the library.\n */\nMixpanelLib.prototype.get_config = function(prop_name) {\n    return this['config'][prop_name];\n};\n\n/**\n * Returns the value of the super property named property_name. If no such\n * property is set, get_property() will return the undefined value.\n *\n * ### Notes:\n *\n * get_property() can only be called after the Mixpanel library has finished loading.\n * init() has a loaded function available to handle this automatically. For example:\n *\n *     // grab value for 'user_id' after the mixpanel library has loaded\n *     mixpanel.init('YOUR PROJECT TOKEN', {\n *         loaded: function(mixpanel) {\n *             user_id = mixpanel.get_property('user_id');\n *         }\n *     });\n *\n * @param {String} property_name The name of the super property you want to retrieve\n */\nMixpanelLib.prototype.get_property = function(property_name) {\n    return this['persistence']['props'][property_name];\n};\n\nMixpanelLib.prototype.toString = function() {\n    var name = this.get_config('name');\n    if (name !== PRIMARY_INSTANCE_NAME) {\n        name = PRIMARY_INSTANCE_NAME + '.' + name;\n    }\n    return name;\n};\n\nMixpanelLib.prototype._event_is_disabled = function(event_name) {\n    return _.isBlockedUA(userAgent) ||\n        this._flags.disable_all_events ||\n        _.include(this.__disabled_events, event_name);\n};\n\nMixpanelLib.prototype._check_and_handle_triggered_notifications = addOptOutCheckMixpanelLib(function(event_data) {\n    if (!this._user_decide_check_complete) {\n        this._events_tracked_before_user_decide_check_complete.push(event_data);\n    } else {\n        var arr = this['_triggered_notifs'];\n        for (var i = 0; i < arr.length; i++) {\n            var notif = new MixpanelNotification(arr[i], this);\n            if (notif._matches_event_data(event_data)) {\n                this._show_notification(arr[i]);\n                return;\n            }\n        }\n    }\n});\n\nMixpanelLib.prototype._check_and_handle_notifications = addOptOutCheckMixpanelLib(function(distinct_id) {\n    if (\n        !distinct_id ||\n        this._flags.identify_called ||\n        this.get_config('disable_notifications')\n    ) {\n        return;\n    }\n\n    console$1.log('MIXPANEL NOTIFICATION CHECK');\n\n    var data = {\n        'verbose':     true,\n        'version':     '3',\n        'lib':         'web',\n        'token':       this.get_config('token'),\n        'distinct_id': distinct_id\n    };\n    this._send_request(\n        this.get_config('api_host') + '/decide/',\n        data,\n        {method: 'GET', transport: 'XHR'},\n        this._prepare_callback(_.bind(function(result) {\n            if (result['notifications'] && result['notifications'].length > 0) {\n                this['_triggered_notifs'] = [];\n                var notifications = [];\n                _.each(result['notifications'], function(notif) {\n                    (notif['display_triggers'] && notif['display_triggers'].length > 0 ? this['_triggered_notifs'] : notifications).push(notif);\n                }, this);\n                if (notifications.length > 0) {\n                    this._show_notification.call(this, notifications[0]);\n                }\n            }\n            this._handle_user_decide_check_complete();\n        }, this))\n    );\n});\n\nMixpanelLib.prototype._handle_user_decide_check_complete = function() {\n    this._user_decide_check_complete = true;\n\n    // check notifications against events that were tracked before decide call completed\n    var events = this._events_tracked_before_user_decide_check_complete;\n    while (events.length > 0) {\n        var data = events.shift(); // replay in the same order they came in\n        this._check_and_handle_triggered_notifications(data);\n    }\n};\n\nMixpanelLib.prototype._show_notification = function(notif_data) {\n    var notification = new MixpanelNotification(notif_data, this);\n    notification.show();\n};\n\n// perform some housekeeping around GDPR opt-in/out state\nMixpanelLib.prototype._gdpr_init = function() {\n    var is_localStorage_requested = this.get_config('opt_out_tracking_persistence_type') === 'localStorage';\n\n    // try to convert opt-in/out cookies to localStorage if possible\n    if (is_localStorage_requested && _.localStorage.is_supported()) {\n        if (!this.has_opted_in_tracking() && this.has_opted_in_tracking({'persistence_type': 'cookie'})) {\n            this.opt_in_tracking({'enable_persistence': false});\n        }\n        if (!this.has_opted_out_tracking() && this.has_opted_out_tracking({'persistence_type': 'cookie'})) {\n            this.opt_out_tracking({'clear_persistence': false});\n        }\n        this.clear_opt_in_out_tracking({\n            'persistence_type': 'cookie',\n            'enable_persistence': false\n        });\n    }\n\n    // check whether the user has already opted out - if so, clear & disable persistence\n    if (this.has_opted_out_tracking()) {\n        this._gdpr_update_persistence({'clear_persistence': true});\n\n    // check whether we should opt out by default\n    // note: we don't clear persistence here by default since opt-out default state is often\n    //       used as an initial state while GDPR information is being collected\n    } else if (!this.has_opted_in_tracking() && (\n        this.get_config('opt_out_tracking_by_default') || _.cookie.get('mp_optout')\n    )) {\n        _.cookie.remove('mp_optout');\n        this.opt_out_tracking({\n            'clear_persistence': this.get_config('opt_out_persistence_by_default')\n        });\n    }\n};\n\n/**\n * Enable or disable persistence based on options\n * only enable/disable if persistence is not already in this state\n * @param {boolean} [options.clear_persistence] If true, will delete all data stored by the sdk in persistence and disable it\n * @param {boolean} [options.enable_persistence] If true, will re-enable sdk persistence\n */\nMixpanelLib.prototype._gdpr_update_persistence = function(options) {\n    var disabled;\n    if (options && options['clear_persistence']) {\n        disabled = true;\n    } else if (options && options['enable_persistence']) {\n        disabled = false;\n    } else {\n        return;\n    }\n\n    if (!this.get_config('disable_persistence') && this['persistence'].disabled !== disabled) {\n        this['persistence'].set_disabled(disabled);\n    }\n\n    if (disabled) {\n        _.each(this.request_batchers, function(batcher) {\n            batcher.clear();\n        });\n    }\n};\n\n// call a base gdpr function after constructing the appropriate token and options args\nMixpanelLib.prototype._gdpr_call_func = function(func, options) {\n    options = _.extend({\n        'track': _.bind(this.track, this),\n        'persistence_type': this.get_config('opt_out_tracking_persistence_type'),\n        'cookie_prefix': this.get_config('opt_out_tracking_cookie_prefix'),\n        'cookie_expiration': this.get_config('cookie_expiration'),\n        'cross_site_cookie': this.get_config('cross_site_cookie'),\n        'cross_subdomain_cookie': this.get_config('cross_subdomain_cookie'),\n        'cookie_domain': this.get_config('cookie_domain'),\n        'secure_cookie': this.get_config('secure_cookie'),\n        'ignore_dnt': this.get_config('ignore_dnt')\n    }, options);\n\n    // check if localStorage can be used for recording opt out status, fall back to cookie if not\n    if (!_.localStorage.is_supported()) {\n        options['persistence_type'] = 'cookie';\n    }\n\n    return func(this.get_config('token'), {\n        track: options['track'],\n        trackEventName: options['track_event_name'],\n        trackProperties: options['track_properties'],\n        persistenceType: options['persistence_type'],\n        persistencePrefix: options['cookie_prefix'],\n        cookieDomain: options['cookie_domain'],\n        cookieExpiration: options['cookie_expiration'],\n        crossSiteCookie: options['cross_site_cookie'],\n        crossSubdomainCookie: options['cross_subdomain_cookie'],\n        secureCookie: options['secure_cookie'],\n        ignoreDnt: options['ignore_dnt']\n    });\n};\n\n/**\n * Opt the user in to data tracking and cookies/localstorage for this Mixpanel instance\n *\n * ### Usage\n *\n *     // opt user in\n *     mixpanel.opt_in_tracking();\n *\n *     // opt user in with specific event name, properties, cookie configuration\n *     mixpanel.opt_in_tracking({\n *         track_event_name: 'User opted in',\n *         track_event_properties: {\n *             'Email': 'jdoe@example.com'\n *         },\n *         cookie_expiration: 30,\n *         secure_cookie: true\n *     });\n *\n * @param {Object} [options] A dictionary of config options to override\n * @param {function} [options.track] Function used for tracking a Mixpanel event to record the opt-in action (default is this Mixpanel instance's track method)\n * @param {string} [options.track_event_name=$opt_in] Event name to be used for tracking the opt-in action\n * @param {Object} [options.track_properties] Set of properties to be tracked along with the opt-in action\n * @param {boolean} [options.enable_persistence=true] If true, will re-enable sdk persistence\n * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n * @param {string} [options.cookie_prefix=__mp_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookie_expiration] Number of days until the opt-in cookie expires (overrides value specified in this Mixpanel instance's config)\n * @param {string} [options.cookie_domain] Custom cookie domain (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.cross_site_cookie] Whether the opt-in cookie is set as cross-site-enabled (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.cross_subdomain_cookie] Whether the opt-in cookie is set as cross-subdomain or not (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.secure_cookie] Whether the opt-in cookie is set as secure or not (overrides value specified in this Mixpanel instance's config)\n */\nMixpanelLib.prototype.opt_in_tracking = function(options) {\n    options = _.extend({\n        'enable_persistence': true\n    }, options);\n\n    this._gdpr_call_func(optIn, options);\n    this._gdpr_update_persistence(options);\n};\n\n/**\n * Opt the user out of data tracking and cookies/localstorage for this Mixpanel instance\n *\n * ### Usage\n *\n *     // opt user out\n *     mixpanel.opt_out_tracking();\n *\n *     // opt user out with different cookie configuration from Mixpanel instance\n *     mixpanel.opt_out_tracking({\n *         cookie_expiration: 30,\n *         secure_cookie: true\n *     });\n *\n * @param {Object} [options] A dictionary of config options to override\n * @param {boolean} [options.delete_user=true] If true, will delete the currently identified user's profile and clear all charges after opting the user out\n * @param {boolean} [options.clear_persistence=true] If true, will delete all data stored by the sdk in persistence\n * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n * @param {string} [options.cookie_prefix=__mp_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookie_expiration] Number of days until the opt-in cookie expires (overrides value specified in this Mixpanel instance's config)\n * @param {string} [options.cookie_domain] Custom cookie domain (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.cross_site_cookie] Whether the opt-in cookie is set as cross-site-enabled (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.cross_subdomain_cookie] Whether the opt-in cookie is set as cross-subdomain or not (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.secure_cookie] Whether the opt-in cookie is set as secure or not (overrides value specified in this Mixpanel instance's config)\n */\nMixpanelLib.prototype.opt_out_tracking = function(options) {\n    options = _.extend({\n        'clear_persistence': true,\n        'delete_user': true\n    }, options);\n\n    // delete user and clear charges since these methods may be disabled by opt-out\n    if (options['delete_user'] && this['people'] && this['people']._identify_called()) {\n        this['people'].delete_user();\n        this['people'].clear_charges();\n    }\n\n    this._gdpr_call_func(optOut, options);\n    this._gdpr_update_persistence(options);\n};\n\n/**\n * Check whether the user has opted in to data tracking and cookies/localstorage for this Mixpanel instance\n *\n * ### Usage\n *\n *     var has_opted_in = mixpanel.has_opted_in_tracking();\n *     // use has_opted_in value\n *\n * @param {Object} [options] A dictionary of config options to override\n * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n * @param {string} [options.cookie_prefix=__mp_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n * @returns {boolean} current opt-in status\n */\nMixpanelLib.prototype.has_opted_in_tracking = function(options) {\n    return this._gdpr_call_func(hasOptedIn, options);\n};\n\n/**\n * Check whether the user has opted out of data tracking and cookies/localstorage for this Mixpanel instance\n *\n * ### Usage\n *\n *     var has_opted_out = mixpanel.has_opted_out_tracking();\n *     // use has_opted_out value\n *\n * @param {Object} [options] A dictionary of config options to override\n * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n * @param {string} [options.cookie_prefix=__mp_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n * @returns {boolean} current opt-out status\n */\nMixpanelLib.prototype.has_opted_out_tracking = function(options) {\n    return this._gdpr_call_func(hasOptedOut, options);\n};\n\n/**\n * Clear the user's opt in/out status of data tracking and cookies/localstorage for this Mixpanel instance\n *\n * ### Usage\n *\n *     // clear user's opt-in/out status\n *     mixpanel.clear_opt_in_out_tracking();\n *\n *     // clear user's opt-in/out status with specific cookie configuration - should match\n *     // configuration used when opt_in_tracking/opt_out_tracking methods were called.\n *     mixpanel.clear_opt_in_out_tracking({\n *         cookie_expiration: 30,\n *         secure_cookie: true\n *     });\n *\n * @param {Object} [options] A dictionary of config options to override\n * @param {boolean} [options.enable_persistence=true] If true, will re-enable sdk persistence\n * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n * @param {string} [options.cookie_prefix=__mp_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookie_expiration] Number of days until the opt-in cookie expires (overrides value specified in this Mixpanel instance's config)\n * @param {string} [options.cookie_domain] Custom cookie domain (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.cross_site_cookie] Whether the opt-in cookie is set as cross-site-enabled (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.cross_subdomain_cookie] Whether the opt-in cookie is set as cross-subdomain or not (overrides value specified in this Mixpanel instance's config)\n * @param {boolean} [options.secure_cookie] Whether the opt-in cookie is set as secure or not (overrides value specified in this Mixpanel instance's config)\n */\nMixpanelLib.prototype.clear_opt_in_out_tracking = function(options) {\n    options = _.extend({\n        'enable_persistence': true\n    }, options);\n\n    this._gdpr_call_func(clearOptInOut, options);\n    this._gdpr_update_persistence(options);\n};\n\n// EXPORTS (for closure compiler)\n\n// MixpanelLib Exports\nMixpanelLib.prototype['init']                               = MixpanelLib.prototype.init;\nMixpanelLib.prototype['reset']                              = MixpanelLib.prototype.reset;\nMixpanelLib.prototype['disable']                            = MixpanelLib.prototype.disable;\nMixpanelLib.prototype['time_event']                         = MixpanelLib.prototype.time_event;\nMixpanelLib.prototype['track']                              = MixpanelLib.prototype.track;\nMixpanelLib.prototype['track_links']                        = MixpanelLib.prototype.track_links;\nMixpanelLib.prototype['track_forms']                        = MixpanelLib.prototype.track_forms;\nMixpanelLib.prototype['track_pageview']                     = MixpanelLib.prototype.track_pageview;\nMixpanelLib.prototype['register']                           = MixpanelLib.prototype.register;\nMixpanelLib.prototype['register_once']                      = MixpanelLib.prototype.register_once;\nMixpanelLib.prototype['unregister']                         = MixpanelLib.prototype.unregister;\nMixpanelLib.prototype['identify']                           = MixpanelLib.prototype.identify;\nMixpanelLib.prototype['alias']                              = MixpanelLib.prototype.alias;\nMixpanelLib.prototype['name_tag']                           = MixpanelLib.prototype.name_tag;\nMixpanelLib.prototype['set_config']                         = MixpanelLib.prototype.set_config;\nMixpanelLib.prototype['get_config']                         = MixpanelLib.prototype.get_config;\nMixpanelLib.prototype['get_property']                       = MixpanelLib.prototype.get_property;\nMixpanelLib.prototype['get_distinct_id']                    = MixpanelLib.prototype.get_distinct_id;\nMixpanelLib.prototype['toString']                           = MixpanelLib.prototype.toString;\nMixpanelLib.prototype['_check_and_handle_notifications']    = MixpanelLib.prototype._check_and_handle_notifications;\nMixpanelLib.prototype['_handle_user_decide_check_complete'] = MixpanelLib.prototype._handle_user_decide_check_complete;\nMixpanelLib.prototype['_show_notification']                 = MixpanelLib.prototype._show_notification;\nMixpanelLib.prototype['opt_out_tracking']                   = MixpanelLib.prototype.opt_out_tracking;\nMixpanelLib.prototype['opt_in_tracking']                    = MixpanelLib.prototype.opt_in_tracking;\nMixpanelLib.prototype['has_opted_out_tracking']             = MixpanelLib.prototype.has_opted_out_tracking;\nMixpanelLib.prototype['has_opted_in_tracking']              = MixpanelLib.prototype.has_opted_in_tracking;\nMixpanelLib.prototype['clear_opt_in_out_tracking']          = MixpanelLib.prototype.clear_opt_in_out_tracking;\nMixpanelLib.prototype['get_group']                          = MixpanelLib.prototype.get_group;\nMixpanelLib.prototype['set_group']                          = MixpanelLib.prototype.set_group;\nMixpanelLib.prototype['add_group']                          = MixpanelLib.prototype.add_group;\nMixpanelLib.prototype['remove_group']                       = MixpanelLib.prototype.remove_group;\nMixpanelLib.prototype['track_with_groups']                  = MixpanelLib.prototype.track_with_groups;\nMixpanelLib.prototype['stop_batch_requests']                = MixpanelLib.prototype.stop_batch_requests;\n\n// MixpanelPersistence Exports\nMixpanelPersistence.prototype['properties']            = MixpanelPersistence.prototype.properties;\nMixpanelPersistence.prototype['update_search_keyword'] = MixpanelPersistence.prototype.update_search_keyword;\nMixpanelPersistence.prototype['update_referrer_info']  = MixpanelPersistence.prototype.update_referrer_info;\nMixpanelPersistence.prototype['get_cross_subdomain']   = MixpanelPersistence.prototype.get_cross_subdomain;\nMixpanelPersistence.prototype['clear']                 = MixpanelPersistence.prototype.clear;\n\n_.safewrap_class(MixpanelLib, ['identify', '_check_and_handle_notifications', '_show_notification']);\n\n\nvar instances = {};\nvar extend_mp = function() {\n    // add all the sub mixpanel instances\n    _.each(instances, function(instance, name) {\n        if (name !== PRIMARY_INSTANCE_NAME) { mixpanel_master[name] = instance; }\n    });\n\n    // add private functions as _\n    mixpanel_master['_'] = _;\n};\n\nvar override_mp_init_func = function() {\n    // we override the snippets init function to handle the case where a\n    // user initializes the mixpanel library after the script loads & runs\n    mixpanel_master['init'] = function(token, config, name) {\n        if (name) {\n            // initialize a sub library\n            if (!mixpanel_master[name]) {\n                mixpanel_master[name] = instances[name] = create_mplib(token, config, name);\n                mixpanel_master[name]._loaded();\n            }\n            return mixpanel_master[name];\n        } else {\n            var instance = mixpanel_master;\n\n            if (instances[PRIMARY_INSTANCE_NAME]) {\n                // main mixpanel lib already initialized\n                instance = instances[PRIMARY_INSTANCE_NAME];\n            } else if (token) {\n                // intialize the main mixpanel lib\n                instance = create_mplib(token, config, PRIMARY_INSTANCE_NAME);\n                instance._loaded();\n                instances[PRIMARY_INSTANCE_NAME] = instance;\n            }\n\n            mixpanel_master = instance;\n            if (init_type === INIT_SNIPPET) {\n                window$1[PRIMARY_INSTANCE_NAME] = mixpanel_master;\n            }\n            extend_mp();\n        }\n    };\n};\n\nvar add_dom_loaded_handler = function() {\n    // Cross browser DOM Loaded support\n    function dom_loaded_handler() {\n        // function flag since we only want to execute this once\n        if (dom_loaded_handler.done) { return; }\n        dom_loaded_handler.done = true;\n\n        DOM_LOADED = true;\n        ENQUEUE_REQUESTS = false;\n\n        _.each(instances, function(inst) {\n            inst._dom_loaded();\n        });\n    }\n\n    function do_scroll_check() {\n        try {\n            document$1.documentElement.doScroll('left');\n        } catch(e) {\n            setTimeout(do_scroll_check, 1);\n            return;\n        }\n\n        dom_loaded_handler();\n    }\n\n    if (document$1.addEventListener) {\n        if (document$1.readyState === 'complete') {\n            // safari 4 can fire the DOMContentLoaded event before loading all\n            // external JS (including this file). you will see some copypasta\n            // on the internet that checks for 'complete' and 'loaded', but\n            // 'loaded' is an IE thing\n            dom_loaded_handler();\n        } else {\n            document$1.addEventListener('DOMContentLoaded', dom_loaded_handler, false);\n        }\n    } else if (document$1.attachEvent) {\n        // IE\n        document$1.attachEvent('onreadystatechange', dom_loaded_handler);\n\n        // check to make sure we arn't in a frame\n        var toplevel = false;\n        try {\n            toplevel = window$1.frameElement === null;\n        } catch(e) {\n            // noop\n        }\n\n        if (document$1.documentElement.doScroll && toplevel) {\n            do_scroll_check();\n        }\n    }\n\n    // fallback handler, always will work\n    _.register_event(window$1, 'load', dom_loaded_handler, true);\n};\n\nfunction init_as_module() {\n    init_type = INIT_MODULE;\n    mixpanel_master = new MixpanelLib();\n\n    override_mp_init_func();\n    mixpanel_master['init']();\n    add_dom_loaded_handler();\n\n    return mixpanel_master;\n}\n\nvar mixpanel = init_as_module();\n\nmodule.exports = mixpanel;","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nvar mixpanel = require(\"mixpanel-browser\");\nvar MixpanelBrowserBackend = /** @class */ (function () {\n    function MixpanelBrowserBackend(token, options) {\n        mixpanel.init(token, __assign({ api_host: \"api-eu.mixpanel.com\" }, options));\n    }\n    MixpanelBrowserBackend.prototype.track = function (eventName, eventAttributes) {\n        return new Promise(function (resolve, reject) {\n            mixpanel.track(eventName, eventAttributes, function (response) {\n                if (response === 1) {\n                    resolve();\n                    return;\n                }\n                if (response.status && response.status === 1) {\n                    resolve();\n                    return;\n                }\n                if (response.error) {\n                    reject(new Error(response.error));\n                    return;\n                }\n                reject(new Error(\"mixpanel response unsuccessful\"));\n                return;\n            });\n        });\n    };\n    MixpanelBrowserBackend.prototype.disable = function () {\n        return Promise.resolve(mixpanel.opt_out_tracking());\n    };\n    MixpanelBrowserBackend.prototype.enable = function () {\n        return Promise.resolve(mixpanel.opt_in_tracking());\n    };\n    MixpanelBrowserBackend.prototype.identify = function (account) {\n        return Promise.resolve(mixpanel.identify(account.number));\n    };\n    MixpanelBrowserBackend.prototype.reset = function () {\n        return Promise.resolve(mixpanel.reset());\n    };\n    return MixpanelBrowserBackend;\n}());\nexport { MixpanelBrowserBackend };\n","/* eslint-disable */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar baseAccount = {\n    id: \"\",\n    number: \"\",\n};\nvar baseApplication = {\n    id: \"\",\n};\nvar basePerson = {};\nvar baseStageEvent = {\n    subject: 0,\n    intent: 0,\n    stage: 0,\n};\nvar baseStageEvent_AttributesEntry = {\n    key: \"\",\n    value: \"\",\n};\nvar baseInteractionEvent = {\n    subject: 0,\n    intent: 0,\n    interaction: 0,\n    channel: 0,\n};\nvar baseInteractionEvent_AttributesEntry = {\n    key: \"\",\n    value: \"\",\n};\nvar baseVisitEvent = {\n    location: \"\",\n};\nvar baseVisitEvent_AttributesEntry = {\n    key: \"\",\n    value: \"\",\n};\nvar baseClickEvent = {\n    target: \"\",\n};\nvar baseClickEvent_AttributesEntry = {\n    key: \"\",\n    value: \"\",\n};\nexport var Subject = {\n    SUBJECT_NONE: 0,\n    SUBJECT_METER_READING: 1,\n    UNRECOGNIZED: -1,\n    fromJSON: function (object) {\n        switch (object) {\n            case 0:\n            case \"SUBJECT_NONE\":\n                return Subject.SUBJECT_NONE;\n            case 1:\n            case \"SUBJECT_METER_READING\":\n                return Subject.SUBJECT_METER_READING;\n            case -1:\n            case \"UNRECOGNIZED\":\n            default:\n                return Subject.UNRECOGNIZED;\n        }\n    },\n    toJSON: function (object) {\n        switch (object) {\n            case Subject.SUBJECT_NONE:\n                return \"SUBJECT_NONE\";\n            case Subject.SUBJECT_METER_READING:\n                return \"SUBJECT_METER_READING\";\n            default:\n                return \"UNKNOWN\";\n        }\n    },\n};\nexport var Intent = {\n    INTENT_NONE: 0,\n    INTENT_METER_READING_SUBMIT: 1,\n    UNRECOGNIZED: -1,\n    fromJSON: function (object) {\n        switch (object) {\n            case 0:\n            case \"INTENT_NONE\":\n                return Intent.INTENT_NONE;\n            case 1:\n            case \"INTENT_METER_READING_SUBMIT\":\n                return Intent.INTENT_METER_READING_SUBMIT;\n            case -1:\n            case \"UNRECOGNIZED\":\n            default:\n                return Intent.UNRECOGNIZED;\n        }\n    },\n    toJSON: function (object) {\n        switch (object) {\n            case Intent.INTENT_NONE:\n                return \"INTENT_NONE\";\n            case Intent.INTENT_METER_READING_SUBMIT:\n                return \"INTENT_METER_READING_SUBMIT\";\n            default:\n                return \"UNKNOWN\";\n        }\n    },\n};\nexport var Stage = {\n    STAGE_NONE: 0,\n    STAGE_SUBMITTED: 1,\n    STAGE_RECEIVED_REQUEST_FOR_AMEND: 2,\n    STAGE_COMPLETED: 3,\n    STAGE_REJECTED: 4,\n    STAGE_ENTERED: 5,\n    STAGE_STARTED: 6,\n    STAGE_FAILED: 7,\n    UNRECOGNIZED: -1,\n    fromJSON: function (object) {\n        switch (object) {\n            case 0:\n            case \"STAGE_NONE\":\n                return Stage.STAGE_NONE;\n            case 1:\n            case \"STAGE_SUBMITTED\":\n                return Stage.STAGE_SUBMITTED;\n            case 2:\n            case \"STAGE_RECEIVED_REQUEST_FOR_AMEND\":\n                return Stage.STAGE_RECEIVED_REQUEST_FOR_AMEND;\n            case 3:\n            case \"STAGE_COMPLETED\":\n                return Stage.STAGE_COMPLETED;\n            case 4:\n            case \"STAGE_REJECTED\":\n                return Stage.STAGE_REJECTED;\n            case 5:\n            case \"STAGE_ENTERED\":\n                return Stage.STAGE_ENTERED;\n            case 6:\n            case \"STAGE_STARTED\":\n                return Stage.STAGE_STARTED;\n            case 7:\n            case \"STAGE_FAILED\":\n                return Stage.STAGE_FAILED;\n            case -1:\n            case \"UNRECOGNIZED\":\n            default:\n                return Stage.UNRECOGNIZED;\n        }\n    },\n    toJSON: function (object) {\n        switch (object) {\n            case Stage.STAGE_NONE:\n                return \"STAGE_NONE\";\n            case Stage.STAGE_SUBMITTED:\n                return \"STAGE_SUBMITTED\";\n            case Stage.STAGE_RECEIVED_REQUEST_FOR_AMEND:\n                return \"STAGE_RECEIVED_REQUEST_FOR_AMEND\";\n            case Stage.STAGE_COMPLETED:\n                return \"STAGE_COMPLETED\";\n            case Stage.STAGE_REJECTED:\n                return \"STAGE_REJECTED\";\n            case Stage.STAGE_ENTERED:\n                return \"STAGE_ENTERED\";\n            case Stage.STAGE_STARTED:\n                return \"STAGE_STARTED\";\n            case Stage.STAGE_FAILED:\n                return \"STAGE_FAILED\";\n            default:\n                return \"UNKNOWN\";\n        }\n    },\n};\nexport var Interaction = {\n    INTERACTION_NONE: 0,\n    INTERACTION_CLICKED: 1,\n    INTERACTION_VIEWED: 2,\n    UNRECOGNIZED: -1,\n    fromJSON: function (object) {\n        switch (object) {\n            case 0:\n            case \"INTERACTION_NONE\":\n                return Interaction.INTERACTION_NONE;\n            case 1:\n            case \"INTERACTION_CLICKED\":\n                return Interaction.INTERACTION_CLICKED;\n            case 2:\n            case \"INTERACTION_VIEWED\":\n                return Interaction.INTERACTION_VIEWED;\n            case -1:\n            case \"UNRECOGNIZED\":\n            default:\n                return Interaction.UNRECOGNIZED;\n        }\n    },\n    toJSON: function (object) {\n        switch (object) {\n            case Interaction.INTERACTION_NONE:\n                return \"INTERACTION_NONE\";\n            case Interaction.INTERACTION_CLICKED:\n                return \"INTERACTION_CLICKED\";\n            case Interaction.INTERACTION_VIEWED:\n                return \"INTERACTION_VIEWED\";\n            default:\n                return \"UNKNOWN\";\n        }\n    },\n};\nexport var InteractionChannel = {\n    INTERACTION_CHANNEL_NONE: 0,\n    INTERACTION_CHANNEL_EMAIL: 1,\n    INTERACTION_CHANNEL_WILLIAM: 2,\n    UNRECOGNIZED: -1,\n    fromJSON: function (object) {\n        switch (object) {\n            case 0:\n            case \"INTERACTION_CHANNEL_NONE\":\n                return InteractionChannel.INTERACTION_CHANNEL_NONE;\n            case 1:\n            case \"INTERACTION_CHANNEL_EMAIL\":\n                return InteractionChannel.INTERACTION_CHANNEL_EMAIL;\n            case 2:\n            case \"INTERACTION_CHANNEL_WILLIAM\":\n                return InteractionChannel.INTERACTION_CHANNEL_WILLIAM;\n            case -1:\n            case \"UNRECOGNIZED\":\n            default:\n                return InteractionChannel.UNRECOGNIZED;\n        }\n    },\n    toJSON: function (object) {\n        switch (object) {\n            case InteractionChannel.INTERACTION_CHANNEL_NONE:\n                return \"INTERACTION_CHANNEL_NONE\";\n            case InteractionChannel.INTERACTION_CHANNEL_EMAIL:\n                return \"INTERACTION_CHANNEL_EMAIL\";\n            case InteractionChannel.INTERACTION_CHANNEL_WILLIAM:\n                return \"INTERACTION_CHANNEL_WILLIAM\";\n            default:\n                return \"UNKNOWN\";\n        }\n    },\n};\nexport var Account = {\n    fromJSON: function (object) {\n        var message = __assign({}, baseAccount);\n        if (object.id !== undefined && object.id !== null) {\n            message.id = String(object.id);\n        }\n        else {\n            message.id = \"\";\n        }\n        if (object.number !== undefined && object.number !== null) {\n            message.number = String(object.number);\n        }\n        else {\n            message.number = \"\";\n        }\n        return message;\n    },\n    fromPartial: function (object) {\n        var message = __assign({}, baseAccount);\n        if (object.id !== undefined && object.id !== null) {\n            message.id = object.id;\n        }\n        else {\n            message.id = \"\";\n        }\n        if (object.number !== undefined && object.number !== null) {\n            message.number = object.number;\n        }\n        else {\n            message.number = \"\";\n        }\n        return message;\n    },\n    toJSON: function (message) {\n        var obj = {};\n        obj.id = message.id || \"\";\n        obj.number = message.number || \"\";\n        return obj;\n    },\n};\nexport var Application = {\n    fromJSON: function (object) {\n        var message = __assign({}, baseApplication);\n        if (object.id !== undefined && object.id !== null) {\n            message.id = String(object.id);\n        }\n        else {\n            message.id = \"\";\n        }\n        return message;\n    },\n    fromPartial: function (object) {\n        var message = __assign({}, baseApplication);\n        if (object.id !== undefined && object.id !== null) {\n            message.id = object.id;\n        }\n        else {\n            message.id = \"\";\n        }\n        return message;\n    },\n    toJSON: function (message) {\n        var obj = {};\n        obj.id = message.id || \"\";\n        return obj;\n    },\n};\nexport var Person = {\n    fromJSON: function (_) {\n        var message = __assign({}, basePerson);\n        return message;\n    },\n    fromPartial: function (_) {\n        var message = __assign({}, basePerson);\n        return message;\n    },\n    toJSON: function (_) {\n        var obj = {};\n        return obj;\n    },\n};\nexport var StageEvent = {\n    fromJSON: function (object) {\n        var message = __assign({}, baseStageEvent);\n        message.attributes = {};\n        if (object.account !== undefined && object.account !== null) {\n            message.account = Account.fromJSON(object.account);\n        }\n        else {\n            message.account = undefined;\n        }\n        if (object.application !== undefined && object.application !== null) {\n            message.application = Application.fromJSON(object.application);\n        }\n        else {\n            message.application = undefined;\n        }\n        if (object.subject !== undefined && object.subject !== null) {\n            message.subject = Subject.fromJSON(object.subject);\n        }\n        else {\n            message.subject = 0;\n        }\n        if (object.intent !== undefined && object.intent !== null) {\n            message.intent = Intent.fromJSON(object.intent);\n        }\n        else {\n            message.intent = 0;\n        }\n        if (object.stage !== undefined && object.stage !== null) {\n            message.stage = Stage.fromJSON(object.stage);\n        }\n        else {\n            message.stage = 0;\n        }\n        if (object.attributes !== undefined && object.attributes !== null) {\n            Object.entries(object.attributes).forEach(function (_a) {\n                var key = _a[0], value = _a[1];\n                message.attributes[key] = String(value);\n            });\n        }\n        return message;\n    },\n    fromPartial: function (object) {\n        var message = __assign({}, baseStageEvent);\n        message.attributes = {};\n        if (object.account !== undefined && object.account !== null) {\n            message.account = Account.fromPartial(object.account);\n        }\n        else {\n            message.account = undefined;\n        }\n        if (object.application !== undefined && object.application !== null) {\n            message.application = Application.fromPartial(object.application);\n        }\n        else {\n            message.application = undefined;\n        }\n        if (object.subject !== undefined && object.subject !== null) {\n            message.subject = object.subject;\n        }\n        else {\n            message.subject = 0;\n        }\n        if (object.intent !== undefined && object.intent !== null) {\n            message.intent = object.intent;\n        }\n        else {\n            message.intent = 0;\n        }\n        if (object.stage !== undefined && object.stage !== null) {\n            message.stage = object.stage;\n        }\n        else {\n            message.stage = 0;\n        }\n        if (object.attributes !== undefined && object.attributes !== null) {\n            Object.entries(object.attributes).forEach(function (_a) {\n                var key = _a[0], value = _a[1];\n                if (value !== undefined) {\n                    message.attributes[key] = String(value);\n                }\n            });\n        }\n        return message;\n    },\n    toJSON: function (message) {\n        var obj = {};\n        obj.account = message.account ? Account.toJSON(message.account) : undefined;\n        obj.application = message.application ? Application.toJSON(message.application) : undefined;\n        obj.subject = Subject.toJSON(message.subject);\n        obj.intent = Intent.toJSON(message.intent);\n        obj.stage = Stage.toJSON(message.stage);\n        obj.attributes = message.attributes || undefined;\n        return obj;\n    },\n};\nexport var StageEvent_AttributesEntry = {\n    fromJSON: function (object) {\n        var message = __assign({}, baseStageEvent_AttributesEntry);\n        if (object.key !== undefined && object.key !== null) {\n            message.key = String(object.key);\n        }\n        else {\n            message.key = \"\";\n        }\n        if (object.value !== undefined && object.value !== null) {\n            message.value = String(object.value);\n        }\n        else {\n            message.value = \"\";\n        }\n        return message;\n    },\n    fromPartial: function (object) {\n        var message = __assign({}, baseStageEvent_AttributesEntry);\n        if (object.key !== undefined && object.key !== null) {\n            message.key = object.key;\n        }\n        else {\n            message.key = \"\";\n        }\n        if (object.value !== undefined && object.value !== null) {\n            message.value = object.value;\n        }\n        else {\n            message.value = \"\";\n        }\n        return message;\n    },\n    toJSON: function (message) {\n        var obj = {};\n        obj.key = message.key || \"\";\n        obj.value = message.value || \"\";\n        return obj;\n    },\n};\nexport var InteractionEvent = {\n    fromJSON: function (object) {\n        var message = __assign({}, baseInteractionEvent);\n        message.attributes = {};\n        if (object.account !== undefined && object.account !== null) {\n            message.account = Account.fromJSON(object.account);\n        }\n        else {\n            message.account = undefined;\n        }\n        if (object.application !== undefined && object.application !== null) {\n            message.application = Application.fromJSON(object.application);\n        }\n        else {\n            message.application = undefined;\n        }\n        if (object.subject !== undefined && object.subject !== null) {\n            message.subject = Subject.fromJSON(object.subject);\n        }\n        else {\n            message.subject = 0;\n        }\n        if (object.intent !== undefined && object.intent !== null) {\n            message.intent = Intent.fromJSON(object.intent);\n        }\n        else {\n            message.intent = 0;\n        }\n        if (object.interaction !== undefined && object.interaction !== null) {\n            message.interaction = Interaction.fromJSON(object.interaction);\n        }\n        else {\n            message.interaction = 0;\n        }\n        if (object.channel !== undefined && object.channel !== null) {\n            message.channel = InteractionChannel.fromJSON(object.channel);\n        }\n        else {\n            message.channel = 0;\n        }\n        if (object.attributes !== undefined && object.attributes !== null) {\n            Object.entries(object.attributes).forEach(function (_a) {\n                var key = _a[0], value = _a[1];\n                message.attributes[key] = String(value);\n            });\n        }\n        return message;\n    },\n    fromPartial: function (object) {\n        var message = __assign({}, baseInteractionEvent);\n        message.attributes = {};\n        if (object.account !== undefined && object.account !== null) {\n            message.account = Account.fromPartial(object.account);\n        }\n        else {\n            message.account = undefined;\n        }\n        if (object.application !== undefined && object.application !== null) {\n            message.application = Application.fromPartial(object.application);\n        }\n        else {\n            message.application = undefined;\n        }\n        if (object.subject !== undefined && object.subject !== null) {\n            message.subject = object.subject;\n        }\n        else {\n            message.subject = 0;\n        }\n        if (object.intent !== undefined && object.intent !== null) {\n            message.intent = object.intent;\n        }\n        else {\n            message.intent = 0;\n        }\n        if (object.interaction !== undefined && object.interaction !== null) {\n            message.interaction = object.interaction;\n        }\n        else {\n            message.interaction = 0;\n        }\n        if (object.channel !== undefined && object.channel !== null) {\n            message.channel = object.channel;\n        }\n        else {\n            message.channel = 0;\n        }\n        if (object.attributes !== undefined && object.attributes !== null) {\n            Object.entries(object.attributes).forEach(function (_a) {\n                var key = _a[0], value = _a[1];\n                if (value !== undefined) {\n                    message.attributes[key] = String(value);\n                }\n            });\n        }\n        return message;\n    },\n    toJSON: function (message) {\n        var obj = {};\n        obj.account = message.account ? Account.toJSON(message.account) : undefined;\n        obj.application = message.application ? Application.toJSON(message.application) : undefined;\n        obj.subject = Subject.toJSON(message.subject);\n        obj.intent = Intent.toJSON(message.intent);\n        obj.interaction = Interaction.toJSON(message.interaction);\n        obj.channel = InteractionChannel.toJSON(message.channel);\n        obj.attributes = message.attributes || undefined;\n        return obj;\n    },\n};\nexport var InteractionEvent_AttributesEntry = {\n    fromJSON: function (object) {\n        var message = __assign({}, baseInteractionEvent_AttributesEntry);\n        if (object.key !== undefined && object.key !== null) {\n            message.key = String(object.key);\n        }\n        else {\n            message.key = \"\";\n        }\n        if (object.value !== undefined && object.value !== null) {\n            message.value = String(object.value);\n        }\n        else {\n            message.value = \"\";\n        }\n        return message;\n    },\n    fromPartial: function (object) {\n        var message = __assign({}, baseInteractionEvent_AttributesEntry);\n        if (object.key !== undefined && object.key !== null) {\n            message.key = object.key;\n        }\n        else {\n            message.key = \"\";\n        }\n        if (object.value !== undefined && object.value !== null) {\n            message.value = object.value;\n        }\n        else {\n            message.value = \"\";\n        }\n        return message;\n    },\n    toJSON: function (message) {\n        var obj = {};\n        obj.key = message.key || \"\";\n        obj.value = message.value || \"\";\n        return obj;\n    },\n};\nexport var VisitEvent = {\n    fromJSON: function (object) {\n        var message = __assign({}, baseVisitEvent);\n        message.attributes = {};\n        if (object.account !== undefined && object.account !== null) {\n            message.account = Account.fromJSON(object.account);\n        }\n        else {\n            message.account = undefined;\n        }\n        if (object.application !== undefined && object.application !== null) {\n            message.application = Application.fromJSON(object.application);\n        }\n        else {\n            message.application = undefined;\n        }\n        if (object.location !== undefined && object.location !== null) {\n            message.location = String(object.location);\n        }\n        else {\n            message.location = \"\";\n        }\n        if (object.attributes !== undefined && object.attributes !== null) {\n            Object.entries(object.attributes).forEach(function (_a) {\n                var key = _a[0], value = _a[1];\n                message.attributes[key] = String(value);\n            });\n        }\n        return message;\n    },\n    fromPartial: function (object) {\n        var message = __assign({}, baseVisitEvent);\n        message.attributes = {};\n        if (object.account !== undefined && object.account !== null) {\n            message.account = Account.fromPartial(object.account);\n        }\n        else {\n            message.account = undefined;\n        }\n        if (object.application !== undefined && object.application !== null) {\n            message.application = Application.fromPartial(object.application);\n        }\n        else {\n            message.application = undefined;\n        }\n        if (object.location !== undefined && object.location !== null) {\n            message.location = object.location;\n        }\n        else {\n            message.location = \"\";\n        }\n        if (object.attributes !== undefined && object.attributes !== null) {\n            Object.entries(object.attributes).forEach(function (_a) {\n                var key = _a[0], value = _a[1];\n                if (value !== undefined) {\n                    message.attributes[key] = String(value);\n                }\n            });\n        }\n        return message;\n    },\n    toJSON: function (message) {\n        var obj = {};\n        obj.account = message.account ? Account.toJSON(message.account) : undefined;\n        obj.application = message.application ? Application.toJSON(message.application) : undefined;\n        obj.location = message.location || \"\";\n        obj.attributes = message.attributes || undefined;\n        return obj;\n    },\n};\nexport var VisitEvent_AttributesEntry = {\n    fromJSON: function (object) {\n        var message = __assign({}, baseVisitEvent_AttributesEntry);\n        if (object.key !== undefined && object.key !== null) {\n            message.key = String(object.key);\n        }\n        else {\n            message.key = \"\";\n        }\n        if (object.value !== undefined && object.value !== null) {\n            message.value = String(object.value);\n        }\n        else {\n            message.value = \"\";\n        }\n        return message;\n    },\n    fromPartial: function (object) {\n        var message = __assign({}, baseVisitEvent_AttributesEntry);\n        if (object.key !== undefined && object.key !== null) {\n            message.key = object.key;\n        }\n        else {\n            message.key = \"\";\n        }\n        if (object.value !== undefined && object.value !== null) {\n            message.value = object.value;\n        }\n        else {\n            message.value = \"\";\n        }\n        return message;\n    },\n    toJSON: function (message) {\n        var obj = {};\n        obj.key = message.key || \"\";\n        obj.value = message.value || \"\";\n        return obj;\n    },\n};\nexport var ClickEvent = {\n    fromJSON: function (object) {\n        var message = __assign({}, baseClickEvent);\n        message.attributes = {};\n        if (object.account !== undefined && object.account !== null) {\n            message.account = Account.fromJSON(object.account);\n        }\n        else {\n            message.account = undefined;\n        }\n        if (object.application !== undefined && object.application !== null) {\n            message.application = Application.fromJSON(object.application);\n        }\n        else {\n            message.application = undefined;\n        }\n        if (object.target !== undefined && object.target !== null) {\n            message.target = String(object.target);\n        }\n        else {\n            message.target = \"\";\n        }\n        if (object.attributes !== undefined && object.attributes !== null) {\n            Object.entries(object.attributes).forEach(function (_a) {\n                var key = _a[0], value = _a[1];\n                message.attributes[key] = String(value);\n            });\n        }\n        return message;\n    },\n    fromPartial: function (object) {\n        var message = __assign({}, baseClickEvent);\n        message.attributes = {};\n        if (object.account !== undefined && object.account !== null) {\n            message.account = Account.fromPartial(object.account);\n        }\n        else {\n            message.account = undefined;\n        }\n        if (object.application !== undefined && object.application !== null) {\n            message.application = Application.fromPartial(object.application);\n        }\n        else {\n            message.application = undefined;\n        }\n        if (object.target !== undefined && object.target !== null) {\n            message.target = object.target;\n        }\n        else {\n            message.target = \"\";\n        }\n        if (object.attributes !== undefined && object.attributes !== null) {\n            Object.entries(object.attributes).forEach(function (_a) {\n                var key = _a[0], value = _a[1];\n                if (value !== undefined) {\n                    message.attributes[key] = String(value);\n                }\n            });\n        }\n        return message;\n    },\n    toJSON: function (message) {\n        var obj = {};\n        obj.account = message.account ? Account.toJSON(message.account) : undefined;\n        obj.application = message.application ? Application.toJSON(message.application) : undefined;\n        obj.target = message.target || \"\";\n        obj.attributes = message.attributes || undefined;\n        return obj;\n    },\n};\nexport var ClickEvent_AttributesEntry = {\n    fromJSON: function (object) {\n        var message = __assign({}, baseClickEvent_AttributesEntry);\n        if (object.key !== undefined && object.key !== null) {\n            message.key = String(object.key);\n        }\n        else {\n            message.key = \"\";\n        }\n        if (object.value !== undefined && object.value !== null) {\n            message.value = String(object.value);\n        }\n        else {\n            message.value = \"\";\n        }\n        return message;\n    },\n    fromPartial: function (object) {\n        var message = __assign({}, baseClickEvent_AttributesEntry);\n        if (object.key !== undefined && object.key !== null) {\n            message.key = object.key;\n        }\n        else {\n            message.key = \"\";\n        }\n        if (object.value !== undefined && object.value !== null) {\n            message.value = object.value;\n        }\n        else {\n            message.value = \"\";\n        }\n        return message;\n    },\n    toJSON: function (message) {\n        var obj = {};\n        obj.key = message.key || \"\";\n        obj.value = message.value || \"\";\n        return obj;\n    },\n};\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { Intent, Interaction, InteractionChannel, Stage, Subject } from \"./generated/tracking\";\nimport { EventEmitter } from \"events\";\nvar Tracker = /** @class */ (function () {\n    function Tracker(backend) {\n        this.backend = backend;\n        this.emitter = new EventEmitter();\n    }\n    Tracker.prototype.stageValue = function (m) {\n        return Stage.toJSON(m)\n            .toLowerCase()\n            .replace(/^stage_/, \"\")\n            .replace(/[^a-z]/g, \"-\");\n    };\n    Tracker.prototype.subjectValue = function (m) {\n        return Subject.toJSON(m)\n            .toLowerCase()\n            .replace(/^subject_/, \"\")\n            .replace(/[^a-z]/g, \"-\");\n    };\n    Tracker.prototype.intentValue = function (m) {\n        return Intent.toJSON(m)\n            .toLowerCase()\n            .replace(/^intent_/, \"\")\n            .replace(/[^a-z]/g, \"-\");\n    };\n    Tracker.prototype.interactionValue = function (m) {\n        return Interaction.toJSON(m)\n            .toLowerCase()\n            .replace(/^interaction_/, \"\")\n            .replace(/[^a-z]/g, \"-\");\n    };\n    Tracker.prototype.interactionChannelValue = function (m) {\n        return InteractionChannel.toJSON(m)\n            .toLowerCase()\n            .replace(/^interaction_channel_/, \"\")\n            .replace(/[^a-z]/g, \"-\");\n    };\n    Tracker.prototype.stageEventName = function (event) {\n        return this.stageValue(event.stage) + \".\" + this.intentValue(event.intent);\n    };\n    Tracker.prototype.interactionEventName = function (event) {\n        return this.interactionChannelValue(event.channel) + \".\" + this.interactionValue(event.interaction);\n    };\n    Tracker.prototype.attributes = function (attributes) {\n        var mapped = {};\n        for (var k in attributes) {\n            mapped[k.toLowerCase().replace(/[^a-z]/g, \"_\")] = attributes[k];\n        }\n        return mapped;\n    };\n    Tracker.prototype.onError = function (fn) {\n        this.emitter.on(\"error\", fn);\n    };\n    Tracker.prototype.trackStage = function (account, application, subject, intent, stage, attributes) {\n        if (attributes === void 0) { attributes = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            var event_1, _a, e_1;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _b.trys.push([0, 2, , 3]);\n                        _a = {\n                            account: account,\n                            application: application,\n                            subject: subject,\n                            intent: intent,\n                            stage: stage\n                        };\n                        return [4 /*yield*/, attributes];\n                    case 1:\n                        event_1 = (_a.attributes = _b.sent(),\n                            _a);\n                        return [2 /*return*/, this.backend.track(this.stageEventName(event_1), __assign({ account_number: account.number, client_id: application.id, subject: this.subjectValue(event_1.subject), intent: this.intentValue(event_1.intent), stage: this.stageValue(event_1.stage) }, this.attributes(event_1.attributes)))];\n                    case 2:\n                        e_1 = _b.sent();\n                        this.emitter.emit(\"error\", e_1);\n                        return [3 /*break*/, 3];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Tracker.prototype.trackInteraction = function (account, application, subject, intent, interaction, channel, attributes) {\n        if (attributes === void 0) { attributes = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            var event_2, _a, e_2;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _b.trys.push([0, 2, , 3]);\n                        _a = {\n                            account: account,\n                            application: application,\n                            subject: subject,\n                            intent: intent,\n                            interaction: interaction,\n                            channel: channel\n                        };\n                        return [4 /*yield*/, attributes];\n                    case 1:\n                        event_2 = (_a.attributes = _b.sent(),\n                            _a);\n                        return [2 /*return*/, this.backend.track(this.interactionEventName(event_2), __assign({ account_number: account.number, client_id: application.id, subject: this.subjectValue(event_2.subject), intent: this.intentValue(event_2.intent), interaction: this.interactionValue(event_2.interaction), interaction_channel: this.interactionChannelValue(event_2.channel) }, this.attributes(event_2.attributes)))];\n                    case 2:\n                        e_2 = _b.sent();\n                        this.emitter.emit(\"error\", e_2);\n                        return [3 /*break*/, 3];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Tracker.prototype.trackClick = function (account, application, target, attributes) {\n        if (attributes === void 0) { attributes = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            var event_3, _a, e_3;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _b.trys.push([0, 2, , 3]);\n                        _a = {\n                            account: account,\n                            application: application,\n                            target: target\n                        };\n                        return [4 /*yield*/, attributes];\n                    case 1:\n                        event_3 = (_a.attributes = _b.sent(),\n                            _a);\n                        return [2 /*return*/, this.backend.track(\"click\", __assign({ account_number: account.number, client_id: application.id, target: target }, this.attributes(event_3.attributes)))];\n                    case 2:\n                        e_3 = _b.sent();\n                        this.emitter.emit(\"error\", e_3);\n                        return [3 /*break*/, 3];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Tracker.prototype.trackVisit = function (account, application, location, attributes) {\n        if (attributes === void 0) { attributes = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            var event_4, _a, e_4;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _b.trys.push([0, 2, , 3]);\n                        _a = {\n                            account: account,\n                            application: application,\n                            location: location\n                        };\n                        return [4 /*yield*/, attributes];\n                    case 1:\n                        event_4 = (_a.attributes = _b.sent(),\n                            _a);\n                        return [2 /*return*/, this.backend.track(\"visit\", __assign({ account_number: account.number, client_id: application.id, location: location }, this.attributes(event_4.attributes)))];\n                    case 2:\n                        e_4 = _b.sent();\n                        this.emitter.emit(\"error\", e_4);\n                        return [3 /*break*/, 3];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return Tracker;\n}());\nexport { Tracker };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { Tracker as BaseTracker } from \"../tracker\";\nvar Tracker = /** @class */ (function () {\n    function Tracker(backend, application) {\n        this.backend = backend;\n        this.application = application;\n        this.baseTracker = new BaseTracker(backend);\n    }\n    Tracker.prototype.identify = function (account) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.account = account;\n                return [2 /*return*/, this.backend.identify(account)];\n            });\n        });\n    };\n    Tracker.prototype.reset = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.backend.reset()];\n            });\n        });\n    };\n    Tracker.prototype.disable = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.backend.disable()];\n            });\n        });\n    };\n    Tracker.prototype.enable = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.backend.enable()];\n            });\n        });\n    };\n    Tracker.prototype.trackStage = function (subject, intent, stage, attributes) {\n        if (attributes === void 0) { attributes = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.baseTracker.trackStage(this.account, this.application, subject, intent, stage, attributes)];\n            });\n        });\n    };\n    Tracker.prototype.trackInteraction = function (subject, intent, interaction, channel, attributes) {\n        if (attributes === void 0) { attributes = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.baseTracker.trackInteraction(this.account, this.application, subject, intent, interaction, channel, attributes)];\n            });\n        });\n    };\n    Tracker.prototype.trackClick = function (target, attributes) {\n        if (attributes === void 0) { attributes = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.baseTracker.trackClick(this.account, this.application, target, attributes)];\n            });\n        });\n    };\n    Tracker.prototype.trackVisit = function (location, attributes) {\n        if (attributes === void 0) { attributes = {}; }\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.baseTracker.trackVisit(this.account, this.application, location, attributes)];\n            });\n        });\n    };\n    return Tracker;\n}());\nexport { Tracker };\n"],"sourceRoot":""}